!function(a){var b=function(a){return"number"==typeof a||a&&a==1*a},c=function(a,b){return"number"==typeof a||a&&a==1*a?1*a:b},d=["step","min","max","readonly","title","disabled","tabindex"],e={_create:function(){var b;for(this.element.addClass("ws-range").attr({role:"slider"}).append('<span class="ws-range-min ws-range-progress" /><span class="ws-range-rail ws-range-track"><span class="ws-range-thumb" /></span>'),this.trail=a(".ws-range-track",this.element),this.range=a(".ws-range-progress",this.element),this.thumb=a(".ws-range-thumb",this.trail),this.updateMetrics(),this.orig=this.options.orig,b=0;b<d.length;b++)this[d[b]](this.options[d[b]]);this.value=this._value,this.value(this.options.value),this.initDataList(),this.element.data("rangeUi",this),this.addBindings(),this._init=!0},value:a.noop,_value:function(b,c,d){var e,f,g,h=this.options,i=b,j={},k={};c||parseFloat(b,10)==b||(b=h.min+(h.max-h.min)/2),c||(b=this.normalizeVal(b)),e=100*((b-h.min)/(h.max-h.min)),this._init&&b==h.value&&i==b||(this.options.value=b,a.fn.stop&&(this.thumb.stop(),this.range.stop()),k[this.dirs.width]=e+"%",this.vertical&&(e=Math.abs(e-100)),j[this.dirs.left]=e+"%",d&&a.fn.animate?(d="object"!=typeof d?{}:a.extend({},d),d.duration||(f=Math.abs(e-parseInt(this.thumb[0].style[this.dirs.left]||50,10)),d.duration=Math.max(Math.min(999,5*f),99)),this.thumb.animate(j,d),this.range.animate(k,d)):(this.thumb.css(j),this.range.css(k)),this.orig&&(i!=b||!this._init&&this.orig.value!=b)&&this.options._change(b),g=this.options.textValue?this.options.textValue(this.options.value):this.options.options[this.options.value]||this.options.value,this.element.attr({"aria-valuenow":this.options.value,"aria-valuetext":g}),this.thumb.attr({"data-value":this.options.value,"data-valuetext":g}))},initDataList:function(){if(this.orig){var b,c=this,d=function(){a(c.orig).jProp("list").off("updateDatalist",d).on("updateDatalist",d),clearTimeout(b),b=setTimeout(function(){c.list&&c.list()},9)};a(this.orig).on("listdatalistchange",d),this.list()}},list:function(){var c=this.options,d=c.min,e=c.max,f=this.trail,g=this;this.element.attr({"aria-valuetext":c.options[c.value]||c.value}),a(".ws-range-ticks",f).remove(),a(this.orig).jProp("list").find("option:not([disabled])").each(function(){c.options[a.prop(this,"value")]=a.prop(this,"label")||""}),a.each(c.options,function(h,i){if(!(!b(h)||d>h||h>e)){var j=100*((h-d)/(e-d)),k="";i&&(k+='data-label="'+i+'"',c.showLabels&&(k+=' title="'+i+'"')),g.vertical&&(j=Math.abs(j-100)),g.posCenter(a('<span class="ws-range-ticks"'+k+' style="'+g.dirs.left+": "+j+'%;" />').appendTo(f))}})},readonly:function(a){a=!!a,this.options.readonly=a,this.element.attr("aria-readonly",""+a),this._init&&this.updateMetrics()},disabled:function(a){a=!!a,this.options.disabled=a,a?this.element.attr({tabindex:-1,"aria-disabled":"true"}):this.element.attr({tabindex:this.options.tabindex,"aria-disabled":"false"}),this._init&&this.updateMetrics()},tabindex:function(a){this.options.tabindex=a,this.options.disabled||this.element.attr({tabindex:a})},title:function(a){this.element.prop("title",a)},min:function(a){this.options.min=c(a,0),this.value(this.options.value,!0)},max:function(a){this.options.max=c(a,100),this.value(this.options.value,!0)},step:function(a){var b=this.options,d="any"==a?"any":c(a,1);b.stepping&&("any"!=d&&b.stepping%d?webshims.error("wrong stepping value for type range:"+b.stepping%d):d=b.stepping),b.step=d,this.value(this.options.value)},normalizeVal:function(a){var b,c,d,e=this.options;return a<=e.min?a=e.min:a>=e.max?a=e.max:"any"!=e.step&&(d=e.step,b=(a-e.min)%d,c=a-b,2*Math.abs(b)>=d&&(c+=b>0?d:-d),a=1*c.toFixed(5)),a},doStep:function(a,b){var d=c(this.options.step,1);"any"==this.options.step&&(d=Math.min(d,(this.options.max-this.options.min)/10)),this.value(this.options.value+d*a,!1,b)},getStepedValueFromPos:function(a){var b,c,d,e;return 0>=a?b=this.options[this.dirs.min]:a>100?b=this.options[this.dirs.max]:(this.vertical&&(a=Math.abs(a-100)),b=(this.options.max-this.options.min)*(a/100)+this.options.min,e=this.options.step,"any"!=e&&(c=(b-this.options.min)%e,d=b-c,2*Math.abs(c)>=e&&(d+=c>0?e:-e),b=1*d.toFixed(5))),b},addRemoveClass:function(a,b){var c,d=-1!=this.element.prop("className").indexOf(a);!b&&d?(c="removeClass",this.element.removeClass(a),this.updateMetrics()):b&&!d&&(c="addClass"),c&&(this.element[c](a),this._init&&this.updateMetrics())},addBindings:function(){var b,c,d,e,f=this,g=this.options,h=function(){var b={};return{init:function(c,d,e){b[c]||(b[c]={fn:e},f.orig&&a(f.orig).on(c,function(){b[c].val=a.prop(f.orig,"value")})),b[c].val=d},call:function(a,c){b[a].val!=c&&(clearTimeout(b[a].timer),b[a].val=c,b[a].timer=setTimeout(function(){b[a].fn(c,f)},0))}}}(),i=function(){var a={touchstart:1,touchend:1,touchmove:1},b=["pageX","pageY"];return function(c){if(a[c.type]&&c.originalEvent&&c.originalEvent.touches&&c.originalEvent.touches.length)for(var d=0;d<b.length;d++)c[b[d]]=c.originalEvent.touches[0][b[d]];return c}}(),j=function(a,d){"touchmove"==a.type&&(a.preventDefault(),i(a));var e=f.getStepedValueFromPos((a[f.dirs.mouse]-b)*c);e!=g.value&&(f.value(e,!1,d),h.call("input",e)),a&&"mousemove"==a.type&&a.preventDefault()},k=function(b){b&&"mouseup"==b.type&&(h.call("input",g.value),h.call("change",g.value)),f.addRemoveClass("ws-active"),a(document).off("mousemove touchmove",j).off("mouseup touchend",k),a(window).off("blur",l),e=!1},l=function(a){a.target==window&&k()},m=function(d){var h;if(!e&&("touchstart"!=d.type||d.originalEvent&&d.originalEvent.touches&&1==d.originalEvent.touches.length)&&(d.preventDefault(),a(document).off("mousemove touchmove",j).off("mouseup touchend",k),a(window).off("blur",l),!g.readonly&&!g.disabled)){if(i(d),f.element.trigger("focus"),f.addRemoveClass("ws-active",!0),b=f.element.offset(),c=f.element[f.dirs.innerWidth](),!c||!b)return;h=f.thumb[f.dirs.outerWidth](),b=b[f.dirs.pos],c=100/c,j(d,g.animate),e=!0,a(document).on("touchstart"==d.type?{touchend:k,touchmove:j}:{mouseup:k,mousemove:j}),a(window).on("blur",l),d.stopPropagation()}},n={"touchstart mousedown":m,focus:function(){g.disabled||d||(h.init("input",g.value),h.init("change",g.value),f.addRemoveClass("ws-focus",!0),f.updateMetrics()),d=!0},blur:function(){f.element.removeClass("ws-focus ws-active"),f.updateMetrics(),d=!1,h.init("input",g.value),h.call("change",g.value)},keyup:function(){f.addRemoveClass("ws-active"),h.call("input",g.value),h.call("change",g.value)},keydown:function(a){var b=!0,c=a.keyCode;g.readonly||g.disabled||(39==c||38==c?f.doStep(1):37==c||40==c?f.doStep(-1):33==c?f.doStep(10,g.animate):34==c?f.doStep(-10,g.animate):36==c?f.value(f.options.max,!1,g.animate):35==c?f.value(f.options.min,!1,g.animate):b=!1,b&&(f.addRemoveClass("ws-active",!0),h.call("input",g.value),a.preventDefault()))}};h.init("input",g.value,this.options.input),h.init("change",g.value,this.options.change),n[a.fn.mwheelIntent?"mwheelIntent":"mousewheel"]=function(a,b){b&&d&&!g.readonly&&!g.disabled&&(f.doStep(b),a.preventDefault(),h.call("input",g.value))},this.element.on(n),this.thumb.on({mousedown:m}),this.orig&&a(this.orig).jProp("form").on("reset",function(){var b=a.prop(f.orig,"value");f.value(b),setTimeout(function(){var c=a.prop(f.orig,"value");b!=c&&f.value(c)},4)}),window.webshims&&webshims.ready("WINDOWLOAD",function(){webshims.ready("dom-support",function(){a.fn.onWSOff&&f.element.onWSOff("updateshadowdom",function(){f.updateMetrics()})}),!a.fn.onWSOff&&webshims._polyfill&&webshims._polyfill(["dom-support"])})},posCenter:function(a,b){var c;!this.options.calcCenter||this._init&&!this.element[0].offsetWidth||(a||(a=this.thumb),b||(b=a[this.dirs.outerWidth]()),b/=-2,a.css(this.dirs.marginLeft,b),this.options.calcTrail&&a[0]==this.thumb[0]&&(c=this.element[this.dirs.innerHeight](),a.css(this.dirs.marginTop,(a[this.dirs.outerHeight]()-c)/-2),this.range.css(this.dirs.marginTop,(this.range[this.dirs.outerHeight]()-c)/-2),b*=-1,this.trail.css(this.dirs.left,b).css(this.dirs.right,b)))},updateMetrics:function(){var a=this.element.innerWidth();this.vertical=a&&this.element.innerHeight()-a>10,this.dirs=this.vertical?{mouse:"pageY",pos:"top",min:"max",max:"min",left:"top",right:"bottom",width:"height",innerWidth:"innerHeight",innerHeight:"innerWidth",outerWidth:"outerHeight",outerHeight:"outerWidth",marginTop:"marginLeft",marginLeft:"marginTop"}:{mouse:"pageX",pos:"left",min:"min",max:"max",left:"left",right:"right",width:"width",innerWidth:"innerWidth",innerHeight:"innerHeight",outerWidth:"outerWidth",outerHeight:"outerHeight",marginTop:"marginTop",marginLeft:"marginLeft"},this.element[this.vertical?"addClass":"removeClass"]("vertical-range")[this.vertical?"addClass":"removeClass"]("horizontal-range"),this.posCenter()}},f=function(a){function b(){}return b.prototype=a,new b};a.fn.rangeUI=function(b){return b=a.extend({readonly:!1,disabled:!1,tabindex:0,min:0,step:1,max:100,value:50,input:a.noop,change:a.noop,_change:a.noop,showLabels:!0,options:{},calcCenter:!0,calcTrail:!0},b),this.each(function(){var c=a.extend(f(e),{element:a(this)});c.options=b,c._create.call(c)})},window.webshims&&webshims.isReady&&webshims.isReady("range-ui",!0)}(window.webshims?webshims.$:jQuery);