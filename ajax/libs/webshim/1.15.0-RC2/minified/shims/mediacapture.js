webshim.register("mediacapture",function(a,b,c,d){"use strict";var e=-1,f=a.noop,g='input[type="file"][accept*="image"]',h=a.Deferred();!function(){var c,d=!(!navigator.getUserMedia||navigator.wsGetUserMedia),g=swfmini.hasFlashPlayerVersion("11.3"),i=function(){try{sessionStorage.setItem("wsCameras",JSON.stringify(e))}catch(a){}},j=function(){e=0,i(),h.reject(e)},k=function(){i(),h.resolve(e)};try{c=JSON.parse(sessionStorage.getItem("wsCameras")),null==c&&(e=-1)}catch(l){}0===e||-1==e&&!d&&!g?j():g?f=function(){var c=b.cfg.mediaelement,d=c.playerPath||b.cfg.basePath+"swf/"+(c.playerName||"JarisFLVPlayer.swf"),g="wscameralistdetection",h={controltype:"1",jsapi:"1",source:"",id:g,evtId:g},i={id:g,name:g},l={allowscriptaccess:"always",allowNetworking:"all"},m=a('<div><div id="'+g+'"></div></div>').css({position:"absolute",left:-999,width:5,height:5,overflow:"hidden"}).appendTo("body");b.mediaelement.jarisEvent=b.mediaelement.jarisEvent||{},b.mediaelement.jarisEvent[g]=function(a){e=a.cameras,m.remove(),e?k():j()},f=a.noop,swfmini.embedSWF(d,g,"100%","100%","11.3",!1,h,l,i)}:(e=-1,k())}();var i=function(){},j=function(){var a=this;f(),h.done(function(){i.call(a)})};e&&(h.done(function(){j=i}),b.addReady(function(b,c){a(g,b).add(c.filter(g)).filter(".ws-filereader, .ws-capture").each(j)}),b.ready("WINDOWLOAD",f)),"complete"==d.readyState&&b.isReady("WINDOWLOAD",!0)});