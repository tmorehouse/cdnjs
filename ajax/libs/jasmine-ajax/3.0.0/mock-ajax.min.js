getJasmineRequireObj().ajax=function(e){var t={};return t.RequestStub=e.AjaxRequestStub(),t.RequestTracker=e.AjaxRequestTracker(),t.StubTracker=e.AjaxStubTracker(),t.ParamParser=e.AjaxParamParser(),t.fakeRequest=e.AjaxFakeRequest(),t.MockAjax=e.MockAjax(t),t.MockAjax},getJasmineRequireObj().AjaxFakeRequest=function(){function e(e,s,n){n=n||[];for(var r in s)t(n,r)||(e[r]=s[r]);return e}function t(e,t){for(var s=0;s<e.length;s++)if(e[s]===t)return!0;return!1}function s(e,t){return function(){e[t]&&e[t]()}}function n(e){return{loadstart:s(e,"onloadstart"),load:s(e,"onload"),loadend:s(e,"onloadend"),progress:s(e,"onprogress"),error:s(e,"onerror"),abort:s(e,"onabort"),timeout:s(e,"ontimeout")}}function r(e){var t=["Can't build XHR.response for XHR.responseType of '",e,"'.","XHR.response must be explicitly stubbed"];return t.join(" ")}function a(s,a,i,o){function u(){a.track(this),this.events=n(this),this.requestHeaders={},this.overriddenMimeType=null}function h(e,t){e=e.toLowerCase();for(var s in t)if(s.toLowerCase()===e)return t[s]}function c(e,t){var s=[];if(e)if(e instanceof Array)s=e;else for(var n in e)e.hasOwnProperty(n)&&s.push({name:n,value:e[n]});else s.push({name:"Content-Type",value:t||"application/json"});return s}function p(e){if(s.DOMParser)return(new s.DOMParser).parseFromString(e,"text/xml");var t=new s.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}function d(e,s){return t(f,s.toLowerCase())?p(e,s):s.match(/\+xml$/)?p(e,"text/xml"):null}var f=["text/xml","application/xml"],l=["responseBody","responseText","responseXML","status","statusText","responseTimeout"];return e(u.prototype,new s.XMLHttpRequest,l),e(u.prototype,{open:function(){this.method=arguments[0],this.url=arguments[1],this.username=arguments[3],this.password=arguments[4],this.readyState=1,this.onreadystatechange()},setRequestHeader:function(e,t){this.requestHeaders[e]=this.requestHeaders.hasOwnProperty(e)?[this.requestHeaders[e],t].join(", "):t},overrideMimeType:function(e){this.overriddenMimeType=e},abort:function(){this.readyState=0,this.status=0,this.statusText="abort",this.onreadystatechange(),this.events.progress(),this.events.abort(),this.events.loadend()},readyState:0,onloadstart:null,onprogress:null,onabort:null,onerror:null,onload:null,ontimeout:null,onloadend:null,onreadystatechange:function(){},addEventListener:function(e,t){var s=this.events[e],n=this;this.events[e]=function(){t.apply(n),s()}},status:null,send:function(e){this.params=e,this.readyState=2,this.events.loadstart(),this.onreadystatechange();var t=i.findStub(this.url,e,this.method);t&&this.respondWith(t)},contentType:function(){return h("content-type",this.requestHeaders)},data:function(){return this.params?o.findParser(this).parse(this.params):{}},getResponseHeader:function(e){e=e.toLowerCase();for(var t,s=0;s<this.responseHeaders.length;s++){var n=this.responseHeaders[s];e===n.name.toLowerCase()&&(t=t?[t,n.value].join(", "):n.value)}return t},getAllResponseHeaders:function(){for(var e=[],t=0;t<this.responseHeaders.length;t++)e.push(this.responseHeaders[t].name+": "+this.responseHeaders[t].value);return e.join("\r\n")+"\r\n"},responseText:null,response:null,responseType:null,responseValue:function(){switch(this.responseType){case null:case"":case"text":return this.readyState>=3?this.responseText:"";case"json":return JSON.parse(this.responseText);case"arraybuffer":throw r("arraybuffer");case"blob":throw r("blob");case"document":return this.responseXML}},respondWith:function(e){if(4===this.readyState)throw new Error("FakeXMLHttpRequest already completed");this.status=e.status,this.statusText=e.statusText||"",this.responseText=e.responseText||"",this.responseType=e.responseType||"",this.readyState=4,this.responseHeaders=c(e.responseHeaders,e.contentType),this.responseXML=d(e.responseText,this.getResponseHeader("content-type")||""),this.responseXML&&(this.responseType="document"),this.response="response"in e?e.response:this.responseValue(),this.onreadystatechange(),this.events.progress(),this.events.load(),this.events.loadend()},responseTimeout:function(){if(4===this.readyState)throw new Error("FakeXMLHttpRequest already completed");this.readyState=4,jasmine.clock().tick(3e4),this.onreadystatechange("timeout"),this.events.progress(),this.events.timeout(),this.events.loadend()},responseError:function(){if(4===this.readyState)throw new Error("FakeXMLHttpRequest already completed");this.readyState=4,this.onreadystatechange(),this.events.progress(),this.events.error(),this.events.loadend()}}),u}return a},getJasmineRequireObj().MockAjax=function(e){function t(t){var s=new e.RequestTracker,n=new e.StubTracker,r=new e.ParamParser,a=t.XMLHttpRequest,i=e.fakeRequest(t,s,n,r);this.install=function(){t.XMLHttpRequest=i},this.uninstall=function(){t.XMLHttpRequest=a,this.stubs.reset(),this.requests.reset(),r.reset()},this.stubRequest=function(t,s,r){var a=new e.RequestStub(t,s,r);return n.addStub(a),a},this.withMock=function(e){this.install();try{e()}finally{this.uninstall()}},this.addCustomParamParser=function(e){r.add(e)},this.requests=s,this.stubs=n}return t},getJasmineRequireObj().AjaxParamParser=function(){function e(){var e=[{test:function(e){return/^application\/json/.test(e.contentType())},parse:function(e){return JSON.parse(e)}},{test:function(){return!0},parse:function(e){for(var t={},s=e.split("&"),n=0;n<s.length;++n){var r=s[n].replace(/\+/g," ").split("="),a=decodeURIComponent(r[0]);t[a]=t[a]||[],t[a].push(decodeURIComponent(r[1]))}return t}}],t=[];this.add=function(e){t.unshift(e)},this.findParser=function(e){for(var s in t){var n=t[s];if(n.test(e))return n}},this.reset=function(){t=[];for(var s in e)t.push(e[s])},this.reset()}return e},getJasmineRequireObj().AjaxRequestStub=function(){function e(e,t,s){var n=function(e){return e?e.split("&").sort().join("&"):void 0};if(e instanceof RegExp)this.url=e,this.query=void 0;else{var r=e.split("?");this.url=r[0],this.query=r.length>1?n(r[1]):void 0}this.data=n(t),this.method=s,this.andReturn=function(e){this.status=e.status||200,this.contentType=e.contentType,this.response=e.response,this.responseText=e.responseText},this.matches=function(e,t,s){var r=!1;if(e=e.toString(),this.url instanceof RegExp)r=this.url.test(e);else{var a=e.split("?"),i=a[0],o=a[1];r=this.url===i&&this.query===n(o)}return!(!r||this.data&&this.data!==n(t)||this.method&&this.method!==s)}}return e},getJasmineRequireObj().AjaxRequestTracker=function(){function e(){var e=[];this.track=function(t){e.push(t)},this.first=function(){return e[0]},this.count=function(){return e.length},this.reset=function(){e=[]},this.mostRecent=function(){return e[e.length-1]},this.at=function(t){return e[t]},this.filter=function(t){for(var s=[],n=0;n<e.length;n++)t instanceof RegExp&&t.test(e[n].url)?s.push(e[n]):t instanceof Function&&t(e[n])?s.push(e[n]):e[n].url===t&&s.push(e[n]);return s}}return e},getJasmineRequireObj().AjaxStubTracker=function(){function e(){var e=[];this.addStub=function(t){e.push(t)},this.reset=function(){e=[]},this.findStub=function(t,s,n){for(var r=e.length-1;r>=0;r--){var a=e[r];if(a.matches(t,s,n))return a}}}return e},function(){var e=getJasmineRequireObj(),t=e.ajax(e);"undefined"==typeof window&&"object"==typeof exports?(exports.MockAjax=t,jasmine.Ajax=new t(exports)):(window.MockAjax=t,jasmine.Ajax=new t(window))}();