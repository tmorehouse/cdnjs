function mostRecentAjaxRequest(){return ajaxRequests.length>0?ajaxRequests[ajaxRequests.length-1]:null}function clearAjaxRequests(){ajaxRequests=[]}function FakeXMLHttpRequest(){var e=Object.extend||jQuery.extend;return e(this,{requestHeaders:{},open:function(){this.method=arguments[0],this.url=arguments[1],this.username=arguments[3],this.password=arguments[4],this.readyState=1},setRequestHeader:function(e,t){this.requestHeaders[e]=t},abort:function(){this.readyState=0},readyState:0,onload:function(){},onreadystatechange:function(){},status:null,send:function(e){this.params=e,this.readyState=2},data:function(){var e={};if("string"!=typeof this.params)return e;for(var t=this.params.split("&"),s=0;s<t.length;++s){var n=t[s].replace(/\+/g," ").split("="),a=decodeURIComponent(n[0]);e[a]=e[a]||[],e[a].push(decodeURIComponent(n[1])),e[a].sort()}return e},getResponseHeader:function(e){return this.responseHeaders[e]},getAllResponseHeaders:function(){var e=[];for(var t in this.responseHeaders)this.responseHeaders.hasOwnProperty(t)&&e.push(t+": "+this.responseHeaders[t]);return e.join("\r\n")},responseText:null,response:function(e){this.status=e.status,this.responseText=e.responseText||"",this.readyState=4,this.responseHeaders=e.responseHeaders||{"Content-type":e.contentType||"application/json"},this.onload(),this.onreadystatechange()},responseTimeout:function(){this.readyState=4,jasmine.Clock.tick(jQuery.ajaxSettings.timeout||3e4),this.onreadystatechange("timeout")}}),this}var ajaxRequests=[];jasmine.Ajax={isInstalled:function(){return jasmine.Ajax.installed===!0},assertInstalled:function(){if(!jasmine.Ajax.isInstalled())throw new Error("Mock ajax is not installed, use jasmine.Ajax.useMock()")},useMock:function(){if(!jasmine.Ajax.isInstalled()){var e=jasmine.getEnv().currentSpec;e.after(jasmine.Ajax.uninstallMock),jasmine.Ajax.installMock()}},installMock:function(){if("undefined"==typeof jQuery)throw new Error("jasmine.Ajax currently only supports jQuery");jasmine.Ajax.installJquery(),jasmine.Ajax.installed=!0},installJquery:function(){jasmine.Ajax.mode="jQuery",jasmine.Ajax.real=jQuery.ajaxSettings.xhr,jQuery.ajaxSettings.xhr=jasmine.Ajax.jQueryMock},uninstallMock:function(){jasmine.Ajax.assertInstalled(),"jQuery"==jasmine.Ajax.mode&&(jQuery.ajaxSettings.xhr=jasmine.Ajax.real),jasmine.Ajax.reset()},reset:function(){jasmine.Ajax.installed=!1,jasmine.Ajax.mode=null,jasmine.Ajax.real=null},jQueryMock:function(){var e=new FakeXMLHttpRequest;return ajaxRequests.push(e),e},installed:!1,mode:null};