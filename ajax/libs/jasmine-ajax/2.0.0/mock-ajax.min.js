!function(){function a(a,b){for(var c in b)a[c]=b[c];return a}function b(a){var b=new e,g=new c,h=a.XMLHttpRequest,i=d(b,g);this.install=function(){a.XMLHttpRequest=i},this.uninstall=function(){a.XMLHttpRequest=h,this.stubs.reset(),this.requests.reset()},this.stubRequest=function(a,b){var c=new f(a,b);return g.addStub(c),c},this.withMock=function(a){this.install();try{a()}finally{this.uninstall()}},this.requests=b,this.stubs=g}function c(){var a=[];this.addStub=function(b){a.push(b)},this.reset=function(){a=[]},this.findStub=function(b,c){for(var d=a.length-1;d>=0;d--){var e=a[d];if(e.matches(b,c))return e}}}function d(b,c){function d(){b.track(this),this.requestHeaders={}}return a(d.prototype,window.XMLHttpRequest),a(d.prototype,{open:function(){this.method=arguments[0],this.url=arguments[1],this.username=arguments[3],this.password=arguments[4],this.readyState=1,this.onreadystatechange()},setRequestHeader:function(a,b){this.requestHeaders[a]=b},abort:function(){this.readyState=0,this.status=0,this.statusText="abort",this.onreadystatechange()},readyState:0,onload:function(){},onreadystatechange:function(){},status:null,send:function(a){this.params=a,this.readyState=2,this.onreadystatechange();var b=c.findStub(this.url,a);b&&this.response(b)},data:function(){var a={};if("string"!=typeof this.params)return a;for(var b=this.params.split("&"),c=0;c<b.length;++c){var d=b[c].replace(/\+/g," ").split("="),e=decodeURIComponent(d[0]);a[e]=a[e]||[],a[e].push(decodeURIComponent(d[1])),a[e].sort()}return a},getResponseHeader:function(a){return this.responseHeaders[a]},getAllResponseHeaders:function(){var a=[];for(var b in this.responseHeaders)this.responseHeaders.hasOwnProperty(b)&&a.push(b+": "+this.responseHeaders[b]);return a.join("\r\n")},responseText:null,response:function(a){this.status=a.status,this.statusText=a.statusText||"",this.responseText=a.responseText||"",this.readyState=4,this.responseHeaders=a.responseHeaders||{"Content-type":a.contentType||"application/json"},this.onload(),this.onreadystatechange()},responseTimeout:function(){this.readyState=4,jasmine.clock().tick(3e4),this.onreadystatechange("timeout")}}),d}function e(){var a=[];this.track=function(b){a.push(b)},this.first=function(){return a[0]},this.count=function(){return a.length},this.reset=function(){a=[]},this.mostRecent=function(){return a[a.length-1]},this.at=function(b){return a[b]},this.filter=function(b){if(0==a.length)return[];for(var c=[],d=0;d<a.length;d++)b instanceof RegExp&&b.test(a[d].url)?c.push(a[d]):b instanceof Function&&b(a[d])?c.push(a[d]):a[d].url==b&&c.push(a[d]);return c}}function f(a,b){var c=a.split("?");this.url=c[0];var d=function(a){return a?a.split("&").sort().join("&"):void 0};this.query=d(c[1]),this.data=d(b),this.andReturn=function(a){this.status=a.status||200,this.contentType=a.contentType,this.responseText=a.responseText},this.matches=function(a,b){var c=a.split("?"),e=c[0],f=c[1];return this.url===e&&this.query===d(f)&&(!this.data||this.data===d(b))}}"undefined"==typeof window&&"object"==typeof exports?(exports.MockAjax=b,jasmine.Ajax=new b(exports)):(window.MockAjax=b,jasmine.Ajax=new b(window))}();
