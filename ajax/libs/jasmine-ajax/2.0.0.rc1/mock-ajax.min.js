!function(){function t(t,e){for(var n in e)t[n]=e[n];return t}function e(t){var e=new i,o=new n,a=t.XMLHttpRequest,u=s(e,o);this.install=function(){t.XMLHttpRequest=u},this.uninstall=function(){t.XMLHttpRequest=a},this.stubRequest=function(t){var e=new r(t);return o.addStub(e),e},this.withMock=function(t){this.install();try{t()}finally{this.uninstall()}},this.requests=e,this.stubs=o}function n(){var t=[];this.addStub=function(e){t.push(e)},this.reset=function(){t=[]},this.findStub=function(e){for(var n=t.length-1;n>=0;n--){var s=t[n];if(s.url===e)return s}}}function s(e,n){function s(){e.track(this)}return t(s.prototype,window.XMLHttpRequest),t(s.prototype,{requestHeaders:{},open:function(){this.method=arguments[0],this.url=arguments[1],this.username=arguments[3],this.password=arguments[4],this.readyState=1},setRequestHeader:function(t,e){this.requestHeaders[t]=e},abort:function(){this.readyState=0},readyState:0,onload:function(){},onreadystatechange:function(){},status:null,send:function(t){this.params=t,this.readyState=2;var e=n.findStub(this.url);e&&this.response(e)},data:function(){var t={};if("string"!=typeof this.params)return t;for(var e=this.params.split("&"),n=0;n<e.length;++n){var s=e[n].replace(/\+/g," ").split("="),i=decodeURIComponent(s[0]);t[i]=t[i]||[],t[i].push(decodeURIComponent(s[1])),t[i].sort()}return t},getResponseHeader:function(t){return this.responseHeaders[t]},getAllResponseHeaders:function(){var t=[];for(var e in this.responseHeaders)this.responseHeaders.hasOwnProperty(e)&&t.push(e+": "+this.responseHeaders[e]);return t.join("\r\n")},responseText:null,response:function(t){this.status=t.status,this.responseText=t.responseText||"",this.readyState=4,this.responseHeaders=t.responseHeaders||{"Content-type":t.contentType||"application/json"},this.onload(),this.onreadystatechange()},responseTimeout:function(){this.readyState=4,jasmine.clock().tick(3e4),this.onreadystatechange("timeout")}}),s}function i(){var t=[];this.track=function(e){t.push(e)},this.first=function(){return t[0]},this.count=function(){return t.length},this.reset=function(){t=[]},this.mostRecent=function(){return t[t.length-1]},this.at=function(e){return t[e]}}function r(t){this.url=t,this.andReturn=function(t){this.status=t.status||200,this.contentType=t.contentType,this.responseText=t.responseText}}"undefined"==typeof window&&"object"==typeof exports?(exports.MockAjax=e,jasmine.Ajax=new e(exports)):(window.MockAjax=e,jasmine.Ajax=new e(window))}();