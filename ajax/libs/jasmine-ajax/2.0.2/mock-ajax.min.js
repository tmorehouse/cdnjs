getJasmineRequireObj().ajax=function(t){var e={};return e.RequestStub=t.AjaxRequestStub(),e.RequestTracker=t.AjaxRequestTracker(),e.StubTracker=t.AjaxStubTracker(),e.ParamParser=t.AjaxParamParser(),e.fakeRequest=t.AjaxFakeRequest(),e.MockAjax=t.MockAjax(e),e.MockAjax},getJasmineRequireObj().AjaxFakeRequest=function(){function t(t,n,s){s=s||[];for(var r in n)e(s,r)||(t[r]=n[r]);return t}function e(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}function n(t,e){return function(){t[e]&&t[e]()}}function s(t){return{loadstart:n(t,"onloadstart"),load:n(t,"onload"),loadend:n(t,"onloadend"),progress:n(t,"onprogress"),error:n(t,"onerror"),abort:n(t,"onabort"),timeout:n(t,"ontimeout")}}function r(n,r,a,i){function o(){r.track(this),this.events=s(this),this.requestHeaders={},this.overriddenMimeType=null}function u(t,e){t=t.toLowerCase();for(var n in e)if(n.toLowerCase()===t)return e[n]}function h(t,e){var n=[];if(t)if(t instanceof Array)n=t;else for(var s in t)t.hasOwnProperty(s)&&n.push({name:s,value:t[s]});else n.push({name:"Content-Type",value:e||"application/json"});return n}function c(t){if(n.DOMParser)return(new n.DOMParser).parseFromString(t,"text/xml");var e=new n.ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}function d(t,n){return e(f,n.toLowerCase())?c(t,n):n.match(/\+xml$/)?c(t,"text/xml"):null}var f=["text/xml","application/xml"],p=["responseBody","responseText","responseXML","status","statusText","responseTimeout"];return t(o.prototype,new n.XMLHttpRequest,p),t(o.prototype,{open:function(){this.method=arguments[0],this.url=arguments[1],this.username=arguments[3],this.password=arguments[4],this.readyState=1,this.onreadystatechange()},setRequestHeader:function(t,e){this.requestHeaders[t]=this.requestHeaders.hasOwnProperty(t)?[this.requestHeaders[t],e].join(", "):e},overrideMimeType:function(t){this.overriddenMimeType=t},abort:function(){this.readyState=0,this.status=0,this.statusText="abort",this.onreadystatechange(),this.events.progress(),this.events.abort(),this.events.loadend()},readyState:0,onloadstart:null,onprogress:null,onabort:null,onerror:null,onload:null,ontimeout:null,onloadend:null,onreadystatechange:function(){},addEventListener:function(t,e){var n=this.events[t],s=this;this.events[t]=function(){e.apply(s),n()}},status:null,send:function(t){this.params=t,this.readyState=2,this.events.loadstart(),this.onreadystatechange();var e=a.findStub(this.url,t,this.method);e&&this.response(e)},contentType:function(){return u("content-type",this.requestHeaders)},data:function(){return this.params?i.findParser(this).parse(this.params):{}},getResponseHeader:function(t){t=t.toLowerCase();for(var e,n=0;n<this.responseHeaders.length;n++){var s=this.responseHeaders[n];t===s.name.toLowerCase()&&(e=e?[e,s.value].join(", "):s.value)}return e},getAllResponseHeaders:function(){for(var t=[],e=0;e<this.responseHeaders.length;e++)t.push(this.responseHeaders[e].name+": "+this.responseHeaders[e].value);return t.join("\r\n")},responseText:null,response:function(t){if(4===this.readyState)throw new Error("FakeXMLHttpRequest already completed");this.status=t.status,this.statusText=t.statusText||"",this.responseText=t.responseText||"",this.readyState=4,this.responseHeaders=h(t.responseHeaders,t.contentType),this.responseXML=d(t.responseText,this.getResponseHeader("content-type")||""),this.onreadystatechange(),this.events.progress(),this.events.load(),this.events.loadend()},responseTimeout:function(){if(4===this.readyState)throw new Error("FakeXMLHttpRequest already completed");this.readyState=4,jasmine.clock().tick(3e4),this.onreadystatechange("timeout"),this.events.progress(),this.events.timeout(),this.events.loadend()},responseError:function(){if(4===this.readyState)throw new Error("FakeXMLHttpRequest already completed");this.readyState=4,this.onreadystatechange(),this.events.progress(),this.events.error(),this.events.loadend()}}),o}return r},getJasmineRequireObj().MockAjax=function(t){function e(e){var n=new t.RequestTracker,s=new t.StubTracker,r=new t.ParamParser,a=e.XMLHttpRequest,i=t.fakeRequest(e,n,s,r);this.install=function(){e.XMLHttpRequest=i},this.uninstall=function(){e.XMLHttpRequest=a,this.stubs.reset(),this.requests.reset(),r.reset()},this.stubRequest=function(e,n,r){var a=new t.RequestStub(e,n,r);return s.addStub(a),a},this.withMock=function(t){this.install();try{t()}finally{this.uninstall()}},this.addCustomParamParser=function(t){r.add(t)},this.requests=n,this.stubs=s}return e},getJasmineRequireObj().AjaxParamParser=function(){function t(){var t=[{test:function(t){return/^application\/json/.test(t.contentType())},parse:function(t){return JSON.parse(t)}},{test:function(){return!0},parse:function(t){for(var e={},n=t.split("&"),s=0;s<n.length;++s){var r=n[s].replace(/\+/g," ").split("="),a=decodeURIComponent(r[0]);e[a]=e[a]||[],e[a].push(decodeURIComponent(r[1]))}return e}}],e=[];this.add=function(t){e.unshift(t)},this.findParser=function(t){for(var n in e){var s=e[n];if(s.test(t))return s}},this.reset=function(){e=[];for(var n in t)e.push(t[n])},this.reset()}return t},getJasmineRequireObj().AjaxRequestStub=function(){function t(t,e,n){var s=function(t){return t?t.split("&").sort().join("&"):void 0};if(t instanceof RegExp)this.url=t,this.query=void 0;else{var r=t.split("?");this.url=r[0],this.query=r.length>1?s(r[1]):void 0}this.data=s(e),this.method=n,this.andReturn=function(t){this.status=t.status||200,this.contentType=t.contentType,this.responseText=t.responseText},this.matches=function(t,e,n){var r=!1;if(t=t.toString(),this.url instanceof RegExp)r=this.url.test(t);else{var a=t.split("?"),i=a[0],o=a[1];r=this.url===i&&this.query===s(o)}return!(!r||this.data&&this.data!==s(e)||this.method&&this.method!==n)}}return t},getJasmineRequireObj().AjaxRequestTracker=function(){function t(){var t=[];this.track=function(e){t.push(e)},this.first=function(){return t[0]},this.count=function(){return t.length},this.reset=function(){t=[]},this.mostRecent=function(){return t[t.length-1]},this.at=function(e){return t[e]},this.filter=function(e){for(var n=[],s=0;s<t.length;s++)e instanceof RegExp&&e.test(t[s].url)?n.push(t[s]):e instanceof Function&&e(t[s])?n.push(t[s]):t[s].url===e&&n.push(t[s]);return n}}return t},getJasmineRequireObj().AjaxStubTracker=function(){function t(){var t=[];this.addStub=function(e){t.push(e)},this.reset=function(){t=[]},this.findStub=function(e,n,s){for(var r=t.length-1;r>=0;r--){var a=t[r];if(a.matches(e,n,s))return a}}}return t},function(){var t=getJasmineRequireObj(),e=t.ajax(t);"undefined"==typeof window&&"object"==typeof exports?(exports.MockAjax=e,jasmine.Ajax=new e(exports)):(window.MockAjax=e,jasmine.Ajax=new e(window))}();