!function(e,t){"use strict";var s=e.tablesorter=e.tablesorter||{};e.extend(s.css,{sticky:"tablesorter-stickyHeader",stickyVis:"tablesorter-sticky-visible",stickyWrap:"tablesorter-sticky-wrapper"}),s.addHeaderResizeEvent=function(t,s,i){t=e(t)[0];var r,a={timer:250},l=e.extend({},a,i),d=t.config,c=d.widgetOptions,n=function(t){c.resize_flag=!0,r=[],d.$headers.each(function(){var t=e(this),s=t.data("savedSizes")||[0,0],i=this.offsetWidth,a=this.offsetHeight;(i!==s[0]||a!==s[1])&&(t.data("savedSizes",[i,a]),r.push(this))}),r.length&&t!==!1&&d.$table.trigger("resize",[r]),c.resize_flag=!1};return n(!1),clearInterval(c.resize_timer),s?(c.resize_flag=!1,!1):void(c.resize_timer=setInterval(function(){c.resize_flag||n()},l.timer))},s.addWidget({id:"stickyHeaders",priority:60,options:{stickyHeaders:"",stickyHeaders_attachTo:null,stickyHeaders_xScroll:null,stickyHeaders_yScroll:null,stickyHeaders_offset:0,stickyHeaders_filteredToTop:!0,stickyHeaders_cloneId:"-sticky",stickyHeaders_addResizeEvent:!0,stickyHeaders_includeCaption:!0,stickyHeaders_zIndex:2},format:function(i,r,a){if(!(r.$table.hasClass("hasStickyHeaders")||e.inArray("filter",r.widgets)>=0&&!r.$table.hasClass("hasFilters"))){var l,d=r.$table,c=e(a.stickyHeaders_attachTo),n=r.namespace+"stickyheaders ",o=e(a.stickyHeaders_yScroll||a.stickyHeaders_attachTo||t),h=e(a.stickyHeaders_xScroll||a.stickyHeaders_attachTo||t),f=d.children("thead:first"),p=f.children("tr").not(".sticky-false").children(),y=d.children("tfoot"),g=isNaN(a.stickyHeaders_offset)?e(a.stickyHeaders_offset):"",k=c.length?0:g.length?g.height()||0:parseInt(a.stickyHeaders_offset,10)||0,b=d.parent().closest("."+s.css.table).hasClass("hasStickyHeaders")?d.parent().closest("table.tablesorter")[0].config.widgetOptions.$sticky.parent():[],H=b.length?b.height():0,u=a.$sticky=d.clone().addClass("containsStickyHeaders "+s.css.sticky+" "+a.stickyHeaders).wrap('<div class="'+s.css.stickyWrap+'">'),v=u.parent().css({position:c.length?"absolute":"fixed",padding:parseInt(u.parent().parent().css("padding-left"),10),top:k+H,left:0,visibility:"hidden",zIndex:a.stickyHeaders_zIndex||2}),_=u.children("thead:first"),m="",z=0,x=function(s,i){s.filter(":visible").each(function(s){var r,a,l=i.filter(":visible").eq(s),d=e(this);"border-box"===d.css("box-sizing")?r=d.outerWidth():"collapse"===l.css("border-collapse")?t.getComputedStyle?r=parseFloat(t.getComputedStyle(this,null).width):(a=parseFloat(d.css("border-width")),r=d.outerWidth()-parseFloat(d.css("padding-left"))-parseFloat(d.css("padding-right"))-a):r=d.width(),l.css({"min-width":r,"max-width":r})})},T=function(){k=g.length?g.height()||0:parseInt(a.stickyHeaders_offset,10)||0,z=0,v.css({left:c.length?parseInt(c.css("padding-left"),10)||0:d.offset().left-parseInt(d.css("margin-left"),10)-h.scrollLeft()-z,width:d.outerWidth()}),x(d,u),x(p,l)};r.$extraTables&&r.$extraTables.length?r.$extraTables.add(u):r.$extraTables=u,u.attr("id")&&(u[0].id+=a.stickyHeaders_cloneId),u.find("thead:gt(0), tr.sticky-false").hide(),u.find("tbody, tfoot").remove(),u.find("caption").toggle(a.stickyHeaders_includeCaption),l=_.children().children(),u.css({height:0,width:0,margin:0}),l.find("."+s.css.resizer).remove(),d.addClass("hasStickyHeaders").bind("pagerComplete"+n,function(){T()}),s.bindEvents(i,_.children().children(".tablesorter-header")),d.after(v),r.onRenderHeader&&_.children("tr").children().each(function(t){r.onRenderHeader.apply(e(this),[t,r,u])}),h.add(o).unbind("scroll resize ".split(" ").join(n).replace(/\s+/g," ")).bind("scroll resize ".split(" ").join(n),function(t){if(d.is(":visible")){H=b.length?b.offset().top-o.scrollTop()+b.height():0;var s="tablesorter-sticky-",i=d.offset(),r=e.isWindow(o[0]),a=e.isWindow(h[0]),l=(c.length?r?o.scrollTop():o.offset().top:o.scrollTop())+k+H,n=d.height()-(v.height()+(y.height()||0)),f=l>i.top&&l<i.top+n?"visible":"hidden",p={visibility:f};c.length&&(p.top=r?l:c.scrollTop()),a&&(p.left=d.offset().left-parseInt(d.css("margin-left"),10)-h.scrollLeft()-z),b.length&&(p.top=(p.top||0)+k+H),v.removeClass(s+"visible "+s+"hidden").addClass(s+f).css(p),(f!==m||"resize"===t.type)&&(T(),m=f)}}),a.stickyHeaders_addResizeEvent&&s.addHeaderResizeEvent(i),d.hasClass("hasFilters")&&a.filter_columnFilters&&(d.bind("filterEnd"+n,function(){var i=e(document.activeElement).closest("td"),l=i.parent().children().index(i);v.hasClass(s.css.stickyVis)&&a.stickyHeaders_filteredToTop&&(t.scrollTo(0,d.position().top),l>=0&&r.$filters&&r.$filters.eq(l).find("a, select, input").filter(":visible").focus())}),s.filter.bindSearch(d,l.find("."+s.css.filter)),a.filter_hideFilters&&s.filter.hideFilters(u,r)),d.trigger("stickyHeadersInit")}},remove:function(i,r,a){var l=r.namespace+"stickyheaders ";r.$table.removeClass("hasStickyHeaders").unbind("pagerComplete filterEnd ".split(" ").join(l).replace(/\s+/g," ")).next("."+s.css.stickyWrap).remove(),a.$sticky&&a.$sticky.length&&a.$sticky.remove(),e(t).add(a.stickyHeaders_xScroll).add(a.stickyHeaders_yScroll).add(a.stickyHeaders_attachTo).unbind("scroll resize ".split(" ").join(l).replace(/\s+/g," ")),s.addHeaderResizeEvent(i,!1)}})}(jQuery,window);