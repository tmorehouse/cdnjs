!function(e){"use strict";var t=e.tablesorter,o=".tscolsel",l=t.columnSelector={queryAll:"@media only all { [columns] { display: none; } } ",queryBreak:"@media all and (min-width: [size]) { [columns] { display: table-cell; } } ",init:function(a,n,c){var r,u;return r=e(c.columnSelector_layout),r.find("input").add(r.filter("input")).length?(n.tableId="tablesorter"+(new Date).getTime(),n.$table.addClass(n.tableId),u=n.selector={$container:e(c.columnSelector_container||"<div>")},u.$style=e("<style></style>").prop("disabled",!0).appendTo("head"),u.$breakpoints=e("<style></style>").prop("disabled",!0).appendTo("head"),u.isInitializing=!0,l.setupSelector(a,n,c),c.columnSelector_mediaquery&&l.setupBreakpoints(n,c),u.isInitializing=!1,u.$container.length&&l.updateCols(n,c),void n.$table.off("refreshColumnSelector"+o).on("refreshColumnSelector"+o,function(t,o){var a,n=e.isArray(o),c=this.config,r=c.widgetOptions;if(o&&c.selector.$container.length){if(n)for(e.each(o,function(e,t){o[e]=parseInt(t,10)}),a=0;a<c.columns;a++)c.selector.$container.find("input[data-column="+a+"]").prop("checked",e.inArray(a,o)>=0);l.updateAuto(c,r,u.$container.find('input[data-column="auto"]').prop("checked",!n))}else l.updateBreakpoints(c,r),l.updateCols(c,r)})):void(n.debug&&t.log("*** ERROR: Column Selector aborting, no input found in the layout! ***"))},setupSelector:function(o,a,n){var c,r=a.selector,u=r.$container,i=n.columnSelector_saveColumns&&t.storage,s=i?t.storage(o,"tablesorter-columnSelector"):[],d=i?t.storage(o,"tablesorter-columnSelector-auto"):{};r.auto=e.isEmptyObject(d)||"boolean"!==e.type(d.auto)?n.columnSelector_mediaqueryState:d.auto,r.states=[],r.$column=[],r.$wrapper=[],r.$checkbox=[],a.$table.children("thead").find("tr:first th",o).each(function(){var o=e(this),i=o.attr(n.columnSelector_priority)||1,d=o.attr("data-column"),p=t.getData(this,a.headers[d],"columnSelector");return isNaN(i)&&i.length>0||"disable"===p||n.columnSelector_columns[d]&&"disable"===n.columnSelector_columns[d]?!0:(r.states[d]=s&&"undefined"!=typeof s[d]?s[d]:"undefined"!=typeof n.columnSelector_columns[d]?n.columnSelector_columns[d]:"true"===p||"false"!==p,r.$column[d]=e(this),c=o.attr(n.columnSelector_name)||o.text(),void(u.length&&(r.$wrapper[d]=e(n.columnSelector_layout.replace(/\{name\}/g,c)).appendTo(u),r.$checkbox[d]=r.$wrapper[d].find("input").add(r.$wrapper[d].filter("input")).attr("data-column",d).toggleClass(n.columnSelector_cssChecked,r.states[d]).prop("checked",r.states[d]).on("change",function(){r.states[d]=this.checked,l.updateCols(a,n)}).change())))})},setupBreakpoints:function(t,a){var n=t.selector;a.columnSelector_mediaquery&&(n.lastIndex=-1,l.updateBreakpoints(t,a),t.$table.off("updateAll"+o).on("updateAll"+o,function(){l.updateBreakpoints(t,a),l.updateCols(t,a)})),n.$container.length&&(a.columnSelector_mediaquery&&(n.$auto=e(a.columnSelector_layout.replace(/\{name\}/g,a.columnSelector_mediaqueryName)).prependTo(n.$container),n.$auto.find("input").add(n.$auto.filter("input")).attr("data-column","auto").prop("checked",n.auto).toggleClass(a.columnSelector_cssChecked,n.auto).on("change",function(){l.updateAuto(t,a,e(this))}).change()),t.$table.off("update"+o).on("update"+o,function(){l.updateCols(t,a)}))},updateAuto:function(o,a,n){var c=o.selector;c.auto=n.prop("checked")||!1,e.each(c.$checkbox,function(e,t){t&&(t[0].disabled=c.auto,c.$wrapper[e].toggleClass("disabled",c.auto))}),a.columnSelector_mediaquery&&l.updateBreakpoints(o,a),l.updateCols(o,a),o.selector.$popup&&o.selector.$popup.find(".tablesorter-column-selector").html(c.$container.html()).find("input").each(function(){var t=e(this).attr("data-column");e(this).prop("checked","auto"===t?c.auto:c.states[t])}),a.columnSelector_saveColumns&&t.storage&&t.storage(o.$table[0],"tablesorter-columnSelector-auto",{auto:c.auto}),c.auto&&o.$table.trigger("columnUpdate")},updateBreakpoints:function(t,o){var a,n,c,r=t.selector,u="."+t.tableId,i=[],s="";if(o.columnSelector_mediaquery&&!r.auto)return r.$breakpoints.prop("disabled",!0),void r.$style.prop("disabled",!1);for(a=0;6>a;a++)c=[],t.$headers.filter("["+o.columnSelector_priority+"="+(a+1)+"]").each(function(){n=parseInt(e(this).attr("data-column"),10)+1,c.push(u+" col:nth-child("+n+")"),c.push(u+" tr th:nth-child("+n+")"),c.push(u+" tr td:nth-child("+n+")")}),c.length&&(i=i.concat(c),s+=l.queryBreak.replace(/\[size\]/g,o.columnSelector_breakpoints[a]).replace(/\[columns\]/g,c.join(",")));r.$style&&r.$style.prop("disabled",!0),i.length&&r.$breakpoints.prop("disabled",!1).html(l.queryAll.replace(/\[columns\]/g,i.join(","))+s)},updateCols:function(o,l){if(!(l.columnSelector_mediaquery&&o.selector.auto||o.selector.isInitializing)){var a,n=o.selector,c=[],r="."+o.tableId;n.$container.find("input[data-column]").filter('[data-column!="auto"]').each(function(){this.checked||(a=parseInt(e(this).attr("data-column"),10)+1,c.push(r+" col:nth-child("+a+")"),c.push(r+" tr th:nth-child("+a+")"),c.push(r+" tr td:nth-child("+a+")")),e(this).toggleClass(l.columnSelector_cssChecked,this.checked)}),l.columnSelector_mediaquery&&n.$breakpoints.prop("disabled",!0),n.$style&&n.$style.prop("disabled",!1).html(c.length?c.join(",")+" { display: none; }":""),l.columnSelector_saveColumns&&t.storage&&t.storage(o.$table[0],"tablesorter-columnSelector",n.states),o.$table.trigger("columnUpdate")}},attachTo:function(t,o){t=e(t)[0];var l,a,n,c=t.config,r=e(o);r.length&&c&&(r.find(".tablesorter-column-selector").length||r.append('<span class="tablesorter-column-selector"></span>'),l=c.selector,a=c.widgetOptions,r.find(".tablesorter-column-selector").html(l.$container.html()).find("input").each(function(){var t=e(this).attr("data-column"),o="auto"===t?l.auto:l.states[t];e(this).toggleClass(a.columnSelector_cssChecked,o).prop("checked",o)}),l.$popup=r.on("change","input",function(){n=e(this).toggleClass(a.columnSelector_cssChecked,this.checked).attr("data-column"),l.$container.find('input[data-column="'+n+'"]').prop("checked",this.checked).trigger("change")}))}};t.addWidget({id:"columnSelector",priority:10,options:{columnSelector_container:null,columnSelector_columns:{},columnSelector_saveColumns:!0,columnSelector_layout:'<label><input type="checkbox">{name}</label>',columnSelector_name:"data-selector-name",columnSelector_mediaquery:!0,columnSelector_mediaqueryName:"Auto: ",columnSelector_mediaqueryState:!0,columnSelector_breakpoints:["20em","30em","40em","50em","60em","70em"],columnSelector_priority:"data-priority",columnSelector_cssChecked:"checked"},init:function(e,t,o,a){l.init(e,o,a)},remove:function(e,t,l,a){if(!a){var n=t.selector;n.$container.empty(),n.$popup&&n.$popup.empty(),n.$style.remove(),n.$breakpoints.remove(),t.$table.off("updateAll"+o+" update"+o)}}})}(jQuery);