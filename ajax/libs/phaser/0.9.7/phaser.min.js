var Phaser;!function(t){var e=function(){function t(t){this.name="",this._game=t,this.ID=-1,this.exists=!0,this.active=!0,this.visible=!0,this.alive=!0,this.isGroup=!1,this.ignoreGlobalUpdate=!1,this.ignoreGlobalRender=!1,this.ignoreDrawDebug=!1}return t.prototype.destroy=function(){},t.prototype.preUpdate=function(){},t.prototype.update=function(t){"undefined"==typeof t&&(t=!1)},t.prototype.postUpdate=function(){},t.prototype.render=function(t,e,i,n){"undefined"==typeof n&&(n=!1)},t.prototype.kill=function(){this.alive=!1,this.exists=!1},t.prototype.revive=function(){this.alive=!0,this.exists=!0},t.prototype.toString=function(){return""},t}();t.Basic=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t,e,i,n,s){"undefined"==typeof s&&(s=0),this.active=!0,this.params=null,this._listener=e,this._isOnce=i,this.context=n,this._signal=t,this.priority=s||0}return t.prototype.execute=function(t){var e,i;return this.active&&this._listener&&(i=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,i),this._isOnce&&this.detach()),e},t.prototype.detach=function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},t.prototype.isBound=function(){return!!this._signal&&!!this._listener},t.prototype.isOnce=function(){return this._isOnce},t.prototype.getListener=function(){return this._listener},t.prototype.getSignal=function(){return this._signal},t.prototype._destroy=function(){delete this._signal,delete this._listener,delete this.context},t.prototype.toString=function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"},t}();t.SignalBinding=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(){this._bindings=[],this._prevParams=null,this.memorize=!1,this._shouldPropagate=!0,this.active=!0}return e.VERSION="1.0.0",e.prototype.validateListener=function(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))},e.prototype._registerListener=function(e,i,n,s){var o,r=this._indexOfListener(e,n);if(-1!==r){if(o=this._bindings[r],o.isOnce()!==i)throw new Error("You cannot add"+(i?"":"Once")+"() then add"+(i?"Once":"")+"() the same listener without removing the relationship first.")}else o=new t.SignalBinding(this,e,i,n,s),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},e.prototype._addBinding=function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t.priority<=this._bindings[e].priority);this._bindings.splice(e+1,0,t)},e.prototype._indexOfListener=function(t,e){for(var i,n=this._bindings.length;n--;)if(i=this._bindings[n],i.getListener()===t&&i.context===e)return n;return-1},e.prototype.has=function(t,e){return"undefined"==typeof e&&(e=null),-1!==this._indexOfListener(t,e)},e.prototype.add=function(t,e,i){return"undefined"==typeof e&&(e=null),"undefined"==typeof i&&(i=0),this.validateListener(t,"add"),this._registerListener(t,!1,e,i)},e.prototype.addOnce=function(t,e,i){return"undefined"==typeof e&&(e=null),"undefined"==typeof i&&(i=0),this.validateListener(t,"addOnce"),this._registerListener(t,!0,e,i)},e.prototype.remove=function(t,e){"undefined"==typeof e&&(e=null),this.validateListener(t,"remove");var i=this._indexOfListener(t,e);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),t},e.prototype.removeAll=function(){if(this._bindings){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0}},e.prototype.getNumListeners=function(){return this._bindings.length},e.prototype.halt=function(){this._shouldPropagate=!1},e.prototype.dispatch=function(){for(var t=[],e=0;e<arguments.length-0;e++)t[e]=arguments[e+0];if(this.active){var i,n=this._bindings.length;if(this.memorize&&(this._prevParams=t),n){i=this._bindings.slice(0),this._shouldPropagate=!0;do n--;while(i[n]&&this._shouldPropagate&&i[n].execute(t)!==!1)}}},e.prototype.forget=function(){this._prevParams=null},e.prototype.dispose=function(){this.removeAll(),delete this._bindings,delete this._prevParams},e.prototype.toString=function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"},e}();t.Signal=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(i,n){return this.type=0,this._game=i,this._parent=n,this.type=e.QUAD,this.quad=new t.Quad(this._parent.x,this._parent.y,this._parent.width,this._parent.height),this.offset=new t.MicroPoint(0,0),this.last=new t.MicroPoint(0,0),this._ref=this.quad,this}return e.QUAD=0,e.POINT=1,e.CIRCLE=2,e.LINE=3,e.RECTANGLE=4,e.POLYGON=5,e.prototype.createCircle=function(i){return this.type=e.CIRCLE,this.circle=new t.Circle(this.last.x,this.last.y,i),this._ref=this.circle,this},e.prototype.preUpdate=function(){this.last.x=this.x,this.last.y=this.y},e.prototype.update=function(){this._ref.x=this._parent.x+this.offset.x,this._ref.y=this._parent.y+this.offset.y},e.prototype.render=function(t,i,n){var s=i+(this.x-t.worldView.x),o=n+(this.y-t.worldView.y);this._parent.context.fillStyle=this._parent.renderDebugColor,this.type==e.QUAD?this._parent.context.fillRect(s,o,this.width,this.height):this.type==e.CIRCLE&&(this._parent.context.beginPath(),this._parent.context.arc(s,o,this.circle.radius,0,2*Math.PI),this._parent.context.fill(),this._parent.context.closePath())},e.prototype.destroy=function(){this._game=null,this._parent=null,this._ref=null,this.quad=null,this.point=null,this.circle=null,this.rect=null,this.line=null,this.offset=null},e.prototype.intersectsRaw=function(){return!0},e.prototype.intersectsVector=function(t){return this.type==e.QUAD?this.quad.contains(t.x,t.y):void 0},e.prototype.intersects=function(i){return this.type==e.QUAD&&i.type==e.QUAD?this.quad.intersects(i.quad):this.type==e.CIRCLE&&i.type==e.CIRCLE?t.Collision.circleToCircle(this.circle,i.circle).result:this.type==e.CIRCLE&&i.type==e.RECTANGLE?t.Collision.circleToRectangle(this.circle,i.rect).result:this.type==e.CIRCLE&&i.type==e.POINT?t.Collision.circleContainsPoint(this.circle,i.point).result:this.type==e.CIRCLE&&i.type==e.LINE?t.Collision.lineToCircle(i.line,this.circle).result:this.type==e.RECTANGLE&&i.type==e.RECTANGLE?t.Collision.rectangleToRectangle(this.rect,i.rect).result:this.type==e.RECTANGLE&&i.type==e.CIRCLE?t.Collision.circleToRectangle(i.circle,this.rect).result:this.type==e.RECTANGLE&&i.type==e.POINT?t.Collision.pointToRectangle(i.point,this.rect).result:this.type==e.RECTANGLE&&i.type==e.LINE?t.Collision.lineToRectangle(i.line,this.rect).result:this.type==e.POINT&&i.type==e.POINT?this.point.equals(i.point):this.type==e.POINT&&i.type==e.CIRCLE?t.Collision.circleContainsPoint(i.circle,this.point).result:this.type==e.POINT&&i.type==e.RECTANGLE?t.Collision.pointToRectangle(this.point,i.rect).result:this.type==e.POINT&&i.type==e.LINE?i.line.isPointOnLine(this.point.x,this.point.y):this.type==e.LINE&&i.type==e.LINE?t.Collision.lineSegmentToLineSegment(this.line,i.line).result:this.type==e.LINE&&i.type==e.CIRCLE?t.Collision.lineToCircle(this.line,i.circle).result:this.type==e.LINE&&i.type==e.RECTANGLE?t.Collision.lineSegmentToRectangle(this.line,i.rect).result:this.type==e.LINE&&i.type==e.POINT?this.line.isPointOnLine(i.point.x,i.point.y):!1},e.prototype.checkHullIntersection=function(t){return this.hullX+this.hullWidth>t.hullX&&this.hullX<t.hullX+t.width&&this.hullY+this.hullHeight>t.hullY&&this.hullY<t.hullY+t.hullHeight?!0:!1},Object.defineProperty(e.prototype,"hullWidth",{get:function(){return this.deltaX>0?this.width+this.deltaX:this.width-this.deltaX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hullHeight",{get:function(){return this.deltaY>0?this.height+this.deltaY:this.height-this.deltaY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hullX",{get:function(){return this.x<this.last.x?this.x:this.last.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hullY",{get:function(){return this.y<this.last.y?this.y:this.last.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaXAbs",{get:function(){return this.deltaX>0?this.deltaX:-this.deltaX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaYAbs",{get:function(){return this.deltaY>0?this.deltaY:-this.deltaY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaX",{get:function(){return this.x-this.last.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaY",{get:function(){return this.y-this.last.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._ref.x},set:function(t){this._ref.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._ref.y},set:function(t){this._ref.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._ref.width},set:function(t){this._ref.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._ref.height},set:function(t){this._ref.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfWidth",{get:function(){return this.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfHeight",{get:function(){return this.height/2},enumerable:!0,configurable:!0}),e}();t.CollisionMask=e}(Phaser||(Phaser={}));var __extends=this.__extends||function(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i},Phaser;!function(t){var e=function(e){function i(n,s,o,r,h){"undefined"==typeof s&&(s=0),"undefined"==typeof o&&(o=0),"undefined"==typeof r&&(r=16),"undefined"==typeof h&&(h=16),e.call(this,n),this._angle=0,this.outOfBoundsAction=0,this.z=0,this.rotationOffset=0,this.renderRotation=!0,this.moves=!0,this.inputEnabled=!1,this._inputOver=!1,this.canvas=n.stage.canvas,this.context=n.stage.context,this.frameBounds=new t.Rectangle(s,o,r,h),this.exists=!0,this.active=!0,this.visible=!0,this.alive=!0,this.isGroup=!1,this.alpha=1,this.scale=new t.MicroPoint(1,1),this.last=new t.MicroPoint(s,o),this.align=i.ALIGN_TOP_LEFT,this.mass=1,this.elasticity=0,this.health=1,this.immovable=!1,this.moves=!0,this.worldBounds=null,this.touching=t.Collision.NONE,this.wasTouching=t.Collision.NONE,this.allowCollisions=t.Collision.ANY,this.velocity=new t.MicroPoint,this.acceleration=new t.MicroPoint,this.drag=new t.MicroPoint,this.maxVelocity=new t.MicroPoint(1e4,1e4),this.angle=0,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e4,this.cameraBlacklist=[],this.scrollFactor=new t.MicroPoint(1,1),this.collisionMask=new t.CollisionMask(n,this,s,o,r,h)}return __extends(i,e),i.ALIGN_TOP_LEFT=0,i.ALIGN_TOP_CENTER=1,i.ALIGN_TOP_RIGHT=2,i.ALIGN_CENTER_LEFT=3,i.ALIGN_CENTER=4,i.ALIGN_CENTER_RIGHT=5,i.ALIGN_BOTTOM_LEFT=6,i.ALIGN_BOTTOM_CENTER=7,i.ALIGN_BOTTOM_RIGHT=8,i.OUT_OF_BOUNDS_STOP=0,i.OUT_OF_BOUNDS_KILL=1,i.prototype.preUpdate=function(){this.last.x=this.frameBounds.x,this.last.y=this.frameBounds.y,this.collisionMask.preUpdate()},i.prototype.update=function(){},i.prototype.postUpdate=function(){this.moves&&this.updateMotion(),null!=this.worldBounds&&(this.outOfBoundsAction==i.OUT_OF_BOUNDS_KILL?(this.x<this.worldBounds.x||this.x>this.worldBounds.right||this.y<this.worldBounds.y||this.y>this.worldBounds.bottom)&&this.kill():(this.x<this.worldBounds.x?this.x=this.worldBounds.x:this.x>this.worldBounds.right&&(this.x=this.worldBounds.right),this.y<this.worldBounds.y?this.y=this.worldBounds.y:this.y>this.worldBounds.bottom&&(this.y=this.worldBounds.bottom))),this.collisionMask.update(),this.inputEnabled&&this.updateInput(),this.wasTouching=this.touching,this.touching=t.Collision.NONE},i.prototype.updateInput=function(){},i.prototype.updateMotion=function(){var t,e;e=(this._game.motion.computeVelocity(this.angularVelocity,this.angularAcceleration,this.angularDrag,this.maxAngular)-this.angularVelocity)/2,this.angularVelocity+=e,this._angle+=this.angularVelocity*this._game.time.elapsed,this.angularVelocity+=e,e=(this._game.motion.computeVelocity(this.velocity.x,this.acceleration.x,this.drag.x,this.maxVelocity.x)-this.velocity.x)/2,this.velocity.x+=e,t=this.velocity.x*this._game.time.elapsed,this.velocity.x+=e,this.frameBounds.x+=t,e=(this._game.motion.computeVelocity(this.velocity.y,this.acceleration.y,this.drag.y,this.maxVelocity.y)-this.velocity.y)/2,this.velocity.y+=e,t=this.velocity.y*this._game.time.elapsed,this.velocity.y+=e,this.frameBounds.y+=t},i.prototype.overlaps=function(t,e,i){if("undefined"==typeof e&&(e=!1),"undefined"==typeof i&&(i=null),t.isGroup){for(var n=!1,s=0,o=t.members;length>s;)this.overlaps(o[s++],e,i)&&(n=!0);return n}if(!e)return t.x+t.width>this.x&&t.x<this.x+this.width&&t.y+t.height>this.y&&t.y<this.y+this.height;null==i&&(i=this._game.camera);var r=t.getScreenXY(null,i);return this.getScreenXY(this._point,i),r.x+t.width>this._point.x&&r.x<this._point.x+this.width&&r.y+t.height>this._point.y&&r.y<this._point.y+this.height},i.prototype.overlapsAt=function(e,i,n,s,o){if("undefined"==typeof s&&(s=!1),"undefined"==typeof o&&(o=null),n.isGroup){for(var r=!1,h=0,a=n.members;length>h;)this.overlapsAt(e,i,a[h++],s,o)&&(r=!0);return r}if(!s)return n.x+n.width>e&&n.x<e+this.width&&n.y+n.height>i&&n.y<i+this.height;null==o&&(o=this._game.camera);var l=n.getScreenXY(null,t.Camera);return this._point.x=e-o.scroll.x*this.scrollFactor.x,this._point.y=i-o.scroll.y*this.scrollFactor.y,this._point.x+=this._point.x>0?1e-7:-1e-7,this._point.y+=this._point.y>0?1e-7:-1e-7,l.x+n.width>this._point.x&&l.x<this._point.x+this.width&&l.y+n.height>this._point.y&&l.y<this._point.y+this.height},i.prototype.overlapsPoint=function(t,e,i){if("undefined"==typeof e&&(e=!1),"undefined"==typeof i&&(i=null),!e)return t.x>this.x&&t.x<this.x+this.width&&t.y>this.y&&t.y<this.y+this.height;null==i&&(i=this._game.camera);var n=t.x-i.scroll.x,s=t.y-i.scroll.y;return this.getScreenXY(this._point,i),n>this._point.x&&n<this._point.x+this.width&&s>this._point.y&&s<this._point.y+this.height},i.prototype.onScreen=function(t){return"undefined"==typeof t&&(t=null),null==t&&(t=this._game.camera),this.getScreenXY(this._point,t),this._point.x+this.width>0&&this._point.x<t.width&&this._point.y+this.height>0&&this._point.y<t.height},i.prototype.getScreenXY=function(e,i){return"undefined"==typeof e&&(e=null),"undefined"==typeof i&&(i=null),null==e&&(e=new t.MicroPoint),null==i&&(i=this._game.camera),e.x=this.x-i.scroll.x*this.scrollFactor.x,e.y=this.y-i.scroll.y*this.scrollFactor.y,e.x+=e.x>0?1e-7:-1e-7,e.y+=e.y>0?1e-7:-1e-7,e},Object.defineProperty(i.prototype,"solid",{get:function(){return(this.allowCollisions&t.Collision.ANY)>t.Collision.NONE},set:function(e){this.allowCollisions=e?t.Collision.ANY:t.Collision.NONE},enumerable:!0,configurable:!0}),i.prototype.getMidpoint=function(e){return"undefined"==typeof e&&(e=null),null==e&&(e=new t.MicroPoint),e.copyFrom(this.frameBounds.center),e},i.prototype.reset=function(e,i){this.revive(),this.touching=t.Collision.NONE,this.wasTouching=t.Collision.NONE,this.x=e,this.y=i,this.last.x=e,this.last.y=i,this.velocity.x=0,this.velocity.y=0},i.prototype.isTouching=function(e){return(this.touching&e)>t.Collision.NONE},i.prototype.justTouched=function(e){return(this.touching&e)>t.Collision.NONE&&(this.wasTouching&e)<=t.Collision.NONE},i.prototype.hurt=function(t){this.health=this.health-t,this.health<=0&&this.kill()},i.prototype.setBounds=function(e,i,n,s){this.worldBounds=new t.Quad(e,i,n,s)},i.prototype.setBoundsFromWorld=function(t){"undefined"==typeof t&&(t=i.OUT_OF_BOUNDS_STOP),this.setBounds(this._game.world.bounds.x,this._game.world.bounds.y,this._game.world.bounds.width,this._game.world.bounds.height),this.outOfBoundsAction=t},i.prototype.hideFromCamera=function(t){-1==this.cameraBlacklist.indexOf(t.ID)&&this.cameraBlacklist.push(t.ID)},i.prototype.showToCamera=function(t){-1!==this.cameraBlacklist.indexOf(t.ID)&&this.cameraBlacklist.slice(this.cameraBlacklist.indexOf(t.ID),1)},i.prototype.clearCameraList=function(){this.cameraBlacklist.length=0},i.prototype.destroy=function(){},i.prototype.setPosition=function(t,e){this.x=t,this.y=e},Object.defineProperty(i.prototype,"x",{get:function(){return this.frameBounds.x},set:function(t){this.frameBounds.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.frameBounds.y},set:function(t){this.frameBounds.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this._angle},set:function(t){this._angle=this._game.math.wrap(t,360,0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=this._game.math.wrap(t,360,0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this.frameBounds.width},set:function(t){this.frameBounds.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.frameBounds.height},set:function(t){this.frameBounds.height=t},enumerable:!0,configurable:!0}),i}(t.Basic);t.GameObject=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e,i,n,s,o,r){this._clip=!1,this._rotation=0,this._target=null,this._sx=0,this._sy=0,this.scale=new t.MicroPoint(1,1),this.scroll=new t.MicroPoint(0,0),this.bounds=null,this.deadzone=null,this.disableClipping=!1,this.showBorder=!1,this.borderColor="rgb(255,255,255)",this.opaque=!1,this.clear=!1,this._bgColor="rgb(0,0,0)",this._bgTextureRepeat="repeat",this.showShadow=!1,this.shadowColor="rgb(0,0,0)",this.shadowBlur=10,this.shadowOffset=new t.MicroPoint(4,4),this.visible=!0,this.alpha=1,this.inputX=0,this.inputY=0,this._game=e,this.ID=i,this._stageX=n,this._stageY=s,this.fx=new t.FXManager(this._game,this),this.worldView=new t.Rectangle(0,0,o,r),this.checkClip()}return e.STYLE_LOCKON=0,e.STYLE_PLATFORMER=1,e.STYLE_TOPDOWN=2,e.STYLE_TOPDOWN_TIGHT=3,e.prototype.follow=function(i,n){"undefined"==typeof n&&(n=e.STYLE_LOCKON),this._target=i;var s;switch(n){case e.STYLE_PLATFORMER:var o=this.width/8,r=this.height/3;this.deadzone=new t.Rectangle((this.width-o)/2,(this.height-r)/2-.25*r,o,r);break;case e.STYLE_TOPDOWN:s=Math.max(this.width,this.height)/4,this.deadzone=new t.Rectangle((this.width-s)/2,(this.height-s)/2,s,s);break;case e.STYLE_TOPDOWN_TIGHT:s=Math.max(this.width,this.height)/8,this.deadzone=new t.Rectangle((this.width-s)/2,(this.height-s)/2,s,s);break;case e.STYLE_LOCKON:default:this.deadzone=null}},e.prototype.focusOnXY=function(t,e){t+=t>0?1e-7:-1e-7,e+=e>0?1e-7:-1e-7,this.scroll.x=Math.round(t-this.worldView.halfWidth),this.scroll.y=Math.round(e-this.worldView.halfHeight)},e.prototype.focusOn=function(t){t.x+=t.x>0?1e-7:-1e-7,t.y+=t.y>0?1e-7:-1e-7,this.scroll.x=Math.round(t.x-this.worldView.halfWidth),this.scroll.y=Math.round(t.y-this.worldView.halfHeight)},e.prototype.setBounds=function(e,i,n,s){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=0),null==this.bounds&&(this.bounds=new t.Rectangle),this.bounds.setTo(e,i,n,s),this.scroll.setTo(0,0),this.update()},e.prototype.update=function(){if(this.fx.preUpdate(),null!==this._target)if(null==this.deadzone)this.focusOnXY(this._target.x,this._target.y);else{var t,e=this._target.x+(this._target.x>0?1e-7:-1e-7),i=this._target.y+(this._target.y>0?1e-7:-1e-7);t=e-this.deadzone.x,this.scroll.x>t&&(this.scroll.x=t),t=e+this._target.width-this.deadzone.x-this.deadzone.width,this.scroll.x<t&&(this.scroll.x=t),t=i-this.deadzone.y,this.scroll.y>t&&(this.scroll.y=t),t=i+this._target.height-this.deadzone.y-this.deadzone.height,this.scroll.y<t&&(this.scroll.y=t)}null!==this.bounds&&(this.scroll.x<this.bounds.left&&(this.scroll.x=this.bounds.left),this.scroll.x>this.bounds.right-this.width&&(this.scroll.x=this.bounds.right-this.width+1),this.scroll.y<this.bounds.top&&(this.scroll.y=this.bounds.top),this.scroll.y>this.bounds.bottom-this.height&&(this.scroll.y=this.bounds.bottom-this.height+1)),this.worldView.x=this.scroll.x,this.worldView.y=this.scroll.y,this.inputX=this.worldView.x+this._game.input.x,this.inputY=this.worldView.y+this._game.input.y,this.fx.postUpdate()},e.prototype.render=function(){this.visible===!1||this.alpha<.1||((0!==this._rotation||this._clip||1!==this.scale.x||1!==this.scale.y)&&this._game.stage.context.save(),this.fx.preRender(this,this._stageX,this._stageY,this.worldView.width,this.worldView.height),1!==this.alpha&&(this._game.stage.context.globalAlpha=this.alpha),this._sx=this._stageX,this._sy=this._stageY,1==this.showShadow&&(this._game.stage.context.shadowColor=this.shadowColor,this._game.stage.context.shadowBlur=this.shadowBlur,this._game.stage.context.shadowOffsetX=this.shadowOffset.x,this._game.stage.context.shadowOffsetY=this.shadowOffset.y),(1!==this.scale.x||1!==this.scale.y)&&(this._game.stage.context.scale(this.scale.x,this.scale.y),this._sx=this._sx/this.scale.x,this._sy=this._sy/this.scale.y),0!==this._rotation&&(this._game.stage.context.translate(this._sx+this.worldView.halfWidth,this._sy+this.worldView.halfHeight),this._game.stage.context.rotate(this._rotation*(Math.PI/180)),this._game.stage.context.translate(-(this._sx+this.worldView.halfWidth),-(this._sy+this.worldView.halfHeight))),1==this.clear&&this._game.stage.context.clearRect(this._sx,this._sy,this.worldView.width,this.worldView.height),1==this.opaque&&(this._bgTexture?(this._game.stage.context.fillStyle=this._bgTexture,this._game.stage.context.fillRect(this._sx,this._sy,this.worldView.width,this.worldView.height)):(this._game.stage.context.fillStyle=this._bgColor,this._game.stage.context.fillRect(this._sx,this._sy,this.worldView.width,this.worldView.height))),1==this.showShadow&&(this._game.stage.context.shadowBlur=0,this._game.stage.context.shadowOffsetX=0,this._game.stage.context.shadowOffsetY=0),this.fx.render(this,this._stageX,this._stageY,this.worldView.width,this.worldView.height),1==this._clip&&0==this.disableClipping&&(this._game.stage.context.beginPath(),this._game.stage.context.rect(this._sx,this._sy,this.worldView.width,this.worldView.height),this._game.stage.context.closePath(),this._game.stage.context.clip()),this._game.world.group.render(this,this._sx,this._sy),1==this.showBorder&&(this._game.stage.context.strokeStyle=this.borderColor,this._game.stage.context.lineWidth=1,this._game.stage.context.rect(this._sx,this._sy,this.worldView.width,this.worldView.height),this._game.stage.context.stroke()),(1!==this.scale.x||1!==this.scale.y)&&this._game.stage.context.scale(1,1),this.fx.postRender(this,this._sx,this._sy,this.worldView.width,this.worldView.height),(0!==this._rotation||this._clip&&0==this.disableClipping)&&this._game.stage.context.translate(0,0),(0!==this._rotation||this._clip||1!==this.scale.x||1!==this.scale.y)&&this._game.stage.context.restore(),1!==this.alpha&&(this._game.stage.context.globalAlpha=1))},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._bgColor},set:function(t){this._bgColor=t},enumerable:!0,configurable:!0}),e.prototype.setTexture=function(t,e){"undefined"==typeof e&&(e="repeat"),this._bgTexture=this._game.stage.context.createPattern(this._game.cache.getImage(t),e),this._bgTextureRepeat=e},e.prototype.setPosition=function(t,e){this._stageX=t,this._stageY=e,this.checkClip()},e.prototype.setSize=function(t,e){this.worldView.width=t,this.worldView.height=e,this.checkClip()},e.prototype.renderDebugInfo=function(t,e,i){"undefined"==typeof i&&(i="rgb(255,255,255)"),this._game.stage.context.fillStyle=i,this._game.stage.context.fillText("Camera ID: "+this.ID+" ("+this.worldView.width+" x "+this.worldView.height+")",t,e),this._game.stage.context.fillText("X: "+this._stageX+" Y: "+this._stageY+" Rotation: "+this._rotation,t,e+14),this._game.stage.context.fillText("World X: "+this.scroll.x.toFixed(1)+" World Y: "+this.scroll.y.toFixed(1),t,e+28),this.bounds&&this._game.stage.context.fillText("Bounds: "+this.bounds.width+" x "+this.bounds.height,t,e+56)},Object.defineProperty(e.prototype,"x",{get:function(){return this._stageX},set:function(t){this._stageX=t,this.checkClip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._stageY},set:function(t){this._stageY=t,this.checkClip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.worldView.width},set:function(t){t>this._game.stage.width&&(t=this._game.stage.width),this.worldView.width=t,this.checkClip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.worldView.height},set:function(t){t>this._game.stage.height&&(t=this._game.stage.height),this.worldView.height=t,this.checkClip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=this._game.math.wrap(t,360,0)},enumerable:!0,configurable:!0}),e.prototype.checkClip=function(){this._clip=0!==this._stageX||0!==this._stageY||this.worldView.width<this._game.stage.width||this.worldView.height<this._game.stage.height?!0:!1},e}();t.Camera=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(e){function i(i,n,s,o){"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=0),"undefined"==typeof o&&(o=null),e.call(this,i,n,s),this._dynamicTexture=!1,this._sx=0,this._sy=0,this._sw=0,this._sh=0,this._dx=0,this._dy=0,this._dw=0,this._dh=0,this.renderDebug=!1,this.fillColor="rgb(255,255,255)",this.renderDebugColor="rgba(0,255,0,0.5)",this.renderDebugPointColor="rgba(255,255,255,1)",this.flipped=!1,this._texture=null,this.animations=new t.AnimationManager(this._game,this),null!==o?(this.cacheKey=o,this.loadGraphic(o)):(this.frameBounds.width=16,this.frameBounds.height=16)}return __extends(i,e),i.prototype.loadGraphic=function(t,e){return"undefined"==typeof e&&(e=!0),e&&null!==this.animations.frameData&&this.animations.destroy(),null!==this._game.cache.getImage(t)&&(0==this._game.cache.isSpriteSheet(t)?(this._texture=this._game.cache.getImage(t),this.frameBounds.width=this._texture.width,this.frameBounds.height=this._texture.height,this.collisionMask.width=this._texture.width,this.collisionMask.height=this._texture.height):(this._texture=this._game.cache.getImage(t),this.animations.loadFrameData(this._game.cache.getFrameData(t)),this.collisionMask.width=this.animations.currentFrame.width,this.collisionMask.height=this.animations.currentFrame.height),this._dynamicTexture=!1),this},i.prototype.loadDynamicTexture=function(t){return this._texture=t,this.frameBounds.width=this._texture.width,this.frameBounds.height=this._texture.height,this._dynamicTexture=!0,this},i.prototype.makeGraphic=function(t,e,i){return"undefined"==typeof i&&(i="rgb(255,255,255)"),this._texture=null,this.width=t,this.height=e,this.fillColor=i,this._dynamicTexture=!1,this},i.prototype.inCamera=function(t){return 0==this.scrollFactor.x&&0==this.scrollFactor.y?!0:(this._dx=this.frameBounds.x-t.x,this._dy=this.frameBounds.y-t.y,this._dw=this.frameBounds.width*this.scale.x,this._dh=this.frameBounds.height*this.scale.y,t.right>this._dx&&t.x<this._dx+this._dw&&t.bottom>this._dy&&t.y<this._dy+this._dh)},i.prototype.postUpdate=function(){this.animations.update(),e.prototype.postUpdate.call(this)},Object.defineProperty(i.prototype,"frame",{get:function(){return this.animations.frame},set:function(t){this.animations.frame=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frameName",{get:function(){return this.animations.frameName},set:function(t){this.animations.frameName=t},enumerable:!0,configurable:!0}),i.prototype.render=function(e,i,n){if(0==this.visible||0==this.scale.x||0==this.scale.y||this.alpha<.1||-1!==this.cameraBlacklist.indexOf(e.ID)||0==this.inCamera(e.worldView,i,n))return!1;if(1!==this.alpha){var s=this.context.globalAlpha;this.context.globalAlpha=this.alpha}return this._sx=0,this._sy=0,this._sw=this.frameBounds.width,this._sh=this.frameBounds.height,this._dx=i*this.scrollFactor.x+this.frameBounds.topLeft.x-e.worldView.x*this.scrollFactor.x,this._dy=n*this.scrollFactor.y+this.frameBounds.topLeft.y-e.worldView.y*this.scrollFactor.y,this._dw=this.frameBounds.width*this.scale.x,this._dh=this.frameBounds.height*this.scale.y,this.align==t.GameObject.ALIGN_TOP_CENTER?this._dx-=this.frameBounds.halfWidth*this.scale.x:this.align==t.GameObject.ALIGN_TOP_RIGHT?this._dx-=this.frameBounds.width*this.scale.x:this.align==t.GameObject.ALIGN_CENTER_LEFT?this._dy-=this.frameBounds.halfHeight*this.scale.y:this.align==t.GameObject.ALIGN_CENTER?(this._dx-=this.frameBounds.halfWidth*this.scale.x,this._dy-=this.frameBounds.halfHeight*this.scale.y):this.align==t.GameObject.ALIGN_CENTER_RIGHT?(this._dx-=this.frameBounds.width*this.scale.x,this._dy-=this.frameBounds.halfHeight*this.scale.y):this.align==t.GameObject.ALIGN_BOTTOM_LEFT?this._dy-=this.frameBounds.height*this.scale.y:this.align==t.GameObject.ALIGN_BOTTOM_CENTER?(this._dx-=this.frameBounds.halfWidth*this.scale.x,this._dy-=this.frameBounds.height*this.scale.y):this.align==t.GameObject.ALIGN_BOTTOM_RIGHT&&(this._dx-=this.frameBounds.width*this.scale.x,this._dy-=this.frameBounds.height*this.scale.y),0==this._dynamicTexture&&null!==this.animations.currentFrame&&(this._sx=this.animations.currentFrame.x,this._sy=this.animations.currentFrame.y,this.animations.currentFrame.trimmed&&(this._dx+=this.animations.currentFrame.spriteSourceSizeX,this._dy+=this.animations.currentFrame.spriteSourceSizeY)),1!==this.scrollFactor.x||1!==this.scrollFactor.y,(0!==this.angle||0!==this.rotationOffset||1==this.flipped)&&(this.context.save(),this.context.translate(this._dx+this._dw/2,this._dy+this._dh/2),1!=this.renderRotation||0===this.angle&&0===this.rotationOffset||this.context.rotate((this.rotationOffset+this.angle)*(Math.PI/180)),this._dx=-(this._dw/2),this._dy=-(this._dh/2),1==this.flipped&&this.context.scale(-1,1)),this._sx=Math.round(this._sx),this._sy=Math.round(this._sy),this._sw=Math.round(this._sw),this._sh=Math.round(this._sh),this._dx=Math.round(this._dx),this._dy=Math.round(this._dy),this._dw=Math.round(this._dw),this._dh=Math.round(this._dh),null!=this._texture?this._dynamicTexture?this.context.drawImage(this._texture.canvas,this._sx,this._sy,this._sw,this._sh,this._dx,this._dy,this._dw,this._dh):this.context.drawImage(this._texture,this._sx,this._sy,this._sw,this._sh,this._dx,this._dy,this._dw,this._dh):(this.context.fillStyle=this.fillColor,this.context.fillRect(this._dx,this._dy,this._dw,this._dh)),(this.flipped===!0||0!==this.rotation||0!==this.rotationOffset)&&this.context.restore(),this.renderDebug&&this.renderBounds(e,i,n),s>-1&&(this.context.globalAlpha=s),!0},i.prototype.renderBounds=function(t,e,i){this._dx=e+(this.frameBounds.topLeft.x-t.worldView.x),this._dy=i+(this.frameBounds.topLeft.y-t.worldView.y),this.context.fillStyle=this.renderDebugColor,this.context.fillRect(this._dx,this._dy,this.frameBounds.width,this.frameBounds.height)},i.prototype.renderDebugInfo=function(t,e,i){"undefined"==typeof i&&(i="rgb(255,255,255)"),this.context.fillStyle=i,this.context.fillText("Sprite: "+this.name+" ("+this.frameBounds.width+" x "+this.frameBounds.height+")",t,e),this.context.fillText("x: "+this.frameBounds.x.toFixed(1)+" y: "+this.frameBounds.y.toFixed(1)+" rotation: "+this.angle.toFixed(1),t,e+14),this.context.fillText("dx: "+this._dx.toFixed(1)+" dy: "+this._dy.toFixed(1)+" dw: "+this._dw.toFixed(1)+" dh: "+this._dh.toFixed(1),t,e+28),this.context.fillText("sx: "+this._sx.toFixed(1)+" sy: "+this._sy.toFixed(1)+" sw: "+this._sw.toFixed(1)+" sh: "+this._sh.toFixed(1),t,e+42)
},i}(t.GameObject);t.Sprite=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t,e,i,n,s,o,r){this._game=t,this._parent=e,this._frames=s,this._frameData=i,this.name=n,this.delay=1e3/o,this.looped=r,this.isFinished=!1,this.isPlaying=!1,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex])}return Object.defineProperty(t.prototype,"frameTotal",{get:function(){return this._frames.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return null!==this.currentFrame?this.currentFrame.index:this._frameIndex},set:function(t){this.currentFrame=this._frameData.getFrame(t),null!==this.currentFrame&&(this._parent.frameBounds.width=this.currentFrame.width,this._parent.frameBounds.height=this.currentFrame.height,this._frameIndex=t)},enumerable:!0,configurable:!0}),t.prototype.play=function(t,e){"undefined"==typeof t&&(t=null),null!==t&&(this.delay=1e3/t),void 0!==e&&(this.looped=e),this.isPlaying=!0,this.isFinished=!1,this._timeLastFrame=this._game.time.now,this._timeNextFrame=this._game.time.now+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex])},t.prototype.restart=function(){this.isPlaying=!0,this.isFinished=!1,this._timeLastFrame=this._game.time.now,this._timeNextFrame=this._game.time.now+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex])},t.prototype.stop=function(){this.isPlaying=!1,this.isFinished=!0},t.prototype.update=function(){return 1==this.isPlaying&&this._game.time.now>=this._timeNextFrame?(this._frameIndex++,this._frameIndex==this._frames.length?this.looped?(this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex])):this.onComplete():this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this._timeLastFrame=this._game.time.now,this._timeNextFrame=this._game.time.now+this.delay,!0):!1},t.prototype.destroy=function(){this._game=null,this._parent=null,this._frames=null,this._frameData=null,this.currentFrame=null,this.isPlaying=!1},t.prototype.onComplete=function(){this.isPlaying=!1,this.isFinished=!0},t}();t.Animation=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(){}return e.parseSpriteSheet=function(e,i,n,s,o){var r=e.cache.getImage(i);if(null==r)return null;var h=r.width,a=r.height,l=Math.round(h/n),u=Math.round(a/s),c=l*u;if(-1!==o&&(c=o),0==h||0==a||n>h||s>a||0===c)return null;for(var p=new t.FrameData,d=0,f=0,y=0;c>y;y++)p.addFrame(new t.Frame(d,f,n,s,"")),d+=n,d===h&&(d=0,f+=s);return p},e.parseJSONData=function(e,i){if(!i.frames)throw new Error("Phaser.AnimationLoader.parseJSONData: Invalid Texture Atlas JSON given, missing 'frames' array");for(var n,s=new t.FrameData,o=i,r=0;r<o.length;r++)n=s.addFrame(new t.Frame(o[r].frame.x,o[r].frame.y,o[r].frame.w,o[r].frame.h,o[r].filename)),n.setTrim(o[r].trimmed,o[r].sourceSize.w,o[r].sourceSize.h,o[r].spriteSourceSize.x,o[r].spriteSourceSize.y,o[r].spriteSourceSize.w,o[r].spriteSourceSize.h);return s},e.parseXMLData=function(e,i){if(!i.getElementsByTagName("TextureAtlas"))throw new Error("Phaser.AnimationLoader.parseXMLData: Invalid Texture Atlas XML given, missing <TextureAtlas> tag");for(var n,s=new t.FrameData,o=i.getElementsByTagName("SubTexture"),r=0;r<o.length;r++){var h=o[r].attributes;n=s.addFrame(new t.Frame(h.x.nodeValue,h.y.nodeValue,h.width.nodeValue,h.height.nodeValue,h.name.nodeValue)),("-0"!=h.frameX.nodeValue||"-0"!=h.frameY.nodeValue)&&n.setTrim(!0,h.width.nodeValue,h.height.nodeValue,Math.abs(h.frameX.nodeValue),Math.abs(h.frameY.nodeValue),h.frameWidth.nodeValue,h.frameHeight.nodeValue)}return s},e}();t.AnimationLoader=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t,e,i,n,s){this.name="",this.rotated=!1,this.rotationDirection="cw",this.x=t,this.y=e,this.width=i,this.height=n,this.name=s,this.rotated=!1,this.trimmed=!1}return t.prototype.setRotation=function(){},t.prototype.setTrim=function(t,e,i,n,s,o,r){this.trimmed=t,this.sourceSizeW=e,this.sourceSizeH=i,this.spriteSourceSizeX=n,this.spriteSourceSizeY=s,this.spriteSourceSizeW=o,this.spriteSourceSizeH=r},t}();t.Frame=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(){this._frames=[],this._frameNames=[]}return Object.defineProperty(t.prototype,"total",{get:function(){return this._frames.length},enumerable:!0,configurable:!0}),t.prototype.addFrame=function(t){return t.index=this._frames.length,this._frames.push(t),""!==t.name&&(this._frameNames[t.name]=t.index),t},t.prototype.getFrame=function(t){return this._frames[t]?this._frames[t]:null},t.prototype.getFrameByName=function(t){return this._frameNames[t]>=0?this._frames[this._frameNames[t]]:null},t.prototype.checkFrameName=function(t){return this._frameNames[t]>=0?!0:!1},t.prototype.getFrameRange=function(t,e,i){"undefined"==typeof i&&(i=[]);for(var n=t;e>=n;n++)i.push(this._frames[n]);return i},t.prototype.getFrameIndexes=function(t){"undefined"==typeof t&&(t=[]),t.length=0;for(var e=0;e<this._frames.length;e++)t.push(e);return t},t.prototype.getFrameIndexesByName=function(t){for(var e=[],i=0;i<t.length;i++)this.getFrameByName(t[i])&&e.push(this.getFrameByName(t[i]).index);return e},t.prototype.getAllFrames=function(){return this._frames},t.prototype.getFrames=function(t){for(var e=[],i=0;i<t.length;i++)e.push(this._frames[i]);return e},t}();t.FrameData=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(t,e){this._frameData=null,this.currentFrame=null,this._game=t,this._parent=e,this._anims={}}return e.prototype.loadFrameData=function(t){this._frameData=t,this.frame=0},e.prototype.add=function(e,i,n,s,o){if("undefined"==typeof i&&(i=null),"undefined"==typeof n&&(n=60),"undefined"==typeof s&&(s=!1),"undefined"==typeof o&&(o=!0),null!=this._frameData){if(null==i)i=this._frameData.getFrameIndexes();else if(0==this.validateFrames(i,o))throw Error("Invalid frames given to Animation "+e);return 0==o&&(i=this._frameData.getFrameIndexesByName(i)),this._anims[e]=new t.Animation(this._game,this._parent,this._frameData,e,i,n,s),this.currentAnim=this._anims[e],this.currentFrame=this.currentAnim.currentFrame,this._anims[e]}},e.prototype.validateFrames=function(t,e){for(var i=0;i<t.length;i++)if(1==e){if(t[i]>this._frameData.total)return!1}else if(0==this._frameData.checkFrameName(t[i]))return!1;return!0},e.prototype.play=function(t,e,i){"undefined"==typeof e&&(e=null),this._anims[t]&&(this.currentAnim==this._anims[t]?0==this.currentAnim.isPlaying&&this.currentAnim.play(e,i):(this.currentAnim=this._anims[t],this.currentAnim.play(e,i)))},e.prototype.stop=function(t){this._anims[t]&&(this.currentAnim=this._anims[t],this.currentAnim.stop())},e.prototype.update=function(){this.currentAnim&&1==this.currentAnim.update()&&(this.currentFrame=this.currentAnim.currentFrame,this._parent.frameBounds.width=this.currentFrame.width,this._parent.frameBounds.height=this.currentFrame.height)},Object.defineProperty(e.prototype,"frameData",{get:function(){return this._frameData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameTotal",{get:function(){return this._frameData?this._frameData.total:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frameIndex},set:function(t){null!==this._frameData.getFrame(t)&&(this.currentFrame=this._frameData.getFrame(t),this._parent.frameBounds.width=this.currentFrame.width,this._parent.frameBounds.height=this.currentFrame.height,this._frameIndex=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameName",{get:function(){return this.currentFrame.name},set:function(t){null!==this._frameData.getFrameByName(t)&&(this.currentFrame=this._frameData.getFrameByName(t),this._parent.frameBounds.width=this.currentFrame.width,this._parent.frameBounds.height=this.currentFrame.height,this._frameIndex=this.currentFrame.index)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._anims={},this._frameData=null,this._frameIndex=0,this.currentAnim=null,this.currentFrame=null},e}();t.AnimationManager=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(t){this._game=t,this._canvases={},this._images={},this._sounds={},this._text={}}return e.prototype.addCanvas=function(t,e,i){this._canvases[t]={canvas:e,context:i}},e.prototype.addSpriteSheet=function(e,i,n,s,o,r){this._images[e]={url:i,data:n,spriteSheet:!0,frameWidth:s,frameHeight:o},this._images[e].frameData=t.AnimationLoader.parseSpriteSheet(this._game,e,s,o,r)},e.prototype.addTextureAtlas=function(e,i,n,s,o){this._images[e]={url:i,data:n,spriteSheet:!0},o==t.Loader.TEXTURE_ATLAS_JSON_ARRAY?this._images[e].frameData=t.AnimationLoader.parseJSONData(this._game,s):o==t.Loader.TEXTURE_ATLAS_XML_STARLING&&(this._images[e].frameData=t.AnimationLoader.parseXMLData(this._game,s,o))},e.prototype.addImage=function(t,e,i){this._images[t]={url:e,data:i,spriteSheet:!1}},e.prototype.addSound=function(t,e,i){this._sounds[t]={url:e,data:i,decoded:!1}},e.prototype.decodedSound=function(t,e){this._sounds[t].data=e,this._sounds[t].decoded=!0},e.prototype.addText=function(t,e,i){this._text[t]={url:e,data:i}},e.prototype.getCanvas=function(t){return this._canvases[t]?this._canvases[t].canvas:null},e.prototype.getImage=function(t){return this._images[t]?this._images[t].data:null},e.prototype.getFrameData=function(t){return this._images[t]&&1==this._images[t].spriteSheet?this._images[t].frameData:null},e.prototype.getSound=function(t){return this._sounds[t]?this._sounds[t].data:null},e.prototype.isSoundDecoded=function(t){return this._sounds[t]?this._sounds[t].decoded:void 0},e.prototype.isSpriteSheet=function(t){return this._images[t]?this._images[t].spriteSheet:void 0},e.prototype.getText=function(t){return this._text[t]?this._text[t].data:null},e.prototype.destroy=function(){for(var t in this._canvases)delete this._canvases[t.key];for(var t in this._images)delete this._images[t.key];for(var t in this._sounds)delete this._sounds[t.key];for(var t in this._text)delete this._text[t.key]},e}();t.Cache=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(t,e,i,n,s){this._cameraInstance=0,this._game=t,this._cameras=[],this.current=this.addCamera(e,i,n,s)}return e.prototype.getAll=function(){return this._cameras},e.prototype.update=function(){this._cameras.forEach(function(t){return t.update()})},e.prototype.render=function(){this._cameras.forEach(function(t){return t.render()})},e.prototype.addCamera=function(e,i,n,s){var o=new t.Camera(this._game,this._cameraInstance,e,i,n,s);return this._cameras.push(o),this._cameraInstance++,o},e.prototype.removeCamera=function(t){for(var e=0;e<this._cameras.length;e++)if(this._cameras[e].ID==t)return this.current.ID===this._cameras[e].ID&&(this.current=null),this._cameras.splice(e,1),!0;return!1},e.prototype.destroy=function(){this._cameras.length=0,this.current=this.addCamera(0,0,this._game.stage.width,this._game.stage.height)},e}();t.CameraManager=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(t,e){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),this.setTo(t,e)}return e.prototype.add=function(t,i){return"undefined"==typeof i&&(i=new e),i.setTo(this.x+t.x,this.y+t.y)},e.prototype.addTo=function(t,e){return"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),this.setTo(this.x+t,this.y+e)},e.prototype.subtractFrom=function(t,e){return"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),this.setTo(this.x-t,this.y-e)},e.prototype.invert=function(){return this.setTo(this.y,this.x)},e.prototype.clamp=function(t,e){return this.clampX(t,e),this.clampY(t,e),this},e.prototype.clampX=function(t,e){return this.x=Math.max(Math.min(this.x,e),t),this},e.prototype.clampY=function(t,e){return this.x=Math.max(Math.min(this.x,e),t),this.y=Math.max(Math.min(this.y,e),t),this},e.prototype.clone=function(t){return"undefined"==typeof t&&(t=new e),t.setTo(this.x,this.y)},e.prototype.copyFrom=function(t){return this.setTo(t.x,t.y)},e.prototype.copyTo=function(t){return t.setTo(this.x,this.y)},e.prototype.distanceTo=function(t,e){"undefined"==typeof e&&(e=!1);var i=this.x-t.x,n=this.y-t.y;return e===!0?Math.round(Math.sqrt(i*i+n*n)):Math.sqrt(i*i+n*n)},e.distanceBetween=function(t,e,i){"undefined"==typeof i&&(i=!1);var n=t.x-e.x,s=t.y-e.y;return i===!0?Math.round(Math.sqrt(n*n+s*s)):Math.sqrt(n*n+s*s)},e.prototype.distanceCompare=function(t,e){return this.distanceTo(t)>=e?!0:!1},e.prototype.equals=function(t){return this.x===t.x&&this.y===t.y?!0:!1},e.prototype.interpolate=function(){},e.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},e.prototype.polar=function(){},e.prototype.rotate=function(e,i,n,s,o){return"undefined"==typeof s&&(s=!1),"undefined"==typeof o&&(o=null),s&&(n*=t.GameMath.DEG_TO_RAD),null===o&&(o=Math.sqrt((e-this.x)*(e-this.x)+(i-this.y)*(i-this.y))),this.setTo(e+o*Math.cos(n),i+o*Math.sin(n))},e.prototype.setTo=function(t,e){return this.x=t,this.y=e,this},e.prototype.subtract=function(t,i){return"undefined"==typeof i&&(i=new e),i.setTo(this.x-t.x,this.y-t.y)},e.prototype.toString=function(){return"[{Point (x="+this.x+" y="+this.y+")}]"},e}();t.Point=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t,e,i){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=null),this._x=t,this._y=e,this.parent=i}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this.parent&&this.parent.updateBounds()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this.parent&&this.parent.updateBounds()},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){return this.setTo(t.x,t.y)},t.prototype.copyTo=function(t){return t.x=this._x,t.y=this._y,t},t.prototype.setTo=function(t,e,i){return"undefined"==typeof i&&(i=!0),this._x=t,this._y=e,null!=this.parent&&1==i&&this.parent.updateBounds(),this},t.prototype.equals=function(t){return this._x===t.x&&this._y===t.y?!0:!1},t.prototype.toString=function(){return"[{MicroPoint (x="+this._x+" y="+this._y+")}]"},t}();t.MicroPoint=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e,i,n,s){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=0),this._tempX=null,this._tempY=null,this._tempWidth=null,this._tempHeight=null,this._width=0,this._height=0,this._halfWidth=0,this._halfHeight=0,this.length=0,this._width=n,n>0&&(this._halfWidth=Math.round(n/2)),this._height=s,s>0&&(this._halfHeight=Math.round(s/2)),this.length=Math.max(this._width,this._height),this.topLeft=new t.MicroPoint(e,i,this),this.topCenter=new t.MicroPoint(e+this._halfWidth,i,this),this.topRight=new t.MicroPoint(e+this._width-1,i,this),this.leftCenter=new t.MicroPoint(e,i+this._halfHeight,this),this.center=new t.MicroPoint(e+this._halfWidth,i+this._halfHeight,this),this.rightCenter=new t.MicroPoint(e+this._width-1,i+this._halfHeight,this),this.bottomLeft=new t.MicroPoint(e,i+this._height-1,this),this.bottomCenter=new t.MicroPoint(e+this._halfWidth,i+this._height-1,this),this.bottomRight=new t.MicroPoint(e+this._width-1,i+this._height-1,this)}return Object.defineProperty(e.prototype,"x",{get:function(){return this.topLeft.x},set:function(t){this.topLeft.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.topLeft.y},set:function(t){this.topLeft.y=t},enumerable:!0,configurable:!0}),e.prototype.updateBounds=function(){null!==this._tempWidth&&(this._width=this._tempWidth,this._halfWidth=0,this._width>0&&(this._halfWidth=Math.round(this._width/2))),null!==this._tempHeight&&(this._height=this._tempHeight,this._halfHeight=0,this._height>0&&(this._halfHeight=Math.round(this._height/2))),this.length=Math.max(this._width,this._height),null!==this._tempX&&null!==this._tempY?this.topLeft.setTo(this._tempX,this._tempY,!1):null!==this._tempX&&null==this._tempY?this.topLeft.setTo(this._tempX,this.topLeft.y,!1):null==this._tempX&&null!==this._tempY?this.topLeft.setTo(this.topLeft.x,this._tempY,!1):this.topLeft.setTo(this.x,this.y,!1),this.topCenter.setTo(this.x+this._halfWidth,this.y,!1),this.topRight.setTo(this.x+this._width-1,this.y,!1),this.leftCenter.setTo(this.x,this.y+this._halfHeight,!1),this.center.setTo(this.x+this._halfWidth,this.y+this._halfHeight,!1),this.rightCenter.setTo(this.x+this._width-1,this.y+this._halfHeight,!1),this.bottomLeft.setTo(this.x,this.y+this._height-1,!1),this.bottomCenter.setTo(this.x+this._halfWidth,this.y+this._height-1,!1),this.bottomRight.setTo(this.x+this._width-1,this.y+this._height-1,!1),this._tempX=null,this._tempY=null,this._tempWidth=null,this._tempHeight=null},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._halfWidth=Math.round(t/2),this.updateBounds()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._halfHeight=Math.round(t/2),this.updateBounds()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfWidth",{get:function(){return this._halfWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfHeight",{get:function(){return this._halfHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.bottomCenter.y},set:function(t){this._tempHeight=t<this.y?0:this.y+t,this.updateBounds()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},set:function(t){var e=this.x-t;this._width+e<0?(this._tempWidth=0,this._tempX=t):(this._tempWidth=this._width+e,this._tempX=t),this.updateBounds()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.rightCenter.x},set:function(t){this._tempWidth=t<this.topLeft.x?0:t-this.topLeft.x,this.updateBounds()},enumerable:!0,configurable:!0}),e.prototype.size=function(e){return"undefined"==typeof e&&(e=new t.Point),e.setTo(this._width,this._height)},Object.defineProperty(e.prototype,"volume",{get:function(){return this._width*this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perimeter",{get:function(){return 2*this._width+2*this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.topCenter.y},set:function(t){var e=this.topCenter.y-t;this._height+e<0?(this._tempHeight=0,this._tempY=t):(this._tempHeight=this._height+e,this._tempY=t),this.updateBounds()},enumerable:!0,configurable:!0}),e.prototype.clone=function(t){return"undefined"==typeof t&&(t=new e),t.setTo(this.x,this.y,this.width,this.height)},e.prototype.contains=function(t,e){return t>=this.topLeft.x&&t<=this.topRight.x&&e>=this.topLeft.y&&e<=this.bottomRight.y?!0:!1},e.prototype.containsPoint=function(t){return this.contains(t.x,t.y)},e.prototype.containsRect=function(t){return t.volume>this.volume?!1:t.x>=this.topLeft.x&&t.y>=this.topLeft.y&&t.rightCenter.x<=this.rightCenter.x&&t.bottomCenter.y<=this.bottomCenter.y?!0:!1},e.prototype.copyFrom=function(t){return this.setTo(t.x,t.y,t.width,t.height)},e.prototype.copyTo=function(t){return t.copyFrom(this)},e.prototype.equals=function(t){return this.topLeft.equals(t.topLeft)&&this.bottomRight.equals(t.bottomRight)?!0:!1},e.prototype.inflate=function(t,e){return this._tempX=this.topLeft.x-t,this._tempWidth=this._width+2*t,this._tempY=this.topLeft.y-e,this._tempHeight=this._height+2*e,this.updateBounds(),this},e.prototype.inflatePoint=function(t){return this.inflate(t.x,t.y)},e.prototype.intersection=function(t,i){return"undefined"==typeof i&&(i=new e),this.intersects(t)===!0&&(i.x=Math.max(t.topLeft.x,this.topLeft.x),i.y=Math.max(t.topLeft.y,this.topLeft.y),i.width=Math.min(t.rightCenter.x,this.rightCenter.x)-i.x,i.height=Math.min(t.bottomCenter.y,this.bottomCenter.y)-i.y),i},e.prototype.intersects=function(t,e){return"undefined"==typeof e&&(e=0),!(t.left>this.right+e||t.right<this.left-e||t.top>this.bottom+e||t.bottom<this.top-e)},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.width<1||this.height<1?!0:!1},enumerable:!0,configurable:!0}),e.prototype.offset=function(t,e){return isNaN(t)||isNaN(e)||(this.x+=t,this.y+=e),this},e.prototype.offsetPoint=function(t){return this.offset(t.x,t.y)},e.prototype.setEmpty=function(){return this.setTo(0,0,0,0)},e.prototype.setTo=function(t,e,i,n){return this._tempX=t,this._tempY=e,this._tempWidth=i,this._tempHeight=n,this.updateBounds(),this},e.prototype.union=function(t,i){return"undefined"==typeof i&&(i=new e),i.setTo(Math.min(t.x,this.x),Math.min(t.y,this.y),Math.max(t.right,this.right),Math.max(t.bottom,this.bottom))},e.prototype.toString=function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.isEmpty+")}]"},e}();t.Rectangle=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e,i,n){"undefined"==typeof e&&(e=new t.Vector2),"undefined"==typeof i&&(i=[]),"undefined"==typeof n&&(n=null),this.pos=e,this.points=i,this.parent=n,this.recalc()}return e.prototype.recalc=function(){var e=this.points,i=e.length;this.edges=[],this.normals=[];for(var n=0;i>n;n++){var s=e[n],o=i-1>n?e[n+1]:e[0],r=(new t.Vector2).copyFrom(o).sub(s),h=(new t.Vector2).copyFrom(r).perp().normalize();this.edges.push(r),this.normals.push(h)}},e}();t.Polygon=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(t,e,i,n){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),this.setTo(t,e,i,n)}return e.prototype.setTo=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfWidth",{get:function(){return this.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfHeight",{get:function(){return this.height/2},enumerable:!0,configurable:!0}),e.prototype.intersects=function(t,e){return"undefined"==typeof e&&(e=0),!(t.left>this.right+e||t.right<this.left-e||t.top>this.bottom+e||t.bottom<this.top-e)},e.prototype.intersectsRaw=function(t,e,i,n,s){return"undefined"==typeof s&&(s=0),!(t>this.right+s||e<this.left-s||i>this.bottom+s||n<this.top-s)},e.prototype.contains=function(t,e){return t>=this.x&&t<=this.right&&e>=this.y&&e<=this.bottom?!0:!1},e.prototype.copyFrom=function(t){return this.setTo(t.x,t.y,t.width,t.height)},e.prototype.copyTo=function(t){return t.copyFrom(this)},e.prototype.toPolygon=function(){return new t.Polygon(new t.Vector2(this.x,this.y),[new t.Vector2,new t.Vector2(this.width,0),new t.Vector2(this.width,this.height),new t.Vector2(0,this.height)])},e.prototype.toString=function(){return"[{Quad (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]"},e}();t.Quad=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e,i,n){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),this._diameter=0,this._radius=0,this.x=0,this.y=0,this._pos=new t.Vector2,this.setTo(e,i,n)}return Object.defineProperty(e.prototype,"pos",{get:function(){return this._pos.setTo(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diameter",{get:function(){return this._diameter},set:function(t){t>0&&(this._diameter=t,this._radius=.5*t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){t>0&&(this._radius=t,this._diameter=2*t)},enumerable:!0,configurable:!0}),e.prototype.circumference=function(){return 2*Math.PI*this._radius},Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(t){isNaN(t)||(t<this.y?(this._radius=0,this._diameter=0):this.radius=t-this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x-this._radius},set:function(t){isNaN(t)||(t<this.x?this.radius=this.x-t:(this._radius=0,this._diameter=0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this._radius},set:function(t){isNaN(t)||(t>this.x?this.radius=t-this.x:(this._radius=0,this._diameter=0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y-this._radius},set:function(t){isNaN(t)||(t>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this._radius>0?Math.PI*this._radius*this._radius:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._diameter<=0?!0:!1},enumerable:!0,configurable:!0}),e.prototype.intersectCircleLine=function(e){return t.Collision.lineToCircle(e,this).result},e.prototype.clone=function(t){return"undefined"==typeof t&&(t=new e),t.setTo(this.x,this.y,this._diameter)},e.prototype.contains=function(e,i){return t.Collision.circleContainsPoint(this,{x:e,y:i}).result},e.prototype.containsPoint=function(e){return t.Collision.circleContainsPoint(this,e).result},e.prototype.containsCircle=function(e){return t.Collision.circleToCircle(this,e).result},e.prototype.copyFrom=function(t){return this.setTo(t.x,t.y,t.diameter)},e.prototype.copyTo=function(t){return t.copyFrom(this)},e.prototype.distanceTo=function(t,e){"undefined"==typeof e&&(e=!1);var i=this.x-t.x,n=this.y-t.y;return e===!0?Math.round(Math.sqrt(i*i+n*n)):Math.sqrt(i*i+n*n)},e.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.diameter===t.diameter?!0:!1},e.prototype.intersects=function(t){return this.distanceTo(t,!1)<this._radius+t._radius?!0:!1},e.prototype.circumferencePoint=function(e,i,n){return"undefined"==typeof i&&(i=!1),"undefined"==typeof n&&(n=new t.Point),i===!0&&(e*=t.GameMath.DEG_TO_RAD),n.x=this.x+this._radius*Math.cos(e),n.y=this.y+this._radius*Math.sin(e),n},e.prototype.offset=function(t,e){return isNaN(t)||isNaN(e)||(this.x+=t,this.y+=e),this},e.prototype.offsetPoint=function(t){return this.offset(t.x,t.y)},e.prototype.setTo=function(t,e,i){return this.x=t,this.y=e,this._diameter=i,this._radius=.5*i,this},e.prototype.toString=function(){return"[{Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"},e}();t.Circle=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t,e,i,n){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.setTo(t,e,i,n)}return t.prototype.clone=function(e){return"undefined"==typeof e&&(e=new t),e.setTo(this.x1,this.y1,this.x2,this.y2)},t.prototype.copyFrom=function(t){return this.setTo(t.x1,t.y1,t.x2,t.y2)},t.prototype.copyTo=function(t){return t.copyFrom(this)},t.prototype.setTo=function(t,e,i,n){return"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),this.x1=t,this.y1=e,this.x2=i,this.y2=n,this},Object.defineProperty(t.prototype,"width",{get:function(){return Math.max(this.x1,this.x2)-Math.min(this.x1,this.x2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.max(this.y1,this.y2)-Math.min(this.y1,this.y2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt((this.x2-this.x1)*(this.x2-this.x1)+(this.y2-this.y1)*(this.y2-this.y1))},enumerable:!0,configurable:!0}),t.prototype.getY=function(t){return this.slope*t+this.yIntercept},Object.defineProperty(t.prototype,"angle",{get:function(){return Math.atan2(this.x2-this.x1,this.y2-this.y1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slope",{get:function(){return(this.y2-this.y1)/(this.x2-this.x1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"perpSlope",{get:function(){return-((this.x2-this.x1)/(this.y2-this.y1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yIntercept",{get:function(){return this.y1-this.slope*this.x1},enumerable:!0,configurable:!0}),t.prototype.isPointOnLine=function(t,e){return(t-this.x1)*(this.y2-this.y1)===(this.x2-this.x1)*(e-this.y1)?!0:!1},t.prototype.isPointOnLineSegment=function(t,e){var i=Math.min(this.x1,this.x2),n=Math.max(this.x1,this.x2),s=Math.min(this.y1,this.y2),o=Math.max(this.y1,this.y2);return this.isPointOnLine(t,e)&&t>=i&&n>=t&&e>=s&&o>=e?!0:!1},t.prototype.intersectLineLine=function(){},t.prototype.perp=function(e,i,n){if(this.y1===this.y2){if(!n)return new t(e,i,e,this.y1);n.setTo(e,i,e,this.y1)}var s=i-this.perpSlope*e,o=this.intersectLineLine({x1:e,y1:i,x2:0,y2:s});return n?void n.setTo(e,i,o.x,o.y):new t(e,i,o.x,o.y)},t.prototype.toString=function(){return"[{Line (x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+")}]"},t}();t.Line=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(){this.result=!1}return t.prototype.setTo=function(t,e,i,n,s,o){"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=0),"undefined"==typeof o&&(o=0),this.x=t,this.y=e,this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.width=s,this.height=o},t}();t.IntersectResult=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(){this.a=null,this.b=null,this.overlapN=new t.Vector2,this.overlapV=new t.Vector2,this.clear()}return e.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this},e}();t.Response=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t,e){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),this.x=t,this.y=e}return t.prototype.setTo=function(t,e){return this.x=t,this.y=e,this},t.prototype.add=function(e,i){return"undefined"==typeof i&&(i=new t),i.setTo(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e,i){return"undefined"==typeof i&&(i=new t),i.setTo(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e,i){return"undefined"==typeof i&&(i=new t),i.setTo(this.x*e.x,this.y*e.y)},t.prototype.div=function(e,i){return"undefined"==typeof i&&(i=new t),i.setTo(this.x/e.x,this.y/e.y)},t.prototype.scale=function(e,i,n){return"undefined"==typeof i&&(i=null),"undefined"==typeof n&&(n=new t),null===i&&(i=e),n.setTo(this.x*e,this.y*i)},t.prototype.perp=function(t){"undefined"==typeof t&&(t=this);var e=this.x;return t.setTo(this.y,-e)},t.prototype.mutableSet=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.mutableAdd=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.mutableSub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.mutableMul=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.mutableDiv=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.mutableScale=function(t,e){return this.x*=t,this.y*=e||t,this},t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.edge=function(e,i){return"undefined"==typeof i&&(i=new t),this.sub(e,i)},t.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},t.prototype.epsilonEquals=function(t,e){return Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.length2=function(){return this.x*this.x+this.y*this.y
},t.prototype.distance=function(t){return Math.sqrt(this.distance2(t))},t.prototype.distance2=function(t){return(t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y)},t.prototype.project=function(t){var e=this.dot(t)/t.length2();return 0!=e&&(this.x=e*t.x,this.y=e*t.y),this},t.prototype.projectN=function(t){var e=this.dot(t);return 0!=e&&(this.x=e*t.x,this.y=e*t.y),this},t.prototype.reflect=function(t){var e=this.x,i=this.y;return this.project(t).scale(2),this.x-=e,this.y-=i,this},t.prototype.reflectN=function(t){var e=this.x,i=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=i,this},t.prototype.getProjectionMagnitude=function(t){var e=t.dot(t);return 0==e?0:Math.abs(this.dot(t)/e)},t.prototype.direction=function(e){return"undefined"==typeof e&&(e=new t),e.copyFrom(this),this.normalize(e)},t.prototype.normalRightHand=function(t){return"undefined"==typeof t&&(t=this),t.setTo(-1*this.y,this.x)},t.prototype.normalize=function(t){"undefined"==typeof t&&(t=this);var e=this.length();return 0!=e&&t.setTo(this.x/e,this.y/e),t},t.prototype.getMagnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.angle=function(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)},t.prototype.angle2=function(t,e){return t.sub(this).angle(e.sub(this))},t.prototype.rotate=function(e,i,n){"undefined"==typeof n&&(n=new t);var s=this.x-e.x,o=this.y-e.y;return n.setTo(s*Math.cos(i)-o*Math.sin(i)+e.x,s*Math.sin(i)+o*Math.cos(i)+e.y)},t.prototype.clone=function(e){return"undefined"==typeof e&&(e=new t),e.setTo(this.x,this.y)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.copyTo=function(t){return t.setTo(this.x,this.y)},t.prototype.toString=function(){return"[{Vector2 (x="+this.x+" y="+this.y+")}]"},t}();t.Vector2=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(){this.object=null,this.next=null}return t.prototype.destroy=function(){this.object=null,null!=this.next&&this.next.destroy(),this.next=null},t}();t.LinkedList=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(e){function i(n,s,o,r,h){if("undefined"==typeof h&&(h=null),e.call(this,n,s,o,r),this._headA=this._tailA=new t.LinkedList,this._headB=this._tailB=new t.LinkedList,null!=h){var a,l;if(null!=h._headA.object)for(a=h._headA;null!=a;)null!=this._tailA.object&&(l=this._tailA,this._tailA=new t.LinkedList,l.next=this._tailA),this._tailA.object=a.object,a=a.next;if(null!=h._headB.object)for(a=h._headB;null!=a;)null!=this._tailB.object&&(l=this._tailB,this._tailB=new t.LinkedList,l.next=this._tailB),this._tailB.object=a.object,a=a.next}else i._min=(this.width+this.height)/(2*i.divisions);this._canSubdivide=this.width>i._min||this.height>i._min,this._northWestTree=null,this._northEastTree=null,this._southEastTree=null,this._southWestTree=null,this._leftEdge=this.x,this._rightEdge=this.x+this.width,this._halfWidth=this.width/2,this._midpointX=this._leftEdge+this._halfWidth,this._topEdge=this.y,this._bottomEdge=this.y+this.height,this._halfHeight=this.height/2,this._midpointY=this._topEdge+this._halfHeight}return __extends(i,e),i.A_LIST=0,i.B_LIST=1,i.prototype.destroy=function(){this._tailA.destroy(),this._tailB.destroy(),this._headA.destroy(),this._headB.destroy(),this._tailA=null,this._tailB=null,this._headA=null,this._headB=null,null!=this._northWestTree&&this._northWestTree.destroy(),null!=this._northEastTree&&this._northEastTree.destroy(),null!=this._southEastTree&&this._southEastTree.destroy(),null!=this._southWestTree&&this._southWestTree.destroy(),this._northWestTree=null,this._northEastTree=null,this._southEastTree=null,this._southWestTree=null,i._object=null,i._processingCallback=null,i._notifyCallback=null},i.prototype.load=function(t,e,n,s,o){"undefined"==typeof e&&(e=null),"undefined"==typeof n&&(n=null),"undefined"==typeof s&&(s=null),"undefined"==typeof o&&(o=null),this.add(t,i.A_LIST),null!=e?(this.add(e,i.B_LIST),i._useBothLists=!0):i._useBothLists=!1,i._notifyCallback=n,i._processingCallback=s,i._callbackContext=o},i.prototype.add=function(t,e){if(i._list=e,1==t.isGroup)for(var n,s=0,o=t.members,r=t.length;r>s;)n=o[s++],null!=n&&n.exists&&(n.isGroup?this.add(n,e):(i._object=n,i._object.exists&&i._object.allowCollisions&&this.addObject()));else i._object=t,i._object.exists&&i._object.allowCollisions&&this.addObject()},i.prototype.addObject=function(){if(!this._canSubdivide||this._leftEdge>=i._object.collisionMask.x&&this._rightEdge<=i._object.collisionMask.right&&this._topEdge>=i._object.collisionMask.y&&this._bottomEdge<=i._object.collisionMask.bottom)return void this.addToList();if(i._object.collisionMask.x>this._leftEdge&&i._object.collisionMask.right<this._midpointX){if(i._object.collisionMask.y>this._topEdge&&i._object.collisionMask.bottom<this._midpointY)return null==this._northWestTree&&(this._northWestTree=new i(this._leftEdge,this._topEdge,this._halfWidth,this._halfHeight,this)),void this._northWestTree.addObject();if(i._object.collisionMask.y>this._midpointY&&i._object.collisionMask.bottom<this._bottomEdge)return null==this._southWestTree&&(this._southWestTree=new i(this._leftEdge,this._midpointY,this._halfWidth,this._halfHeight,this)),void this._southWestTree.addObject()}if(i._object.collisionMask.x>this._midpointX&&i._object.collisionMask.right<this._rightEdge){if(i._object.collisionMask.y>this._topEdge&&i._object.collisionMask.bottom<this._midpointY)return null==this._northEastTree&&(this._northEastTree=new i(this._midpointX,this._topEdge,this._halfWidth,this._halfHeight,this)),void this._northEastTree.addObject();if(i._object.collisionMask.y>this._midpointY&&i._object.collisionMask.bottom<this._bottomEdge)return null==this._southEastTree&&(this._southEastTree=new i(this._midpointX,this._midpointY,this._halfWidth,this._halfHeight,this)),void this._southEastTree.addObject()}i._object.collisionMask.right>this._leftEdge&&i._object.collisionMask.x<this._midpointX&&i._object.collisionMask.bottom>this._topEdge&&i._object.collisionMask.y<this._midpointY&&(null==this._northWestTree&&(this._northWestTree=new i(this._leftEdge,this._topEdge,this._halfWidth,this._halfHeight,this)),this._northWestTree.addObject()),i._object.collisionMask.right>this._midpointX&&i._object.collisionMask.x<this._rightEdge&&i._object.collisionMask.bottom>this._topEdge&&i._object.collisionMask.y<this._midpointY&&(null==this._northEastTree&&(this._northEastTree=new i(this._midpointX,this._topEdge,this._halfWidth,this._halfHeight,this)),this._northEastTree.addObject()),i._object.collisionMask.right>this._midpointX&&i._object.collisionMask.x<this._rightEdge&&i._object.collisionMask.bottom>this._midpointY&&i._object.collisionMask.y<this._bottomEdge&&(null==this._southEastTree&&(this._southEastTree=new i(this._midpointX,this._midpointY,this._halfWidth,this._halfHeight,this)),this._southEastTree.addObject()),i._object.collisionMask.right>this._leftEdge&&i._object.collisionMask.x<this._midpointX&&i._object.collisionMask.bottom>this._midpointY&&i._object.collisionMask.y<this._bottomEdge&&(null==this._southWestTree&&(this._southWestTree=new i(this._leftEdge,this._midpointY,this._halfWidth,this._halfHeight,this)),this._southWestTree.addObject())},i.prototype.addToList=function(){var e;i._list==i.A_LIST?(null!=this._tailA.object&&(e=this._tailA,this._tailA=new t.LinkedList,e.next=this._tailA),this._tailA.object=i._object):(null!=this._tailB.object&&(e=this._tailB,this._tailB=new t.LinkedList,e.next=this._tailB),this._tailB.object=i._object),this._canSubdivide&&(null!=this._northWestTree&&this._northWestTree.addToList(),null!=this._northEastTree&&this._northEastTree.addToList(),null!=this._southEastTree&&this._southEastTree.addToList(),null!=this._southWestTree&&this._southWestTree.addToList())},i.prototype.execute=function(){var t,e=!1;if(null!=this._headA.object)for(t=this._headA;null!=t;)i._object=t.object,i._iterator=i._useBothLists?this._headB:t.next,i._object.exists&&i._object.allowCollisions>0&&null!=i._iterator&&null!=i._iterator.object&&i._iterator.object.exists&&this.overlapNode()&&(e=!0),t=t.next;return null!=this._northWestTree&&this._northWestTree.execute()&&(e=!0),null!=this._northEastTree&&this._northEastTree.execute()&&(e=!0),null!=this._southEastTree&&this._southEastTree.execute()&&(e=!0),null!=this._southWestTree&&this._southWestTree.execute()&&(e=!0),e},i.prototype.overlapNode=function(){for(var t,e=!1;null!=i._iterator&&i._object.exists&&!(i._object.allowCollisions<=0);)t=i._iterator.object,i._object===t||!t.exists||t.allowCollisions<=0?i._iterator=i._iterator.next:(i._object.collisionMask.checkHullIntersection(t.collisionMask)&&((null==i._processingCallback||i._processingCallback(i._object,t))&&(e=!0),e&&null!=i._notifyCallback&&(null!==i._callbackContext?i._notifyCallback.call(i._callbackContext,i._object,t):i._notifyCallback(i._object,t))),i._iterator=i._iterator.next);return e},i}(t.Rectangle);t.QuadTree=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(i){this._game=i,e.T_VECTORS=[];for(var n=0;10>n;n++)e.T_VECTORS.push(new t.Vector2);e.T_ARRAYS=[];for(var n=0;5>n;n++)e.T_ARRAYS.push([])}return e.LEFT=1,e.RIGHT=16,e.UP=256,e.DOWN=4096,e.NONE=0,e.CEILING=e.UP,e.FLOOR=e.DOWN,e.WALL=e.LEFT|e.RIGHT,e.ANY=e.LEFT|e.RIGHT|e.UP|e.DOWN,e.OVERLAP_BIAS=4,e.TILE_OVERLAP=!1,e.lineToLine=function(e,i,n){"undefined"==typeof n&&(n=new t.IntersectResult);var s=(e.x1-e.x2)*(i.y1-i.y2)-(e.y1-e.y2)*(i.x1-i.x2);return 0!==s&&(n.result=!0,n.x=((e.x1*e.y2-e.y1*e.x2)*(i.x1-i.x2)-(e.x1-e.x2)*(i.x1*i.y2-i.y1*i.x2))/s,n.y=((e.x1*e.y2-e.y1*e.x2)*(i.y1-i.y2)-(e.y1-e.y2)*(i.x1*i.y2-i.y1*i.x2))/s),n},e.lineToLineSegment=function(e,i,n){"undefined"==typeof n&&(n=new t.IntersectResult);var s=(e.x1-e.x2)*(i.y1-i.y2)-(e.y1-e.y2)*(i.x1-i.x2);if(0!==s){n.x=((e.x1*e.y2-e.y1*e.x2)*(i.x1-i.x2)-(e.x1-e.x2)*(i.x1*i.y2-i.y1*i.x2))/s,n.y=((e.x1*e.y2-e.y1*e.x2)*(i.y1-i.y2)-(e.y1-e.y2)*(i.x1*i.y2-i.y1*i.x2))/s;var o=Math.max(i.x1,i.x2),r=Math.min(i.x1,i.x2),h=Math.max(i.y1,i.y2),a=Math.min(i.y1,i.y2);((n.x<=o&&n.x>=r)==!0||(n.y<=h&&n.y>=a)==!0)&&(n.result=!0)}return n},e.lineToRawSegment=function(e,i,n,s,o,r){"undefined"==typeof r&&(r=new t.IntersectResult);var h=(e.x1-e.x2)*(n-o)-(e.y1-e.y2)*(i-s);if(0!==h){r.x=((e.x1*e.y2-e.y1*e.x2)*(i-s)-(e.x1-e.x2)*(i*o-n*s))/h,r.y=((e.x1*e.y2-e.y1*e.x2)*(n-o)-(e.y1-e.y2)*(i*o-n*s))/h;var a=Math.max(i,s),l=Math.min(i,s),u=Math.max(n,o),c=Math.min(n,o);((r.x<=a&&r.x>=l)==!0||(r.y<=u&&r.y>=c)==!0)&&(r.result=!0)}return r},e.lineToRay=function(e,i,n){"undefined"==typeof n&&(n=new t.IntersectResult);var s=(e.x1-e.x2)*(i.y1-i.y2)-(e.y1-e.y2)*(i.x1-i.x2);return 0!==s&&(n.x=((e.x1*e.y2-e.y1*e.x2)*(i.x1-i.x2)-(e.x1-e.x2)*(i.x1*i.y2-i.y1*i.x2))/s,n.y=((e.x1*e.y2-e.y1*e.x2)*(i.y1-i.y2)-(e.y1-e.y2)*(i.x1*i.y2-i.y1*i.x2))/s,n.result=!0,!(i.x1>=i.x2)&&n.x<i.x1&&(n.result=!1),!(i.y1>=i.y2)&&n.y<i.y1&&(n.result=!1)),n},e.lineToCircle=function(e,i,n){return"undefined"==typeof n&&(n=new t.IntersectResult),e.perp(i.x,i.y).length<=i.radius&&(n.result=!0),n},e.lineToRectangle=function(i,n,s){return"undefined"==typeof s&&(s=new t.IntersectResult),e.lineToRawSegment(i,n.x,n.y,n.right,n.y,s),s.result===!0?s:(e.lineToRawSegment(i,n.x,n.y,n.x,n.bottom,s),s.result===!0?s:(e.lineToRawSegment(i,n.x,n.bottom,n.right,n.bottom,s),s.result===!0?s:(e.lineToRawSegment(i,n.right,n.y,n.right,n.bottom,s),s)))},e.lineSegmentToLineSegment=function(i,n,s){return"undefined"==typeof s&&(s=new t.IntersectResult),e.lineToLineSegment(i,n),s.result===!0&&(s.x>=Math.min(i.x1,i.x2)&&s.x<=Math.max(i.x1,i.x2)&&s.y>=Math.min(i.y1,i.y2)&&s.y<=Math.max(i.y1,i.y2)||(s.result=!1)),s},e.lineSegmentToRay=function(i,n,s){return"undefined"==typeof s&&(s=new t.IntersectResult),e.lineToRay(i,n,s),s.result===!0&&(s.x>=Math.min(i.x1,i.x2)&&s.x<=Math.max(i.x1,i.x2)&&s.y>=Math.min(i.y1,i.y2)&&s.y<=Math.max(i.y1,i.y2)||(s.result=!1)),s},e.lineSegmentToCircle=function(i,n,s){"undefined"==typeof s&&(s=new t.IntersectResult);var o=i.perp(n.x,n.y);if(o.length<=n.radius){var r=Math.max(i.x1,i.x2),h=Math.min(i.x1,i.x2),a=Math.max(i.y1,i.y2),l=Math.min(i.y1,i.y2);o.x2<=r&&o.x2>=h&&o.y2<=a&&o.y2>=l?s.result=!0:(e.circleContainsPoint(n,{x:i.x1,y:i.y1})||e.circleContainsPoint(n,{x:i.x2,y:i.y2}))&&(s.result=!0)}return s},e.lineSegmentToRectangle=function(i,n,s){return"undefined"==typeof s&&(s=new t.IntersectResult),n.contains(i.x1,i.y1)&&n.contains(i.x2,i.y2)?(s.result=!0,s):(e.lineToRawSegment(i,n.x,n.y,n.right,n.bottom,s),s.result===!0?s:(e.lineToRawSegment(i,n.x,n.y,n.x,n.bottom,s),s.result===!0?s:(e.lineToRawSegment(i,n.x,n.bottom,n.right,n.bottom,s),s.result===!0?s:(e.lineToRawSegment(i,n.right,n.y,n.right,n.bottom,s),s))))},e.rayToRectangle=function(i,n,s){return"undefined"==typeof s&&(s=new t.IntersectResult),e.lineToRectangle(i,n,s),s},e.rayToLineSegment=function(e,i,n,s,o,r,h,a,l){"undefined"==typeof l&&(l=new t.IntersectResult);var u,c,p;return(s-i)/(n-e)!=(a-r)/(h-o)&&(p=(n-e)*(a-r)-(s-i)*(h-o),0!=p&&(u=((i-r)*(h-o)-(e-o)*(a-r))/p,c=((i-r)*(n-e)-(e-o)*(s-i))/p,u>=0&&c>=0&&1>=c&&(l.result=!0,l.x=e+u*(n-e),l.y=i+u*(s-i)))),l},e.pointToRectangle=function(e,i,n){return"undefined"==typeof n&&(n=new t.IntersectResult),n.setTo(e.x,e.y),n.result=i.containsPoint(e),n},e.rectangleToRectangle=function(e,i,n){"undefined"==typeof n&&(n=new t.IntersectResult);var s=Math.max(e.x,i.x),o=Math.min(e.right,i.right),r=Math.max(e.y,i.y),h=Math.min(e.bottom,i.bottom);n.setTo(s,r,o-s,h-r,o-s,h-r);var a=n.x+.5*n.width,l=n.y+.5*n.height;return a>e.x&&a<e.right&&l>e.y&&l<e.bottom&&(n.result=!0),n},e.rectangleToCircle=function(i,n,s){return"undefined"==typeof s&&(s=new t.IntersectResult),e.circleToRectangle(n,i,s)},e.circleToCircle=function(i,n,s){return"undefined"==typeof s&&(s=new t.IntersectResult),s.result=(i.radius+n.radius)*(i.radius+n.radius)>=e.distanceSquared(i.x,i.y,n.x,n.y),s},e.circleToRectangle=function(e,i,n){"undefined"==typeof n&&(n=new t.IntersectResult);var s=i.clone();return s.inflate(e.radius,e.radius),n.result=s.contains(e.x,e.y),n},e.circleContainsPoint=function(i,n,s){return"undefined"==typeof s&&(s=new t.IntersectResult),s.result=i.radius*i.radius>=e.distanceSquared(i.x,i.y,n.x,n.y),s},e.prototype.overlap=function(e,i,n,s,o){"undefined"==typeof e&&(e=null),"undefined"==typeof i&&(i=null),"undefined"==typeof n&&(n=null),"undefined"==typeof s&&(s=null),"undefined"==typeof o&&(o=null),null==e&&(e=this._game.world.group),i==e&&(i=null),t.QuadTree.divisions=this._game.world.worldDivisions;var r=new t.QuadTree(this._game.world.bounds.x,this._game.world.bounds.y,this._game.world.bounds.width,this._game.world.bounds.height);r.load(e,i,n,s,o);var h=r.execute();return r.destroy(),r=null,h},e.separate=function(t,i){t.collisionMask.update(),i.collisionMask.update();var n=e.separateX(t,i),s=e.separateY(t,i);return n||s},e.separateTile=function(t,i,n,s,o,r,h,a,l,u,c,p){t.collisionMask.update();var d=e.separateTileX(t,i,n,s,o,r,h,a,c),f=e.separateTileY(t,i,n,s,o,r,l,u,p);return d||f},e.separateTileX=function(i,n,s,o,r,h,a,l,u){if(i.immovable)return!1;var c=0,p=i.x-i.last.x;if(0!=p){var d=p>0?p:-p,f=new t.Quad(i.x-(p>0?p:0),i.last.y,i.width+(p>0?p:-p),i.height);if(f.x+f.width>n&&f.x<n+o&&f.y+f.height>s&&f.y<s+r){var y=d+e.OVERLAP_BIAS;p>0?(c=i.x+i.width-n,c>y||!(i.allowCollisions&e.RIGHT)||0==a?c=0:i.touching|=e.RIGHT):0>p&&(c=i.x-o-n,-c>y||!(i.allowCollisions&e.LEFT)||0==l?c=0:i.touching|=e.LEFT)}}return 0!=c?(1==u&&(i.x=i.x-c,i.velocity.x=-(i.velocity.x*i.elasticity)),e.TILE_OVERLAP=!0,!0):!1},e.separateTileY=function(i,n,s,o,r,h,a,l,u){if(i.immovable)return!1;var c=0,p=i.y-i.last.y;if(0!=p){var d=p>0?p:-p,f=new t.Quad(i.x,i.y-(p>0?p:0),i.width,i.height+d);if(f.x+f.width>n&&f.x<n+o&&f.y+f.height>s&&f.y<s+r){var y=d+e.OVERLAP_BIAS;p>0?(c=i.y+i.height-s,c>y||!(i.allowCollisions&e.DOWN)||0==a?c=0:i.touching|=e.DOWN):0>p&&(c=i.y-r-s,-c>y||!(i.allowCollisions&e.UP)||0==l?c=0:i.touching|=e.UP)}}return 0!=c?(1==u&&(i.y=i.y-c,i.velocity.y=-(i.velocity.y*i.elasticity)),e.TILE_OVERLAP=!0,!0):!1},e.NEWseparateTileX=function(t,i,n,s,o,r,h,a,l){if(t.immovable)return!1;var u=0;if(0!=t.collisionMask.deltaX&&t.collisionMask.intersectsRaw(i,i+s,n,n+o)){var c=t.collisionMask.deltaXAbs+e.OVERLAP_BIAS;t.collisionMask.deltaX>0?(u=t.collisionMask.right-i,u>c||!(t.allowCollisions&e.RIGHT)||0==h?u=0:t.touching|=e.RIGHT):t.collisionMask.deltaX<0&&(u=t.collisionMask.x-s-i,-u>c||!(t.allowCollisions&e.LEFT)||0==a?u=0:t.touching|=e.LEFT)}return 0!=u?(1==l&&(t.x=t.x-u,t.velocity.x=-(t.velocity.x*t.elasticity)),e.TILE_OVERLAP=!0,!0):!1},e.NEWseparateTileY=function(t,i,n,s,o,r,h,a,l){if(t.immovable)return!1;var u=0;if(0!=t.collisionMask.deltaY&&t.collisionMask.intersectsRaw(i,i+s,n,n+o)){var c=t.collisionMask.deltaYAbs+e.OVERLAP_BIAS;t.collisionMask.deltaY>0?(u=t.collisionMask.bottom-n,u>c||!(t.allowCollisions&e.DOWN)||0==h?u=0:t.touching|=e.DOWN):t.collisionMask.deltaY<0&&(u=t.collisionMask.y-o-n,-u>c||!(t.allowCollisions&e.UP)||0==a?u=0:t.touching|=e.UP)}return 0!=u?(1==l&&(t.y=t.y-u,t.velocity.y=-(t.velocity.y*t.elasticity)),e.TILE_OVERLAP=!0,!0):!1},e.separateX=function(t,i){if(t.immovable&&i.immovable)return!1;var n=0;if(t.collisionMask.deltaX!=i.collisionMask.deltaX&&t.collisionMask.intersects(i.collisionMask)){var s=t.collisionMask.deltaXAbs+i.collisionMask.deltaXAbs+e.OVERLAP_BIAS;t.collisionMask.deltaX>i.collisionMask.deltaX?(n=t.collisionMask.right-i.collisionMask.x,!(n>s)&&t.allowCollisions&e.RIGHT&&i.allowCollisions&e.LEFT?(t.touching|=e.RIGHT,i.touching|=e.LEFT):n=0):t.collisionMask.deltaX<i.collisionMask.deltaX&&(n=t.collisionMask.x-i.collisionMask.width-i.collisionMask.x,!(-n>s)&&t.allowCollisions&e.LEFT&&i.allowCollisions&e.RIGHT?(t.touching|=e.LEFT,i.touching|=e.RIGHT):n=0)}if(0!=n){var o=t.velocity.x,r=i.velocity.x;if(t.immovable||i.immovable)t.immovable?i.immovable||(i.x+=n,i.velocity.x=o-r*i.elasticity):(t.x=t.x-n,t.velocity.x=r-o*t.elasticity);else{n*=.5,t.x=t.x-n,i.x+=n;var h=Math.sqrt(r*r*i.mass/t.mass)*(r>0?1:-1),a=Math.sqrt(o*o*t.mass/i.mass)*(o>0?1:-1),l=.5*(h+a);h-=l,a-=l,t.velocity.x=l+h*t.elasticity,i.velocity.x=l+a*i.elasticity}return!0}return!1},e.separateY=function(t,i){if(t.immovable&&i.immovable)return!1;var n=0;if(t.collisionMask.deltaY!=i.collisionMask.deltaY&&t.collisionMask.intersects(i.collisionMask)){var s=t.collisionMask.deltaYAbs+i.collisionMask.deltaYAbs+e.OVERLAP_BIAS;t.collisionMask.deltaY>i.collisionMask.deltaY?(n=t.collisionMask.bottom-i.collisionMask.y,!(n>s)&&t.allowCollisions&e.DOWN&&i.allowCollisions&e.UP?(t.touching|=e.DOWN,i.touching|=e.UP):n=0):t.collisionMask.deltaY<i.collisionMask.deltaY&&(n=t.collisionMask.y-i.collisionMask.height-i.collisionMask.y,!(-n>s)&&t.allowCollisions&e.UP&&i.allowCollisions&e.DOWN?(t.touching|=e.UP,i.touching|=e.DOWN):n=0)}if(0!=n){var o=t.velocity.y,r=i.velocity.y;if(t.immovable||i.immovable)t.immovable?i.immovable||(i.y+=n,i.velocity.y=o-r*i.elasticity,t.active&&t.moves&&t.collisionMask.deltaY<i.collisionMask.deltaY&&(i.x+=t.x-t.last.x)):(t.y=t.y-n,t.velocity.y=r-o*t.elasticity,i.active&&i.moves&&t.collisionMask.deltaY>i.collisionMask.deltaY&&(t.x+=i.x-i.last.x));else{n*=.5,t.y=t.y-n,i.y+=n;var h=Math.sqrt(r*r*i.mass/t.mass)*(r>0?1:-1),a=Math.sqrt(o*o*t.mass/i.mass)*(o>0?1:-1),l=.5*(h+a);h-=l,a-=l,t.velocity.y=l+h*t.elasticity,i.velocity.y=l+a*i.elasticity}return!0}return!1},e.distance=function(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))},e.distanceSquared=function(t,e,i,n){return(i-t)*(i-t)+(n-e)*(n-e)},e.flattenPointsOn=function(t,e,i){for(var n=Number.MAX_VALUE,s=-Number.MAX_VALUE,o=t.length,r=0;o>r;r++){var h=t[r].dot(e);n>h&&(n=h),h>s&&(s=h)}i[0]=n,i[1]=s},e.isSeparatingAxis=function(t,i,n,s,o,r){"undefined"==typeof r&&(r=null);var h=e.T_ARRAYS.pop(),a=e.T_ARRAYS.pop(),l=e.T_VECTORS.pop().copyFrom(i).sub(t),u=l.dot(o);if(e.flattenPointsOn(n,o,h),e.flattenPointsOn(s,o,a),a[0]+=u,a[1]+=u,h[0]>a[1]||a[0]>h[1])return e.T_VECTORS.push(l),e.T_ARRAYS.push(h),e.T_ARRAYS.push(a),!0;if(r){var c=0;if(h[0]<a[0])if(r.aInB=!1,h[1]<a[1])c=h[1]-a[0],r.bInA=!1;else{var p=h[1]-a[0],d=a[1]-h[0];c=d>p?p:-d}else if(r.bInA=!1,h[1]>a[1])c=h[0]-a[1],r.aInB=!1;else{var p=h[1]-a[0],d=a[1]-h[0];c=d>p?p:-d}var f=Math.abs(c);f<r.overlap&&(r.overlap=f,r.overlapN.copyFrom(o),0>c&&r.overlapN.reverse())}return e.T_VECTORS.push(l),e.T_ARRAYS.push(h),e.T_ARRAYS.push(a),!1},e.LEFT_VORNOI_REGION=-1,e.MIDDLE_VORNOI_REGION=0,e.RIGHT_VORNOI_REGION=1,e.vornoiRegion=function(t,i){var n=t.length2(),s=i.dot(t);return 0>s?e.LEFT_VORNOI_REGION:s>n?e.RIGHT_VORNOI_REGION:e.MIDDLE_VORNOI_REGION},e.testCircleCircle=function(t,i,n){"undefined"==typeof n&&(n=null);var s=e.T_VECTORS.pop().copyFrom(i.pos).sub(t.pos),o=t.radius+i.radius,r=o*o,h=s.length2();if(h>r)return e.T_VECTORS.push(s),!1;if(n){var a=Math.sqrt(h);n.a=t,n.b=i,n.overlap=o-a,n.overlapN.copyFrom(s.normalize()),n.overlapV.copyFrom(s).scale(n.overlap),n.aInB=t.radius<=i.radius&&a<=i.radius-t.radius,n.bInA=i.radius<=t.radius&&a<=t.radius-i.radius}return e.T_VECTORS.push(s),!0},e.testPolygonCircle=function(t,i,n){"undefined"==typeof n&&(n=null);for(var s=e.T_VECTORS.pop().copyFrom(i.pos).sub(t.pos),o=i.radius,r=o*o,h=t.points,a=h.length,l=e.T_VECTORS.pop(),u=e.T_VECTORS.pop(),c=0;a>c;c++){var p=c===a-1?0:c+1,d=0===c?a-1:c-1,f=0,y=null;l.copyFrom(t.edges[c]),u.copyFrom(s).sub(h[c]),n&&u.length2()>r&&(n.aInB=!1);var _=e.vornoiRegion(l,u);if(_===e.LEFT_VORNOI_REGION){l.copyFrom(t.edges[d]);var m=e.T_VECTORS.pop().copyFrom(s).sub(h[d]);if(_=e.vornoiRegion(l,m),_===e.RIGHT_VORNOI_REGION){var g=u.length2();if(g>o)return e.T_VECTORS.push(s),e.T_VECTORS.push(l),e.T_VECTORS.push(u),e.T_VECTORS.push(m),!1;n&&(n.bInA=!1,y=u.normalize(),f=o-g)}e.T_VECTORS.push(m)}else if(_===e.RIGHT_VORNOI_REGION){if(l.copyFrom(t.edges[p]),u.copyFrom(s).sub(h[p]),_=e.vornoiRegion(l,u),_===e.LEFT_VORNOI_REGION){var g=u.length2();if(g>o)return e.T_VECTORS.push(s),e.T_VECTORS.push(l),e.T_VECTORS.push(u),!1;n&&(n.bInA=!1,y=u.normalize(),f=o-g)}}else{var x=l.perp().normalize(),g=u.dot(x),b=Math.abs(g);if(g>0&&b>o)return e.T_VECTORS.push(s),e.T_VECTORS.push(x),e.T_VECTORS.push(u),!1;n&&(y=x,f=o-g,(g>=0||2*o>f)&&(n.bInA=!1))}y&&n&&Math.abs(f)<Math.abs(n.overlap)&&(n.overlap=f,n.overlapN.copyFrom(y))}return n&&(n.a=t,n.b=i,n.overlapV.copyFrom(n.overlapN).scale(n.overlap)),e.T_VECTORS.push(s),e.T_VECTORS.push(l),e.T_VECTORS.push(u),!0},e.testCirclePolygon=function(t,i,n){"undefined"==typeof n&&(n=null);var s=e.testPolygonCircle(i,t,n);if(s&&n){var o=n.a,r=n.aInB;n.overlapN.reverse(),n.overlapV.reverse(),n.a=n.b,n.b=o,n.aInB=n.bInA,n.bInA=r}return s},e.testPolygonPolygon=function(t,i,n){"undefined"==typeof n&&(n=null);for(var s=t.points,o=s.length,r=i.points,h=r.length,a=0;o>a;a++)if(e.isSeparatingAxis(t.pos,i.pos,s,r,t.normals[a],n))return!1;for(var a=0;h>a;a++)if(e.isSeparatingAxis(t.pos,i.pos,s,r,i.normals[a],n))return!1;return n&&(n.a=t,n.b=i,n.overlapV.copyFrom(n.overlapN).scale(n.overlap)),!0},e}();t.Collision=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e,i,n){this._sx=0,this._sy=0,this._sw=0,this._sh=0,this._dx=0,this._dy=0,this._dw=0,this._dh=0,this._game=e,this.canvas=document.createElement("canvas"),this.canvas.width=i,this.canvas.height=n,this.context=this.canvas.getContext("2d"),this.bounds=new t.Rectangle(0,0,i,n)}return e.prototype.getPixel=function(t,e){var i=this.context.getImageData(t,e,1,1);return this.getColor(i.data[0],i.data[1],i.data[2])},e.prototype.getPixel32=function(t,e){var i=this.context.getImageData(t,e,1,1);return this.getColor32(i.data[3],i.data[0],i.data[1],i.data[2])},e.prototype.getPixels=function(t){return this.context.getImageData(t.x,t.y,t.width,t.height)},e.prototype.setPixel=function(t,e,i){this.context.fillStyle=i,this.context.fillRect(t,e,1,1)},e.prototype.setPixel32=function(t,e,i){this.context.fillStyle=i,this.context.fillRect(t,e,1,1)},e.prototype.setPixels=function(t,e){this.context.putImageData(e,t.x,t.y)},e.prototype.fillRect=function(t,e){this.context.fillStyle=e,this.context.fillRect(t.x,t.y,t.width,t.height)},e.prototype.pasteImage=function(t,e,i,n,s,o){"undefined"==typeof e&&(e=-1),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=null),"undefined"==typeof o&&(o=null);var r=null;this._sx=0,this._sy=0,this._dx=i,this._dy=n,e>-1||(r=this._game.cache.getImage(t),this._sw=r.width,this._sh=r.height,this._dw=r.width,this._dh=r.height),null!==s&&(this._dw=s),null!==o&&(this._dh=o),null!=r&&this.context.drawImage(r,this._sx,this._sy,this._sw,this._sh,this._dx,this._dy,this._dw,this._dh)},e.prototype.copyPixels=function(t,e,i){1==e.equals(this.bounds)?this.context.drawImage(t.canvas,i.x,i.y):this.context.putImageData(t.getPixels(e),i.x,i.y)},e.prototype.assignCanvasToGameObjects=function(t){for(var e=0;e<t.length;e++)t[e].canvas=this.canvas,t[e].context=this.context},e.prototype.clear=function(){this.context.clearRect(0,0,this.bounds.width,this.bounds.height)},e.prototype.render=function(t,e){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),this._game.stage.context.drawImage(this.canvas,t,e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.bounds.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.bounds.height},enumerable:!0,configurable:!0}),e.prototype.getColor32=function(t,e,i,n){return t<<24|e<<16|i<<8|n},e.prototype.getColor=function(t,e,i){return t<<16|e<<8|i},e}();t.DynamicTexture=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t){this.cosTable=[],this.sinTable=[],this.globalSeed=Math.random(),this._game=t}return t.PI=3.141592653589793,t.PI_2=1.5707963267948966,t.PI_4=.7853981633974483,t.PI_8=.39269908169872414,t.PI_16=.19634954084936207,t.TWO_PI=6.283185307179586,t.THREE_PI_2=4.71238898038469,t.E=2.71828182845905,t.LN10=2.302585092994046,t.LN2=.6931471805599453,t.LOG10E=.4342944819032518,t.LOG2E=1.4426950408889634,t.SQRT1_2=.7071067811865476,t.SQRT2=1.4142135623730951,t.DEG_TO_RAD=.017453292519943295,t.RAD_TO_DEG=57.29577951308232,t.B_16=65536,t.B_31=2147483648,t.B_32=4294967296,t.B_48=281474976710656,t.B_53=9007199254740992,t.B_64=0x10000000000000000,t.ONE_THIRD=.3333333333333333,t.TWO_THIRDS=.6666666666666666,t.ONE_SIXTH=.16666666666666666,t.COS_PI_3=.8660254037844386,t.SIN_2PI_3=.03654595,t.CIRCLE_ALPHA=.5522847498307935,t.ON=!0,t.OFF=!1,t.SHORT_EPSILON=.1,t.PERC_EPSILON=.001,t.EPSILON=1e-4,t.LONG_EPSILON=1e-8,t.prototype.fuzzyEqual=function(t,e,i){return"undefined"==typeof i&&(i=1e-4),Math.abs(t-e)<i},t.prototype.fuzzyLessThan=function(t,e,i){return"undefined"==typeof i&&(i=1e-4),e+i>t},t.prototype.fuzzyGreaterThan=function(t,e,i){return"undefined"==typeof i&&(i=1e-4),t>e-i},t.prototype.fuzzyCeil=function(t,e){return"undefined"==typeof e&&(e=1e-4),Math.ceil(t-e)},t.prototype.fuzzyFloor=function(t,e){return"undefined"==typeof e&&(e=1e-4),Math.floor(t+e)},t.prototype.average=function(){for(var t=[],e=0;e<arguments.length-0;e++)t[e]=arguments[e+0];for(var i=0,n=0;n<t.length;n++)i+=t[n];return i/t.length},t.prototype.slam=function(t,e,i){return"undefined"==typeof i&&(i=1e-4),Math.abs(t-e)<i?e:t},t.prototype.percentageMinMax=function(t,e,i){return"undefined"==typeof i&&(i=0),t-=i,e-=i,e?t/e:0},t.prototype.sign=function(t){return t?t/Math.abs(t):0},t.prototype.truncate=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.prototype.shear=function(t){return t%1},t.prototype.wrap=function(t,e,i){if("undefined"==typeof i&&(i=0),t-=i,e-=i,0==e)return i;for(t%=e,t+=i;i>t;)t+=e;return t},t.prototype.arithWrap=function(t,e,i){return"undefined"==typeof i&&(i=0),e-=i,0==e?i:t-e*Math.floor((t-i)/e)},t.prototype.clamp=function(t,e,i){return"undefined"==typeof i&&(i=0),Math.max(i,Math.min(e,t))},t.prototype.snapTo=function(t,e,i){return"undefined"==typeof i&&(i=0),0==e?t:(t-=i,t=e*Math.round(t/e),i+t)},t.prototype.snapToFloor=function(t,e,i){return"undefined"==typeof i&&(i=0),0==e?t:(t-=i,t=e*Math.floor(t/e),i+t)},t.prototype.snapToCeil=function(t,e,i){return"undefined"==typeof i&&(i=0),0==e?t:(t-=i,t=e*Math.ceil(t/e),i+t)},t.prototype.snapToInArray=function(t,e,i){if("undefined"==typeof i&&(i=!0),i&&e.sort(),t<e[0])return e[0];for(var n=1;e[n]<t;)n++;var s=e[n-1],o=n<e.length?e[n]:Number.POSITIVE_INFINITY;return t-s>=o-t?o:s},t.prototype.roundTo=function(t,e,i){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=10);var n=Math.pow(i,-e);return Math.round(t*n)/n},t.prototype.floorTo=function(t,e,i){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=10);var n=Math.pow(i,-e);return Math.floor(t*n)/n},t.prototype.ceilTo=function(t,e,i){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=10);var n=Math.pow(i,-e);return Math.ceil(t*n)/n},t.prototype.interpolateFloat=function(t,e,i){return(e-t)*i+t},t.prototype.radiansToDegrees=function(e){return e*t.RAD_TO_DEG},t.prototype.degreesToRadians=function(e){return e*t.DEG_TO_RAD},t.prototype.angleBetween=function(t,e,i,n){return Math.atan2(n-e,i-t)},t.prototype.normalizeAngle=function(e,i){"undefined"==typeof i&&(i=!0);var n=i?t.PI:180;return this.wrap(e,n,-n)},t.prototype.nearestAngleBetween=function(e,i,n){"undefined"==typeof n&&(n=!0);var s=n?t.PI:180;return e=this.normalizeAngle(e,n),i=this.normalizeAngle(i,n),-s/2>e&&i>s/2&&(e+=2*s),-s/2>i&&e>s/2&&(i+=2*s),i-e},t.prototype.normalizeAngleToAnother=function(t,e,i){return"undefined"==typeof i&&(i=!0),e+this.nearestAngleBetween(e,t,i)},t.prototype.normalizeAngleAfterAnother=function(t,e,i){return"undefined"==typeof i&&(i=!0),t=this.normalizeAngle(t-e,i),e+t},t.prototype.normalizeAngleBeforeAnother=function(t,e,i){return"undefined"==typeof i&&(i=!0),t=this.normalizeAngle(e-t,i),e-t},t.prototype.interpolateAngles=function(t,e,i,n,s){return"undefined"==typeof n&&(n=!0),"undefined"==typeof s&&(s=null),t=this.normalizeAngle(t,n),e=this.normalizeAngleToAnother(e,t,n),"function"==typeof s?s(i,t,e-t,1):this.interpolateFloat(t,e,i)},t.prototype.logBaseOf=function(t,e){return Math.log(t)/Math.log(e)},t.prototype.GCD=function(t,e){var i;for(t=Math.abs(t),e=Math.abs(e),e>t&&(i=t,t=e,e=i);;){if(i=t%e,!i)return e;t=e,e=i}return 1},t.prototype.LCM=function(t,e){return t*e/this.GCD(t,e)},t.prototype.factorial=function(t){if(0==t)return 1;for(var e=t;--t;)e*=t;return e},t.prototype.gammaFunction=function(t){return this.factorial(t-1)},t.prototype.fallingFactorial=function(t,e){return this.factorial(t)/this.factorial(t-e)},t.prototype.risingFactorial=function(t,e){return this.factorial(t+e-1)/this.factorial(t-1)},t.prototype.binCoef=function(t,e){return this.fallingFactorial(t,e)/this.factorial(e)},t.prototype.risingBinCoef=function(t,e){return this.risingFactorial(t,e)/this.factorial(e)},t.prototype.chanceRoll=function(t){return"undefined"==typeof t&&(t=50),0>=t?!1:t>=100?!0:100*Math.random()>=t?!1:!0},t.prototype.maxAdd=function(t,e,i){return t+=e,t>i&&(t=i),t},t.prototype.minSub=function(t,e,i){return t-=e,i>t&&(t=i),t},t.prototype.wrapValue=function(t,e,i){var n;return t=Math.abs(t),e=Math.abs(e),i=Math.abs(i),n=(t+e)%i},t.prototype.randomSign=function(){return Math.random()>.5?1:-1},t.prototype.isOdd=function(t){return 1&t?!0:!1},t.prototype.isEven=function(t){return 1&t?!1:!0},t.prototype.wrapAngle=function(t){var e=t;return t>=-180&&180>=t?t:(e=(t+180)%360,0>e&&(e+=360),e-180)},t.prototype.angleLimit=function(t,e,i){var n=t;return t>i?n=i:e>t&&(n=e),n},t.prototype.linearInterpolation=function(t,e){var i=t.length-1,n=i*e,s=Math.floor(n);return 0>e?this.linear(t[0],t[1],n):e>1?this.linear(t[i],t[i-1],i-n):this.linear(t[s],t[s+1>i?i:s+1],n-s)},t.prototype.bezierInterpolation=function(t,e){for(var i=0,n=t.length-1,s=0;n>=s;s++)i+=Math.pow(1-e,n-s)*Math.pow(e,s)*t[s]*this.bernstein(n,s);return i},t.prototype.catmullRomInterpolation=function(t,e){var i=t.length-1,n=i*e,s=Math.floor(n);return t[0]===t[i]?(0>e&&(s=Math.floor(n=i*(1+e))),this.catmullRom(t[(s-1+i)%i],t[s],t[(s+1)%i],t[(s+2)%i],n-s)):0>e?t[0]-(this.catmullRom(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(this.catmullRom(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):this.catmullRom(t[s?s-1:0],t[s],t[s+1>i?i:s+1],t[s+2>i?i:s+2],n-s)
},t.prototype.linear=function(t,e,i){return(e-t)*i+t},t.prototype.bernstein=function(t,e){return this.factorial(t)/this.factorial(e)/this.factorial(t-e)},t.prototype.catmullRom=function(t,e,i,n,s){var o=.5*(i-t),r=.5*(n-e),h=s*s,a=s*h;return(2*e-2*i+o+r)*a+(-3*e+3*i-2*o-r)*h+o*s+e},t.prototype.difference=function(t,e){return Math.abs(t-e)},t.prototype.random=function(){return this.globalSeed=this.srand(this.globalSeed)},t.prototype.srand=function(t){return 0x87fa7ffef00b*t%2147483647/2147483647},t.prototype.getRandom=function(t,e,i){if("undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),null!=t){var n=i;if((0==n||n>t.length-e)&&(n=t.length-e),n>0)return t[e+Math.floor(Math.random()*n)]}return null},t.prototype.floor=function(t){var e=0|t;return t>0?e:e!=t?e-1:e},t.prototype.ceil=function(t){var e=0|t;return t>0&&e!=t?e+1:e},t.prototype.sinCosGenerator=function(t,e,i,n){"undefined"==typeof e&&(e=1),"undefined"==typeof i&&(i=1),"undefined"==typeof n&&(n=1);var s=e,o=i,r=n*Math.PI/t;this.cosTable=[],this.sinTable=[];for(var h=0;t>h;h++)o-=s*r,s+=o*r,this.cosTable[h]=o,this.sinTable[h]=s;return this.sinTable},t.prototype.shiftSinTable=function(){if(this.sinTable){var t=this.sinTable.shift();return this.sinTable.push(t),t}},t.prototype.shiftCosTable=function(){if(this.cosTable){var t=this.cosTable.shift();return this.cosTable.push(t),t}},t.prototype.vectorLength=function(t,e){return Math.sqrt(t*t+e*e)},t.prototype.dotProduct=function(t,e,i,n){return t*i+e*n},t.prototype.shuffleArray=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t},t.distanceBetween=function(t,e,i,n){var s=t-i,o=e-n;return Math.sqrt(s*s+o*o)},t.prototype.rotatePoint=function(e,i,n,s,o,r){return"undefined"==typeof o&&(o=!1),"undefined"==typeof r&&(r=null),o&&(s*=t.DEG_TO_RAD),null===r&&(r=Math.sqrt((i-e.x)*(i-e.x)+(n-e.y)*(n-e.y))),e.x=i+r*Math.cos(s),e.y=n+r*Math.sin(s),e},t}();t.GameMath=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t){this._game=t,this._world=this._game.world}return t.prototype.camera=function(t,e,i,n){return this._world.createCamera(t,e,i,n)},t.prototype.geomSprite=function(t,e){return this._world.createGeomSprite(t,e)},t.prototype.sprite=function(t,e,i){return"undefined"==typeof i&&(i=""),this._world.createSprite(t,e,i)},t.prototype.dynamicTexture=function(t,e){return this._world.createDynamicTexture(t,e)},t.prototype.group=function(t){return"undefined"==typeof t&&(t=0),this._world.createGroup(t)},t.prototype.particle=function(){return this._world.createParticle()},t.prototype.emitter=function(t,e,i){return"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),this._world.createEmitter(t,e,i)},t.prototype.scrollZone=function(t,e,i,n,s){return"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=0),this._world.createScrollZone(t,e,i,n,s)},t.prototype.tilemap=function(t,e,i,n,s,o){return"undefined"==typeof n&&(n=!0),"undefined"==typeof s&&(s=0),"undefined"==typeof o&&(o=0),this._world.createTilemap(t,e,i,n,s,o)},t.prototype.tween=function(t){return this._game.tweens.create(t)},t.prototype.existingSprite=function(t){return this._world.group.add(t)},t.prototype.existingGeomSprite=function(t){return this._world.group.add(t)},t.prototype.existingEmitter=function(t){return this._world.group.add(t)},t.prototype.existingScrollZone=function(t){return this._world.group.add(t)},t.prototype.existingTilemap=function(t){return this._world.group.add(t)},t.prototype.existingTween=function(t){return this._game.tweens.add(t)},t}();t.GameObjectFactory=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(t){function e(e,i){"undefined"==typeof i&&(i=0),t.call(this,e),this.globalCompositeOperation=null,this.alpha=0,this.isGroup=!0,this.members=[],this.length=0,this._maxSize=i,this._marker=0,this._sortIndex=null,this.cameraBlacklist=[]}return __extends(e,t),e.ASCENDING=-1,e.DESCENDING=1,e.prototype.hideFromCamera=function(t){-1==this.cameraBlacklist.indexOf(t.ID)&&this.cameraBlacklist.push(t.ID)},e.prototype.showToCamera=function(t){-1!==this.cameraBlacklist.indexOf(t.ID)&&this.cameraBlacklist.slice(this.cameraBlacklist.indexOf(t.ID),1)},e.prototype.clearCameraList=function(){this.cameraBlacklist.length=0},e.prototype.destroy=function(){if(null!=this.members){for(var t,e=0;e<this.length;)t=this.members[e++],null!=t&&t.destroy();this.members.length=0}this._sortIndex=null},e.prototype.update=function(t){if("undefined"==typeof t&&(t=!1),!this.ignoreGlobalUpdate||0!=t)for(var e,i=0;i<this.length;)e=this.members[i++],null!=e&&e.exists&&e.active&&0==e.ignoreGlobalUpdate&&(e.preUpdate(),e.update(t),e.postUpdate())},e.prototype.render=function(t,e,i,n){if("undefined"==typeof n&&(n=!1),-1===this.cameraBlacklist.indexOf(t.ID)&&(!this.ignoreGlobalRender||0!=n)){if(this.globalCompositeOperation&&(this._game.stage.context.save(),this._game.stage.context.globalCompositeOperation=this.globalCompositeOperation),this.alpha>0){var s=this._game.stage.context.globalAlpha;this._game.stage.context.globalAlpha=this.alpha}for(var o,r=0;r<this.length;)o=this.members[r++],null!=o&&o.exists&&o.visible&&0==o.ignoreGlobalRender&&o.render(t,e,i,n);this.alpha>0&&(this._game.stage.context.globalAlpha=s),this.globalCompositeOperation&&this._game.stage.context.restore()}},Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},set:function(t){if(this._maxSize=t,this._marker>=this._maxSize&&(this._marker=0),!(0==this._maxSize||null==this.members||this._maxSize>=this.members.length)){for(var e,i=this._maxSize,n=this.members.length;n>i;)e=this.members[i++],null!=e&&e.destroy();this.length=this.members.length=this._maxSize}},enumerable:!0,configurable:!0}),e.prototype.add=function(t){if(this.members.indexOf(t)>=0)return t;for(var e=0,i=this.members.length;i>e;){if(null==this.members[e])return this.members[e]=t,e>=this.length&&(this.length=e+1),t;e++}if(this._maxSize>0){if(this.members.length>=this._maxSize)return t;2*this.members.length<=this._maxSize?this.members.length*=2:this.members.length=this._maxSize}else this.members.length*=2;return this.members[e]=t,this.length=e+1,t},e.prototype.recycle=function(t){"undefined"==typeof t&&(t=null);var e;return this._maxSize>0?this.length<this._maxSize?null==t?null:this.add(new t(this._game)):(e=this.members[this._marker++],this._marker>=this._maxSize&&(this._marker=0),e):(e=this.getFirstAvailable(t),null!=e?e:null==t?null:this.add(new t(this._game)))},e.prototype.remove=function(t,e){"undefined"==typeof e&&(e=!1);var i=this.members.indexOf(t);return 0>i||i>=this.members.length?null:(e?(this.members.splice(i,1),this.length--):this.members[i]=null,t)},e.prototype.replace=function(t,e){var i=this.members.indexOf(t);return 0>i||i>=this.members.length?null:(this.members[i]=e,e)},e.prototype.sort=function(t,i){"undefined"==typeof t&&(t="y"),"undefined"==typeof i&&(i=e.ASCENDING),this._sortIndex=t,this._sortOrder=i,this.members.sort(this.sortHandler)},e.prototype.setAll=function(t,e,i){"undefined"==typeof i&&(i=!0);for(var n,s=0;length>s;)n=this.members[s++],null!=n&&(i&&1==n.isGroup?n.setAll(t,e,i):n[t]=e)},e.prototype.callAll=function(t,e){"undefined"==typeof e&&(e=!0);for(var i,n=0;n<this.length;)i=this.members[n++],null!=i&&(e&&1==i.isGroup?i.callAll(t,e):i[t]())},e.prototype.forEach=function(t,e){"undefined"==typeof e&&(e=!1);for(var i,n=0;n<this.length;)i=this.members[n++],null!=i&&(e&&1==i.isGroup?i.forEach(t,!0):t.call(this,i))},e.prototype.forEachAlive=function(t,e,i){"undefined"==typeof i&&(i=!1);for(var n,s=0;s<this.length;)n=this.members[s++],null!=n&&n.alive&&(i&&1==n.isGroup?n.forEachAlive(t,e,!0):e.call(t,n))},e.prototype.getFirstAvailable=function(t){"undefined"==typeof t&&(t=null);for(var e,i=0;i<this.length;)if(e=this.members[i++],null!=e&&!e.exists&&(null==t||typeof e===t))return e;return null},e.prototype.getFirstNull=function(){for(var t=0,e=this.members.length;e>t;){if(null==this.members[t])return t;t++}return-1},e.prototype.getFirstExtant=function(){for(var t,e=0;length>e;)if(t=this.members[e++],null!=t&&t.exists)return t;return null},e.prototype.getFirstAlive=function(){for(var t,e=0;e<this.length;)if(t=this.members[e++],null!=t&&t.exists&&t.alive)return t;return null},e.prototype.getFirstDead=function(){for(var t,e=0;e<this.length;)if(t=this.members[e++],null!=t&&!t.alive)return t;return null},e.prototype.countLiving=function(){for(var t,e=-1,i=0;i<this.length;)t=this.members[i++],null!=t&&(0>e&&(e=0),t.exists&&t.alive&&e++);return e},e.prototype.countDead=function(){for(var t,e=-1,i=0;i<this.length;)t=this.members[i++],null!=t&&(0>e&&(e=0),t.alive||e++);return e},e.prototype.getRandom=function(t,e){return"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),0==e&&(e=this.length),this._game.math.getRandom(this.members,t,e)},e.prototype.clear=function(){this.length=this.members.length=0},e.prototype.kill=function(){for(var t,e=0;e<this.length;)t=this.members[e++],null!=t&&t.exists&&t.kill()},e.prototype.sortHandler=function(t,e){return t[this._sortIndex]<e[this._sortIndex]?this._sortOrder:t[this._sortIndex]>e[this._sortIndex]?-this._sortOrder:0},e}(t.Basic);t.Group=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t,e){this.crossOrigin="",this._game=t,this._gameCreateComplete=e,this._keys=[],this._fileList={},this._xhr=new XMLHttpRequest,this._queueSize=0}return t.TEXTURE_ATLAS_JSON_ARRAY=0,t.TEXTURE_ATLAS_JSON_HASH=1,t.TEXTURE_ATLAS_XML_STARLING=2,t.prototype.reset=function(){this._queueSize=0},Object.defineProperty(t.prototype,"queueSize",{get:function(){return this._queueSize},enumerable:!0,configurable:!0}),t.prototype.addImageFile=function(t,e){this.checkKeyExists(t)===!1&&(this._queueSize++,this._fileList[t]={type:"image",key:t,url:e,data:null,error:!1,loaded:!1},this._keys.push(t))},t.prototype.addSpriteSheet=function(t,e,i,n,s){"undefined"==typeof s&&(s=-1),this.checkKeyExists(t)===!1&&(this._queueSize++,this._fileList[t]={type:"spritesheet",key:t,url:e,data:null,frameWidth:i,frameHeight:n,frameMax:s,error:!1,loaded:!1},this._keys.push(t))},t.prototype.addTextureAtlas=function(e,i,n,s,o){if("undefined"==typeof n&&(n=null),"undefined"==typeof s&&(s=null),"undefined"==typeof o&&(o=t.TEXTURE_ATLAS_JSON_ARRAY),this.checkKeyExists(e)===!1)if(null!==n)this._queueSize++,this._fileList[e]={type:"textureatlas",key:e,url:i,atlasURL:n,data:null,format:o,error:!1,loaded:!1},this._keys.push(e);else if(o==t.TEXTURE_ATLAS_JSON_ARRAY)"string"==typeof s&&(s=JSON.parse(s)),this._queueSize++,this._fileList[e]={type:"textureatlas",key:e,url:i,data:null,atlasURL:null,atlasData:s.frames,format:o,error:!1,loaded:!1},this._keys.push(e);else if(o==t.TEXTURE_ATLAS_XML_STARLING){if("string"==typeof s){var r;try{if(window.DOMParser){var h=new DOMParser;r=h.parseFromString(s,"text/xml")}else r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(s)}catch(a){r=void 0}if(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");s=r}this._queueSize++,this._fileList[e]={type:"textureatlas",key:e,url:i,data:null,atlasURL:null,atlasData:s,format:o,error:!1,loaded:!1},this._keys.push(e)}},t.prototype.addAudioFile=function(t,e){this.checkKeyExists(t)===!1&&(this._queueSize++,this._fileList[t]={type:"audio",key:t,url:e,data:null,buffer:null,error:!1,loaded:!1},this._keys.push(t))},t.prototype.addTextFile=function(t,e){this.checkKeyExists(t)===!1&&(this._queueSize++,this._fileList[t]={type:"text",key:t,url:e,data:null,error:!1,loaded:!1},this._keys.push(t))},t.prototype.removeFile=function(t){delete this._fileList[t]},t.prototype.removeAll=function(){this._fileList={}},t.prototype.load=function(t,e){"undefined"==typeof t&&(t=null),"undefined"==typeof e&&(e=null),this.progress=0,this.hasLoaded=!1,this._onComplete=e,null==e&&(this._onComplete=this._game.onCreateCallback),this._onFileLoad=t,this._keys.length>0?(this._progressChunk=100/this._keys.length,this.loadFile()):(this.progress=1,this.hasLoaded=!0,this._gameCreateComplete.call(this._game),null!==this._onComplete&&this._onComplete.call(this._game.callbackContext))},t.prototype.loadFile=function(){var t=this,e=this._fileList[this._keys.pop()];switch(e.type){case"image":case"spritesheet":case"textureatlas":e.data=new Image,e.data.name=e.key,e.data.onload=function(){return t.fileComplete(e.key)},e.data.onerror=function(){return t.fileError(e.key)},e.data.crossOrigin=this.crossOrigin,e.data.src=e.url;break;case"audio":this._xhr.open("GET",e.url,!0),this._xhr.responseType="arraybuffer",this._xhr.onload=function(){return t.fileComplete(e.key)},this._xhr.onerror=function(){return t.fileError(e.key)},this._xhr.send();break;case"text":this._xhr.open("GET",e.url,!0),this._xhr.responseType="text",this._xhr.onload=function(){return t.fileComplete(e.key)},this._xhr.onerror=function(){return t.fileError(e.key)},this._xhr.send()}},t.prototype.fileError=function(t){this._fileList[t].loaded=!0,this._fileList[t].error=!0,this.nextFile(t,!1)},t.prototype.fileComplete=function(e){var i=this;this._fileList[e].loaded=!0;var n=this._fileList[e],s=!0;switch(n.type){case"image":this._game.cache.addImage(n.key,n.url,n.data);break;case"spritesheet":this._game.cache.addSpriteSheet(n.key,n.url,n.data,n.frameWidth,n.frameHeight,n.frameMax);break;case"textureatlas":null==n.atlasURL?this._game.cache.addTextureAtlas(n.key,n.url,n.data,n.atlasData,n.format):(s=!1,this._xhr.open("GET",n.atlasURL,!0),this._xhr.responseType="text",n.format==t.TEXTURE_ATLAS_JSON_ARRAY?this._xhr.onload=function(){return i.jsonLoadComplete(n.key)}:n.format==t.TEXTURE_ATLAS_XML_STARLING&&(this._xhr.onload=function(){return i.xmlLoadComplete(n.key)}),this._xhr.onerror=function(){return i.dataLoadError(n.key)},this._xhr.send());break;case"audio":n.data=this._xhr.response,this._game.cache.addSound(n.key,n.url,n.data);break;case"text":n.data=this._xhr.response,this._game.cache.addText(n.key,n.url,n.data)}s&&this.nextFile(e,!0)},t.prototype.jsonLoadComplete=function(t){var e=JSON.parse(this._xhr.response),i=this._fileList[t];this._game.cache.addTextureAtlas(i.key,i.url,i.data,e.frames,i.format),this.nextFile(t,!0)},t.prototype.dataLoadError=function(t){var e=this._fileList[t];e.error=!0,this.nextFile(t,!0)},t.prototype.xmlLoadComplete=function(t){var e,i=this._xhr.response;try{if(window.DOMParser){var n=new DOMParser;e=n.parseFromString(i,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(i)}catch(s){e=void 0}if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");var o=this._fileList[t];this._game.cache.addTextureAtlas(o.key,o.url,o.data,e,o.format),this.nextFile(t,!0)},t.prototype.nextFile=function(t,e){this.progress=Math.round(this.progress+this._progressChunk),this.progress>100&&(this.progress=100),this._onFileLoad&&this._onFileLoad.call(this._game.callbackContext,this.progress,t,e),this._keys.length>0?this.loadFile():(this.hasLoaded=!0,this.removeAll(),this._gameCreateComplete.call(this._game),null!==this._onComplete&&this._onComplete.call(this._game.callbackContext))},t.prototype.checkKeyExists=function(t){return this._fileList[t]?!0:!1},t}();t.Loader=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(t){this._game=t}return e.prototype.computeVelocity=function(t,e,i,n){if("undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=1e4),0!==e)t+=e*this._game.time.elapsed;else if(0!==i){var s=i*this._game.time.elapsed;t-s>0?t-=s:0>t+s?t+=s:t=0}return 0!=t&&1e4!=n&&(t>n?t=n:-n>t&&(t=-n)),t},e.prototype.velocityFromAngle=function(e,i){isNaN(i)&&(i=0);var n=this._game.math.degreesToRadians(e);return new t.Point(Math.cos(n)*i,Math.sin(n)*i)},e.prototype.moveTowardsObject=function(t,e,i,n){"undefined"==typeof i&&(i=60),"undefined"==typeof n&&(n=0);var s=this.angleBetween(t,e);if(n>0){var o=this.distanceBetween(t,e);i=o/(n/1e3)}t.velocity.x=Math.cos(s)*i,t.velocity.y=Math.sin(s)*i},e.prototype.accelerateTowardsObject=function(t,e,i,n,s){var o=this.angleBetween(t,e);t.velocity.x=0,t.velocity.y=0,t.acceleration.x=Math.cos(o)*i,t.acceleration.y=Math.sin(o)*i,t.maxVelocity.x=n,t.maxVelocity.y=s},e.prototype.moveTowardsMouse=function(t,e,i){"undefined"==typeof e&&(e=60),"undefined"==typeof i&&(i=0);var n=this.angleBetweenMouse(t);if(i>0){var s=this.distanceToMouse(t);e=s/(i/1e3)}t.velocity.x=Math.cos(n)*e,t.velocity.y=Math.sin(n)*e},e.prototype.accelerateTowardsMouse=function(t,e,i,n){var s=this.angleBetweenMouse(t);t.velocity.x=0,t.velocity.y=0,t.acceleration.x=Math.cos(s)*e,t.acceleration.y=Math.sin(s)*e,t.maxVelocity.x=i,t.maxVelocity.y=n},e.prototype.moveTowardsPoint=function(t,e,i,n){"undefined"==typeof i&&(i=60),"undefined"==typeof n&&(n=0);var s=this.angleBetweenPoint(t,e);if(n>0){var o=this.distanceToPoint(t,e);i=o/(n/1e3)}t.velocity.x=Math.cos(s)*i,t.velocity.y=Math.sin(s)*i},e.prototype.accelerateTowardsPoint=function(t,e,i,n,s){var o=this.angleBetweenPoint(t,e);t.velocity.x=0,t.velocity.y=0,t.acceleration.x=Math.cos(o)*i,t.acceleration.y=Math.sin(o)*i,t.maxVelocity.x=n,t.maxVelocity.y=s},e.prototype.distanceBetween=function(t,e){var i=t.x+t.origin.x-(e.x+e.origin.x),n=t.y+t.origin.y-(e.y+e.origin.y);return this._game.math.vectorLength(i,n)},e.prototype.distanceToPoint=function(t,e){var i=t.x+t.origin.x-e.x,n=t.y+t.origin.y-e.y;return this._game.math.vectorLength(i,n)},e.prototype.distanceToMouse=function(t){var e=t.x+t.origin.x-this._game.input.x,i=t.y+t.origin.y-this._game.input.y;return this._game.math.vectorLength(e,i)},e.prototype.angleBetweenPoint=function(t,e,i){"undefined"==typeof i&&(i=!1);var n=e.x-(t.x+t.origin.x),s=e.y-(t.y+t.origin.y);return i?this._game.math.radiansToDegrees(Math.atan2(s,n)):Math.atan2(s,n)},e.prototype.angleBetween=function(t,e,i){"undefined"==typeof i&&(i=!1);var n=e.x+e.origin.x-(t.x+t.origin.x),s=e.y+e.origin.y-(t.y+t.origin.y);return i?this._game.math.radiansToDegrees(Math.atan2(s,n)):Math.atan2(s,n)},e.prototype.velocityFromFacing=function(e,i){var n;return e.facing==t.Collision.LEFT?n=this._game.math.degreesToRadians(180):e.facing==t.Collision.RIGHT?n=this._game.math.degreesToRadians(0):e.facing==t.Collision.UP?n=this._game.math.degreesToRadians(-90):e.facing==t.Collision.DOWN&&(n=this._game.math.degreesToRadians(90)),new t.Point(Math.cos(n)*i,Math.sin(n)*i)},e.prototype.angleBetweenMouse=function(t,e){"undefined"==typeof e&&(e=!1);var i=t.getScreenXY(),n=t._game.input.x-i.x,s=t._game.input.y-i.y;return e?this._game.math.radiansToDegrees(Math.atan2(s,n)):Math.atan2(s,n)},e}();t.Motion=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t,e,i,n,s){"undefined"==typeof n&&(n=1),"undefined"==typeof s&&(s=!1),this.loop=!1,this.isPlaying=!1,this.isDecoding=!1,this._context=t,this._gainNode=e,this._buffer=i,this._volume=n,this.loop=s,null!==this._context&&(this._localGainNode=this._context.createGainNode(),this._localGainNode.connect(this._gainNode),this._localGainNode.gain.value=this._volume),null===this._buffer?this.isDecoding=!0:this.play()}return t.prototype.setDecodedBuffer=function(t){this._buffer=t,this.isDecoding=!1},t.prototype.play=function(){null!==this._buffer&&this.isDecoding!==!0&&(this._sound=this._context.createBufferSource(),this._sound.buffer=this._buffer,this._sound.connect(this._localGainNode),this.loop&&(this._sound.loop=!0),this._sound.noteOn(0),this.duration=this._sound.buffer.duration,this.isPlaying=!0)},t.prototype.stop=function(){this.isPlaying===!0&&(this.isPlaying=!1,this._sound.noteOff(0))},t.prototype.mute=function(){this._localGainNode.gain.value=0},t.prototype.unmute=function(){this._localGainNode.gain.value=this._volume},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this._localGainNode.gain.value=this._volume},enumerable:!0,configurable:!0}),t}();t.Sound=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(t){this._context=null,this._game=t,1==t.device.webaudio&&(window.AudioContext?this._context=new window.AudioContext:window.webkitAudioContext&&(this._context=new window.webkitAudioContext),null!==this._context&&(this._gainNode=this._context.createGainNode(),this._gainNode.connect(this._context.destination),this._volume=1))}return e.prototype.mute=function(){this._gainNode.gain.value=0},e.prototype.unmute=function(){this._gainNode.gain.value=this._volume},Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this._gainNode.gain.value=this._volume},enumerable:!0,configurable:!0}),e.prototype.decode=function(t,e,i){"undefined"==typeof e&&(e=null),"undefined"==typeof i&&(i=null);var n=this._game.cache.getSound(t);if(n&&this._game.cache.isSoundDecoded(t)===!1){var s=this;this._context.decodeAudioData(n,function(n){s._game.cache.decodedSound(t,n),i&&i.setDecodedBuffer(n),e()})}},e.prototype.play=function(e,i,n){if("undefined"==typeof i&&(i=1),"undefined"==typeof n&&(n=!1),null!==this._context){var s=this._game.cache.getSound(e);if(s){if(this._game.cache.isSoundDecoded(e)===!0)return new t.Sound(this._context,this._gainNode,s,i,n);var o=new t.Sound(this._context,this._gainNode,null,i,n);return this.decode(e,function(){return o.play()},o),o}}},e}();t.SoundManager=e}(Phaser||(Phaser={}));var Phaser;!function(t){t.VERSION="Phaser version 0.9.6"}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e){var i=this;this._startHeight=0,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this.width=0,this.height=0,this._game=e,this.enterLandscape=new t.Signal,this.enterPortrait=new t.Signal,this.orientation=window.orientation?window.orientation:window.outerWidth>window.outerHeight?90:0,window.addEventListener("orientationchange",function(t){return i.checkOrientation(t)},!1),window.addEventListener("resize",function(t){return i.checkResize(t)},!1)}return e.EXACT_FIT=0,e.NO_SCALE=1,e.SHOW_ALL=2,Object.defineProperty(e.prototype,"isFullScreen",{get:function(){return null===document.fullscreenElement||null===document.mozFullScreenElement||null===document.webkitFullscreenElement?!1:!0},enumerable:!0,configurable:!0}),e.prototype.startFullScreen=function(){if(!this.isFullScreen){var t=this._game.stage.canvas;t.requestFullScreen?t.requestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()}},e.prototype.stopFullScreen=function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},e.prototype.update=function(){this._game.stage.scaleMode===e.NO_SCALE||window.innerWidth===this.width&&window.innerHeight===this.height||this.refresh()},Object.defineProperty(e.prototype,"isPortrait",{get:function(){return 0==this.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLandscape",{get:function(){return 90===this.orientation||-90===this.orientation},enumerable:!0,configurable:!0}),e.prototype.checkOrientation=function(){this.orientation=window.orientation,this.isLandscape?this.enterLandscape.dispatch(this.orientation):this.enterPortrait.dispatch(this.orientation),this._game.stage.scaleMode!==e.NO_SCALE&&this.refresh()},e.prototype.checkResize=function(){this.orientation=window.outerWidth>window.outerHeight?90:0,this.isLandscape?this.enterLandscape.dispatch(this.orientation):this.enterPortrait.dispatch(this.orientation),this._game.stage.scaleMode!==e.NO_SCALE&&this.refresh()},e.prototype.refresh=function(){var t=this;0==this._game.device.iPad&&0==this._game.device.webApp&&0==this._game.device.desktop&&(document.documentElement.style.minHeight="5000px",this._startHeight=window.innerHeight,this._game.device.android&&0==this._game.device.chrome?window.scrollTo(0,1):window.scrollTo(0,0)),null==this._check&&(this._iterations=40,this._check=window.setInterval(function(){return t.setScreenSize()},10))},e.prototype.setScreenSize=function(){if(0==this._game.device.iPad&&0==this._game.device.webApp&&0==this._game.device.desktop&&(this._game.device.android&&0==this._game.device.chrome?window.scrollTo(0,1):window.scrollTo(0,0)),this._iterations--,window.innerHeight>this._startHeight||this._iterations<0){if(document.documentElement.style.minHeight=window.innerHeight+"px",this._game.stage.scaleMode==e.EXACT_FIT)this.width=this.maxWidth&&window.innerWidth>this.maxWidth?this.maxWidth:window.innerWidth,this.height=this.maxHeight&&window.innerHeight>this.maxHeight?this.maxHeight:window.innerHeight;else if(this._game.stage.scaleMode==e.SHOW_ALL){var t=Math.min(window.innerHeight/this._game.stage.height,window.innerWidth/this._game.stage.width);this.width=Math.round(this._game.stage.width*t),this.height=Math.round(this._game.stage.height*t),this.maxWidth&&this.width>this.maxWidth&&(this.width=this.maxWidth),this.maxHeight&&this.height>this.maxHeight&&(this.height=this.maxHeight)}this._game.stage.canvas.style.width=this.width+"px",this._game.stage.canvas.style.height=this.height+"px",this._game.input.scaleX=this._game.stage.width/this.width,this._game.input.scaleY=this._game.stage.height/this.height,clearInterval(this._check),this._check=null}},e}();t.StageScaleMode=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(t){this._logoData="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAAZCAYAAADdYmvFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAstJREFUeNrsWlFuwjAMbavdZGcAcRm4AXzvCPuGG8BlEJxhZ+l4TJ48z3actGGthqUI1MaO/V6cmIT2/fW10eTt46NvKshtvDZlG31yfOL9a/ldU6x4IZ0GQs0gS217enMkJYr5ixXkYrFoVqtV1kDn8/n+KfXw/Hq9Nin7h8MhScB2u3Xtav2ivsNWrh7XLcWMYqA4eUZ1kj0MAifHJEeKFojWzyIH+rL/0Cwif2AX9nN1oQOgrTg8XcTFx+ScdEOJ4WBxXQ1EjRyrn0cOzzQLzFyQSQcgw/5Qkkr0JVEQpNIdhL4vm4DL5fLulNTHcy6Uxl4/6iMLiePx2KzX6/v30+n0aynUlrnSeNq2/VN9bgM4dFPdNPmsJnIg/PuQbJmLdFN3UNu0SzbyJ0GOWJVWZE/QMkY+owrqXxGEdZA37BVyX6lJTipT6J1lf7fbqc+xh8nYeIvikatP+PGW0nEJ4jOydHYOIcfKnmgWoZDQSIIeio4Sf1IthYWskCO4vqQ6lFYjl8tl9L1H67PZbMz3VO3t93uVXHofmUjReLyMwHi5eCb3ICwJj5ZU9nCg+SzUgPYyif+2epTk4pkkyDp+eXTlZu2BkUybEkklePZfK9lPuTnc07vbmt1bYulHBeNQgx18SsH4ni/cV2rSLtqNDNUH2JQ2SsXS57Y9PHlfumkwCdICt5rnkNdPjpMiIEWgRlAJSdF4SvCQMWj+VyfI0h8D/EgWSYKiJKXi8VrOhJUxaFiFCOKKUJAtR78k9eX4USLHXqLGXOIiWUT4Vj9JiP4W0io3VDz8AJXblNWQrOimLjIGy/9uLICH6mrVmFbxEFHauzmc0fGJJmPg/v+6D0oB7N2bj0FsNHtSWTQniWTR931QlHXvasDTHXLjqY0/1/8hSDxACD+lAGH8dKQbQk5N3TFtzDmLWutvV0+pL5FVoHvCNG35FGAAayS4KUoKC9QAAAAASUVORK5CYII=",this._color1={r:20,g:20,b:20},this._color2={r:200,g:200,b:200},this._fade=null,this._game=t,this._logo=new Image,this._logo.src=this._logoData}return e.prototype.update=function(){null==this._fade&&this.colorCycle(),this._color1.r=Math.round(this._color1.r),this._color1.g=Math.round(this._color1.g),this._color1.b=Math.round(this._color1.b),this._color2.r=Math.round(this._color2.r),this._color2.g=Math.round(this._color2.g),this._color2.b=Math.round(this._color2.b)},e.prototype.render=function(){var e=this._game.stage.context.createLinearGradient(0,0,0,this._game.stage.height);e.addColorStop(0,"rgb("+this._color1.r+", "+this._color1.g+", "+this._color1.b+")"),e.addColorStop(.5,"rgb("+this._color2.r+", "+this._color2.g+", "+this._color2.b+")"),e.addColorStop(1,"rgb("+this._color1.r+", "+this._color1.g+", "+this._color1.b+")"),this._game.stage.context.fillStyle=e,this._game.stage.context.fillRect(0,0,this._game.stage.width,this._game.stage.height),this._game.stage.context.shadowOffsetX=0,this._game.stage.context.shadowOffsetY=0,this._logo&&this._game.stage.context.drawImage(this._logo,32,32),this._game.stage.context.shadowColor="rgb(0,0,0)",this._game.stage.context.shadowOffsetX=1,this._game.stage.context.shadowOffsetY=1,this._game.stage.context.shadowBlur=0,this._game.stage.context.fillStyle="rgb(255,255,255)",this._game.stage.context.font="bold 18px Arial",this._game.stage.context.textBaseline="top",this._game.stage.context.fillText(t.VERSION,32,96),this._game.stage.context.fillText("Game Size: "+this._game.stage.width+" x "+this._game.stage.height,32,128),this._game.stage.context.fillText("www.photonstorm.com",32,160),this._game.stage.context.font="16px Arial",this._game.stage.context.fillText("You are seeing this screen because you didn't specify any default",32,224),this._game.stage.context.fillText("functions in the Game constructor or use Game.switchState()",32,248)},e.prototype.colorCycle=function(){this._fade=this._game.add.tween(this._color2),this._fade.to({r:250*Math.random(),g:250*Math.random(),b:250*Math.random()},3e3,t.Easing.Linear.None),this._fade.onComplete.add(this.colorCycle,this),this._fade.start()},e}();t.BootScreen=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(t,e,i){this._game=t,this._canvas=document.createElement("canvas"),this._canvas.width=e,this._canvas.height=i,this._context=this._canvas.getContext("2d")}return e.prototype.onPaused=function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.drawImage(this._game.stage.canvas,0,0),this._color={r:255,g:255,b:255},this.fadeOut()},e.prototype.onResume=function(){this._fade.stop(),this._game.tweens.remove(this._fade)},e.prototype.update=function(){this._color.r=Math.round(this._color.r),this._color.g=Math.round(this._color.g),this._color.b=Math.round(this._color.b)},e.prototype.render=function(){this._game.stage.context.drawImage(this._canvas,0,0),this._game.stage.context.fillStyle="rgba(0, 0, 0, 0.4)",this._game.stage.context.fillRect(0,0,this._game.stage.width,this._game.stage.height);var t=Math.round(this._game.stage.width/2),e=Math.round(this._game.stage.height/2),i=this._game.stage.centerX-t/2,n=this._game.stage.centerY-e/2;this._game.stage.context.beginPath(),this._game.stage.context.moveTo(i,n),this._game.stage.context.lineTo(i,n+e),this._game.stage.context.lineTo(i+t,this._game.stage.centerY),this._game.stage.context.fillStyle="rgba("+this._color.r+", "+this._color.g+", "+this._color.b+", 0.8)",this._game.stage.context.fill(),this._game.stage.context.closePath()},e.prototype.fadeOut=function(){this._fade=this._game.add.tween(this._color),this._fade.to({r:50,g:50,b:50},1e3,t.Easing.Linear.None),this._fade.onComplete.add(this.fadeIn,this),this._fade.start()},e.prototype.fadeIn=function(){this._fade=this._game.add.tween(this._color),this._fade.to({r:255,g:255,b:255},1e3,t.Easing.Linear.None),this._fade.onComplete.add(this.fadeOut,this),this._fade.start()},e}();t.PauseScreen=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e,i,n,s){var o=this;this._bgColor="rgb(0,0,0)",this.clear=!0,this.disablePauseScreen=!1,this.disableBootScreen=!1,this._game=e,this.canvas=document.createElement("canvas"),this.canvas.width=n,this.canvas.height=s,document.getElementById(i)?(document.getElementById(i).appendChild(this.canvas),document.getElementById(i).style.overflow="hidden"):document.body.appendChild(this.canvas),this.canvas.style.msTouchAction="none",this.canvas.style["ms-touch-action"]="none",this.canvas.style["touch-action"]="none",this.canvas.style.backgroundColor="rgb(0,0,0)",this.canvas.oncontextmenu=function(t){t.preventDefault()},this.context=this.canvas.getContext("2d"),this.offset=this.getOffset(this.canvas),this.bounds=new t.Quad(this.offset.x,this.offset.y,n,s),this.aspectRatio=n/s,this.scaleMode=t.StageScaleMode.NO_SCALE,this.scale=new t.StageScaleMode(this._game),this._bootScreen=new t.BootScreen(this._game),this._pauseScreen=new t.PauseScreen(this._game,n,s),document.addEventListener("visibilitychange",function(t){return o.visibilityChange(t)},!1),document.addEventListener("webkitvisibilitychange",function(t){return o.visibilityChange(t)},!1),window.onblur=function(t){return o.visibilityChange(t)},window.onfocus=function(t){return o.visibilityChange(t)}}return e.prototype.update=function(){this.scale.update(),this.clear&&this.context.clearRect(0,0,this.width,this.height),0==this._game.isRunning&&0==this.disableBootScreen&&(this._bootScreen.update(),this._bootScreen.render()),1==this._game.paused&&0==this.disablePauseScreen&&(this._pauseScreen.update(),this._pauseScreen.render())
},e.prototype.visibilityChange=function(t){this.disablePauseScreen||("blur"==t.type||1==document.hidden||1==document.webkitHidden?0==this._game.paused&&this.pauseGame():1==this._game.paused&&this.resumeGame())},e.prototype.pauseGame=function(){this._pauseScreen.onPaused(),this.saveCanvasValues(),this._game.paused=!0},e.prototype.resumeGame=function(){this._pauseScreen.onResume(),this.restoreCanvasValues(),this._game.paused=!1},e.prototype.getOffset=function(e){var i=e.getBoundingClientRect(),n=e.clientTop||document.body.clientTop||0,s=e.clientLeft||document.body.clientLeft||0,o=window.pageYOffset||e.scrollTop||document.body.scrollTop,r=window.pageXOffset||e.scrollLeft||document.body.scrollLeft;return new t.MicroPoint(i.left+r-s,i.top+o-n)},e.prototype.saveCanvasValues=function(){this.strokeStyle=this.context.strokeStyle,this.lineWidth=this.context.lineWidth,this.fillStyle=this.context.fillStyle},e.prototype.restoreCanvasValues=function(){this.context.strokeStyle=this.strokeStyle,this.context.lineWidth=this.lineWidth,this.context.fillStyle=this.fillStyle},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._bgColor},set:function(t){this.canvas.style.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.bounds.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.bounds.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.bounds.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.bounds.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerX",{get:function(){return this.bounds.halfWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerY",{get:function(){return this.bounds.halfHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"randomX",{get:function(){return Math.round(Math.random()*this.bounds.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"randomY",{get:function(){return Math.round(Math.random()*this.bounds.height)},enumerable:!0,configurable:!0}),e}();t.Stage=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t){this.timeScale=1,this.elapsed=0,this.time=0,this.now=0,this.delta=0,this.fps=0,this.fpsMin=1e3,this.fpsMax=0,this.msMin=1e3,this.msMax=0,this.frames=0,this._timeLastSecond=0,this._started=0,this._timeLastSecond=this._started,this.time=this._started,this._game=t}return Object.defineProperty(t.prototype,"totalElapsedSeconds",{get:function(){return.001*(this.now-this._started)},enumerable:!0,configurable:!0}),t.prototype.update=function(t){this.now=t,this.delta=this.now-this.time,this.msMin=Math.min(this.msMin,this.delta),this.msMax=Math.max(this.msMax,this.delta),this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this.fpsMin=Math.min(this.fpsMin,this.fps),this.fpsMax=Math.max(this.fpsMax,this.fps),this._timeLastSecond=this.now,this.frames=0),this.time=this.now},t.prototype.elapsedSince=function(t){return this.now-t},t.prototype.elapsedSecondsSince=function(t){return.001*(this.now-t)},t.prototype.reset=function(){this._started=this.now},t}();t.Time=e}(Phaser||(Phaser={}));var Phaser;!function(t){!function(t){var e=function(){function t(){}return t.In=function(t){var e=1.70158;return t*t*((e+1)*t-e)},t.Out=function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},t.InOut=function(t){var e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)},t}();t.Back=e}(t.Easing||(t.Easing={}));t.Easing}(Phaser||(Phaser={}));var Phaser;!function(t){!function(e){var i=function(){function e(){}return e.In=function(e){return 1-t.Easing.Bounce.Out(1-e)},e.Out=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.InOut=function(e){return.5>e?.5*t.Easing.Bounce.In(2*e):.5*t.Easing.Bounce.Out(2*e-1)+.5},e}();e.Bounce=i}(t.Easing||(t.Easing={}));t.Easing}(Phaser||(Phaser={}));var Phaser;!function(t){!function(t){var e=function(){function t(){}return t.In=function(t){return 1-Math.sqrt(1-t*t)},t.Out=function(t){return Math.sqrt(1- --t*t)},t.InOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t}();t.Circular=e}(t.Easing||(t.Easing={}));t.Easing}(Phaser||(Phaser={}));var Phaser;!function(t){!function(t){var e=function(){function t(){}return t.In=function(t){return t*t*t},t.Out=function(t){return--t*t*t+1},t.InOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},t}();t.Cubic=e}(t.Easing||(t.Easing={}));t.Easing}(Phaser||(Phaser={}));var Phaser;!function(t){!function(t){var e=function(){function t(){}return t.In=function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n)))},t.Out=function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/n)+1)},t.InOut=function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n)*.5+1)},t}();t.Elastic=e}(t.Easing||(t.Easing={}));t.Easing}(Phaser||(Phaser={}));var Phaser;!function(t){!function(t){var e=function(){function t(){}return t.In=function(t){return 0===t?0:Math.pow(1024,t-1)},t.Out=function(t){return 1===t?1:1-Math.pow(2,-10*t)},t.InOut=function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},t}();t.Exponential=e}(t.Easing||(t.Easing={}));t.Easing}(Phaser||(Phaser={}));var Phaser;!function(t){!function(t){var e=function(){function t(){}return t.None=function(t){return t},t}();t.Linear=e}(t.Easing||(t.Easing={}));t.Easing}(Phaser||(Phaser={}));var Phaser;!function(t){!function(t){var e=function(){function t(){}return t.In=function(t){return t*t},t.Out=function(t){return t*(2-t)},t.InOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},t}();t.Quadratic=e}(t.Easing||(t.Easing={}));t.Easing}(Phaser||(Phaser={}));var Phaser;!function(t){!function(t){var e=function(){function t(){}return t.In=function(t){return t*t*t*t},t.Out=function(t){return 1- --t*t*t*t},t.InOut=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},t}();t.Quartic=e}(t.Easing||(t.Easing={}));t.Easing}(Phaser||(Phaser={}));var Phaser;!function(t){!function(t){var e=function(){function t(){}return t.In=function(t){return t*t*t*t*t},t.Out=function(t){return--t*t*t*t*t+1},t.InOut=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},t}();t.Quintic=e}(t.Easing||(t.Easing={}));t.Easing}(Phaser||(Phaser={}));var Phaser;!function(t){!function(t){var e=function(){function t(){}return t.In=function(t){return 1-Math.cos(t*Math.PI/2)},t.Out=function(t){return Math.sin(t*Math.PI/2)},t.InOut=function(t){return.5*(1-Math.cos(Math.PI*t))},t}();t.Sinusoidal=e}(t.Easing||(t.Easing={}));t.Easing}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e,i){this._object=null,this._pausedTime=0,this._valuesStart={},this._valuesEnd={},this._duration=1e3,this._delayTime=0,this._startTime=null,this._chainedTweens=[],this._object=e,this._game=i,this._manager=this._game.tweens,this._interpolationFunction=this._game.math.linearInterpolation,this._easingFunction=t.Easing.Linear.None,this._chainedTweens=[],this.onStart=new t.Signal,this.onUpdate=new t.Signal,this.onComplete=new t.Signal}return e.prototype.to=function(t,e,i,n,s){return"undefined"==typeof e&&(e=1e3),"undefined"==typeof i&&(i=null),"undefined"==typeof n&&(n=!1),"undefined"==typeof s&&(s=0),this._duration=e,this._valuesEnd=t,null!==i&&(this._easingFunction=i),s>0&&(this._delayTime=s),n===!0?this.start():this},e.prototype.start=function(){if(null!==this._game&&null!==this._object){this._manager.add(this),this.onStart.dispatch(this._object),this._startTime=this._game.time.now+this._delayTime;for(var t in this._valuesEnd){if(null===this._object[t]||!(t in this._object))throw Error("Phaser.Tween interpolation of null value of non-existing property");if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}this._valuesStart[t]=this._object[t]}return this}},e.prototype.stop=function(){return null!==this._manager&&this._manager.remove(this),this.onComplete.dispose(),this},Object.defineProperty(e.prototype,"parent",{set:function(t){this._game=t,this._manager=this._game.tweens},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delayTime},set:function(t){this._delayTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"easing",{get:function(){return this._easingFunction},set:function(t){this._easingFunction=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interpolation",{get:function(){return this._interpolationFunction},set:function(t){this._interpolationFunction=t},enumerable:!0,configurable:!0}),e.prototype.chain=function(t){return this._chainedTweens.push(t),this},e.prototype.update=function(t){if(1==this._game.paused?0==this._pausedTime&&(this._pausedTime=t):this._pausedTime>0&&(this._startTime+=t-this._pausedTime,this._pausedTime=0),t<this._startTime)return!0;var e=(t-this._startTime)/this._duration;e=e>1?1:e;var i=this._easingFunction(e);for(var n in this._valuesStart)this._object[n]=this._valuesEnd[n]instanceof Array?this._interpolationFunction(this._valuesEnd[n],i):this._valuesStart[n]+(this._valuesEnd[n]-this._valuesStart[n])*i;if(this.onUpdate.dispatch(this._object,i),1==e){this.onComplete.dispatch(this._object);for(var s=0;s<this._chainedTweens.length;s++)this._chainedTweens[s].start();return!1}return!0},e}();t.Tween=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(t){this._game=t,this._tweens=[]}return e.prototype.getAll=function(){return this._tweens},e.prototype.removeAll=function(){this._tweens.length=0},e.prototype.create=function(e){return new t.Tween(e,this._game)},e.prototype.add=function(t){return t.parent=this._game,this._tweens.push(t),t},e.prototype.remove=function(t){var e=this._tweens.indexOf(t);-1!==e&&this._tweens.splice(e,1)},e.prototype.update=function(){if(0===this._tweens.length)return!1;for(var t=0,e=this._tweens.length;e>t;)this._tweens[t].update(this._game.time.now)?t++:(this._tweens.splice(t,1),e--);return!0},e}();t.TweenManager=e}(Phaser||(Phaser={}));var Phaser;!function(t){!function(e){var i=function(){function e(e){this.pos=(new t.Vector2).mutableSet(e),this.lastPos=(new t.Vector2).mutableSet(e)}return e.prototype.render=function(t){t.beginPath(),t.arc(this.pos.x,this.pos.y,2,0,2*Math.PI),t.fillStyle="#2dad8f",t.fill()},e}();e.Particle=i}(t.Verlet||(t.Verlet={}));t.Verlet}(Phaser||(Phaser={}));var Phaser;!function(t){!function(e){var i=function(){function e(e,i){this.a=e,this.pos=(new t.Vector2).mutableSet(i)}return e.prototype.relax=function(){this.a.pos.mutableSet(this.pos)},e.prototype.render=function(t){t.beginPath(),t.arc(this.pos.x,this.pos.y,6,0,2*Math.PI),t.fillStyle="rgba(0,153,255,0.1)",t.fill()},e}();e.PinConstraint=i}(t.Verlet||(t.Verlet={}));t.Verlet}(Phaser||(Phaser={}));var Phaser;!function(t){!function(e){var i=function(){function e(e){this._texture=null,this._sx=0,this._sy=0,this._sw=0,this._sh=0,this._dx=0,this._dy=0,this._dw=0,this._dh=0,this._hw=0,this._hh=0,this.drawParticles=null,this.drawConstraints=null,this.hideConstraints=!0,this.constraintLineColor="rgba(200,200,200,1)",this._game=e,this.sprites=[],this.particles=[],this.constraints=[],this.frameBounds=new t.Quad}return e.prototype.createDistanceConstraint=function(e,i,n,s){return"undefined"==typeof s&&(s=null),this.constraints.push(new t.Verlet.DistanceConstraint(e,i,n,s)),this.constraints[this.constraints.length-1]},e.prototype.createAngleConstraint=function(e,i,n,s){return this.constraints.push(new t.Verlet.AngleConstraint(e,i,n,s)),this.constraints[this.constraints.length-1]},e.prototype.createPinConstraint=function(e,i){return this.constraints.push(new t.Verlet.PinConstraint(e,i)),this.constraints[this.constraints.length-1]},e.prototype.loadGraphic=function(t){return null!==this._game.cache.getImage(t)&&0==this._game.cache.isSpriteSheet(t)&&(this._texture=this._game.cache.getImage(t),this.frameBounds.width=this._texture.width,this.frameBounds.height=this._texture.height,this._hw=Math.floor(this.frameBounds.width/2),this._hh=Math.floor(this.frameBounds.width/2),this.drawParticles=this.render,this.drawConstraints=this.renderConstraints),this},e.prototype.renderConstraints=function(t){if(1!=this.hideConstraints&&0!=this.constraints.length){var e;t.beginPath();for(e in this.constraints)this.constraints[e].b&&(t.moveTo(this.constraints[e].a.pos.x,this.constraints[e].a.pos.y),t.lineTo(this.constraints[e].b.pos.x,this.constraints[e].b.pos.y));t.strokeStyle=this.constraintLineColor,t.stroke(),t.closePath()}},e.prototype.render=function(t){this._sx=0,this._sy=0,this._sw=this.frameBounds.width,this._sh=this.frameBounds.height,this._dw=this.frameBounds.width,this._dh=this.frameBounds.height,this._sx=Math.round(this._sx),this._sy=Math.round(this._sy),this._sw=Math.round(this._sw),this._sh=Math.round(this._sh),this._dw=Math.round(this._dw),this._dh=Math.round(this._dh);var e;for(e in this.particles)this._dx=this.particles[e].pos.x-this._hw,this._dy=this.particles[e].pos.y-this._hh,this._dx=Math.round(this._dx),this._dy=Math.round(this._dy),t.drawImage(this._texture,this._sx,this._sy,this._sw,this._sh,this._dx,this._dy,this._dw,this._dh)},e.prototype.pin=function(e,i){"undefined"==typeof i&&(i=null),null==i&&(i=this.particles[e].pos);var n=new t.Verlet.PinConstraint(this.particles[e],i);return this.constraints.push(n),n},e}();e.Composite=i}(t.Verlet||(t.Verlet={}));t.Verlet}(Phaser||(Phaser={}));var Phaser;!function(t){!function(t){var e=function(){function t(t,e,i,n){"undefined"==typeof n&&(n=null),this.a=t,this.b=e,this.distance=null===n?t.pos.sub(e.pos).length():n,this.stiffness=i}return t.prototype.relax=function(t){var e=this.a.pos.sub(this.b.pos),i=e.length2();e.mutableScale((this.distance*this.distance-i)/i*this.stiffness*t),this.a.pos.mutableAdd(e),this.b.pos.mutableSub(e)},t.prototype.render=function(t){t.beginPath(),t.moveTo(this.a.pos.x,this.a.pos.y),t.lineTo(this.b.pos.x,this.b.pos.y),t.strokeStyle="#d8dde2",t.stroke(),t.closePath()},t}();t.DistanceConstraint=e}(t.Verlet||(t.Verlet={}));t.Verlet}(Phaser||(Phaser={}));var Phaser;!function(t){!function(t){var e=function(){function t(t,e,i,n){this.a=t,this.b=e,this.c=i,this.angle=this.b.pos.angle2(this.a.pos,this.c.pos),this.stiffness=n}return t.prototype.relax=function(t){var e=this.b.pos.angle2(this.a.pos,this.c.pos),i=e-this.angle;i<=-Math.PI?i+=2*Math.PI:i>=Math.PI&&(i-=2*Math.PI),i*=t*this.stiffness,this.a.pos=this.a.pos.rotate(this.b.pos,i),this.c.pos=this.c.pos.rotate(this.b.pos,-i),this.b.pos=this.b.pos.rotate(this.a.pos,i),this.b.pos=this.b.pos.rotate(this.c.pos,-i)},t.prototype.render=function(t){t.beginPath(),t.moveTo(this.a.pos.x,this.a.pos.y),t.lineTo(this.b.pos.x,this.b.pos.y),t.lineTo(this.c.pos.x,this.c.pos.y);var e=t.lineWidth;t.lineWidth=5,t.strokeStyle="rgba(255,255,0,0.2)",t.stroke(),t.lineWidth=e},t}();t.AngleConstraint=e}(t.Verlet||(t.Verlet={}));t.Verlet}(Phaser||(Phaser={}));var Phaser;!function(t){!function(e){var i=function(){function i(e,i,n){this._v=new t.Vector2,this.composites=[],this.step=16,this.selectionRadius=20,this.draggedEntity=null,this.highlightColor="#4f545c",this.hideNearestEntityCircle=!1,this._game=e,this.width=i,this.height=n,this.gravity=new t.Vector2(0,.2),this.friction=.99,this.groundFriction=.8,this.canvas=e.stage.canvas,this.context=e.stage.context,this._game.input.onDown.add(this.mouseDownHandler,this),this._game.input.onUp.add(this.mouseUpHandler,this)}return i.prototype.intersectionTime=function(t,e,i,n){if(0!=i.x){var s=n.y-i.y*n.x/i.x;if(0==s)return void 0;var o=t.y+i.y*(e.x-t.x)/i.x-e.y;return o/s}if(0==n.x)return void 0;var s=n.x,o=t.x-e.x;return o/s},i.prototype.intersectionPoint=function(e,i,n,s){var o=this.intersectionTime(e,i,n,s);return new t.Vector2(i.x+s.x*o,i.y+s.y*o)},i.prototype.bounds=function(e){this._v.mutableSet(e.pos),this._v.mutableSub(e.lastPos),e.pos.y>this.height-1&&e.pos.mutableSet(this.intersectionPoint(new t.Vector2(0,this.height-1),e.lastPos,new t.Vector2(1,0),this._v)),e.pos.x<0&&e.pos.mutableSet(this.intersectionPoint(new t.Vector2(0,0),e.pos,new t.Vector2(0,1),this._v)),e.pos.x>this.width-1&&e.pos.mutableSet(this.intersectionPoint(new t.Vector2(this.width-1,0),e.pos,new t.Vector2(0,1),this._v))},i.prototype.createPoint=function(e){var i=new t.Verlet.Composite(this._game);return i.particles.push(new t.Verlet.Particle(e)),this.composites.push(i),i},i.prototype.createLineSegments=function(e,i){var n,s=new t.Verlet.Composite(this._game);for(n in e)s.particles.push(new t.Verlet.Particle(e[n])),n>0&&s.constraints.push(new t.Verlet.DistanceConstraint(s.particles[n],s.particles[n-1],i));return this.composites.push(s),s},i.prototype.createCloth=function(e,i,n,s,o,r){var h,a,l=new t.Verlet.Composite(this._game),u=i/s,c=n/s;for(a=0;s>a;++a)for(h=0;s>h;++h){var p=e.x+h*u-i/2+u/2,d=e.y+a*c-n/2+c/2;l.particles.push(new t.Verlet.Particle(new t.Vector2(p,d))),h>0&&l.constraints.push(new t.Verlet.DistanceConstraint(l.particles[a*s+h],l.particles[a*s+h-1],r)),a>0&&l.constraints.push(new t.Verlet.DistanceConstraint(l.particles[a*s+h],l.particles[(a-1)*s+h],r))}for(h=0;s>h;++h)h%o==0&&l.pin(h);return this.composites.push(l),l},i.prototype.createTire=function(i,n,s,o,r){var h,a=2*Math.PI/s,l=new t.Verlet.Composite(this._game);for(h=0;s>h;++h){var u=h*a;l.particles.push(new e.Particle(new t.Vector2(i.x+Math.cos(u)*n,i.y+Math.sin(u)*n)))}var c=new e.Particle(i);for(l.particles.push(c),h=0;s>h;++h)l.constraints.push(new e.DistanceConstraint(l.particles[h],l.particles[(h+1)%s],r)),l.constraints.push(new e.DistanceConstraint(l.particles[h],c,o)),l.constraints.push(new e.DistanceConstraint(l.particles[h],l.particles[(h+5)%s],r));return this.composites.push(l),l},i.prototype.update=function(){if(0!=this.composites.length){var t,e,i;for(i in this.composites)for(t in this.composites[i].particles){var n=this.composites[i].particles,s=n[t].pos.sub(n[t].lastPos).scale(this.friction);if(n[t].pos.y>=this.height-1&&s.length2()>1e-6){var o=s.length();s.x/=o,s.y/=o,s.mutableScale(o*this.groundFriction)}n[t].lastPos.mutableSet(n[t].pos),n[t].pos.mutableAdd(this.gravity),n[t].pos.mutableAdd(s)}this.draggedEntity&&this.draggedEntity.pos.mutableSet(this._game.input.position);var r=1/this.step;for(i in this.composites){var h=this.composites[i].constraints;for(t=0;t<this.step;++t)for(e in h)h[e].relax(r)}for(i in this.composites){var n=this.composites[i].particles;for(t in n)this.bounds(n[t])}}},i.prototype.mouseDownHandler=function(){var t=this.nearestEntity();t&&(this.draggedEntity=t)},i.prototype.mouseUpHandler=function(){this.draggedEntity=null},i.prototype.nearestEntity=function(){var t,i,n=0,s=null,o=null;for(t in this.composites){var r=this.composites[t].particles;for(i in r){var h=r[i].pos.distance2(this._game.input.position);h<=this.selectionRadius*this.selectionRadius&&(null==s||n>h)&&(s=r[i],o=this.composites[t].constraints,n=h)}}for(i in o)o[i]instanceof e.PinConstraint&&o[i].a==s&&(s=o[i]);return s},i.prototype.render=function(){var t,e;for(e in this.composites){if(this.composites[e].drawConstraints)this.composites[e].drawConstraints(this.context,this.composites[e]);else{var i=this.composites[e].constraints;for(t in i)i[t].render(this.context)}if(this.composites[e].drawParticles)this.composites[e].drawParticles(this.context,this.composites[e]);else{var n=this.composites[e].particles;for(t in n)n[t].render(this.context)}}var s=this.draggedEntity||this.nearestEntity();s&&0==this.hideNearestEntityCircle&&(this.context.beginPath(),this.context.arc(s.pos.x,s.pos.y,8,0,2*Math.PI),this.context.strokeStyle=this.highlightColor,this.context.stroke(),this.context.closePath())},i}();e.VerletManager=i}(t.Verlet||(t.Verlet={}));t.Verlet}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e,i,n){this._game=e,this.cameras=new t.CameraManager(this._game,0,0,i,n),this.group=new t.Group(this._game,0),this.bounds=new t.Rectangle(0,0,i,n),this.worldDivisions=6}return e.prototype.update=function(){this.group.preUpdate(),this.group.update(),this.group.postUpdate(),this.cameras.update()},e.prototype.render=function(){this.cameras.render()},e.prototype.destroy=function(){this.group.destroy(),this.cameras.destroy()},e.prototype.setSize=function(t,e,i,n){"undefined"==typeof i&&(i=!0),"undefined"==typeof n&&(n=!0),this.bounds.width=t,this.bounds.height=e,1==i&&this._game.camera.setBounds(0,0,t,e),1==n&&(this._game.verlet.width=t,this._game.verlet.height=e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.bounds.width},set:function(t){this.bounds.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.bounds.height},set:function(t){this.bounds.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerX",{get:function(){return this.bounds.halfWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerY",{get:function(){return this.bounds.halfHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"randomX",{get:function(){return Math.round(Math.random()*this.bounds.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"randomY",{get:function(){return Math.round(Math.random()*this.bounds.height)},enumerable:!0,configurable:!0}),e.prototype.createCamera=function(t,e,i,n){return this.cameras.addCamera(t,e,i,n)},e.prototype.removeCamera=function(t){return this.cameras.removeCamera(t)},e.prototype.getAllCameras=function(){return this.cameras.getAll()},e.prototype.createSprite=function(e,i,n){return"undefined"==typeof n&&(n=""),this.group.add(new t.Sprite(this._game,e,i,n))},e.prototype.createGeomSprite=function(e,i){return this.group.add(new t.GeomSprite(this._game,e,i))},e.prototype.createDynamicTexture=function(e,i){return new t.DynamicTexture(this._game,e,i)},e.prototype.createGroup=function(e){return"undefined"==typeof e&&(e=0),this.group.add(new t.Group(this._game,e))},e.prototype.createScrollZone=function(e,i,n,s,o){return"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=0),"undefined"==typeof o&&(o=0),this.group.add(new t.ScrollZone(this._game,e,i,n,s,o))},e.prototype.createTilemap=function(e,i,n,s,o,r){return"undefined"==typeof s&&(s=!0),"undefined"==typeof o&&(o=0),"undefined"==typeof r&&(r=0),this.group.add(new t.Tilemap(this._game,e,i,n,s,o,r))},e.prototype.createParticle=function(){return new t.Particle(this._game)},e.prototype.createEmitter=function(e,i,n){return"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),this.group.add(new t.Emitter(this._game,e,i,n))},e}();t.World=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(){this.desktop=!1,this.iOS=!1,this.android=!1,this.chromeOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.canvas=!1,this.file=!1,this.fileSystem=!1,this.localStorage=!1,this.webGL=!1,this.worker=!1,this.touch=!1,this.mspointer=!1,this.css3D=!1,this.arora=!1,this.chrome=!1,this.epiphany=!1,this.firefox=!1,this.ie=!1,this.ieVersion=0,this.mobileSafari=!1,this.midori=!1,this.opera=!1,this.safari=!1,this.webApp=!1,this.audioData=!1,this.webaudio=!1,this.ogg=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.pixelRatio=0,this._checkAudio(),this._checkBrowser(),this._checkCSS3D(),this._checkDevice(),this._checkFeatures(),this._checkOS()}return t.prototype._checkOS=function(){var t=navigator.userAgent;/Android/.test(t)?this.android=!0:/CrOS/.test(t)?this.chromeOS=!0:/iP[ao]d|iPhone/i.test(t)?this.iOS=!0:/Linux/.test(t)?this.linux=!0:/Mac OS/.test(t)?this.macOS=!0:/Windows/.test(t)&&(this.windows=!0),(this.windows||this.macOS||this.linux)&&(this.desktop=!0)},t.prototype._checkFeatures=function(){this.canvas=!!window.CanvasRenderingContext2D;try{this.localStorage=!!localStorage.getItem}catch(t){this.localStorage=!1}this.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),this.fileSystem=!!window.requestFileSystem,this.webGL=!!window.WebGLRenderingContext,this.worker=!!window.Worker,("ontouchstart"in document.documentElement||window.navigator.msPointerEnabled)&&(this.touch=!0),window.navigator.msPointerEnabled&&(this.mspointer=!0)},t.prototype._checkBrowser=function(){var t=navigator.userAgent;/Arora/.test(t)?this.arora=!0:/Chrome/.test(t)?this.chrome=!0:/Epiphany/.test(t)?this.epiphany=!0:/Firefox/.test(t)?this.firefox=!0:/Mobile Safari/.test(t)?this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1)):/Midori/.test(t)?this.midori=!0:/Opera/.test(t)?this.opera=!0:/Safari/.test(t)&&(this.safari=!0),navigator.standalone&&(this.webApp=!0)},t.prototype._checkAudio=function(){this.audioData=!!window.Audio,this.webaudio=!(!window.webkitAudioContext&&!window.AudioContext);var t=document.createElement("audio"),e=!1;try{(e=!!t.canPlayType)&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.ogg=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.mp3=!0),t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(this.m4a=!0))}catch(i){}},t.prototype._checkDevice=function(){this.pixelRatio=window.devicePixelRatio||1,this.iPhone=-1!=navigator.userAgent.toLowerCase().indexOf("iphone"),this.iPhone4=2==this.pixelRatio&&this.iPhone,this.iPad=-1!=navigator.userAgent.toLowerCase().indexOf("ipad")},t.prototype._checkCSS3D=function(){var t,e=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var n in i)void 0!==e.style[n]&&(e.style[n]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(i[n]));document.body.removeChild(e),this.css3D=void 0!==t&&t.length>0&&"none"!==t},t.prototype.isConsoleOpen=function(){return window.console&&window.console.firebug?!0:window.console?(console.profile(),console.profileEnd(),console.clear&&console.clear(),console.profiles.length>0):!1},t.prototype.getAll=function(){var t="";return t=t.concat("Device\n"),t=t.concat("iPhone : "+this.iPhone+"\n"),t=t.concat("iPhone4 : "+this.iPhone4+"\n"),t=t.concat("iPad : "+this.iPad+"\n"),t=t.concat("\n"),t=t.concat("Operating System\n"),t=t.concat("iOS: "+this.iOS+"\n"),t=t.concat("Android: "+this.android+"\n"),t=t.concat("ChromeOS: "+this.chromeOS+"\n"),t=t.concat("Linux: "+this.linux+"\n"),t=t.concat("MacOS: "+this.macOS+"\n"),t=t.concat("Windows: "+this.windows+"\n"),t=t.concat("\n"),t=t.concat("Browser\n"),t=t.concat("Arora: "+this.arora+"\n"),t=t.concat("Chrome: "+this.chrome+"\n"),t=t.concat("Epiphany: "+this.epiphany+"\n"),t=t.concat("Firefox: "+this.firefox+"\n"),t=t.concat("Internet Explorer: "+this.ie+" ("+this.ieVersion+")\n"),t=t.concat("Mobile Safari: "+this.mobileSafari+"\n"),t=t.concat("Midori: "+this.midori+"\n"),t=t.concat("Opera: "+this.opera+"\n"),t=t.concat("Safari: "+this.safari+"\n"),t=t.concat("\n"),t=t.concat("Features\n"),t=t.concat("Canvas: "+this.canvas+"\n"),t=t.concat("File: "+this.file+"\n"),t=t.concat("FileSystem: "+this.fileSystem+"\n"),t=t.concat("LocalStorage: "+this.localStorage+"\n"),t=t.concat("WebGL: "+this.webGL+"\n"),t=t.concat("Worker: "+this.worker+"\n"),t=t.concat("Touch: "+this.touch+"\n"),t=t.concat("MSPointer: "+this.mspointer+"\n"),t=t.concat("CSS 3D: "+this.css3D+"\n"),t=t.concat("\n"),t=t.concat("Audio\n"),t=t.concat("Audio Data: "+this.canvas+"\n"),t=t.concat("Web Audio: "+this.canvas+"\n"),t=t.concat("Can play OGG: "+this.canvas+"\n"),t=t.concat("Can play MP3: "+this.canvas+"\n"),t=t.concat("Can play M4A: "+this.canvas+"\n"),t=t.concat("Can play WAV: "+this.canvas+"\n")},t}();t.Device=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t){"undefined"==typeof t&&(t=[]),this.c=1,this.sow(t)}return t.prototype.uint32=function(){return 4294967296*this.rnd.apply(this)},t.prototype.fract32=function(){return this.rnd.apply(this)+1.1102230246251565e-16*(2097152*this.rnd.apply(this)|0)},t.prototype.rnd=function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},t.prototype.hash=function(t){var e,i,n;for(n=4022871197,t=t.toString(),i=0;i<t.length;i++)n+=t.charCodeAt(i),e=.02519603282416938*n,n=e>>>0,e-=n,e*=n,n=e>>>0,e-=n,n+=4294967296*e;return 2.3283064365386963e-10*(n>>>0)},t.prototype.sow=function(t){"undefined"==typeof t&&(t=[]),this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1);for(var e,i=0;e=t[i++];)this.s0-=this.hash(e),this.s0+=~~(this.s0<0),this.s1-=this.hash(e),this.s1+=~~(this.s1<0),this.s2-=this.hash(e),this.s2+=~~(this.s2<0)},Object.defineProperty(t.prototype,"integer",{get:function(){return this.uint32()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frac",{get:function(){return this.fract32()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"real",{get:function(){return this.uint32()+this.fract32()},enumerable:!0,configurable:!0}),t.prototype.integerInRange=function(t,e){return Math.floor(this.realInRange(t,e))},t.prototype.realInRange=function(t,e){return t=t||0,e=e||0,this.frac*(e-t)+t},Object.defineProperty(t.prototype,"normal",{get:function(){return 1-2*this.frac},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){var t,e;for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac*(20^t?16:4):4).toString(16):"-");return e},enumerable:!0,configurable:!0}),t.prototype.pick=function(t){return t[this.integerInRange(0,t.length)]},t.prototype.weightedPick=function(t){return t[~~(Math.pow(this.frac,2)*t.length)]},t.prototype.timestamp=function(t,e){return"undefined"==typeof t&&(t=9466848e5),"undefined"==typeof e&&(e=1577862e6),this.realInRange(t,e)},Object.defineProperty(t.prototype,"angle",{get:function(){return this.integerInRange(-180,180)},enumerable:!0,configurable:!0}),t}();t.RandomDataGenerator=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t,e){this._isSetTimeOut=!1,this.isRunning=!1,this._game=t,this.callback=e;for(var i=["ms","moz","webkit","o"],n=0;n<i.length&&!window.requestAnimationFrame;n++)window.requestAnimationFrame=window[i[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[n]+"CancelAnimationFrame"];this.start()}return t.prototype.isUsingSetTimeOut=function(){return this._isSetTimeOut},t.prototype.isUsingRAF=function(){return this._isSetTimeOut===!0},t.prototype.start=function(t){"undefined"==typeof t&&(t=null);var e=this;t&&(this.callback=t),window.requestAnimationFrame?(this._isSetTimeOut=!1,window.requestAnimationFrame(function(){return e.RAFUpdate(0)})):(this._isSetTimeOut=!0,this._timeOutID=window.setTimeout(function(){return e.SetTimeoutUpdate()},0)),this.isRunning=!0},t.prototype.stop=function(){this._isSetTimeOut?clearTimeout(this._timeOutID):window.cancelAnimationFrame,this.isRunning=!1},t.prototype.RAFUpdate=function(t){var e=this;this._game.time.update(t),this.callback&&this.callback.call(this._game),window.requestAnimationFrame(function(t){return e.RAFUpdate(t)})},t.prototype.SetTimeoutUpdate=function(){var t=this;this._game.time.update(Date.now()),this._timeOutID=window.setTimeout(function(){return t.SetTimeoutUpdate()},16.7),this.callback&&this.callback.call(this._game)
},t}();t.RequestAnimationFrame=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e,i){this._holdSent=!1,this._history=[],this._nextDrop=0,this.positionDown=null,this.position=null,this.circle=null,this.withinGame=!1,this.clientX=-1,this.clientY=-1,this.pageX=-1,this.pageY=-1,this.screenX=-1,this.screenY=-1,this.x=-1,this.y=-1,this.isMouse=!1,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.previousTapTime=0,this.totalTouches=0,this._game=e,this.id=i,this.active=!1,this.position=new t.Vector2,this.positionDown=new t.Vector2,this.circle=new t.Circle(0,0,44),0==i&&(this.isMouse=!0)}return Object.defineProperty(e.prototype,"duration",{get:function(){return this.isUp?-1:this._game.time.now-this.timeDown},enumerable:!0,configurable:!0}),e.prototype.getWorldX=function(t){return"undefined"==typeof t&&(t=this._game.camera),t.worldView.x+this.x},e.prototype.getWorldY=function(t){return"undefined"==typeof t&&(t=this._game.camera),t.worldView.y+this.y},e.prototype.start=function(e){return this.identifier=e.identifier,this.target=e.target,e.button&&(this.button=e.button),1==this._game.paused?(this._game.stage.resumeGame(),this):(this._history.length=0,this.move(e),this.positionDown.setTo(this.x,this.y),this.active=!0,this.withinGame=!0,this.isDown=!0,this.isUp=!1,this.timeDown=this._game.time.now,this._holdSent=!1,(this._game.input.multiInputOverride==t.Input.MOUSE_OVERRIDES_TOUCH||this._game.input.multiInputOverride==t.Input.MOUSE_TOUCH_COMBINE||this._game.input.multiInputOverride==t.Input.TOUCH_OVERRIDES_MOUSE&&0==this._game.input.currentPointers)&&(this._game.input.x=this.x*this._game.input.scaleX,this._game.input.y=this.y*this._game.input.scaleY,this._game.input.onDown.dispatch(this)),this.totalTouches++,0==this.isMouse&&this._game.input.currentPointers++,this)},e.prototype.update=function(){this.active&&(0==this._holdSent&&this.duration>=this._game.input.holdRate&&((this._game.input.multiInputOverride==t.Input.MOUSE_OVERRIDES_TOUCH||this._game.input.multiInputOverride==t.Input.MOUSE_TOUCH_COMBINE||this._game.input.multiInputOverride==t.Input.TOUCH_OVERRIDES_MOUSE&&0==this._game.input.currentPointers)&&this._game.input.onHold.dispatch(this),this._holdSent=!0),this._game.input.recordPointerHistory&&this._game.time.now>=this._nextDrop&&(this._nextDrop=this._game.time.now+this._game.input.recordRate,this._history.push({x:this.position.x,y:this.position.y}),this._history.length>this._game.input.recordLimit&&this._history.shift()))},e.prototype.move=function(e){return e.button&&(this.button=e.button),this.clientX=e.clientX,this.clientY=e.clientY,this.pageX=e.pageX,this.pageY=e.pageY,this.screenX=e.screenX,this.screenY=e.screenY,this.x=this.pageX-this._game.stage.offset.x,this.y=this.pageY-this._game.stage.offset.y,this.position.setTo(this.x,this.y),this.circle.x=this.x,this.circle.y=this.y,(this._game.input.multiInputOverride==t.Input.MOUSE_OVERRIDES_TOUCH||this._game.input.multiInputOverride==t.Input.MOUSE_TOUCH_COMBINE||this._game.input.multiInputOverride==t.Input.TOUCH_OVERRIDES_MOUSE&&0==this._game.input.currentPointers)&&(this._game.input.x=this.x*this._game.input.scaleX,this._game.input.y=this.y*this._game.input.scaleY,this._game.input.position.setTo(this._game.input.x,this._game.input.y),this._game.input.circle.x=this._game.input.x,this._game.input.circle.y=this._game.input.y),this},e.prototype.leave=function(t){this.withinGame=!1,this.move(t)},e.prototype.stop=function(){return this.timeUp=this._game.time.now,(this._game.input.multiInputOverride==t.Input.MOUSE_OVERRIDES_TOUCH||this._game.input.multiInputOverride==t.Input.MOUSE_TOUCH_COMBINE||this._game.input.multiInputOverride==t.Input.TOUCH_OVERRIDES_MOUSE&&0==this._game.input.currentPointers)&&(this._game.input.onUp.dispatch(this),this.duration>=0&&this.duration<=this._game.input.tapRate&&(this.timeUp-this.previousTapTime<this._game.input.doubleTapRate?this._game.input.onTap.dispatch(this,!0):this._game.input.onTap.dispatch(this,!1),this.previousTapTime=this.timeUp)),this.active=!1,this.withinGame=!1,this.isDown=!1,this.isUp=!0,0==this.isMouse&&this._game.input.currentPointers--,this},e.prototype.justPressed=function(t){return"undefined"==typeof t&&(t=this._game.input.justPressedRate),this.isDown===!0&&this.timeDown+t>this._game.time.now?!0:!1},e.prototype.justReleased=function(t){return"undefined"==typeof t&&(t=this._game.input.justReleasedRate),this.isUp===!0&&this.timeUp+t>this._game.time.now?!0:!1},e.prototype.reset=function(){this.active=!1,this.identifier=null,this.isDown=!1,this.isUp=!0,this.totalTouches=0,this._holdSent=!1,this._history.length=0},e.prototype.renderDebug=function(t){"undefined"==typeof t&&(t=!1),(1!=t||1!=this.isUp)&&(this._game.stage.context.beginPath(),this._game.stage.context.arc(this.x,this.y,this.circle.radius,0,2*Math.PI),this.active?(this._game.stage.context.fillStyle="rgba(0,255,0,0.5)",this._game.stage.context.strokeStyle="rgb(0,255,0)"):(this._game.stage.context.fillStyle="rgba(255,0,0,0.5)",this._game.stage.context.strokeStyle="rgb(100,0,0)"),this._game.stage.context.fill(),this._game.stage.context.closePath(),this._game.stage.context.beginPath(),this._game.stage.context.moveTo(this.positionDown.x,this.positionDown.y),this._game.stage.context.lineTo(this.position.x,this.position.y),this._game.stage.context.lineWidth=2,this._game.stage.context.stroke(),this._game.stage.context.closePath(),this._game.stage.context.fillStyle="rgb(255,255,255)",this._game.stage.context.font="Arial 16px",this._game.stage.context.fillText("ID: "+this.id+" Active: "+this.active,this.x,this.y-100),this._game.stage.context.fillText("Screen X: "+this.x+" Screen Y: "+this.y,this.x,this.y-80),this._game.stage.context.fillText("Duration: "+this.duration+" ms",this.x,this.y-60))},e.prototype.toString=function(){return"[{Pointer (id="+this.id+" identifer="+this.identifier+" active="+this.active+" duration="+this.duration+" withinGame="+this.withinGame+" x="+this.x+" y="+this.y+" clientX="+this.clientX+" clientY="+this.clientY+" screenX="+this.screenX+" screenY="+this.screenY+" pageX="+this.pageX+" pageY="+this.pageY+")}]"},e}();t.Pointer=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t){this.disabled=!1,this._game=t}return t.prototype.start=function(){var t=this;1==this._game.device.mspointer&&(this._game.stage.canvas.addEventListener("MSPointerDown",function(e){return t.onPointerDown(e)},!1),this._game.stage.canvas.addEventListener("MSPointerMove",function(e){return t.onPointerMove(e)},!1),this._game.stage.canvas.addEventListener("MSPointerUp",function(e){return t.onPointerUp(e)},!1))},t.prototype.onPointerDown=function(t){this._game.input.disabled||this.disabled||(t.preventDefault(),t.identifier=t.pointerId,this._game.input.startPointer(t))},t.prototype.onPointerMove=function(t){this._game.input.disabled||this.disabled||(t.preventDefault(),t.identifier=t.pointerId,this._game.input.updatePointer(t))},t.prototype.onPointerUp=function(t){this._game.input.disabled||this.disabled||(t.preventDefault(),t.identifier=t.pointerId,this._game.input.stopPointer(t))},t.prototype.stop=function(){1==this._game.device.mspointer},t}();t.MSPointer=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t){this._game=t}return t.prototype.start=function(){this._p1=this._game.input.pointer1,this._p2=this._game.input.pointer2,this._p3=this._game.input.pointer3,this._p4=this._game.input.pointer4,this._p5=this._game.input.pointer5,this._p6=this._game.input.pointer6,this._p7=this._game.input.pointer7,this._p8=this._game.input.pointer8,this._p9=this._game.input.pointer9,this._p10=this._game.input.pointer10},t}();t.Gestures=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(i){this.disabled=!1,this.multiInputOverride=e.MOUSE_TOUCH_COMBINE,this.position=null,this.circle=null,this._x=0,this._y=0,this.scaleX=1,this.scaleY=1,this.maxPointers=10,this.currentPointers=0,this.tapRate=200,this.doubleTapRate=300,this.holdRate=2e3,this.justPressedRate=200,this.justReleasedRate=200,this.recordPointerHistory=!0,this.recordRate=100,this.recordLimit=100,this.pointer6=null,this.pointer7=null,this.pointer8=null,this.pointer9=null,this.pointer10=null,this._game=i,this.mousePointer=new t.Pointer(this._game,0),this.pointer1=new t.Pointer(this._game,1),this.pointer2=new t.Pointer(this._game,2),this.pointer3=new t.Pointer(this._game,3),this.pointer4=new t.Pointer(this._game,4),this.pointer5=new t.Pointer(this._game,5),this.mouse=new t.Mouse(this._game),this.keyboard=new t.Keyboard(this._game),this.touch=new t.Touch(this._game),this.mspointer=new t.MSPointer(this._game),this.gestures=new t.Gestures(this._game),this.onDown=new t.Signal,this.onUp=new t.Signal,this.onTap=new t.Signal,this.onHold=new t.Signal,this.position=new t.Vector2,this.circle=new t.Circle(0,0,44),this.currentPointers=0}return e.MOUSE_OVERRIDES_TOUCH=0,e.TOUCH_OVERRIDES_MOUSE=1,e.MOUSE_TOUCH_COMBINE=2,Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=Math.round(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=Math.round(t)},enumerable:!0,configurable:!0}),e.prototype.addPointer=function(){var e=0;if(null===this.pointer10&&(e=10),null===this.pointer9&&(e=9),null===this.pointer8&&(e=8),null===this.pointer7&&(e=7),null===this.pointer6&&(e=6),0==e)throw new Error("You can only have 10 Pointer objects");return this["pointer"+e]=new t.Pointer(this._game,e),this["pointer"+e]},e.prototype.start=function(){this.mouse.start(),this.keyboard.start(),this.touch.start(),this.mspointer.start(),this.gestures.start()},e.prototype.update=function(){this.mousePointer.update(),this.pointer1.update(),this.pointer2.update(),this.pointer3.update(),this.pointer4.update(),this.pointer5.update(),this.pointer6&&this.pointer6.update(),this.pointer7&&this.pointer7.update(),this.pointer8&&this.pointer8.update(),this.pointer9&&this.pointer9.update(),this.pointer10&&this.pointer10.update()},e.prototype.reset=function(e){"undefined"==typeof e&&(e=!1),this.keyboard.reset(),this.pointer1.reset(),this.pointer2.reset(),this.pointer3.reset(),this.pointer4.reset(),this.pointer5.reset(),this.pointer6&&this.pointer6.reset(),this.pointer7&&this.pointer7.reset(),this.pointer8&&this.pointer8.reset(),this.pointer9&&this.pointer9.reset(),this.pointer10&&this.pointer10.reset(),this.currentPointers=0,1==e&&(this.onDown=new t.Signal,this.onUp=new t.Signal,this.onTap=new t.Signal,this.onHold=new t.Signal)},Object.defineProperty(e.prototype,"totalInactivePointers",{get:function(){return 10-this.currentPointers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalActivePointers",{get:function(){return this.currentPointers=0,1==this.pointer1.active?this.currentPointers++:1==this.pointer2.active?this.currentPointers++:1==this.pointer3.active?this.currentPointers++:1==this.pointer4.active?this.currentPointers++:1==this.pointer5.active?this.currentPointers++:this.pointer6&&1==this.pointer6.active?this.currentPointers++:this.pointer7&&1==this.pointer7.active?this.currentPointers++:this.pointer8&&1==this.pointer8.active?this.currentPointers++:this.pointer9&&1==this.pointer9.active?this.currentPointers++:this.pointer10&&1==this.pointer10.active&&this.currentPointers++,this.currentPointers},enumerable:!0,configurable:!0}),e.prototype.startPointer=function(t){return this.maxPointers<10&&this.totalActivePointers==this.maxPointers?null:0==this.pointer1.active?this.pointer1.start(t):0==this.pointer2.active?this.pointer2.start(t):0==this.pointer3.active?this.pointer3.start(t):0==this.pointer4.active?this.pointer4.start(t):0==this.pointer5.active?this.pointer5.start(t):this.pointer6&&0==this.pointer6.active?this.pointer6.start(t):this.pointer7&&0==this.pointer7.active?this.pointer7.start(t):this.pointer8&&0==this.pointer8.active?this.pointer8.start(t):this.pointer9&&0==this.pointer9.active?this.pointer9.start(t):this.pointer10&&0==this.pointer10.active?this.pointer10.start(t):null},e.prototype.updatePointer=function(t){return 1==this.pointer1.active&&this.pointer1.identifier==t.identifier?this.pointer1.move(t):1==this.pointer2.active&&this.pointer2.identifier==t.identifier?this.pointer2.move(t):1==this.pointer3.active&&this.pointer3.identifier==t.identifier?this.pointer3.move(t):1==this.pointer4.active&&this.pointer4.identifier==t.identifier?this.pointer4.move(t):1==this.pointer5.active&&this.pointer5.identifier==t.identifier?this.pointer5.move(t):this.pointer6&&1==this.pointer6.active&&this.pointer6.identifier==t.identifier?this.pointer6.move(t):this.pointer7&&1==this.pointer7.active&&this.pointer7.identifier==t.identifier?this.pointer7.move(t):this.pointer8&&1==this.pointer8.active&&this.pointer8.identifier==t.identifier?this.pointer8.move(t):this.pointer9&&1==this.pointer9.active&&this.pointer9.identifier==t.identifier?this.pointer9.move(t):this.pointer10&&1==this.pointer10.active&&this.pointer10.identifier==t.identifier?this.pointer10.move(t):null},e.prototype.stopPointer=function(t){return 1==this.pointer1.active&&this.pointer1.identifier==t.identifier?this.pointer1.stop(t):1==this.pointer2.active&&this.pointer2.identifier==t.identifier?this.pointer2.stop(t):1==this.pointer3.active&&this.pointer3.identifier==t.identifier?this.pointer3.stop(t):1==this.pointer4.active&&this.pointer4.identifier==t.identifier?this.pointer4.stop(t):1==this.pointer5.active&&this.pointer5.identifier==t.identifier?this.pointer5.stop(t):this.pointer6&&1==this.pointer6.active&&this.pointer6.identifier==t.identifier?this.pointer6.stop(t):this.pointer7&&1==this.pointer7.active&&this.pointer7.identifier==t.identifier?this.pointer7.stop(t):this.pointer8&&1==this.pointer8.active&&this.pointer8.identifier==t.identifier?this.pointer8.stop(t):this.pointer9&&1==this.pointer9.active&&this.pointer9.identifier==t.identifier?this.pointer9.stop(t):this.pointer10&&1==this.pointer10.active&&this.pointer10.identifier==t.identifier?this.pointer10.stop(t):null},e.prototype.getPointer=function(t){return"undefined"==typeof t&&(t=!1),this.pointer1.active==t?this.pointer1:this.pointer2.active==t?this.pointer2:this.pointer3.active==t?this.pointer3:this.pointer4.active==t?this.pointer4:this.pointer5.active==t?this.pointer5:this.pointer6&&this.pointer6.active==t?this.pointer6:this.pointer7&&this.pointer7.active==t?this.pointer7:this.pointer8&&this.pointer8.active==t?this.pointer8:this.pointer9&&this.pointer9.active==t?this.pointer9:this.pointer10&&this.pointer10.active==t?this.pointer10:null},e.prototype.getPointerFromIdentifier=function(t){return this.pointer1.identifier==t?this.pointer1:this.pointer2.identifier==t?this.pointer2:this.pointer3.identifier==t?this.pointer3:this.pointer4.identifier==t?this.pointer4:this.pointer5.identifier==t?this.pointer5:this.pointer6&&this.pointer6.identifier==t?this.pointer6:this.pointer7&&this.pointer7.identifier==t?this.pointer7:this.pointer8&&this.pointer8.identifier==t?this.pointer8:this.pointer9&&this.pointer9.identifier==t?this.pointer9:this.pointer10&&this.pointer10.identifier==t?this.pointer10:null},e.prototype.getWorldX=function(t){return"undefined"==typeof t&&(t=this._game.camera),t.worldView.x+this.x},e.prototype.getWorldY=function(t){return"undefined"==typeof t&&(t=this._game.camera),t.worldView.y+this.y},e.prototype.renderDebugInfo=function(t,e,i){"undefined"==typeof i&&(i="rgb(255,255,255)"),this._game.stage.context.font="14px Courier",this._game.stage.context.fillStyle=i,this._game.stage.context.fillText("Input",t,e),this._game.stage.context.fillText("Screen X: "+this.x+" Screen Y: "+this.y,t,e+14),this._game.stage.context.fillText("World X: "+this.getWorldX()+" World Y: "+this.getWorldY(),t,e+28),this._game.stage.context.fillText("Scale X: "+this.scaleX.toFixed(1)+" Scale Y: "+this.scaleY.toFixed(1),t,e+42)},e.prototype.getDistance=function(t,e){return t.position.distance(e.position)},e.prototype.getAngle=function(t,e){return t.position.angle(e.position)},e}();t.Input=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t){this._keys={},this._capture={},this.disabled=!1,this._game=t}return t.prototype.start=function(){var t=this;document.body.addEventListener("keydown",function(e){return t.onKeyDown(e)},!1),document.body.addEventListener("keyup",function(e){return t.onKeyUp(e)},!1)},t.prototype.addKeyCapture=function(t){if("object"==typeof t)for(var e=0;e<t.length;e++)this._capture[t[e]]=!0;else this._capture[t]=!0},t.prototype.removeKeyCapture=function(t){delete this._capture[t]},t.prototype.clearCaptures=function(){this._capture={}},t.prototype.onKeyDown=function(t){this._game.input.disabled||this.disabled||(this._capture[t.keyCode]&&t.preventDefault(),this._keys[t.keyCode]?(this._keys[t.keyCode].isDown=!0,this._keys[t.keyCode].timeDown=this._game.time.now):this._keys[t.keyCode]={isDown:!0,timeDown:this._game.time.now,timeUp:0})},t.prototype.onKeyUp=function(t){this._game.input.disabled||this.disabled||(this._capture[t.keyCode]&&t.preventDefault(),this._keys[t.keyCode]?(this._keys[t.keyCode].isDown=!1,this._keys[t.keyCode].timeUp=this._game.time.now):this._keys[t.keyCode]={isDown:!1,timeDown:0,timeUp:this._game.time.now})},t.prototype.reset=function(){for(var t in this._keys)this._keys[t].isDown=!1},t.prototype.justPressed=function(t,e){return"undefined"==typeof e&&(e=250),this._keys[t]&&this._keys[t].isDown===!0&&this._game.time.now-this._keys[t].timeDown<e?!0:!1},t.prototype.justReleased=function(t,e){return"undefined"==typeof e&&(e=250),this._keys[t]&&this._keys[t].isDown===!1&&this._game.time.now-this._keys[t].timeUp<e?!0:!1},t.prototype.isDown=function(t){return this._keys[t]?this._keys[t].isDown:!1},t.A="A".charCodeAt(0),t.B="B".charCodeAt(0),t.C="C".charCodeAt(0),t.D="D".charCodeAt(0),t.E="E".charCodeAt(0),t.F="F".charCodeAt(0),t.G="G".charCodeAt(0),t.H="H".charCodeAt(0),t.I="I".charCodeAt(0),t.J="J".charCodeAt(0),t.K="K".charCodeAt(0),t.L="L".charCodeAt(0),t.M="M".charCodeAt(0),t.N="N".charCodeAt(0),t.O="O".charCodeAt(0),t.P="P".charCodeAt(0),t.Q="Q".charCodeAt(0),t.R="R".charCodeAt(0),t.S="S".charCodeAt(0),t.T="T".charCodeAt(0),t.U="U".charCodeAt(0),t.V="V".charCodeAt(0),t.W="W".charCodeAt(0),t.X="X".charCodeAt(0),t.Y="Y".charCodeAt(0),t.Z="Z".charCodeAt(0),t.ZERO="0".charCodeAt(0),t.ONE="1".charCodeAt(0),t.TWO="2".charCodeAt(0),t.THREE="3".charCodeAt(0),t.FOUR="4".charCodeAt(0),t.FIVE="5".charCodeAt(0),t.SIX="6".charCodeAt(0),t.SEVEN="7".charCodeAt(0),t.EIGHT="8".charCodeAt(0),t.NINE="9".charCodeAt(0),t.NUMPAD_0=96,t.NUMPAD_1=97,t.NUMPAD_2=98,t.NUMPAD_3=99,t.NUMPAD_4=100,t.NUMPAD_5=101,t.NUMPAD_6=102,t.NUMPAD_7=103,t.NUMPAD_8=104,t.NUMPAD_9=105,t.NUMPAD_MULTIPLY=106,t.NUMPAD_ADD=107,t.NUMPAD_ENTER=108,t.NUMPAD_SUBTRACT=109,t.NUMPAD_DECIMAL=110,t.NUMPAD_DIVIDE=111,t.F1=112,t.F2=113,t.F3=114,t.F4=115,t.F5=116,t.F6=117,t.F7=118,t.F8=119,t.F9=120,t.F10=121,t.F11=122,t.F12=123,t.F13=124,t.F14=125,t.F15=126,t.COLON=186,t.EQUALS=187,t.UNDERSCORE=189,t.QUESTION_MARK=191,t.TILDE=192,t.OPEN_BRACKET=219,t.BACKWARD_SLASH=220,t.CLOSED_BRACKET=221,t.QUOTES=222,t.BACKSPACE=8,t.TAB=9,t.CLEAR=12,t.ENTER=13,t.SHIFT=16,t.CONTROL=17,t.ALT=18,t.CAPS_LOCK=20,t.ESC=27,t.SPACEBAR=32,t.PAGE_UP=33,t.PAGE_DOWN=34,t.END=35,t.HOME=36,t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.INSERT=45,t.DELETE=46,t.HELP=47,t.NUM_LOCK=144,t}();t.Keyboard=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t){this.disabled=!1,this._game=t}return t.LEFT_BUTTON=0,t.MIDDLE_BUTTON=1,t.RIGHT_BUTTON=2,t.prototype.start=function(){var t=this;this._game.stage.canvas.addEventListener("mousedown",function(e){return t.onMouseDown(e)},!0),this._game.stage.canvas.addEventListener("mousemove",function(e){return t.onMouseMove(e)},!0),this._game.stage.canvas.addEventListener("mouseup",function(e){return t.onMouseUp(e)},!0)},t.prototype.onMouseDown=function(t){this._game.input.disabled||this.disabled||(t.identifier=0,this._game.input.mousePointer.start(t))},t.prototype.onMouseMove=function(t){this._game.input.disabled||this.disabled||(t.identifier=0,this._game.input.mousePointer.move(t))},t.prototype.onMouseUp=function(t){this._game.input.disabled||this.disabled||(t.identifier=0,this._game.input.mousePointer.stop(t))},t.prototype.stop=function(){},t}();t.Mouse=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t){this.disabled=!1,this._game=t}return t.prototype.start=function(){var t=this;this._game.device.touch&&(this._game.stage.canvas.addEventListener("touchstart",function(e){return t.onTouchStart(e)},!1),this._game.stage.canvas.addEventListener("touchmove",function(e){return t.onTouchMove(e)},!1),this._game.stage.canvas.addEventListener("touchend",function(e){return t.onTouchEnd(e)},!1),this._game.stage.canvas.addEventListener("touchenter",function(e){return t.onTouchEnter(e)},!1),this._game.stage.canvas.addEventListener("touchleave",function(e){return t.onTouchLeave(e)},!1),this._game.stage.canvas.addEventListener("touchcancel",function(e){return t.onTouchCancel(e)},!1),document.addEventListener("touchmove",function(e){return t.consumeTouchMove(e)},!1))},t.prototype.consumeTouchMove=function(t){t.preventDefault()},t.prototype.onTouchStart=function(t){if(!this._game.input.disabled&&!this.disabled){t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this._game.input.startPointer(t.changedTouches[e])}},t.prototype.onTouchCancel=function(t){if(!this._game.input.disabled&&!this.disabled){t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this._game.input.stopPointer(t.changedTouches[e])}},t.prototype.onTouchEnter=function(t){if(!this._game.input.disabled&&!this.disabled){t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)console.log("touch enter")}},t.prototype.onTouchLeave=function(t){t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)console.log("touch leave")},t.prototype.onTouchMove=function(t){t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this._game.input.updatePointer(t.changedTouches[e])},t.prototype.onTouchEnd=function(t){t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this._game.input.stopPointer(t.changedTouches[e])},t.prototype.stop=function(){this._game.device.touch},t}();t.Touch=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(e){function i(i,n,s,o){"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=0),"undefined"==typeof o&&(o=0),e.call(this,i,o),this.x=n,this.y=s,this.width=0,this.height=0,this.minParticleSpeed=new t.MicroPoint(-100,-100),this.maxParticleSpeed=new t.MicroPoint(100,100),this.minRotation=-360,this.maxRotation=360,this.gravity=0,this.particleClass=null,this.particleDrag=new t.MicroPoint,this.frequency=.1,this.lifespan=3,this.bounce=0,this._quantity=0,this._counter=0,this._explode=!0,this.on=!1,this._point=new t.MicroPoint}return __extends(i,e),i.prototype.destroy=function(){this.minParticleSpeed=null,this.maxParticleSpeed=null,this.particleDrag=null,this.particleClass=null,this._point=null,e.prototype.destroy.call(this)},i.prototype.makeParticles=function(e,i,n,s){"undefined"==typeof i&&(i=50),"undefined"==typeof n&&(n=!1),"undefined"==typeof s&&(s=0),this.maxSize=i;for(var o,r=0;i>r;)o=null==this.particleClass?new t.Particle(this._game):new this.particleClass(this._game),n||e&&o.loadGraphic(e),s>0?(o.allowCollisions=t.Collision.ANY,o.width*=s,o.height*=s):o.allowCollisions=t.Collision.NONE,o.exists=!1,this.add(o),r++;return this},i.prototype.update=function(){if(this.on)if(this._explode){this.on=!1;var t=0,i=this._quantity;for((0>=i||i>this.length)&&(i=this.length);i>t;)this.emitParticle(),t++;this._quantity=0}else for(this._timer+=this._game.time.elapsed;this.frequency>0&&this._timer>this.frequency&&this.on;)this._timer-=this.frequency,this.emitParticle(),this._quantity>0&&++this._counter>=this._quantity&&(this.on=!1,this._quantity=0);e.prototype.update.call(this)},i.prototype.kill=function(){this.on=!1,e.prototype.kill.call(this)},i.prototype.start=function(t,e,i,n){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=.1),"undefined"==typeof n&&(n=0),this.revive(),this.visible=!0,this.on=!0,this._explode=t,this.lifespan=e,this.frequency=i,this._quantity+=n,this._counter=0,this._timer=0},i.prototype.emitParticle=function(){var e=this.recycle(t.Particle);e.lifespan=this.lifespan,e.elasticity=this.bounce,e.reset(this.x-(e.width>>1)+this._game.math.random()*this.width,this.y-(e.height>>1)+this._game.math.random()*this.height),e.visible=!0,e.velocity.x=this.minParticleSpeed.x!=this.maxParticleSpeed.x?this.minParticleSpeed.x+this._game.math.random()*(this.maxParticleSpeed.x-this.minParticleSpeed.x):this.minParticleSpeed.x,e.velocity.y=this.minParticleSpeed.y!=this.maxParticleSpeed.y?this.minParticleSpeed.y+this._game.math.random()*(this.maxParticleSpeed.y-this.minParticleSpeed.y):this.minParticleSpeed.y,e.acceleration.y=this.gravity,e.angularVelocity=this.minRotation!=this.maxRotation&&0!==this.minRotation&&0!==this.maxRotation?this.minRotation+this._game.math.random()*(this.maxRotation-this.minRotation):this.minRotation,0!=e.angularVelocity&&(e.angle=360*this._game.math.random()-180),e.drag.x=this.particleDrag.x,e.drag.y=this.particleDrag.y,e.onEmit()},i.prototype.setSize=function(t,e){this.width=t,this.height=e},i.prototype.setXSpeed=function(t,e){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),this.minParticleSpeed.x=t,this.maxParticleSpeed.x=e},i.prototype.setYSpeed=function(t,e){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),this.minParticleSpeed.y=t,this.maxParticleSpeed.y=e},i.prototype.setRotation=function(t,e){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),this.minRotation=t,this.maxRotation=e},i.prototype.at=function(t){t.getMidpoint(this._point),this.x=this._point.x-(this.width>>1),this.y=this._point.y-(this.height>>1)},i}(t.Group);t.Emitter=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(e){function i(t,n,s){return"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=0),e.call(this,t,n,s),this._dx=0,this._dy=0,this._dw=0,this._dh=0,this.type=0,this.renderOutline=!0,this.renderFill=!0,this.lineWidth=1,this.lineColor="rgb(0,255,0)",this.fillColor="rgb(0,100,0)",this.type=i.UNASSIGNED,this}return __extends(i,e),i.UNASSIGNED=0,i.CIRCLE=1,i.LINE=2,i.POINT=3,i.RECTANGLE=4,i.POLYGON=5,i.prototype.loadCircle=function(t){return this.refresh(),this.circle=t,this.type=i.CIRCLE,this},i.prototype.loadLine=function(t){return this.refresh(),this.line=t,this.type=i.LINE,this},i.prototype.loadPoint=function(t){return this.refresh(),this.point=t,this.type=i.POINT,this},i.prototype.loadRectangle=function(t){return this.refresh(),this.rect=t,this.type=i.RECTANGLE,this},i.prototype.createCircle=function(e){return this.refresh(),this.circle=new t.Circle(this.x,this.y,e),this.type=i.CIRCLE,this.frameBounds.setTo(this.circle.x-this.circle.radius,this.circle.y-this.circle.radius,this.circle.diameter,this.circle.diameter),this},i.prototype.createLine=function(e,n){return this.refresh(),this.line=new t.Line(this.x,this.y,e,n),this.type=i.LINE,this.frameBounds.setTo(this.x,this.y,this.line.width,this.line.height),this},i.prototype.createPoint=function(){return this.refresh(),this.point=new t.Point(this.x,this.y),this.type=i.POINT,this.frameBounds.width=1,this.frameBounds.height=1,this},i.prototype.createRectangle=function(e,n){return this.refresh(),this.rect=new t.Rectangle(this.x,this.y,e,n),this.type=i.RECTANGLE,this.frameBounds.copyFrom(this.rect),this},i.prototype.createPolygon=function(e){return"undefined"==typeof e&&(e=[]),this.refresh(),this.polygon=new t.Polygon(new t.Vector2(this.x,this.y),e),this.type=i.POLYGON,this},i.prototype.refresh=function(){this.circle=null,this.line=null,this.point=null,this.rect=null},i.prototype.update=function(){this.type!=i.UNASSIGNED&&(this.type==i.CIRCLE?(this.circle.x=this.x,this.circle.y=this.y,this.frameBounds.width=this.circle.diameter,this.frameBounds.height=this.circle.diameter):this.type==i.LINE?(this.line.x1=this.x,this.line.y1=this.y,this.frameBounds.setTo(this.x,this.y,this.line.width,this.line.height)):this.type==i.POINT?(this.point.x=this.x,this.point.y=this.y):this.type==i.RECTANGLE&&(this.rect.x=this.x,this.rect.y=this.y,this.frameBounds.copyFrom(this.rect)))},i.prototype.inCamera=function(t){return 1!==this.scrollFactor.x||1!==this.scrollFactor.y?(this._dx=this.frameBounds.x-t.x*this.scrollFactor.x,this._dy=this.frameBounds.y-t.y*this.scrollFactor.x,this._dw=this.frameBounds.width*this.scale.x,this._dh=this.frameBounds.height*this.scale.y,t.right>this._dx&&t.x<this._dx+this._dw&&t.bottom>this._dy&&t.y<this._dy+this._dh):t.intersects(this.frameBounds)},i.prototype.render=function(t,e,n){if(this.type==i.UNASSIGNED||this.visible===!1||0==this.scale.x||0==this.scale.y||this.alpha<.1||-1!==this.cameraBlacklist.indexOf(t.ID)||0==this.inCamera(t.worldView))return!1;if(1!==this.alpha){var s=this.context.globalAlpha;this.context.globalAlpha=this.alpha}return this._dx=e+(this.frameBounds.x-t.worldView.x),this._dy=n+(this.frameBounds.y-t.worldView.y),this._dw=this.frameBounds.width*this.scale.x,this._dh=this.frameBounds.height*this.scale.y,(1!==this.scrollFactor.x||1!==this.scrollFactor.y)&&(this._dx-=t.worldView.x*this.scrollFactor.x,this._dy-=t.worldView.y*this.scrollFactor.y),this._dx=Math.round(this._dx),this._dy=Math.round(this._dy),this._dw=Math.round(this._dw),this._dh=Math.round(this._dh),this._game.stage.saveCanvasValues(),this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.lineColor,this.context.fillStyle=this.fillColor,this._game.stage.fillStyle!==this.fillColor,this.type==i.CIRCLE?(this.context.beginPath(),this.context.arc(this._dx,this._dy,this.circle.radius,0,2*Math.PI),this.renderOutline&&this.context.stroke(),this.renderFill&&this.context.fill(),this.context.closePath()):this.type==i.LINE?(this.context.beginPath(),this.context.moveTo(this._dx,this._dy),this.context.lineTo(this.line.x2,this.line.y2),this.context.stroke(),this.context.closePath()):this.type==i.POINT?this.context.fillRect(this._dx,this._dy,2,2):this.type==i.RECTANGLE&&(0==this.renderOutline?this.context.fillRect(this._dx,this._dy,this.rect.width,this.rect.height):(this.context.beginPath(),this.context.rect(this._dx,this._dy,this.rect.width,this.rect.height),this.context.stroke(),this.renderFill&&this.context.fill(),this.context.closePath()),this.context.fillStyle="rgb(255,255,255)",this.renderPoint(this.rect.topLeft,0,0,2),this.renderPoint(this.rect.topCenter,0,0,2),this.renderPoint(this.rect.topRight,0,0,2),this.renderPoint(this.rect.leftCenter,0,0,2),this.renderPoint(this.rect.center,0,0,2),this.renderPoint(this.rect.rightCenter,0,0,2),this.renderPoint(this.rect.bottomLeft,0,0,2),this.renderPoint(this.rect.bottomCenter,0,0,2),this.renderPoint(this.rect.bottomRight,0,0,2)),this._game.stage.restoreCanvasValues(),0!==this.rotation&&(this.context.translate(0,0),this.context.restore()),s>-1&&(this.context.globalAlpha=s),!0},i.prototype.renderPoint=function(t,e,i,n){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=1),this.context.fillRect(e+t.x,i+t.y,n,n)},i.prototype.renderDebugInfo=function(t,e,i){"undefined"==typeof i&&(i="rgb(255,255,255)")},i.prototype.collide=function(e){return this.type==i.CIRCLE&&e.type==i.CIRCLE?t.Collision.circleToCircle(this.circle,e.circle).result:this.type==i.CIRCLE&&e.type==i.RECTANGLE?t.Collision.circleToRectangle(this.circle,e.rect).result:this.type==i.CIRCLE&&e.type==i.POINT?t.Collision.circleContainsPoint(this.circle,e.point).result:this.type==i.CIRCLE&&e.type==i.LINE?t.Collision.lineToCircle(e.line,this.circle).result:this.type==i.RECTANGLE&&e.type==i.RECTANGLE?t.Collision.rectangleToRectangle(this.rect,e.rect).result:this.type==i.RECTANGLE&&e.type==i.CIRCLE?t.Collision.circleToRectangle(e.circle,this.rect).result:this.type==i.RECTANGLE&&e.type==i.POINT?t.Collision.pointToRectangle(e.point,this.rect).result:this.type==i.RECTANGLE&&e.type==i.LINE?t.Collision.lineToRectangle(e.line,this.rect).result:this.type==i.POINT&&e.type==i.POINT?this.point.equals(e.point):this.type==i.POINT&&e.type==i.CIRCLE?t.Collision.circleContainsPoint(e.circle,this.point).result:this.type==i.POINT&&e.type==i.RECTANGLE?t.Collision.pointToRectangle(this.point,e.rect).result:this.type==i.POINT&&e.type==i.LINE?e.line.isPointOnLine(this.point.x,this.point.y):this.type==i.LINE&&e.type==i.LINE?t.Collision.lineSegmentToLineSegment(this.line,e.line).result:this.type==i.LINE&&e.type==i.CIRCLE?t.Collision.lineToCircle(this.line,e.circle).result:this.type==i.LINE&&e.type==i.RECTANGLE?t.Collision.lineSegmentToRectangle(this.line,e.rect).result:this.type==i.LINE&&e.type==i.POINT?this.line.isPointOnLine(e.point.x,e.point.y):!1
},i}(t.GameObject);t.GeomSprite=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(e){function i(t){e.call(this,t),this.lifespan=0,this.friction=500}return __extends(i,e),i.prototype.update=function(){this.lifespan<=0||(this.lifespan-=this._game.time.elapsed,this.lifespan<=0&&this.kill(),this.touching&&0!=this.angularVelocity&&(this.angularVelocity=-this.angularVelocity),this.acceleration.y>0&&(this.touching&t.Collision.FLOOR?(this.drag.x=this.friction,this.wasTouching&t.Collision.FLOOR||(this.velocity.y<10*-this.elasticity?0!=this.angularVelocity&&(this.angularVelocity*=-this.elasticity):(this.velocity.y=0,this.angularVelocity=0))):this.drag.x=0))},i.prototype.onEmit=function(){},i}(t.Sprite);t.Particle=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e,i,n,s,o,r,h){this._startX=0,this._startY=0,this._maxX=0,this._maxY=0,this._tx=0,this._ty=0,this._dx=0,this._dy=0,this._oldCameraX=0,this._oldCameraY=0,this.alpha=1,this.exists=!0,this.visible=!0,this.widthInTiles=0,this.heightInTiles=0,this.widthInPixels=0,this.heightInPixels=0,this.tileMargin=0,this.tileSpacing=0,this._game=e,this._parent=i,this.name=o,this.mapFormat=s,this.tileWidth=r,this.tileHeight=h,this.boundsInTiles=new t.Rectangle,this.canvas=e.stage.canvas,this.context=e.stage.context,this.mapData=[],this._tempTileBlock=[],this._texture=this._game.cache.getImage(n)}return e.prototype.putTile=function(t,e,i){t=this._game.math.snapToFloor(t,this.tileWidth)/this.tileWidth,e=this._game.math.snapToFloor(e,this.tileHeight)/this.tileHeight,e>=0&&e<this.mapData.length&&t>=0&&t<this.mapData[e].length&&(this.mapData[e][t]=i)},e.prototype.swapTile=function(t,e,i,n,s,o){"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=this.widthInTiles),"undefined"==typeof o&&(o=this.heightInTiles),this.getTempBlock(i,n,s,o);for(var r=0;r<this._tempTileBlock.length;r++)this._tempTileBlock[r].tile.index==t&&(this._tempTileBlock[r].newIndex=!0),this._tempTileBlock[r].tile.index==e&&(this.mapData[this._tempTileBlock[r].y][this._tempTileBlock[r].x]=t);for(var r=0;r<this._tempTileBlock.length;r++)1==this._tempTileBlock[r].newIndex&&(this.mapData[this._tempTileBlock[r].y][this._tempTileBlock[r].x]=e)},e.prototype.fillTile=function(t,e,i,n,s){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=this.widthInTiles),"undefined"==typeof s&&(s=this.heightInTiles),this.getTempBlock(e,i,n,s);for(var o=0;o<this._tempTileBlock.length;o++)this.mapData[this._tempTileBlock[o].y][this._tempTileBlock[o].x]=t},e.prototype.randomiseTiles=function(t,e,i,n,s){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=this.widthInTiles),"undefined"==typeof s&&(s=this.heightInTiles),this.getTempBlock(e,i,n,s);for(var o=0;o<this._tempTileBlock.length;o++)this.mapData[this._tempTileBlock[o].y][this._tempTileBlock[o].x]=this._game.math.getRandom(t)},e.prototype.replaceTile=function(t,e,i,n,s,o){"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=this.widthInTiles),"undefined"==typeof o&&(o=this.heightInTiles),this.getTempBlock(i,n,s,o);for(var r=0;r<this._tempTileBlock.length;r++)this._tempTileBlock[r].tile.index==t&&(this.mapData[this._tempTileBlock[r].y][this._tempTileBlock[r].x]=e)},e.prototype.getTileBlock=function(t,e,i,n){var s=[];this.getTempBlock(t,e,i,n);for(var o=0;o<this._tempTileBlock.length;o++)s.push({x:this._tempTileBlock[o].x,y:this._tempTileBlock[o].y,tile:this._tempTileBlock[o].tile});return s},e.prototype.getTileFromWorldXY=function(t,e){return t=this._game.math.snapToFloor(t,this.tileWidth)/this.tileWidth,e=this._game.math.snapToFloor(e,this.tileHeight)/this.tileHeight,this.getTileIndex(t,e)},e.prototype.getTileOverlaps=function(e){if(!(e.collisionMask.x<0||e.collisionMask.x>this.widthInPixels||e.collisionMask.y<0||e.collisionMask.bottom>this.heightInPixels)){this._tempTileX=this._game.math.snapToFloor(e.collisionMask.x,this.tileWidth)/this.tileWidth,this._tempTileY=this._game.math.snapToFloor(e.collisionMask.y,this.tileHeight)/this.tileHeight,this._tempTileW=(this._game.math.snapToCeil(e.collisionMask.width,this.tileWidth)+this.tileWidth)/this.tileWidth,this._tempTileH=(this._game.math.snapToCeil(e.collisionMask.height,this.tileHeight)+this.tileHeight)/this.tileHeight,this._tempBlockResults=[],this.getTempBlock(this._tempTileX,this._tempTileY,this._tempTileW,this._tempTileH,!0),t.Collision.TILE_OVERLAP=!1;for(var i=0;i<this._tempTileBlock.length;i++)1==t.Collision.separateTile(e,this._tempTileBlock[i].x*this.tileWidth,this._tempTileBlock[i].y*this.tileHeight,this.tileWidth,this.tileHeight,this._tempTileBlock[i].tile.mass,this._tempTileBlock[i].tile.collideLeft,this._tempTileBlock[i].tile.collideRight,this._tempTileBlock[i].tile.collideUp,this._tempTileBlock[i].tile.collideDown,this._tempTileBlock[i].tile.separateX,this._tempTileBlock[i].tile.separateY)&&this._tempBlockResults.push({x:this._tempTileBlock[i].x,y:this._tempTileBlock[i].y,tile:this._tempTileBlock[i].tile});return this._tempBlockResults}},e.prototype.getTempBlock=function(e,i,n,s,o){"undefined"==typeof o&&(o=!1),0>e&&(e=0),0>i&&(i=0),n>this.widthInTiles&&(n=this.widthInTiles),s>this.heightInTiles&&(s=this.heightInTiles),this._tempTileBlock=[];for(var r=i;i+s>r;r++)for(var h=e;e+n>h;h++)o?this.mapData[r]&&this.mapData[r][h]&&this._parent.tiles[this.mapData[r][h]].allowCollisions!=t.Collision.NONE&&this._tempTileBlock.push({x:h,y:r,tile:this._parent.tiles[this.mapData[r][h]]}):this.mapData[r]&&this.mapData[r][h]&&this._tempTileBlock.push({x:h,y:r,tile:this._parent.tiles[this.mapData[r][h]]})},e.prototype.getTileIndex=function(t,e){return e>=0&&e<this.mapData.length&&t>=0&&t<this.mapData[e].length?this.mapData[e][t]:null},e.prototype.addColumn=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=parseInt(t[i]);0==this.widthInTiles&&(this.widthInTiles=e.length,this.widthInPixels=this.widthInTiles*this.tileWidth),this.mapData.push(e),this.heightInTiles++,this.heightInPixels+=this.tileHeight},e.prototype.updateBounds=function(){this.boundsInTiles.setTo(0,0,this.widthInTiles,this.heightInTiles)},e.prototype.parseTileOffsets=function(){this._tileOffsets=[];var e=0;this.mapFormat==t.Tilemap.FORMAT_TILED_JSON&&(this._tileOffsets[0]=null,e=1);for(var i=this.tileMargin;i<this._texture.height;i+=this.tileHeight+this.tileSpacing)for(var n=this.tileMargin;n<this._texture.width;n+=this.tileWidth+this.tileSpacing)this._tileOffsets[e]={x:n,y:i},e++;return this._tileOffsets.length},e.prototype.renderDebugInfo=function(t,e,i){"undefined"==typeof i&&(i="rgb(255,255,255)"),this.context.fillStyle=i,this.context.fillText("TilemapLayer: "+this.name,t,e),this.context.fillText("startX: "+this._startX+" endX: "+this._maxX,t,e+14),this.context.fillText("startY: "+this._startY+" endY: "+this._maxY,t,e+28),this.context.fillText("dx: "+this._dx+" dy: "+this._dy,t,e+42)},e.prototype.render=function(t,e,i){if(this.visible===!1||this.alpha<.1)return!1;if(this._maxX=this._game.math.ceil(t.width/this.tileWidth)+1,this._maxY=this._game.math.ceil(t.height/this.tileHeight)+1,this._startX=this._game.math.floor(t.worldView.x/this.tileWidth),this._startY=this._game.math.floor(t.worldView.y/this.tileHeight),this._startX<0&&(this._startX=0),this._startY<0&&(this._startY=0),this._maxX>this.widthInTiles&&(this._maxX=this.widthInTiles),this._maxY>this.heightInTiles&&(this._maxY=this.heightInTiles),this._startX+this._maxX>this.widthInTiles&&(this._startX=this.widthInTiles-this._maxX),this._startY+this._maxY>this.heightInTiles&&(this._startY=this.heightInTiles-this._maxY),this._dx=e,this._dy=i,this._dx+=-(t.worldView.x-this._startX*this.tileWidth),this._dy+=-(t.worldView.y-this._startY*this.tileHeight),this._tx=this._dx,this._ty=this._dy,1!==this.alpha){var n=this.context.globalAlpha;this.context.globalAlpha=this.alpha}for(var s=this._startY;s<this._startY+this._maxY;s++){this._columnData=this.mapData[s];for(var o=this._startX;o<this._startX+this._maxX;o++)this._tileOffsets[this._columnData[o]]&&this.context.drawImage(this._texture,this._tileOffsets[this._columnData[o]].x,this._tileOffsets[this._columnData[o]].y,this.tileWidth,this.tileHeight,this._tx,this._ty,this.tileWidth,this.tileHeight),this._tx+=this.tileWidth;this._tx=this._dx,this._ty+=this.tileHeight}return n>-1&&(this.context.globalAlpha=n),!0},e}();t.TilemapLayer=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e,i,n,s,o){this.mass=1,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.separateX=!0,this.separateY=!0,this._game=e,this.tilemap=i,this.index=n,this.width=s,this.height=o,this.allowCollisions=t.Collision.NONE}return e.prototype.destroy=function(){this.tilemap=null},e.prototype.setCollision=function(e,i,n,s){return i&&this.resetCollision(),this.separateX=n,this.separateY=s,this.allowCollisions=e,e&t.Collision.ANY?(this.collideLeft=!0,this.collideRight=!0,this.collideUp=!0,void(this.collideDown=!0)):((e&t.Collision.LEFT||e&t.Collision.WALL)&&(this.collideLeft=!0),(e&t.Collision.RIGHT||e&t.Collision.WALL)&&(this.collideRight=!0),(e&t.Collision.UP||e&t.Collision.CEILING)&&(this.collideUp=!0),void((e&t.Collision.DOWN||e&t.Collision.CEILING)&&(this.collideDown=!0)))},e.prototype.resetCollision=function(){this.allowCollisions=t.Collision.NONE,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1},e.prototype.toString=function(){return"[{Tiled (index="+this.index+" collisions="+this.allowCollisions+" width="+this.width+" height="+this.height+")}]"},e}();t.Tile=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(e){function i(t,n,s,o,r,h,a){switch("undefined"==typeof r&&(r=!0),"undefined"==typeof h&&(h=0),"undefined"==typeof a&&(a=0),e.call(this,t),this.collisionCallback=null,this.isGroup=!1,this.tiles=[],this.layers=[],this.mapFormat=o,o){case i.FORMAT_CSV:this.parseCSV(t.cache.getText(s),n,h,a);break;case i.FORMAT_TILED_JSON:this.parseTiledJSON(t.cache.getText(s),n)}this.currentLayer&&r&&this._game.world.setSize(this.currentLayer.widthInPixels,this.currentLayer.heightInPixels,!0)}return __extends(i,e),i.FORMAT_CSV=0,i.FORMAT_TILED_JSON=1,i.prototype.update=function(){},i.prototype.render=function(t,e,i){if(-1==this.cameraBlacklist.indexOf(t.ID))for(var n=0;n<this.layers.length;n++)this.layers[n].render(t,e,i)},i.prototype.parseCSV=function(e,n,s,o){var r=new t.TilemapLayer(this._game,this,n,i.FORMAT_CSV,"TileLayerCSV"+this.layers.length.toString(),s,o);e=e.trim();for(var h=e.split("\n"),a=0;a<h.length;a++){var l=h[a].split(",");l.length>0&&r.addColumn(l)}r.updateBounds();var u=r.parseTileOffsets();this.currentLayer=r,this.collisionLayer=r,this.layers.push(r),this.generateTiles(u)},i.prototype.parseTiledJSON=function(e,n){e=e.trim();for(var s=JSON.parse(e),o=0;o<s.layers.length;o++){var r=new t.TilemapLayer(this._game,this,n,i.FORMAT_TILED_JSON,s.layers[o].name,s.tilewidth,s.tileheight);r.alpha=s.layers[o].opacity,r.visible=s.layers[o].visible,r.tileMargin=s.tilesets[0].margin,r.tileSpacing=s.tilesets[0].spacing;for(var h,a=0,l=0;l<s.layers[o].data.length;l++)0==a&&(h=[]),h.push(s.layers[o].data[l]),a++,a==s.layers[o].width&&(r.addColumn(h),a=0);r.updateBounds();var u=r.parseTileOffsets();this.currentLayer=r,this.collisionLayer=r,this.layers.push(r)}this.generateTiles(u)},i.prototype.generateTiles=function(e){for(var i=0;e>i;i++)this.tiles.push(new t.Tile(this._game,this,i,this.currentLayer.tileWidth,this.currentLayer.tileHeight))},Object.defineProperty(i.prototype,"widthInPixels",{get:function(){return this.currentLayer.widthInPixels},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"heightInPixels",{get:function(){return this.currentLayer.heightInPixels},enumerable:!0,configurable:!0}),i.prototype.setCollisionCallback=function(t,e){this.collisionCallbackContext=t,this.collisionCallback=e},i.prototype.setCollisionRange=function(e,i,n,s,o,r){"undefined"==typeof n&&(n=t.Collision.ANY),"undefined"==typeof s&&(s=!1),"undefined"==typeof o&&(o=!0),"undefined"==typeof r&&(r=!0);for(var h=e;i>h;h++)this.tiles[h].setCollision(n,s,o,r)},i.prototype.setCollisionByIndex=function(e,i,n,s,o){"undefined"==typeof i&&(i=t.Collision.ANY),"undefined"==typeof n&&(n=!1),"undefined"==typeof s&&(s=!0),"undefined"==typeof o&&(o=!0);for(var r=0;r<e.length;r++)this.tiles[e[r]].setCollision(i,n,s,o)},i.prototype.getTileByIndex=function(t){return this.tiles[t]?this.tiles[t]:null},i.prototype.getTile=function(t,e,i){return"undefined"==typeof i&&(i=0),this.tiles[this.layers[i].getTileIndex(t,e)]},i.prototype.getTileFromWorldXY=function(t,e,i){return"undefined"==typeof i&&(i=0),this.tiles[this.layers[i].getTileFromWorldXY(t,e)]},i.prototype.getTileFromInputXY=function(t){return"undefined"==typeof t&&(t=0),this.tiles[this.layers[t].getTileFromWorldXY(this._game.input.getWorldX(),this._game.input.getWorldY())]},i.prototype.getTileOverlaps=function(t){return this.currentLayer.getTileOverlaps(t)},i.prototype.collide=function(t,e,i){"undefined"==typeof t&&(t=null),"undefined"==typeof e&&(e=null),"undefined"==typeof i&&(i=null),null!==e&&null!==i&&(this.collisionCallback=e,this.collisionCallbackContext=i),null==t&&(t=this._game.world.group),0==t.isGroup?this.collideGameObject(t):t.forEachAlive(this,this.collideGameObject,!0)},i.prototype.collideGameObject=function(e){return e!==this&&0==e.immovable&&1==e.exists&&e.allowCollisions!=t.Collision.NONE?(this._tempCollisionData=this.collisionLayer.getTileOverlaps(e),null!==this.collisionCallback&&this._tempCollisionData.length>0&&this.collisionCallback.call(this.collisionCallbackContext,e,this._tempCollisionData),!0):!1},i.prototype.putTile=function(t,e,i,n){"undefined"==typeof n&&(n=0),this.layers[n].putTile(t,e,i)},i}(t.GameObject);t.Tilemap=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(e,i,n,s,o,r){this._anchorWidth=0,this._anchorHeight=0,this._inverseWidth=0,this._inverseHeight=0,this.visible=!0,this._A=new t.Quad(e,i,n,s),this._B=new t.Quad(e,i,n,s),this._C=new t.Quad(e,i,n,s),this._D=new t.Quad(e,i,n,s),this._scroll=new t.MicroPoint,this._bounds=new t.Quad(e,i,n,s),this.scrollSpeed=new t.MicroPoint(o,r)}return e.prototype.update=function(){this._scroll.x+=this.scrollSpeed.x,this._scroll.y+=this.scrollSpeed.y,this._scroll.x>this._bounds.right&&(this._scroll.x=this._bounds.x),this._scroll.x<this._bounds.x&&(this._scroll.x=this._bounds.right),this._scroll.y>this._bounds.bottom&&(this._scroll.y=this._bounds.y),this._scroll.y<this._bounds.y&&(this._scroll.y=this._bounds.bottom),this._anchorWidth=this._bounds.width-this._scroll.x+this._bounds.x,this._anchorHeight=this._bounds.height-this._scroll.y+this._bounds.y,this._anchorWidth>this._bounds.width&&(this._anchorWidth=this._bounds.width),this._anchorHeight>this._bounds.height&&(this._anchorHeight=this._bounds.height),this._inverseWidth=this._bounds.width-this._anchorWidth,this._inverseHeight=this._bounds.height-this._anchorHeight,this._A.setTo(this._scroll.x,this._scroll.y,this._anchorWidth,this._anchorHeight),this._B.y=this._scroll.y,this._B.width=this._inverseWidth,this._B.height=this._anchorHeight,this._C.x=this._scroll.x,this._C.width=this._anchorWidth,this._C.height=this._inverseHeight,this._D.width=this._inverseWidth,this._D.height=this._inverseHeight},e.prototype.render=function(t,e,i,n,s,o){0!=this.visible&&(this.crop(t,e,this._A.x,this._A.y,this._A.width,this._A.height,i,n,s,o,0,0),this.crop(t,e,this._B.x,this._B.y,this._B.width,this._B.height,i,n,s,o,this._A.width,0),this.crop(t,e,this._C.x,this._C.y,this._C.width,this._C.height,i,n,s,o,0,this._A.height),this.crop(t,e,this._D.x,this._D.y,this._D.width,this._D.height,i,n,s,o,this._C.width,this._A.height))},e.prototype.crop=function(t,e,i,n,s,o,r,h,a,l,u,c){u+=r,c+=h,s>r+a-u&&(s=r+a-u),o>h+l-c&&(o=h+l-c),i=Math.floor(i),n=Math.floor(n),s=Math.floor(s),o=Math.floor(o),u=Math.floor(u+this._bounds.x),c=Math.floor(c+this._bounds.y),s>0&&o>0&&t.drawImage(e,i,n,s,o,u,c,s,o)},e}();t.ScrollRegion=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(e){function i(t,i,n,s,o,r){"undefined"==typeof n&&(n=0),"undefined"==typeof s&&(s=0),"undefined"==typeof o&&(o=0),"undefined"==typeof r&&(r=0),e.call(this,t,n,s,o,r),this._dynamicTexture=null,this._dx=0,this._dy=0,this._dw=0,this._dh=0,this.flipped=!1,this.regions=[],this._game.cache.getImage(i)&&(this._texture=this._game.cache.getImage(i),this.width=this._texture.width,this.height=this._texture.height,(o>this._texture.width||r>this._texture.height)&&(this.createRepeatingTexture(o,r),this.width=o,this.height=r),this.addRegion(0,0,this.width,this.height),(o<this._texture.width||r<this._texture.height)&&0!==o&&0!==r&&(this.width=o,this.height=r))}return __extends(i,e),i.prototype.addRegion=function(e,i,n,s,o,r){if("undefined"==typeof o&&(o=0),"undefined"==typeof r&&(r=0),e>this.width||i>this.height||0>e||0>i||e+n>this.width||i+s>this.height)throw Error("Invalid ScrollRegion defined. Cannot be larger than parent ScrollZone");return this.currentRegion=new t.ScrollRegion(e,i,n,s,o,r),this.regions.push(this.currentRegion),this.currentRegion},i.prototype.setSpeed=function(t,e){return this.currentRegion&&this.currentRegion.scrollSpeed.setTo(t,e),this},i.prototype.update=function(){for(var t=0;t<this.regions.length;t++)this.regions[t].update(this._game.time.delta)},i.prototype.inCamera=function(t){return 1!==this.scrollFactor.x||1!==this.scrollFactor.y?(this._dx=this.frameBounds.x-t.x*this.scrollFactor.x,this._dy=this.frameBounds.y-t.y*this.scrollFactor.x,this._dw=this.frameBounds.width*this.scale.x,this._dh=this.frameBounds.height*this.scale.y,t.right>this._dx&&t.x<this._dx+this._dw&&t.bottom>this._dy&&t.y<this._dy+this._dh):t.intersects(this.frameBounds,this.frameBounds.length)},i.prototype.render=function(t,e,i){if(0==this.visible||0==this.scale.x||0==this.scale.y||this.alpha<.1||-1!==this.cameraBlacklist.indexOf(t.ID)||0==this.inCamera(t.worldView))return!1;if(1!==this.alpha){var n=this.context.globalAlpha;this.context.globalAlpha=this.alpha}this._dx=e+(this.frameBounds.topLeft.x-t.worldView.x),this._dy=i+(this.frameBounds.topLeft.y-t.worldView.y),this._dw=this.frameBounds.width*this.scale.x,this._dh=this.frameBounds.height*this.scale.y,(1!==this.scrollFactor.x||1!==this.scrollFactor.y)&&(this._dx-=t.worldView.x*this.scrollFactor.x,this._dy-=t.worldView.y*this.scrollFactor.y),(0!==this.angle||1==this.flipped)&&(this.context.save(),this.context.translate(this._dx+this._dw/2,this._dy+this._dh/2),0!==this.angle&&this.context.rotate(this.angle*(Math.PI/180)),this._dx=-(this._dw/2),this._dy=-(this._dh/2),1==this.flipped&&this.context.scale(-1,1)),this._dx=Math.round(this._dx),this._dy=Math.round(this._dy),this._dw=Math.round(this._dw),this._dh=Math.round(this._dh);for(var s=0;s<this.regions.length;s++)this._dynamicTexture?this.regions[s].render(this.context,this._dynamicTexture.canvas,this._dx,this._dy,this._dw,this._dh):this.regions[s].render(this.context,this._texture,this._dx,this._dy,this._dw,this._dh);return n>-1&&(this.context.globalAlpha=n),!0},i.prototype.createRepeatingTexture=function(e,i){var n=Math.ceil(this._texture.width/e)*e,s=Math.ceil(this._texture.height/i)*i;this._dynamicTexture=new t.DynamicTexture(this._game,n,s),this._dynamicTexture.context.rect(0,0,n,s),this._dynamicTexture.context.fillStyle=this._dynamicTexture.context.createPattern(this._texture,"repeat"),this._dynamicTexture.context.fill()},i}(t.GameObject);t.ScrollZone=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(t,e,i,n,s,o,r,h,a){"undefined"==typeof e&&(e=""),"undefined"==typeof i&&(i=800),"undefined"==typeof n&&(n=600),"undefined"==typeof s&&(s=null),"undefined"==typeof o&&(o=null),"undefined"==typeof r&&(r=null),"undefined"==typeof h&&(h=null),"undefined"==typeof a&&(a=null);var l=this;this._maxAccumulation=32,this._accumulator=0,this._step=0,this._loadComplete=!1,this._paused=!1,this._pendingState=null,this.state=null,this.onInitCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onDestroyCallback=null,this.isBooted=!1,this.isRunning=!1,this.callbackContext=t,this.onInitCallback=s,this.onCreateCallback=o,this.onUpdateCallback=r,this.onRenderCallback=h,this.onDestroyCallback=a,"complete"===document.readyState||"interactive"===document.readyState?setTimeout(function(){return l.boot(e,i,n)}):(document.addEventListener("DOMContentLoaded",function(){return l.boot(e,i,n)},!1),window.addEventListener("load",function(){return l.boot(e,i,n)},!1))}return e.prototype.boot=function(e,i,n){var s=this;1!=this.isBooted&&(document.body?(this.device=new t.Device,this.motion=new t.Motion(this),this.math=new t.GameMath(this),this.stage=new t.Stage(this,e,i,n),this.world=new t.World(this,i,n),this.add=new t.GameObjectFactory(this),this.sound=new t.SoundManager(this),this.cache=new t.Cache(this),this.collision=new t.Collision(this),this.loader=new t.Loader(this,this.loadComplete),this.time=new t.Time(this),this.tweens=new t.TweenManager(this),this.input=new t.Input(this),this.rnd=new t.RandomDataGenerator([(Date.now()*Math.random()).toString()]),this.verlet=new t.Verlet.VerletManager(this,i,n),this.framerate=60,this.isBooted=!0,this.input.start(),null==this.onInitCallback&&null==this.onCreateCallback&&null==this.onUpdateCallback&&null==this.onRenderCallback&&null==this._pendingState?this._raf=new t.RequestAnimationFrame(this,this.bootLoop):(this.isRunning=!0,this._loadComplete=!1,this._raf=new t.RequestAnimationFrame(this,this.loop),this._pendingState?this.switchState(this._pendingState,!1,!1):this.startState())):window.setTimeout(function(){return s.boot(e,i,n)},13))},e.prototype.loadComplete=function(){this._loadComplete=!0},e.prototype.bootLoop=function(){this.tweens.update(),this.input.update(),this.stage.update()},e.prototype.pausedLoop=function(){this.tweens.update(),this.input.update(),this.stage.update(),null!==this.onPausedCallback&&this.onPausedCallback.call(this.callbackContext)},e.prototype.loop=function(){for(this.tweens.update(),this.input.update(),this.stage.update(),this.verlet.update(),this._accumulator+=this.time.delta,this._accumulator>this._maxAccumulation&&(this._accumulator=this._maxAccumulation);this._accumulator>=this._step;)this.time.elapsed=this.time.timeScale*(this._step/1e3),this.world.update(),this._accumulator=this._accumulator-this._step;this._loadComplete&&this.onUpdateCallback&&this.onUpdateCallback.call(this.callbackContext),this.world.render(),this._loadComplete&&this.onRenderCallback&&this.onRenderCallback.call(this.callbackContext)},e.prototype.startState=function(){null!==this.onInitCallback?(this.loader.reset(),this.onInitCallback.call(this.callbackContext),0==this.loader.queueSize&&(null!==this.onCreateCallback&&this.onCreateCallback.call(this.callbackContext),this._loadComplete=!0)):(null!==this.onCreateCallback&&this.onCreateCallback.call(this.callbackContext),this._loadComplete=!0)},e.prototype.setCallbacks=function(t,e,i,n,s){"undefined"==typeof t&&(t=null),"undefined"==typeof e&&(e=null),"undefined"==typeof i&&(i=null),"undefined"==typeof n&&(n=null),"undefined"==typeof s&&(s=null),this.onInitCallback=t,this.onCreateCallback=e,this.onUpdateCallback=i,this.onRenderCallback=n,this.onDestroyCallback=s},e.prototype.switchState=function(t,e,i){if("undefined"==typeof e&&(e=!0),"undefined"==typeof i&&(i=!1),0==this.isBooted)return void(this._pendingState=t);if(null!==this.onDestroyCallback&&this.onDestroyCallback.call(this.callbackContext),this.input.reset(!0),"function"==typeof t&&(this.state=new t(this)),!this.state.create&&!this.state.update)throw new Error("Invalid State object given. Must contain at least a create or update function.");this.callbackContext=this.state,this.onInitCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onDestroyCallback=null,this.state.init&&(this.onInitCallback=this.state.init),this.state.create&&(this.onCreateCallback=this.state.create),this.state.update&&(this.onUpdateCallback=this.state.update),this.state.render&&(this.onRenderCallback=this.state.render),this.state.paused&&(this.onPausedCallback=this.state.paused),this.state.destroy&&(this.onDestroyCallback=this.state.destroy),e&&(this.world.destroy(),1==i&&this.cache.destroy()),this._loadComplete=!1,this.startState()},e.prototype.destroy=function(){this.callbackContext=null,this.onInitCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onDestroyCallback=null,this.cache=null,this.input=null,this.loader=null,this.sound=null,this.stage=null,this.time=null,this.world=null,this.isBooted=!1},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){1==t&&0==this._paused?(this._paused=!0,this._raf.callback=this.pausedLoop):0==t&&1==this._paused&&(this._paused=!1,this.input.reset(),this._raf.callback=0==this.isRunning?this.bootLoop:this.loop)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"framerate",{get:function(){return 1e3/this._step},set:function(t){this._step=1e3/t,this._maxAccumulation<this._step&&(this._maxAccumulation=this._step)},enumerable:!0,configurable:!0}),e.prototype.collide=function(e,i,n,s){return"undefined"==typeof e&&(e=null),"undefined"==typeof i&&(i=null),"undefined"==typeof n&&(n=null),"undefined"==typeof s&&(s=this.callbackContext),this.collision.overlap(e,i,n,t.Collision.separate,s)},Object.defineProperty(e.prototype,"camera",{get:function(){return this.world.cameras.current},enumerable:!0,configurable:!0}),e}();t.Game=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function t(t,e){this._game=t,this._parent=e,this._fx=[],this.active=!0,this.visible=!0}return t.prototype.add=function(t){var e=!1,i={effect:{},preUpdate:!1,postUpdate:!1,preRender:!1,render:!1,postRender:!1};if("function"!=typeof t)throw new Error("Invalid object given to Phaser.FXManager.add");return i.effect=new t(this._game,this._parent),"function"==typeof i.effect.preUpdate&&(i.preUpdate=!0,e=!0),"function"==typeof i.effect.postUpdate&&(i.postUpdate=!0,e=!0),"function"==typeof i.effect.preRender&&(i.preRender=!0,e=!0),"function"==typeof i.effect.render&&(i.render=!0,e=!0),"function"==typeof i.effect.postRender&&(i.postRender=!0,e=!0),1==e?(this._length=this._fx.push(i),i.effect):e},t.prototype.preUpdate=function(){if(this.active)for(var t=0;t<this._length;t++)this._fx[t].preUpdate&&this._fx[t].effect.preUpdate()},t.prototype.postUpdate=function(){if(this.active)for(var t=0;t<this._length;t++)this._fx[t].postUpdate&&this._fx[t].effect.postUpdate()},t.prototype.preRender=function(t,e,i,n,s){if(this.visible)for(var o=0;o<this._length;o++)this._fx[o].preRender&&this._fx[o].effect.preRender(t,e,i,n,s)},t.prototype.render=function(t,e,i,n,s){if(this.visible)for(var o=0;o<this._length;o++)this._fx[o].preRender&&this._fx[o].effect.preRender(t,e,i,n,s)},t.prototype.postRender=function(t,e,i,n,s){if(this.visible)for(var o=0;o<this._length;o++)this._fx[o].postRender&&this._fx[o].effect.postRender(t,e,i,n,s)},t.prototype.destroy=function(){this._game=null,this._fx=null},t}();t.FXManager=e}(Phaser||(Phaser={}));var Phaser;!function(t){var e=function(){function e(t){this.game=t,this.add=t.add,this.camera=t.camera,this.cache=t.cache,this.collision=t.collision,this.input=t.input,this.loader=t.loader,this.math=t.math,this.motion=t.motion,this.sound=t.sound,this.stage=t.stage,this.time=t.time,this.tweens=t.tweens,this.world=t.world}return e.prototype.init=function(){},e.prototype.create=function(){},e.prototype.update=function(){},e.prototype.render=function(){},e.prototype.paused=function(){},e.prototype.destroy=function(){},e.prototype.collide=function(e,i,n,s){return"undefined"==typeof e&&(e=null),"undefined"==typeof i&&(i=null),"undefined"==typeof n&&(n=null),"undefined"==typeof s&&(s=this.game.callbackContext),this.collision.overlap(e,i,n,t.Collision.separate,s)},e}();t.State=e}(Phaser||(Phaser={}));