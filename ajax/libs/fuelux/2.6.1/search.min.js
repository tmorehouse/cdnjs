define(["require","jquery"],function(c){var d=c("jquery");var a=d.fn.search;var b=function(f,e){this.$element=d(f);this.options=d.extend({},d.fn.search.defaults,e);this.$button=this.$element.find("button").on("click",d.proxy(this.buttonclicked,this));this.$input=this.$element.find("input").on("keydown",d.proxy(this.keypress,this)).on("keyup",d.proxy(this.keypressed,this));this.$icon=this.$element.find("i");this.activeSearch=""};b.prototype={constructor:b,search:function(e){this.$icon.attr("class","icon-remove");this.activeSearch=e;this.$element.trigger("searched",e)},clear:function(){this.$icon.attr("class","icon-search");this.activeSearch="";this.$input.val("");this.$element.trigger("cleared")},action:function(){var f=this.$input.val();var e=f===""||f===this.activeSearch;if(this.activeSearch&&e){this.clear()}else{if(f){this.search(f)}}},buttonclicked:function(f){f.preventDefault();if(d(f.currentTarget).is(".disabled, :disabled")){return}this.action()},keypress:function(f){if(f.which===13){f.preventDefault()}},keypressed:function(g){var h,f;if(g.which===13){g.preventDefault();this.action()}else{h=this.$input.val();f=h&&(h===this.activeSearch);this.$icon.attr("class",f?"icon-remove":"icon-search")}},disable:function(){this.$input.attr("disabled","disabled");this.$button.addClass("disabled")},enable:function(){this.$input.removeAttr("disabled");this.$button.removeClass("disabled")}};d.fn.search=function(g){var f=Array.prototype.slice.call(arguments,1);var h;var e=this.each(function(){var k=d(this);var j=k.data("search");var i=typeof g==="object"&&g;if(!j){k.data("search",(j=new b(this,i)))}if(typeof g==="string"){h=j[g].apply(j,f)}});return(h===undefined)?e:h};d.fn.search.defaults={};d.fn.search.Constructor=b;d.fn.search.noConflict=function(){d.fn.search=a;return this};d(function(){d("body").on("mousedown.search.data-api",".search",function(){var e=d(this);if(e.data("search")){return}e.search(e.data())})})});