define(["require","jquery"],function(b){var d=b("jquery");var a=d.fn.wizard;var c=function(g,f){var e;this.$element=d(g);this.options=d.extend({},d.fn.wizard.defaults,f);this.options.disablePreviousStep=(this.$element.data().restrict==="previous")?true:false;this.currentStep=this.options.selectedItem.step;this.numSteps=this.$element.find(".steps li").length;this.$prevBtn=this.$element.find("button.btn-prev");this.$nextBtn=this.$element.find("button.btn-next");e=this.$nextBtn.children().detach();this.nextText=d.trim(this.$nextBtn.text());this.$nextBtn.append(e);this.$prevBtn.on("click",d.proxy(this.previous,this));this.$nextBtn.on("click",d.proxy(this.next,this));this.$element.on("click","li.complete",d.proxy(this.stepclicked,this));if(this.currentStep>1){this.selectedItem(this.options.selectedItem)}if(this.options.disablePreviousStep){this.$prevBtn.attr("disabled",true);this.$element.find(".steps").addClass("previous-disabled")}};c.prototype={constructor:c,setState:function(){var r=(this.currentStep>1);var s=(this.currentStep===1);var e=(this.currentStep===this.numSteps);if(!this.options.disablePreviousStep){this.$prevBtn.attr("disabled",(s===true||r===false))}var i=this.$nextBtn.data();if(i&&i.last){this.lastText=i.last;if(typeof this.lastText!=="undefined"){var p=(e!==true)?this.nextText:this.lastText;var g=this.$nextBtn.children().detach();this.$nextBtn.text(p).append(g)}}var m=this.$element.find(".steps li");m.removeClass("active").removeClass("complete");m.find("span.badge").removeClass("badge-info").removeClass("badge-success");var q=".steps li:lt("+(this.currentStep-1)+")";var h=this.$element.find(q);h.addClass("complete");h.find("span.badge").addClass("badge-success");var f=".steps li:eq("+(this.currentStep-1)+")";var o=this.$element.find(f);o.addClass("active");o.find("span.badge").addClass("badge-info");var l=o.data().target;this.$element.next(".step-content").find(".step-pane").removeClass("active");d(l).addClass("active");this.$element.find(".steps").first().attr("style","margin-left: 0");var k=0;this.$element.find(".steps > li").each(function(){k+=d(this).outerWidth()});var n=0;if(this.$element.find(".actions").length){n=this.$element.width()-this.$element.find(".actions").first().outerWidth()}else{n=this.$element.width()}if(k>n){var j=k-n;this.$element.find(".steps").first().attr("style","margin-left: -"+j+"px");if(this.$element.find("li.active").first().position().left<200){j+=this.$element.find("li.active").first().position().left-200;if(j<1){this.$element.find(".steps").first().attr("style","margin-left: 0")}else{this.$element.find(".steps").first().attr("style","margin-left: -"+j+"px")}}}this.$element.trigger("changed",{currentStep:this.currentStep})},stepclicked:function(j){var g=d(j.currentTarget);var i=this.$element.find(".steps li").index(g);var f=true;if(this.options.disablePreviousStep){if(i<this.currentStep){f=false}}if(f){var h=d.Event("stepclick");this.$element.trigger(h,{step:i+1});if(h.isDefaultPrevented()){return}this.currentStep=(i+1);this.setState()}},previous:function(){var f=(this.currentStep>1);if(this.options.disablePreviousStep){f=false}if(f){var g=d.Event("change");this.$element.trigger(g,{step:this.currentStep,direction:"previous"});if(g.isDefaultPrevented()){return}this.currentStep-=1;this.setState()}},next:function(){var h=(this.currentStep+1<=this.numSteps);var f=(this.currentStep===this.numSteps);if(h){var g=d.Event("change");this.$element.trigger(g,{step:this.currentStep,direction:"next"});if(g.isDefaultPrevented()){return}this.currentStep+=1;this.setState()}else{if(f){this.$element.trigger("finished")}}},selectedItem:function(f){var g,e;if(f){e=f.step||-1;if(e>=1&&e<=this.numSteps){this.currentStep=e;this.setState()}g=this}else{g={step:this.currentStep}}return g}};d.fn.wizard=function(g){var f=Array.prototype.slice.call(arguments,1);var h;var e=this.each(function(){var k=d(this);var j=k.data("wizard");var i=typeof g==="object"&&g;if(!j){k.data("wizard",(j=new c(this,i)))}if(typeof g==="string"){h=j[g].apply(j,f)}});return(h===undefined)?e:h};d.fn.wizard.defaults={selectedItem:{step:1}};d.fn.wizard.Constructor=c;d.fn.wizard.noConflict=function(){d.fn.wizard=a;return this};d(function(){d("body").on("mouseover.wizard.data-api",".wizard",function(){var e=d(this);if(e.data("wizard")){return}e.wizard(e.data())})})});