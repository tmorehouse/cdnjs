define(["require","jquery","./util"],function(b){var c=b("jquery");var a=c.fn.select;b("./util");var d=function(f,e){this.$element=c(f);this.options=c.extend({},c.fn.select.defaults,e);this.$element.on("click","a",c.proxy(this.itemclicked,this));this.$button=this.$element.find(".btn");this.$hiddenField=this.$element.find(".hidden-field");this.$label=this.$element.find(".dropdown-label");this.setDefaultSelection();if(e.resize==="auto"){this.resize()}};d.prototype={constructor:d,itemclicked:function(g){this.$selectedItem=c(g.target).parent();this.$hiddenField.val(this.$selectedItem.attr("data-value"));this.$label.text(this.$selectedItem.text());var f=this.selectedItem();this.$element.trigger("changed",f);g.preventDefault()},resize:function(){var f=0;var g=c("<div/>").addClass("select-sizer");var e=0;if(Boolean(c(document).find("html").hasClass("fuelux"))){c(document.body).append(g)}else{c(".fuelux:first").append(g)}this.$element.find("a").each(function(){g.text(c(this).text());f=g.outerWidth();if(f>e){e=f}});g.remove();this.$label.width(e)},selectedItem:function(){var e=this.$selectedItem.text();return c.extend({text:e},this.$selectedItem.data())},selectByText:function(f){var e="li a:fuelTextExactCI("+f+")";this.selectBySelector(e)},selectByValue:function(f){var e='li[data-value="'+f+'"]';this.selectBySelector(e)},selectByIndex:function(f){var e="li:eq("+f+")";this.selectBySelector(e)},selectBySelector:function(e){var f=this.$element.find(e);this.$selectedItem=f;this.$hiddenField.val(this.$selectedItem.attr("data-value"));this.$label.text(this.$selectedItem.text())},setDefaultSelection:function(){var e="li[data-selected=true]:first";var f=this.$element.find(e);if(f.length===0){this.selectByIndex(0)}else{this.selectBySelector(e);f.removeData("selected");f.removeAttr("data-selected")}},enable:function(){this.$button.removeClass("disabled")},disable:function(){this.$button.addClass("disabled")}};c.fn.select=function(g){var f=Array.prototype.slice.call(arguments,1);var h;var e=this.each(function(){var k=c(this);var j=k.data("select");var i=typeof g==="object"&&g;if(!j){k.data("select",(j=new d(this,i)))}if(typeof g==="string"){h=j[g].apply(j,f)}});return(h===undefined)?e:h};c.fn.select.defaults={};c.fn.select.Constructor=d;c.fn.select.noConflict=function(){c.fn.select=a;return this};c(function(){c(window).on("load",function(){c(".select").each(function(){var e=c(this);if(e.data("select")){return}e.select(e.data())})});c("body").on("mousedown.select.data-api",".select",function(){var e=c(this);if(e.data("select")){return}e.select(e.data())})})});