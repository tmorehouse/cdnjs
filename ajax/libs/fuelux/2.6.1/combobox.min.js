define(["require","jquery","./util"],function(c){var d=c("jquery");var a=d.fn.combobox;c("./util");var b=function(f,e){this.$element=d(f);this.options=d.extend({},d.fn.combobox.defaults,e);this.$element.on("click","a",d.proxy(this.itemclicked,this));this.$element.on("change","input",d.proxy(this.inputchanged,this));this.$input=this.$element.find("input");this.$button=this.$element.find(".btn");this.setDefaultSelection()};b.prototype={constructor:b,selectedItem:function(){var f=this.$selectedItem;var g={};if(f){var e=this.$selectedItem.text();g=d.extend({text:e},this.$selectedItem.data())}else{g={text:this.$input.val()}}return g},selectByText:function(f){var e="li:fuelTextExactCI("+f+")";this.selectBySelector(e)},selectByValue:function(f){var e='li[data-value="'+f+'"]';this.selectBySelector(e)},selectByIndex:function(f){var e="li:eq("+f+")";this.selectBySelector(e)},selectBySelector:function(e){var f=this.$element.find(e);if(typeof f[0]!=="undefined"){this.$selectedItem=f;this.$input.val(this.$selectedItem.text())}else{this.$selectedItem=null}},setDefaultSelection:function(){var e="li[data-selected=true]:first";var f=this.$element.find(e);if(f.length>0){this.selectBySelector(e);f.removeData("selected");f.removeAttr("data-selected")}},enable:function(){this.$input.removeAttr("disabled");this.$button.removeClass("disabled")},disable:function(){this.$input.attr("disabled",true);this.$button.addClass("disabled")},itemclicked:function(g){this.$selectedItem=d(g.target).parent();this.$input.val(this.$selectedItem.text()).trigger("change",{synthetic:true});var f=this.selectedItem();this.$element.trigger("changed",f);g.preventDefault()},inputchanged:function(h,f){if(f&&f.synthetic){return}var i=d(h.target).val();this.selectByText(i);var g=this.selectedItem();if(g.text.length===0){g={text:i}}this.$element.trigger("changed",g)}};d.fn.combobox=function(g){var f=Array.prototype.slice.call(arguments,1);var h;var e=this.each(function(){var k=d(this);var j=k.data("combobox");var i=typeof g==="object"&&g;if(!j){k.data("combobox",(j=new b(this,i)))}if(typeof g==="string"){h=j[g].apply(j,f)}});return(h===undefined)?e:h};d.fn.combobox.defaults={};d.fn.combobox.Constructor=b;d.fn.combobox.noConflict=function(){d.fn.combobox=a;return this};d(function(){d(window).on("load",function(){d(".combobox").each(function(){var e=d(this);if(e.data("combobox")){return}e.combobox(e.data())})});d("body").on("mousedown.combobox.data-api",".combobox",function(){var e=d(this);if(e.data("combobox")){return}e.combobox(e.data())})})});