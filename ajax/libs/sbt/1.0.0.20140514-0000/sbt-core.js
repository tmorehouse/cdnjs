//>>built
require({cache:{"sbt/connections/BlogService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./BlogConstants,../base/BaseService,../base/AtomEntity,../base/XmlDataHandler,./Tag".split(","),function(h,g,c,e,b,a,i,k,m,q){CategoryTmpl='<category term="${tag}"></category>';var o=h(k,{xpath:a.BlogXPath,namespaces:a.BlogNamespaces,categoryScheme:'<category term="blog" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',constructor:function(){},getHandle:function(){return this.getAsString("handle")},
setHandle:function(a){return this.setAsString("handle",a)},getBlogUuid:function(){var a=this.getAsString("blogUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:blog-")&&(a=a.substring(28,a.length));return a},setBlogUuid:function(a){return this.setAsString("blogUuid",a)},getBlogUrl:function(){return this.getAsString("alternateUrl")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},load:function(b){var d=this.getBlogUuid(),f=this.service._validateBlogUuid(d);
if(f)return f;var i=this,b={handleAs:"text",query:c.mixin({},b||{})},f=null,f=this.service.constructUrl(a.AtomBlogInstance,null,{blogUuid:d});return this.service.getEntity(f,b,d,{createEntity:function(b,d){i.setDataHandler(new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.BlogXPath}));return i}})},remove:function(a){return this.service.deleteBlog(this.getBlogUuid(),a)},update:function(a){return this.service.updateBlog(this,a)},save:function(a){return this.getBlogUuid()?this.service.updateBlog(this,
a):this.service.createBlog(this,a)}}),n=h(k,{xpath:a.BlogPostXPath,namespaces:a.BlogPostNamespaces,constructor:function(){},getBlogPostUuid:function(){var a=this.getAsString("postUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:entry-")&&(a=a.substring(29,a.length));return a},setBlogPostUuid:function(a){return this.setAsString("postUuid",a)},getBlogHandle:function(){var a=this.getAsString("blogHandle");return a?a:a=this.service._extractBlogHandle(this.getAsString("alternateUrl"))},setBlogHandle:function(a){return this.setAsString("blogHandle",
a)},getRepliesUrl:function(){return this.getAsString("replies")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getRecomendationsURL:function(){return this.getAsString("recomendationsUrl")},getRecomendationsCount:function(){return this.getAsString("rankRecommendations")},getCommentCount:function(){return this.getAsString("rankComment")},getHitCount:function(){return this.getAsDate("rankHit")},getSource:function(){return this.getAsObject("sourceId,sourceTitle,sourceLink,sourceLinkAlternate,sourceUpdated,sourceCategory".split(","))},
load:function(b){var d=this.getBlogPostUuid(),f=this.service._validateBlogUuid(d);if(f)return f;var i=this,b={handleAs:"text",query:c.mixin({},b||{})},f=null,f=this.service.constructUrl(a.AtomBlogPostInstance,null,{postUuid:d});return this.service.getEntity(f,b,d,{createEntity:function(b,d){i.setDataHandler(new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.BlogPostXPath}));return i}})},remove:function(a){return this.service.deletePost(this.getBlogPostUuid(),a)},update:function(a){return this.service.updatePost(this,
a)},save:function(a){return this.getBlogPostUuid()?this.service.updatePost(this,a):this.service.createPost(this,a)}}),p=h(k,{xpath:a.CommentXPath,namespaces:a.BlogNamespaces,constructor:function(){},getCommentUuid:function(){var a=this.getAsString("commentUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:comment-")&&(a=a.substring(31,a.length));return a},setCommentUuid:function(a){return this.setAsString("CommentUuid",a)},getRecomendationsURL:function(){return this.getAsString("recomendationsUrl")},
getRecomendationsCount:function(){return this.getAsString("rankRecommendations")},getReplyTo:function(){return this.getAsString("replyTo")},getPostUuid:function(){var a=this.getAsString("blogPostUuid");if(a)return a;(a=this.getAsString("replyTo"))&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:entry-")&&(a=a.substring(29,a.length));return a},setBlogPostUuid:function(a){return this.setAsString("blogPostUuid",a)},getBlogHandle:function(){var a=this.getAsString("blogHandle");return a?a:a=this.service._extractBlogHandle(this.getAsString("alternateUrl"))},
setBlogHandle:function(a){this.setAsString("blogHandle",a);return this.setAsString("blogHandle",a)},getTrackbackTitle:function(){return this.getAsDate("trackbacktitle")},getSource:function(){return this.getAsObject(["sourceId","sourceTitle","sourceLink","sourceLinkAlternate"])},load:function(b,d,f){var i=this.service._validateUuid(d);if(i)return i;var j=this,f={handleAs:"text",query:c.mixin({},f||{})},i=null,i=this.service.constructUrl(a.AtomBlogCommentEditRemove,null,{blogHandle:b,commentUuid:d});
return this.service.getEntity(i,f,d,{createEntity:function(b,d){j.setDataHandler(new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.CommentXPath}));return j}})},remove:function(a){return this.service.deleteComment(this.getCommentUuid(),a)},save:function(a){return this.service.createPost(this,a)}}),d=h(k,{xpath:a.RecommendersXPath,categoryScheme:'<category term="person" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',namespaces:a.BlogNamespaces,constructor:function(){},getRecommenderUuid:function(){var a=
this.getAsString("recommenderUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:person-")&&(a=a.substring(30,a.length));return a}}),r={createEntities:function(b,d){return new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.BlogFeedXPath})},createEntity:function(a,b){return new o({service:a,data:b})}},f={createEntities:function(b,d){return new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new n({service:a,data:b})}},s={createEntities:function(b,
d){return new m({data:d,namespaces:a.Namespaces,xpath:a.TagsXPath})},createEntity:function(b,d){var f=new m({data:d,namespaces:a.Namespaces,xpath:a.TagsXPath});return new q({service:b,id:f.getEntityId(),dataHandler:f})}},t={createEntities:function(b,d){return new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.BlogFeedXPath})},createEntity:function(a,b){return new n({service:a,data:b})}},j={createEntities:function(b,d){return new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.BlogFeedXPath})},
createEntity:function(a,b){return new d({service:a,data:b})}},v={createEntities:function(b,d){return new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.BlogFeedXPath})},createEntity:function(a,b){return new p({service:a,data:b})}};return h(i,{contextRootMap:{blogs:"blogs"},constructor:function(){if(!this.endpoint&&(this.endpoint=g.findEndpoint(this.getDefaultEndpointName()),!this.endpoint.serviceMappings.blogHomepageHandle))this.endpoint.serviceMappings.blogHomepageHandle=this.getDefaultHandle()},
getDefaultEndpointName:function(){return"connections"},getDefaultHandle:function(){return"homepage"},getBlogs:function(b){return this.getEntities(a.AtomBlogsAll,{method:"GET",handleAs:"text",query:b||{}},this.getBlogFeedCallbacks())},getMyBlogs:function(b){return this.getEntities(a.AtomBlogsMy,{method:"GET",handleAs:"text",query:b||{}},this.getBlogFeedCallbacks())},getFeaturedBlogs:function(b){return this.getEntities(a.AtomBlogsFeatured,{method:"GET",handleAs:"text",query:b||{}},this.getBlogFeedCallbacks())},
getFeaturedPosts:function(b){return this.getEntities(a.AtomBlogsPostsFeatured,{method:"GET",handleAs:"text",query:b||{}},this.getBlogPostsCallbacks())},getRecommendedPosts:function(b){return this.getEntities(a.AtomBlogsPostsRecommended,{method:"GET",handleAs:"text",query:b||{}},this.getBlogPostsCallbacks())},getBlogsPosts:function(b){return this.getEntities(a.AtomEntriesAll,{method:"GET",handleAs:"text",query:b||{}},this.getBlogPostsCallbacks())},getBlogPosts:function(b,d){var f={method:"GET",handleAs:"text",
query:d||{}},i=null,i=this.constructUrl(a.AtomBlogEntries,null,{blogHandle:b});return this.getEntities(i,f,this.getBlogPostsCallbacks())},getBlogPostRecommenders:function(b,d){var f=this._toBlogPost(b),i=this._validateBlogPost(f);if(i)return i;var i={method:"GET",handleAs:"text",query:d||{}},j=null,j=this.constructUrl(a.AtomRecommendBlogPost,null,{postUuid:f.getBlogPostUuid(),blogHandle:f.getBlogHandle()});return this.getEntities(j,i,this.getBlogPostRecommendersCallbacks())},getBlogsComments:function(b){return this.getEntities(a.AtomBlogCommentsAll,
{method:"GET",handleAs:"text",query:b||{}},this.getBlogPostCommentsCallbacks())},getBlogComments:function(b,d){var f={method:"GET",handleAs:"text",query:d||{}},i=null,i=this.constructUrl(a.AtomBlogComments,null,{blogHandle:b});return this.getEntities(i,f,this.getBlogPostCommentsCallbacks())},getBlog:function(a,b){return(new o({service:this,_fields:{blogUuid:a}})).load(b)},createBlog:function(b,d){var f=this._toBlog(b),i=this._validateBlog(f,!1,d);if(i)return i;i={method:"POST",query:d||{},headers:a.AtomXmlHeaders,
data:this._constructBlogPostData(f)};return this.updateEntity(a.AtomBlogCreate,i,{createEntity:function(b,d){if(d){var i=new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.BlogXPath});f.setDataHandler(i)}f.setData(d);return f}},d)},updateBlog:function(b,d){var f=this._toBlog(b),i=this._validateBlog(f,!0,d);if(i)return i;var i={method:"PUT",query:c.mixin({},d||{}),headers:a.AtomXmlHeaders,data:this._constructBlogPostData(f)},j=f.getBlogUuid(),k=null,k=this.constructUrl(a.AtomBlogEditDelete,null,
{blogUuid:j});return this.updateEntity(k,i,{createEntity:function(b,d){var i=f.getBlogUuid();if(d){var j=new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.BlogXPath});f.setDataHandler(j)}f.setBlogUuid(i);return f}},d)},deleteBlog:function(b,d){var f=this._validateBlogUuid(b);if(f)return f;var f={method:"DELETE",query:c.mixin({},d||{}),handleAs:"text"},i=null,i=this.constructUrl(a.AtomBlogEditDelete,null,{blogUuid:b});return this.deleteEntity(i,f,b)},getBlogPost:function(a,b){return(new n({service:this,
_fields:{postUuid:a}})).load(b)},createPost:function(b,d){var f=this._toBlogPost(b),i=this._validateBlog(f,!1,d);if(i)return i;var i={method:"POST",query:d||{},headers:a.AtomXmlHeaders,data:this._constructBlogPostPostData(f)},j=null,j=this.constructUrl(a.AtomBlogPostCreate,null,{blogHandle:b.getBlogHandle()});return this.updateEntity(j,i,{createEntity:function(b,d){if(d){var i=new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.BlogPostXPath});f.setDataHandler(i)}f.setData(d);return f}},d)},updatePost:function(b,
d){var f=this._toBlogPost(b),i=this._validateBlogPost(f,!0,d);if(i)return i;var i={method:"PUT",query:c.mixin({},d||{}),headers:a.AtomXmlHeaders,data:this._constructBlogPostPostData(f)},j=null,j=this.constructUrl(a.AtomBlogPostEditDelete,null,{postUuid:f.getBlogPostUuid(),blogHandle:f.getBlogHandle()});return this.updateEntity(j,i,{createEntity:function(b,d){var i=f.getBlogPostUuid();if(d){var j=new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.BlogPostXPath});f.setDataHandler(j)}f.setBlogPostUuid(i);
return f}},d)},recommendPost:function(b){var b=this._toBlogPost(b),d=this._validateBlogPost(b);if(d)return d;var d={method:"POST",headers:a.AtomXmlHeaders},f=null,f=this.constructUrl(a.AtomRecommendBlogPost,null,{postUuid:b.getBlogPostUuid(),blogHandle:b.getBlogHandle()});return this.updateEntity(f,d,this.getRecommendBlogPostCallbacks())},unrecommendPost:function(b){var d=this._toBlogPost(b),f=this._validateBlogPost(d);if(f)return f;var f={method:"DELETE",headers:a.AtomXmlHeaders},i=null,i=this.constructUrl(a.AtomRecommendBlogPost,
null,{postUuid:d.getBlogPostUuid(),blogHandle:d.getBlogHandle()});return this.deleteEntity(i,f,b.getBlogPostUuid())},deletePost:function(b,d,f){var i=this._validateUuid(d);if(i)return i;f={method:"DELETE",query:c.mixin({},f||{}),handleAs:"text"};i=null;i=this.constructUrl(a.AtomBlogPostEditDelete,null,{blogHandle:b,postUuid:d});return this.deleteEntity(i,f,d)},deleteComment:function(b,d,f){var i=this._validateUuid(d);if(i)return i;f={method:"DELETE",query:c.mixin({},f||{}),handleAs:"text"};i=null;
i=this.constructUrl(a.AtomBlogCommentEditRemove,null,{blogHandle:b,commentUuid:d});return this.deleteEntity(i,f,d)},createComment:function(b,d){var f=this._toComment(b),i=this._validateComment(f);if(i)return i;var i={method:"POST",query:d||{},headers:a.AtomXmlHeaders,data:this._constructCommentBlogPostData(f)},j=null,j=this.constructUrl(a.AtomBlogCommentCreate,null,{blogHandle:b.getBlogHandle(),postUuid:b.getPostUuid()});return this.updateEntity(j,i,{createEntity:function(b,d){if(d){var i=new m({service:b,
data:d,namespaces:a.Namespaces,xpath:a.CommentXPath});f.setDataHandler(i)}f.setData(d);return f}},d)},getComment:function(a,b,d){return(new p({service:this,_fields:{commentUuid:b}})).load(a,b,d)},getBlogsTags:function(b){return this.getEntities(a.AtomBlogsTags,{method:"GET",handleAs:"text",query:b||{}},this.getTagsFeedCallbacks(),b)},getBlogTags:function(b,d){var f={method:"GET",handleAs:"text",query:d||{}},i=null,i=this.constructUrl(a.AtomBlogTags,null,{blogHandle:b});return this.getEntities(i,f,
this.getTagsFeedCallbacks(),d)},newBlog:function(a){return this._toBlog(a)},newBlogPost:function(a){return this._toBlogPost(a)},newComment:function(a){return this._toComment(a)},getBlogFeedCallbacks:function(){return r},getTagsFeedCallbacks:function(){return s},getRecommendBlogPostCallbacks:function(){return f},getBlogPostsCallbacks:function(){return t},getBlogPostRecommendersCallbacks:function(){return j},getBlogPostCommentsCallbacks:function(){return v},_toBlog:function(a){if(a instanceof o)return a;
c.isString(a)&&(a={blogUuid:a});return new o({service:this,_fields:c.mixin({},a)})},_toBlogPost:function(a){if(a instanceof n)return a;c.isString(a)&&(a={postUuid:a});return new n({service:this,_fields:c.mixin({},a)})},_toComment:function(a){if(a instanceof p)return a;c.isString(a)&&(a={commentUuid:a});return new p({service:this,_fields:c.mixin({},a)})},_validateBlogUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected blogUuid.")},_validateUuid:function(a){if(!a)return this.createBadRequestPromise("Invalid argument, blog post id must be specified.")},
_validateBlogPost:function(a){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, blog post with title must be specified.")},_validateComment:function(a){if(!a||!a.getContent())return this.createBadRequestPromise("Invalid argument, blog comment with content must be specified.")},_validateBlog:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, blog with title must be specified.");if(b&&!a.getBlogUuid())return this.createBadRequestPromise("Invalid argument, blog with UUID must be specified.")},
_constructBlogPostData:function(a){a=e.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app"  xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><title type="text">${getTitle}</title><snx:timezone>${getTimezone}</snx:timezone><snx:handle>${getHandle}</snx:handle><summary type="html">${getSummary}</summary>${getTags}</entry>',a,function(a,b){if("getTags"==b){var d=a,a="",f;for(f in d)a+=
e.transform(CategoryTmpl,{tag:d[f]})}return a},a);return e.trim(a)},_constructBlogPostPostData:function(a){a=e.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app"  xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><title type="text">${getTitle}</title><content type="html">${getContent}</content>${getTags}</entry>',a,function(a,b){if("getTags"==b){var d=a,a="",f;for(f in d)a+=
e.transform(CategoryTmpl,{tag:d[f]})}return a},a);return e.trim(a)},_constructCommentBlogPostData:function(a){a=e.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app"  xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><content type="html">${getContent}</content></entry>',a,function(a){return a},a);return e.trim(a)},_extractBlogHandle:function(a){a=a.substring(0,a.indexOf("/entry/"));
return a.substring(a.lastIndexOf("/")+1,a.length)}})})},"sbt/json":function(){define(["./_bridge/json","./_bridge/lang","./log","./stringUtil"],function(h,g,c,e){return{parse:function(b){return(JSON||h).parse(b)},stringify:function(b){return(JSON||h).stringify(b)},jsonBeanStringify:function(b){if(g.isArray(b)){for(var a="[",i=0;i<b.length;i++)a+=this._jsonBeanStringify(b[i]),i+1<b.length&&(a+=",\n");return a+"]"}return this._jsonBeanStringify(b)},jsonBean:function(b){if(g.isArray(b)){for(var a=[],
i=0;i<b.length;i++)a.push(this._jsonBean(b[i]));return a}return this._jsonBean(b)},_jsonBeanStringify:function(b){return this._stringifyCyclicCheck(this.jsonBean(b),4)},_stringifyCyclicCheck:function(b,a){var i=[],c=this;return(JSON||h).stringify(b,function(a,b){if(c._isDomNode(b))return{};if(g.isObject(b)){if(0<=i.indexOf(b)&&!c._isBuiltin(b))return;i.push(b)}else if(g.isFunction(b))return;return b},a)},_jsonBean:function(b,a){a||(a=[]);if(!(0<=a.indexOf(b))){a.push(b);var i={},c;for(c in b){var e=
this._getObjectValue(b,c,a);if(e||!isNaN(e))i[c]=e}return i}},_notReserved:function(b){return"isInstanceOf"!==b&&"getInherited"!==b},_getObjectValue:function(b,a,i){if(g.isFunction(b[a])){if((e.startsWith(a,"get")||e.startsWith(a,"is"))&&this._notReserved(a))try{var c=b[a].apply(b);return c&&!this._isBuiltin(c)&&g.isObject(c)?this._jsonBean(c,i):c}catch(m){}}else if(!e.startsWith(a,"_")&&!e.startsWith(a,"-"))return b[a]},_isBuiltin:function(b){return b instanceof Date||b instanceof Number||b instanceof
Boolean||g.isArray(b)},_isDomNode:function(b){return b&&b.nodeName&&b.nodeType&&"number"===typeof b.nodeType&&"string"===typeof b.nodeName}}})},"sbt/connections/FileConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin({FileFeedXPath:g.ConnectionsFeedXPath,CommentFeedXPath:g.ConnectionsFeedXPath,FileXPath:{entry:"/a:entry",id:"a:id",uid:"td:uuid",label:"td:label",selfUrl:"a:link[@rel='self']/@href",alternateUrl:"a:link[@rel='alternate']/@href",downloadUrl:"a:link[@rel='enclosure']/@href",
type:"a:link[@rel='enclosure']/@type",length:"a:link[@rel='enclosure']/@length",editLink:"a:link[@rel='edit']/@href",editMediaLink:"a:link[@rel='edit-media']/@href",thumbnailUrl:"a:link[@rel='thumbnail']/@href",commentsUrl:"a:link[@rel='replies']/@href",fileSize:"td:totalMediaSize",content:"a:content[@type='html']",shareCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/share']",authorName:"a:author/a:name",authorUserId:"a:author/snx:userid",authorEmail:"a:author/a:email",authorUserState:"a:author/snx:userState",
title:"a:title",published:"a:published",updated:"a:updated",created:"td:created",modified:"td:modified",lastAccessed:"td:lastAccessed",modifierName:"td:modifier/td:name",modifierUserId:"td:modifier/snx:userid",modifierEmail:"td:modifier/td:email",modifierUserState:"td:modifier/snx:userState",visibility:"td:visibility",libraryId:"td:libraryId",libraryType:"td:libraryType",versionUuid:"td:versionUuid",versionLabel:"td:versionLabel",propagation:"td:propagation",recommendationsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",
commentsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",sharesCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/share']",foldersCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/collections']",attachmentsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/attachments']",versionsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/versions']",referencesCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/references']",totalMediaSize:"td:totalMediaSize",
summary:"a:summary",contentUrl:"a:content/@src",contentType:"a:content/@type",objectTypeId:"td:objectTypeId",lock:"td:lock/@type",acls:"td:permissions",hitCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/hit']",anonymousHitCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/anonymous_hit']",tags:"a:category/@term",category:"a:category/@label"},FolderXPath:{id:"id",uid:"td:uuid",title:"a:title",label:"td:label",folderUrl:"a:link[@rel='alternate']/@href",logoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/logo']/@href",
tags:"a:category/@term",summary:"a:summary[@type='text']",content:"a:content[@type='html']",visibility:"td:visibility",notification:"td:notification",versionUuid:"td:versionUuid",versionLabel:"td:versionLabel",documentVersionUuid:"td:documentVersionUuid",documentVersionLabel:"td:documentVersionLabel",itemCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/item']",shareCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/user']",groupShareCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/group']",
modified:"td:modified",created:"td:created",updated:"a:updated",authorName:"a:author/a:name",authorUserId:"a:author/snx:userid",authorEmail:"a:author/a:email",content:"a:content[@type='text']",modifierName:"a:modifier/a:name",modifierId:"a:modifier/snx:userid",modifierEmail:"a:modifier/a:email"},CommentXPath:{entry:"a:entry",id:"a:id",uid:"td:uuid",title:"a:title",content:"a:content[@type='text']",created:"td:created",modified:"td:modified",versionLabel:"td:versionLabel",updated:"a:updated",published:"a:published",
modifierName:"td:modifier/td:name",modifierUserId:"td:modifier/snx:userid",modifierEmail:"td:modifier/td:email",modifierUserState:"td:modifier/snx:userState",authorName:"a:author/a:name",authorUserId:"a:author/snx:userid",authorEmail:"a:author/a:email",authorUserState:"a:author/snx:userState",language:"td:language",deleteWithRecord:"td:deleteWithRecord"},SharesXPath:{id:"id",uuid:"td:uuid",title:"a:title",summary:"a:summary[@type='text']",sharedResourceType:"td:sharedResourceType",sharePermission:"td:sharePermission",
sharedWhat:"td:sharedWhat",sharedWithName:"a:sharedWith/a:name",sharedWithId:"a:sharedWith/snx:userid",sharedWithEmail:"a:sharedWith/a:email",documentOwner:"td:documentOwner",updated:"a:updated",published:"a:published",authorName:"a:author/a:name",authorUid:"a:author/snx:userid",authorEmail:"a:author/a:email"},AtomFileInstance:"${files}/basic/api/myuserlibrary/document/{documentId}/entry",AtomFileInstancePublic:"${files}/basic/anonymous/api/library/{libraryId}/document/{documentId}/entry",AtomFilesMy:"/${files}/basic/api/myuserlibrary/feed",
AtomFilesShared:"/${files}/basic/api/documents/shared/feed",AtomFilesPublic:"/${files}/basic/anonymous/api/documents/feed?visibility=public",AtomFilesRecycled:"/${files}/basic/api/myuserlibrary/view/recyclebin/feed",AtomFoldersMy:"/${files}/basic/api/collections/feed",AtomFoldersPublic:"/${files}/basic/anonymous/api/collections/feed",AtomFoldersActive:"/${files}/basic/api/collections/addedto/feed",AtomFileCommentsPublic:"/${files}/basic/anonymous/api/userlibrary/{userId}/document/{documentId}/feed?category=comment",
AtomFileCommentsMy:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/feed?category=comment",AtomAddCommentToFile:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/feed",AtomAddCommentToMyFile:"/${files}/basic/api/myuserlibrary/document/{documentId}/feed",AtomUpdateFileMetadata:"/${files}/basic/api/myuserlibrary/document/{documentId}/entry",AtomFilesMyPinned:"/${files}/basic/api/myfavorites/documents/feed",AtomPinFile:"/${files}/basic/api/myfavorites/documents/feed",AtomAddFilesToFolder:"/${files}/basic/api/collection/{collectionId}/feed",
AtomDeleteFile:"/${files}/basic/api/myuserlibrary/document/{documentId}/entry",AtomLockUnlockFile:"/${files}/basic/api/document/{documentId}/lock",AtomAddFileToFolders:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/feed",AtomAddMyFileToFolders:"/${files}/basic/api/myuserlibrary/document/{documentId}/feed",AtomCreateFolder:"/${files}/basic/api/collections/feed",AtomDeleteAllFilesFromRecyclebBin:"/${files}/basic/api/userlibrary/{userId}/view/recyclebin/feed",AtomDeleteMyFilesFromRecyclebBin:"/${files}/basic/api/myuserlibrary/view/recyclebin/feed",
AtomDeleteAllVersionsOfAFile:"/${files}/basic/api/myuserlibrary/document/{documentId}/feed",AtomDeleteComment:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/comment/{commentId}/entry",AtomDeleteMyComment:"/${files}/basic/api/myuserlibrary/document/{documentId}/comment/{commentId}/entry",AtomDeleteFileFromRecycleBin:"/${files}/basic/api/userlibrary/{userId}/view/recyclebin/{documentId}/entry",AtomDeleteMyFileFromRecycleBin:"/${files}/basic/api/myuserlibrary/view/recyclebin/{documentId}/entry",
AtomDeleteFileShare:"/${files}/basic/api/shares/feed",AtomDeleteFolder:"/${files}/basic/api/collection/{collectionId}/entry",AtomGetAllUsersFiles:"/${files}/basic/anonymous/api/userlibrary/{userId}/feed",AtomGetFileComment:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/comment/{commentId}/entry",AtomGetMyFileComment:"/${files}/basic/api/myuserlibrary/document/{documentId}/comment/{commentId}/entry",AtomGetFileFromRecycleBin:"/${files}/basic/api/userlibrary/{userId}/view/recyclebin/{documentId}/entry",
AtomGetFilesAwaitingApproval:"/${files}/basic/api/approval/documents",AtomGetFileShares:"/${files}/basic/api/documents/shared/feed",AtomGetFilesInFolder:"/${files}/basic/api/collection/{collectionId}/feed",AtomGetFilesInMyRecycleBin:"/${files}/basic/api/myuserlibrary/view/recyclebin/feed",AtomGetFileWithGivenVersion:"/${files}/basic/api/myuserlibrary/document/{documentId}/version/{versionId}/entry",AtomGetFolder:"/${files}/basic/api/collection/{collectionId}/entry",AtomGetFoldersWithRecentlyAddedFiles:"/${files}/basic/api/collections/addedto/feed",
AtomGetPinnedFolders:"/${files}/basic/api/myfavorites/collections/feed",AtomGetPublicFolders:"/${files}/basic/anonymous/api/collections/feed",AtomPinFolder:"/${files}/basic/api/myfavorites/collections/feed",AtomRemoveFileFromFolder:"/${files}/basic/api/collection/{collectionId}/feed",AtomRestoreFileFromRecycleBin:"/${files}/basic/api/userlibrary/{userId}/view/recyclebin/{documentId}/entry",AtomShareFileWithCommunities:"/${files}/basic/api/myuserlibrary/document/{documentId}/feed",AtomUpdateComment:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/comment/{commentId}/entry",
AtomUpdateMyComment:"/${files}/basic/api/myuserlibrary/document/{documentId}/comment/{commentId}/entry",AtomAddCommentToCommunityFile:"/${files}/basic/api/communitylibrary/{communityId}/document/{documentId}/feed",AtomGetAllFilesInCommunity:"/${files}/basic/api/communitylibrary/{communityId}/feed",AtomGetAllCommunityFiles:"/${files}/basic/api/communitycollection/{communityId}/feed",AtomGetCommunityFile:"/${files}/basic/api/communitylibrary/{communityId}/document/{documentId}/entry",AtomUpdateCommunityFileMetadata:"/${files}/basic/api/library/{libraryId}/document/{documentId}/entry"},
g)})},"sbt/authenticator/templates/login":function(){},"sbt/pathUtil":function(){define(["./stringUtil"],function(h){return{concat:function(g,c){if(!g)return c;if(!c)return g;h.endsWith(g,"/")&&(g=g.substring(0,g.length-1));h.startsWith(c,"/")&&(c=c.substring(1));return g+"/"+c},isAbsolute:function(g){return 0<=g.indexOf("://")}}})},"sbt/base/BaseService":function(){define("../config,../declare,../lang,../log,../stringUtil,../Cache,../Promise,../util".split(","),function(h,g,c,e,b,a,i,k){var m={};
return g(null,{endpoint:null,_cache:null,_regExp:/\/{2}/,contextRootMap:{},constructor:function(b){b=b||{};if(b.endpoint)this.endpoint=c.isString(b.endpoint)?h.findEndpoint(b.endpoint):b.endpoint;if(b.cacheSize)this._cache=new a(b.cacheSize)},constructUrl:function(a,i,k){if(!a)throw Error("BaseService.constructUrl: Invalid argument, url is undefined or null.");this.endpoint&&(c.mixin(this.contextRootMap,this.endpoint.serviceMappings),a=b.transform(a,this.contextRootMap,function(a,b){return a?a:b},
this));k&&(a=b.replace(a,k),-1!=a.indexOf("//")&&(a=a.replace(this._regExp,"/")));if(i)for(param in i)-1==a.indexOf("?")?a+="?":a.indexOf("&")!=a.length-1&&(a+="&"),(k=encodeURIComponent(i[param]))&&(a+=param+"="+k);return a},getEntities:function(a,b,c){var a=this.constructUrl(a),k=this,d=new i;this.request(a,b,null,d).response.then(function(a){d.response=a;try{for(var b=c.createEntities.apply(k,[k,a.data,a]),i=b.getEntitiesDataArray(),e=[],j=0;j<i.length;j++){var v=c.createEntity.apply(k,[k,i[j],
a]);e.push(v)}d.summary=b.getSummary();d.fulfilled(e)}catch(m){a=Error("Error parsing response caused by: "+m),a.cause=m,d.rejected(a)}},function(a){d.rejected(a)});return d},getEntity:function(a,b,c,k){var a=this.constructUrl(a),d=this._validateEntityId(c);if(d)return d;var d=new i,e=this.getFromCache(c);if(e)return d.fulfilled(e),d;var f=this;this.request(a,b,c,d).response.then(function(a){d.response=a;try{var b=k.createEntity.apply(f,[f,a.data,a]);f._cache&&c?f.fullFillOrRejectPromises.apply(f,
[c,b,a]):d.fulfilled(b)}catch(i){a=Error("Invalid response"),a.cause=i,f._cache&&c?f.fullFillOrRejectPromises.apply(f,[c,a]):d.rejected(a)}},function(a){f._cache&&c?f.fullFillOrRejectPromises.apply(f,[c,a]):d.rejected(a)});return d},updateEntity:function(a,b,c){var a=this.constructUrl(a),k=this,d=new i;this.endpoint.request(a,b,null,d).response.then(function(a){d.response=a;a=c.createEntity.apply(k,[k,a.data,a]);a instanceof i?a.then(function(a){d.fulfilled(a)},function(a){d.rejected(a)}):(a.id&&
k.removeFromCache(a.id),a.id&&a.data&&k.addToCache(a.id,a),d.fulfilled(a))},function(a){d.rejected(a)});return d},deleteEntity:function(a,b,c){var a=this.constructUrl(a),k=this._validateEntityId(c);if(k)return k;var d=this,k=new i;this.endpoint.request(a,b,c,k).response.then(function(a){k.response=a;k.fulfilled(c);d.removeFromCache(c)},function(a){k.rejected(a)});return k},request:function(a,b,i,c){a=this.constructUrl(a);this._cache&&i&&this.pushPromise(i,c);return this.endpoint.request(a,b)},pushPromise:function(a,
b){e.debug("pushPromise, id : {0}, promise : {1}",a,b);m[a]||(m[a]=[]);m[a].push(b)},fullFillOrRejectPromises:function(a,b,i){e.debug("fullFillOrRejectPromises, id : {0}, data : {1}, response : {2}",a,b,i);this.addToCache(a,b);var c=m[a];if(c){delete m[a];for(a=0;a<c.length;a++)this.fullFillOrReject.apply(this,[c[a],b,i])}},fullFillOrReject:function(a,b,i){if(a)try{a.response=i,b instanceof Error?a.rejected(b):a.fulfilled(b)}catch(c){e.debug("fullFillOrReject: "+c.message)}},addToCache:function(a,
b){this._cache&&!(b instanceof Error)&&this._cache.put(a,b)},removeFromCache:function(a){this._cache&&this._cache.remove(a)},getFromCache:function(a){if(this._cache)return this._cache.get(a)},createBadRequestError:function(a){var b=Error();b.code=400;b.message=a;return b},createBadRequestPromise:function(a){return new i(this.createBadRequestError(a))},isEmail:function(a){return a&&0<=a.indexOf("@")},getLocationParameter:function(a,b){var i=a.getHeader("Location")||void 0;if(i)return this.getUrlParameter(i,
b)},getUrlParameter:function(a,b){return decodeURIComponent((RegExp("[?|&]"+b+"=([^&;]+?)(&|#|;|$)").exec(a)||[,""])[1].replace(/\+/g,"%20"))||null},validateField:function(a,i){if(!i){var c;c=b.substitute("Invalid value {0} for field {1}, the field must not be empty or undefined.",[i||"'undefined'",a]);return this.createBadRequestPromise(c)}},validateFields:function(a){for(var b in a){var i=this.validateField(b,a[b]);if(i)return i}},validateHTML5FileSupport:function(){if(!window.File||!window.FormData)return this.createBadRequestPromise("HTML 5 File API is not supported by the Browser.");
if(-1!=k.getJavaScriptLibrary().indexOf("Dojo 1.4"))return this.createBadRequestPromise("Dojo 1.4.* is not supported for Update Profile Photo")},_validateEntityId:function(a){if(!a||!c.isString(a))return a=b.substitute("Invalid argument {0}, expected valid entity identifier.",[a||"'undefined'"]),this.createBadRequestPromise(a)},getFileControl:function(a){var b=null;"string"==typeof a?b=document.getElementById(a):"object"==typeof a&&(b=a);return b}})})},"sbt/base/VCardDataHandler":function(){define(["../declare",
"../lang","../config","../stringUtil","./XmlDataHandler"],function(h,g,c,e,b){return h(b,{lineDelim:"\n",itemDelim:":",_vcard:null,constructor:function(){this.parseVCard()},parseVCard:function(){var a=e.trim(this.getAsString("vcard")).split(this.lineDelim);this._vcard={};for(var b=1;b<a.length-1;b++){var c=e.trim(a[b]),m=c.indexOf(this.itemDelim),g=c.substring(0,m),c=c.substring(m+1);this._vcard[g]=c}},_selectText:function(a){var b=this._getXPath(a);if(this._vcard&&this._vcard.hasOwnProperty(b))return this._vcard[b];
try{return this.inherited(arguments,[a])}catch(c){return null}}})})},"sbt/_bridge/declare":function(){define(["dojo/_base/declare"],function(h){return h})},"sbt/smartcloud/SmartcloudConstants":function(){define(["../lang","../base/BaseConstants"],function(h,g){return h.mixin(g,{SmartcloudFeedXPath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"}})})},"sbt/i18n":function(){define(["./_bridge/i18n"],
function(h){h.getUpdatedLabel=function(g){var g=new Date(g),c=new Date(g.getTime()),e=new Date;return c.setHours(0,0,0,0)==e.setHours(0,0,0,0)?"today at "+this.getLocalizedTime(g):"on "+this.getLocalizedDate(g)};h.getSearchUpdatedLabel=function(g){var g=new Date(g),c=new Date(g.getTime()),e=new Date;return c.setHours(0,0,0,0)==e.setHours(0,0,0,0)?"today at "+this.getLocalizedTime(g):this.getLocalizedDate(g)};return h})},"sbt/DebugTransport":function(){define("./declare,./lang,./dom,./json,./stringUtil,sbt/_bridge/Transport".split(","),
function(h,g,c,e,b,a){return h(a,{responseMap:{},index:0,createResponse:function(a,k,m,g){var h=this.inherited(arguments,[a,k,m,g]),n=c.byId("mockData");if(n){"json"==k.handleAs&&(m=e.jsonBeanStringify(m));var p=document.createElement("pre");n.appendChild(p);var n=h.status||0,d=k.handleAs||"text",r=k.method||"GET",f=h.getHeader("Location")||"",s=m instanceof Error;s&&(m=h.data.responseText||h.data.response.text||m);var t=a,j=b.hashCode(t);this.responseMap[j]?(this.responseMap[j]+=1,t+="#"+this.responseMap[j]):
this.responseMap[j]=1;p.appendChild(c.createTextNode("<script type='text/template' status='"+n+"' id='"+t+"' index='"+this.index+"' handleAs='"+d+"' method='"+r+"' location='"+f+"' error='"+s+"'>\n"+m+"\n<\/script>"));this.index++}return h}})})},"sbt/connections/ProfileConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin({DefaultCacheSize:10,AddressFields:"streetAddress,extendedAddress,locality,region,postalCode,countryName".split(","),ProfileFeedXPath:g.ConnectionsFeedXPath,
ProfileNamespaces:g.Namespaces,TypeColleague:"colleague",StatusPending:"pending",ProfileXPath:h.mixin({},g.AtomEntryXPath,{uid:"a:contributor/snx:userid",entry:"/a:feed/a:entry",userid:"a:contributor/snx:userid",name:"a:contributor/a:name",email:"a:contributor/a:email",altEmail:"a:content/h:div/h:span/h:div[@class='x-groupwareMail']",photoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/image']/@href",fnUrl:"a:content/h:div/h:span/h:div/h:a[@class='fn url']/@href",soundUrl:"a:content/h:div/h:span/h:div/h:a[@class='sound url']/@href",
jobTitle:"a:content/h:div/h:span/h:div[@class='title']",organizationUnit:"a:content/h:div/h:span/h:div[@class='org']/h:span[@class='organization-unit']",telephoneNumber:"a:content/h:div/h:span/h:div[@class='tel']/h:span[@class='value']",building:"a:content/h:div/h:span/h:div/h:span[@class='x-building']",floor:"a:content/h:div/h:span/h:div/h:span[@class='x-floor']",officeNumber:"a:content/h:div/h:span/h:div/h:span[@class='x-office-number']",streetAddress:"a:content/h:div/h:span/h:div/h:div[@class='street-address']",
extendedAddress:"a:content/h:div/h:span/h:div/h:div[@class='extended-address x-streetAddress2']",locality:"a:content/h:div/h:span/h:div/h:span[@class='locality']",postalCode:"a:content/h:div/h:span/h:div/h:span[@class='postal-code']",region:"a:content/h:div/h:span/h:div/h:span[@class='region']",countryName:"a:content/h:div/h:span/h:div/h:div[@class='country-name']",groupwareMail:"a:content/h:div/h:span/h:div[@class='x-groupwareMail']",blogUrl:"a:content/h:div/h:span/h:div/h:a[@class='x-blog-url url']/@href",
role:"a:content/h:div/h:span/h:div[@class='role']",managerUid:"a:content/h:div/h:span/h:div[@class='x-manager-uid']",isManager:"a:content/h:div/h:span/h:div[@class='x-is-manager']"}),ColleagueConnectionXPath:h.mixin({},g.AtomEntryXPath,{entry:"/a:feed/a:entry"}),ProfileVCardXPath:h.mixin({},g.AtomEntryXPath,{entry:"/a:feed/a:entry",uid:"a:contributor/snx:userid",vcard:"a:content",userid:"a:contributor/snx:userid",name:"a:contributor/a:name",email:"a:contributor/a:email",altEmail:"EMAIL;X_GROUPWARE_MAIL",
photoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/image']/@href",fnUrl:"URL",soundUrl:"SOUND;VALUE=URL",jobTitle:"TITLE",organizationUnit:"a:content/h:div/h:span/h:div[@class='org']/h:span[@class='organization-unit']",telephoneNumber:"TEL;WORK",building:"X_BUILDING",floor:"X_FLOOR",officeNumber:"X_OFFICE_NUMBER",workLocation:"ADR;WORK",streetAddress:"a:content/h:div/h:span/h:div/h:div[@class='street-address']",extendedAddress:"a:content/h:div/h:span/h:div/h:div[@class='extended-address x-streetAddress2']",
locality:"a:content/h:div/h:span/h:div/h:span[@class='locality']",postalCode:"a:content/h:div/h:span/h:div/h:span[@class='postal-code']",region:"a:content/h:div/h:span/h:div/h:span[@class='region']",countryName:"a:content/h:div/h:span/h:div/h:div[@class='country-name']",groupwareMail:"EMAIL;X_GROUPWARE_MAIL"}),ProfileTagsXPath:{entries:"/app:categories/a:category",targetEmail:"app:categories/snx:targetEmail",numberOfContributors:"app:categories/@snx:numberOfContributors",entry:"/app:categories/a:category",
uid:"@term",id:"@term",term:"@term",frequency:"@snx:frequency",intensity:"@snx:intensityBin",visibility:"@snx:visibilityBin",contributorName:"a:name",contributorUserid:"a:userid",contributorEmail:"a:email"},InviteXPath:h.mixin({},g.AtomEntryXPath,{connectionType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/connection/type']/@term",status:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/status']/@term"}),profileCreateAttributes:{guid:"com.ibm.snx_profiles.base.guid",email:"com.ibm.snx_profiles.base.email",
uid:"com.ibm.snx_profiles.base.uid",distinguishedName:"com.ibm.snx_profiles.base.distinguishedName",displayName:"com.ibm.snx_profiles.base.displayName",givenNames:"com.ibm.snx_profiles.base.givenNames",surname:"com.ibm.snx_profiles.base.surname",userState:"com.ibm.snx_profiles.base.userState"},AtomProfileDo:"/${profiles}{authType}/atom/profile.do",AtomProfileEntryDo:"/${profiles}{authType}/atom/profileEntry.do",AtomConnectionsDo:"/${profiles}{authType}/atom/connections.do",AtomReportingChainDo:"/${profiles}{authType}/atom/reportingChain.do",
AtomPeopleManagedDo:"/${profiles}{authType}/atom/peopleManaged.do",AtomConnectionsInCommonDo:"/${profiles}{authType}/atom/connectionsInCommon.do",AtomSearchDo:"/${profiles}{authType}/atom/search.do",AtomPeopleManagedDo:"/${profiles}{authType}/atom/peopleManaged.do",AtomTagsDo:"/${profiles}{authType}/atom/profileTags.do",AdminAtomProfileDo:"/${profiles}/admin/atom/profiles.do",AdminAtomProfileEntryDo:"/${profiles}/admin/atom/profileEntry.do"},g)})},"sbt/base/AtomEntity":function(){define("../declare,../lang,../stringUtil,./BaseConstants,./BaseEntity,./XmlDataHandler".split(","),
function(h,g,c,e,b,a){return h(b,{contentType:"html",categoryScheme:null,constructor:function(a){a.data?this.dataHandler=this.createDataHandler(a.service,a.data||null,a.response||null,a.namespaces||this.namespaces||e.Namespaces,a.xpath||this.xpath||e.AtomEntryXPath):(this.service=a.service||this.service,this.namespaces=a.namespaces||this.namespaces||e.Namespaces,this.xpath=a.xpath||this.xpath||e.AtomEntryXPath)},createDataHandler:function(b,c,e,g,h){return new a({service:b,data:c,namespaces:g,xpath:h})},
setData:function(a,b){this.dataHandler=this.createDataHandler(this.service,a,b||null,this.namespaces||e.Namespaces,this.xpath||e.AtomEntryXPath);this.inherited(arguments)},getId:function(){return this.getAsString("id")},getTitle:function(){return this.getAsString("title")},setTitle:function(a){return this.setAsString("title",a)},getSummary:function(){return this.getAsString("summary")},setSummary:function(a){return this.setAsString("summary",a)},getContent:function(){return this.getAsString("content")},
setContent:function(a){return this.setAsString("content",a)},getCategoryTerms:function(){return this.getAsArray("categoryTerm")},setCategoryTerms:function(a){return this.setAsArray("categoryTerm",a)},getAuthor:function(){return this.getAsObject(["authorUserid","authorName","authorEmail","authorUserState"],["userid","name","email","userState"])},getContributor:function(){return this.getAsObject(["contributorUserid","contributorName","contributorEmail","contributorUserState"],["userid","name","email",
"userState"])},setContributor:function(a){return this.setAsObject(a)},getPublished:function(){return this.getAsDate("published")},getUpdated:function(){return this.getAsDate("updated")},getAlternateUrl:function(){return this.getAsString("alternateUrl")},getSelfUrl:function(){return this.getAsString("selfUrl")},getEditUrl:function(){return this.getAsString("editUrl")},createPostData:function(){var a=c.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" ${createNamespaces}>${categoryScheme}${createTitle}${createContent}${createSummary}${createContributor}${createTags}${createEntryData}</entry>',
this,function(a){return a},this);return c.trim(a)},createTitle:function(){var a=this.getTitle();return a?c.transform('<title type="text">${title}</title>',{title:a}):""},createContent:function(){var a=this.getContent();return a?("html"==this.contentType&&(a=a&&g.isString(a)?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a),c.transform('<content type="${contentType}">${content}</content>',{contentType:this.contentType,content:a})):""},createSummary:function(){var a=this.getSummary();return a?c.transform('<summary type="text">${summary}</summary>',
{summary:a}):""},createContributor:function(){var a=this.getContributor();if(a){var b="",e=a.email||(this.getEmail?this.getEmail():null);e&&(b+=c.transform("<email>${email}</email>",{email:e}));(a=a.userid||(this.getUserid?this.getUserid():null))&&(b+=c.transform('<snx:userid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${userid}</snx:userid>',{userid:a}));0<b.length&&(b=c.transform("<contributor>${contributor}</contributor>",{contributor:b}));return b}return""},createTags:function(){if(this.getTags&&
this.getTags()){var a="",b=this.getTags(),e;for(e in b)a+=c.transform('<category term="${tag}"></category>',{tag:b[e]});return a}return""},createEntryData:function(){return""},createNamespaces:function(){var a="",b=this.dataHandler?this.dataHandler.namespaces:this.namespaces;for(prefix in b)"a"!=prefix&&(a+=0<a.length?" ":"",a+="xmlns:"+prefix+'="'+b[prefix]+'"');return a}})})},"sbt/connections/FollowConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin(g,
{ActivitiesSource:"activities",ActivityResourceType:"activity",BlogsSource:"blogs",BlogResourceType:"blog",CommunitiesSource:"communities",CommunitiesResourceType:"community",FilesSource:"files",FileResourceType:"file",FileFolderResourceType:"file_folder",ForumsSource:"forums",ForumResourceType:"forum",ForumTopicResourceType:"forum_topic",ProfilesSource:"profiles",ProfilesResourceType:"profile",WikisSource:"wikis",WikiResourceType:"wiki",WikiPageResourceType:"wiki_page",TagsSource:"tags",TagResourceType:"tag",
FollowedResourceFeedXPath:g.ConnectionsFeedXPath,FollowedResourceXPath:h.mixin({},g.AtomEntryXPath,{followedResourceUuid:"a:id",categoryType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",source:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/source']/@term",resourceType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/resource-type']/@term",resourceId:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/resource-id']/@term",relatedUrl:"a:link[@rel='related']/@href"}),
OneFollowedResourceXPath:h.mixin({},g.AtomEntryXPath,{entry:"/a:feed/a:entry",followedResourceUuid:"a:id",categoryType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",source:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/source']/@term",resourceType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/resource-type']/@term",resourceId:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/resource-id']/@term",relatedUrl:"a:link[@rel='related']/@href"}),AtomFollowAPI:"/{service}/follow/atom/resources",
AtomStopFollowAPI:"/{service}/follow/atom/resources/{resourceId}"})})},"sbt/defer":function(){define([],function(){return{load:function(h,g,c){g([h],function(e){c(e)})}}})},"sbt/nls/Endpoint":function(){define({root:{cannot_find_endpoint:"Unable to find endpoint named {0}, creating it now with an error transport."}})},"sbt/nls/ErrorTransport":function(){define({root:{endpoint_not_available:"Required endpoint is not available: {0}"}})},"sbt/connections/ForumConstants":function(){define(["../lang",
"./ConnectionsConstants"],function(h,g){return h.mixin(g,{FlagAnswer:"recommendation",FlagAnswer:"answer",FlagPinned:"pinned",FlagLocked:"locked",FlagQuestion:"question",FlagAnswered:"answered",ForumsFeedXPath:g.ConnectionsFeedXPath,ForumXPath:h.mixin({forumUuid:"a:id",content:"a:content[@type='text']",tags:"a:category[not(@scheme)]/@term",moderation:"snx:moderation/@status",threadCount:"a:link[@rel='replies']/@thr:count",forumUrl:"a:link[@rel='alternate']/@href",communityUuid:"snx:communityUuid"},
g.AtomEntryXPath),ForumTopicXPath:h.mixin({topicUuid:"a:id",forumUuid:"thr:in-reply-to/@ref",tags:"a:category[not(@scheme)]/@term",permissions:"snx:permissions",communityUuid:"snx:communityUuid",threadCount:"a:link[@rel='replies']/@thr:count",locked:"a:category[@term='locked' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",pinned:"a:category[@term='pinned' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",question:"a:category[@term='question' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",
answered:"a:category[@term='answered' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",notRecommendedByCurrentUser:"a:category[@term='NotRecommendedByCurrentUser']",threadRecommendationCount:"a:category[@term='ThreadRecommendationCount']/@label",recommendationsUrl:"a:link[@rel='recommendations']/@href"},g.AtomEntryXPath),ForumReplyXPath:h.mixin({replyUuid:"a:id",topicUuid:"thr:in-reply-to/@ref",permissions:"snx:permissions",communityUuid:"snx:communityUuid",answer:"a:category[@term='answer' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",
replyTo:"thr:in-reply-to/@ref",notRecommendedByCurrentUser:"a:category[@term='NotRecommendedByCurrentUser']",recommendationsUrl:"a:link[@rel='recommendations']/@href"},g.AtomEntryXPath),ForumRecommendationXPath:h.mixin({postUuid:"a:link[@rel='self']/@href"},g.AtomEntryXPath),AtomForum:"${forums}/atom/forum",AtomTopic:"/${forums}/atom/topic",AtomReply:"/${forums}/atom/reply",AtomForums:"/${forums}/atom/forums",AtomForumsPublic:"/${forums}/atom/forums/public",AtomForumsMy:"/${forums}/atom/forums/my",
AtomTopics:"/${forums}/atom/topics",AtomTopicsMy:"/${forums}/atom/topics/my",AtomReplies:"/${forums}/atom/replies",AtomTagsForum:"/atom/tags/forums",AtomTagsTopics:"/atom/tags/topics",AtomRecommendationEntries:"/${forums}/atom/recommendation/entries"})})},"sbt/stringUtil":function(){define(["./xml"],function(h){var g=RegExp("{-?[0-9]+}","g");return{substitute:function(c,e,b){return c&&e?c.replace(g,function(a){a=parseInt(a.substring(1,a.length-1));return 0<=a?e[a]?e[a]:b?"":"undefined":-1==a?"{":
-2==a?"}":""}):c},replace:function(c,e){return c&&e?c.replace(/{(\w*)}/g,function(b,a){return e.hasOwnProperty(a)?h.encodeXmlEntry(e[a]):""}):c},trim:function(c){return c?c.replace(/^\s+|\s+$/g,""):c},startsWith:function(c,e){return c.length>=e.length&&c.substring(0,e.length)==e},endsWith:function(c,e){return c.length>=e.length&&c.substring(c.length-e.length)==e},transform:function(c,e,b,a){return c.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(i,c){var g=e[c]||"";if("function"==typeof g)try{g=
g.apply(a,[e])}catch(h){g="ERROR:"+c+" "+h}b&&(g=b.call(a,g,c));return"undefined"==typeof g||null==g?"":g.toString()})},hashCode:function(c){if(0==c.length)return 0;var e=0,b,a;for(b=0,l=c.length;b<l;b++)a=c.charCodeAt(b),e=(e<<5)-e+a,e|=0;return e}}})},"sbt/base/XmlDataHandler":function(){define("../declare,../lang,../stringUtil,../xml,../xpath,./DataHandler".split(","),function(h,g,c,e,b,a){return h(a,{dataType:"xml",xpath:null,namespaces:null,_values:null,_summary:null,constructor:function(a){g.mixin(this,
a);this._values={};this.data=this._fromNodeOrString(a.data)},setData:function(a){this._values={};this.data=this._fromNodeOrString(a)},getAsString:function(a){this._validateProperty(a,"getAsString");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectText(a)),this._values[a]):_selectText(a)},getAsNumber:function(a){this._validateProperty(a,"getAsNumber");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectNumber(a)),this._values[a]):this._selectNumber(a)},
getAsDate:function(a){this._validateProperty(a,"getAsDate");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectDate(a)),this._values[a]):this._selectDate(a)},getAsBoolean:function(a){this._validateProperty(a,"getAsBoolean");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectBoolean(a)),this._values[a]):this._selectBoolean(a)},getAsArray:function(a){this._validateProperty(a,"getAsArray");return this._values?(this._values.hasOwnProperty(a)||
(this._values[a]=this._selectArray(a)),this._values[a]):this._selectArray(a)},getAsNodesArray:function(a){this._validateProperty(a,"getNodesArray");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectNodesArray(a)),this._values[a]):this._selectNodesArray(a)},getEntityId:function(){return c.trim(this.getAsString("uid"))},getEntityData:function(a){var c=this.xpath.entry;if(!c)return a;this._values.entry||(this._values.entry=b.selectNodes(a,c,this.namespaces)[0]||null);
return this._values.entry},getSummary:function(){if(!this._summary&&this._getXPath("totalResults"))this._summary={totalResults:b.selectNumber(this.data,this._getXPath("totalResults"),this.namespaces),startIndex:b.selectNumber(this.data,this._getXPath("startIndex"),this.namespaces),itemsPerPage:b.selectNumber(this.data,this._getXPath("itemsPerPage"),this.namespaces)};return this._summary},getEntitiesDataArray:function(){var a=this.xpath.entries;if(!a)return this.data;this._values.entries||(this._values.entries=
b.selectNodes(this.data,a,this.namespaces));return this._values.entries},toJson:function(){var a={},b;for(b in this.xpath)this.xpath.hasOwnProperty(b)&&(a[b]=this.getAsString(b));return a},_fromNodeOrString:function(a){return g.isString(a)?(a=c.trim(a),this.getEntityData(e.parse(a))):a},_getXPath:function(a){return this.xpath[a]||a},_validateProperty:function(a,b){if(!a){var e=c.substitute("Invalid argument for XmlDataHandler.{1} {0}",[a,b]);throw Error(e);}},_selectText:function(a){return!this.data?
null:c.trim(b.selectText(this.data,this._getXPath(a),this.namespaces))},_selectNumber:function(a){return!this.data?null:b.selectNumber(this.data,this._getXPath(a),this.namespaces)},_selectDate:function(a){return!this.data?null:(a=this._selectText(a))?new Date(a):null},_selectBoolean:function(a){if(!this.data)return!1;var a=b.selectNodes(this.data,this._getXPath(a),this.namespaces),k=!1;if(a){if(1==a.length&&(k=c.trim(a[0].text||a[0].textContent))){k=k.toLowerCase();if("false"==k)return!1;if("true"==
k)return!0}k=0<a.length}return k},_selectArray:function(a){if(!this.data)return null;var a=b.selectNodes(this.data,this._getXPath(a),this.namespaces),k=null;if(a)for(var k=[],e=0;e<a.length;e++)k.push(c.trim(a[e].text||a[e].textContent));return k},_selectNodesArray:function(a){return!this.data?null:b.selectNodes(this.data,this._getXPath(a),this.namespaces)}})})},"sbt/base/BaseEntity":function(){define(["../declare","../lang","../log","../stringUtil"],function(h,g,c,e){return h(null,{id:null,service:null,
dataHandler:null,_fields:null,constructor:function(b){g.mixin(this,b);if(!this._fields)this._fields={};if(!this.service)throw Error("Invalid BaseEntity, an associated service must be specified.");},setDataHandler:function(b){this._fields={};this.dataHandler=b},setData:function(b){this._fields={};this.dataHandler.setData(b)},isLoaded:function(){return this.dataHandler?this.dataHandler.getData()?!0:!1:!1},getAsString:function(b){this._validateFieldName(b,"getAsString");return this._fields.hasOwnProperty(b)?
this._fields[b]:this.dataHandler?this.dataHandler.getAsString(b):null},getAsNumber:function(b){this._validateFieldName(b,"getAsNumber");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsNumber(b):null},getAsDate:function(b){this._validateFieldName(b,"getAsDate");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsDate(b):null},getAsBoolean:function(b){this._validateFieldName(b,"getAsBoolean");return this._fields.hasOwnProperty(b)?
this._fields[b]:this.dataHandler?this.dataHandler.getAsBoolean(b):!1},getAsArray:function(b){this._validateFieldName(b,"getAsArray");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsArray(b):null},getAsNodesArray:function(b){this._validateFieldName(b,"getAsNodesArray");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsNodesArray(b):null},getAsObject:function(b,a){for(var c={},k=0;k<b.length;k++){this._validateFieldName(b[k],
"getAsObject");var e=this.getAsString(b[k]);e&&(a?c[a[k]]=e:c[b[k]]=e)}return c},setAsString:function(b,a){this._validateFieldName(b,"setAsString",a);null===a||void 0===a?delete this._fields[b]:this._fields[b]=a.toString();return this},setAsNumber:function(b,a){this._validateFieldName(b,"setAsNumber",a);if(a instanceof Number)this._fields[b]=a;else if(a){var c=new Number(a);if(isNaN(c))throw c=e.substitute("Invalid argument for BaseService.setAsNumber {0},{1}",[b,a]),Error(c);this._fields[b]=c}else delete this._fields[b];
return this},setAsDate:function(b,a){this._validateFieldName(b,"setAsDate",a);if(a instanceof Date)this._fields[b]=a;else if(a){var c=new Date(a);if(isNaN(c.getDate()))throw c=e.substitute("Invalid argument for BaseService.setAsDate {0},{1}",[b,a]),Error(c);this._fields[b]=c}else delete this._fields[b];return this},setAsBoolean:function(b,a){this._validateFieldName(b,"setAsBoolean",a);null!=a?this._fields[b]=a?!0:!1:delete this._fields[b];return this},setAsArray:function(b,a){this._validateFieldName(b,
"setAsArray",a);g.isArray(a)?this._fields[b]=a.slice(0):g.isString(a)?this._fields[b]=0<a.length?a.split(/[ ,]+/):[]:a?this._fields[b]=[a]:delete this._fields[b];return this},setAsObject:function(b){for(var a in b)if(b.hasOwnProperty(a)){var c=b[a];c?this._fields[a]=c:delete this._fields[a]}},remove:function(b){delete this._fields[b]},toJson:function(){return this.dataHandler?this.dataHandler.toJson():{}},_validateFieldName:function(b,a,c){if(!b)throw b=e.substitute("Invalid argument for BaseService.{1} {0},{2}",
[b,a,c||""]),Error(b);}})})},"sbt/smartcloud/ProfileConstants":function(){define(["../lang"],function(h){return h.mixin({},{DefaultCacheSize:10,GetProfile:"/lotuslive-shindig-server/social/rest/people/@me/@self",GetMyConnections:"/lotuslive-shindig-server/social/rest/people/@me/@friends",GetUserIdentity:"/manage/oauth/getUserIdentity",GetContactByGUID:"/lotuslive-shindig-server/social/rest/people/lotuslive:contact:{idToBeReplaced}/@self",GetProfileByGUID:"/lotuslive-shindig-server/social/rest/people/lotuslive:user:{idToBeReplaced}/@self",
GetMyContacts:"/lotuslive-shindig-server/social/rest/people/@me/@all",ProfileJsonPath:{thumbnailUrl:"$..photo",address:"$..address",department:"$..name",jobTitle:"$..jobtitle",telephone:"$..telephone",about:"$..aboutMe",id:"$..id",objectId:"$..objectId",displayName:"$..displayName",emailAddress:"$..emailAddress",profileUrl:"$..profileUrl",country:"$..country",orgId:"$..orgId",org:"$..org.name",global:"$..",firstElement:"$[0]",totalResults:"totalResults",startIndex:"startIndex",itemsPerPage:"itemsPerPage"}})})},
"sbt/MockTransport":function(){define("./declare,./lang,./dom,./xml,./json,./stringUtil,./Promise".split(","),function(h,g,c,e,b,a,i){return h(null,{requestMap:{},request:function(k,e){var g=this.createQuery(e.query);k&&g&&(k+=(~k.indexOf("?")?"&":"?")+g);g=new i;g.response=new i;var h=k,n=a.hashCode(h);this.requestMap[n]?(this.requestMap[n]+=1,h+="#"+this.requestMap[n]):this.requestMap[n]=1;var p=c.byId(h);if(p){h=p.text||p.textContent;"json"==p.getAttribute("handleAs")&&(h=b.parse(h));var n=p.getAttribute("status"),
d=p.getAttribute("error");"true"==d?(d=Error(),d.code=Number(n||400),d.message=this.getErrorText(h),d.response=this.createResponse(k,e,h,Number(n||400),{}),g.rejected(d),g.response.rejected(d)):(d={Location:p.getAttribute("location")},g.fulfilled(h),g.response.fulfilled(this.createResponse(k,e,h,Number(n||200),d)))}else h="Unable to find mock response for: "+k,d=Error(h),d.response={status:400,message:h},g.rejected(d),g.response.rejected(d);return g},createResponse:function(a,b,c,i,e){return{url:a,
options:b,data:c,text:"text"==(b.handleAs||"text")?c:null,status:i,getHeader:function(a){return e[a]}}},createQuery:function(a){if(!a)return null;var b=[],c;for(c in a){var i=a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(i))}return b.join("&")},getErrorText:function(a){if(a){try{var b=e.parse(a).getElementsByTagName("message");b&&0!=b.length&&(a=b[0].text||b[0].textContent,a=g.trim(a))}catch(c){}return a.replace(/(\r\n|\n|\r)/g,"")}return a}})})},"sbt/lang":function(){define(["./_bridge/lang"],
function(h){return h})},"sbt/Endpoint":function(){define("./declare,./lang,./ErrorTransport,./Promise,./pathUtil,./compat,./log,./stringUtil,sbt/i18n!sbt/nls/Endpoint,./xml".split(","),function(h,g,c,e,b,a,i,k,m,q){return h(null,{baseUrl:null,proxy:null,proxyPath:null,transport:null,authenticator:null,authType:null,loginUi:"",loginPage:null,dialogLoginPage:null,autoAuthenticate:null,isAuthenticated:!1,authenticationErrorCode:null,constructor:function(a){g.mixin(this,a||{})},request:function(a,c){var i=
a;0!=i.indexOf("http")&&(i=this.proxy?this.proxy.rewriteUrl(this.baseUrl,a,this.proxyPath):b.concat(this.baseUrl,a));c||(c={method:"GET",handleAs:"text"});c.name=this.name;var d=new e;d.response=new e;var k=this;this.transport.request(i,c).response.then(function(b){"form"==k.authType&&k._isAuthRequiredFormBasedEP(b,c)&&k._authenticate(a,c,d);d.fulfilled(b.data);d.response.fulfilled(b)},function(b){if(!b.message)b.message=k.getErrorMessage(b.cause);k._isAuthRequired(b,c).then(function(i){i?k._authenticate(a,
c,d):(d.rejected(b),d.response.rejected(b))},function(a){d.rejected(a);d.response.rejected(a)})});return d},xhr:function(a,c,i){var d=this,e=g.mixin({},c);if(!e.url)e.url=this.proxy?this.proxy.rewriteUrl(this.baseUrl,e.serviceUrl,this.proxyPath):b.concat(this.baseUrl,e.serviceUrl);delete e.load;delete e.error;e.handle=function(b,k){if(b instanceof Error){if(!b.message)b.message=d.getErrorMessage(b.cause);var g=!1;403==b.code&&403==d.authenticationErrorCode&&d.isAuthenticated&&(g=!0);if(401==b.code||
!g&&b.code==d.authenticationErrorCode)if(g=e.autoAuthenticate||d.autoAuthenticate,void 0==g&&(g=!0),g&&d.authenticator&&(options={dialogLoginPage:d.loginDialogPage,loginPage:d.loginPage,transport:d.transport,proxy:d.proxy,proxyPath:d.proxyPath,loginUi:e.loginUi||d.loginUi,name:d.name,callback:function(){d.xhr(a,c,i)}},d.authenticator.authenticate(options)))return;d._notifyError(c,b,k)}else d._notifyResponse(c,b,k)};this.transport.xhr(a,e,i)},xhrGet:function(a){this.xhr("GET",a)},xhrPost:function(a){this.xhr("POST",
a,!0)},xhrPut:function(a){this.xhr("PUT",a,!0)},xhrDelete:function(a){this.xhr("DELETE",a)},authenticate:function(a){var b=new e,a=a||{};a.forceAuthentication||!this.isAuthenticated?this.authenticator.authenticate({dialogLoginPage:this.loginDialogPage,loginPage:this.loginPage,transport:this.transport,proxy:this.proxy,proxyPath:this.proxyPath,loginUi:a.loginUi||this.loginUi,name:this.name,callback:function(a){b.fulfilled(a)},cancel:function(a){b.rejected(a)}}):b.fulfilled(!0);return b},logout:function(){var a=
new e,b=this,c=this.proxy.proxyUrl;this.transport.xhr("POST",{handleAs:"json",url:c.substring(0,c.lastIndexOf("/"))+"/authHandler/"+this.proxyPath+"/logout",load:function(d){b.isAuthenticated=!1;a.fulfilled(d)},error:function(d){b.isAuthenticated=!1;a.rejected(d)}},!0);return a},isAuthenticated:function(){var a=new e,b=this,c=this.proxy.proxyUrl;this.transport.xhr("POST",{handleAs:"json",url:c.substring(0,c.lastIndexOf("/"))+"/authHandler/"+this.proxyPath+"/isAuth",load:function(d){b.isAuthenticated=
!0;a.fulfilled(d)},error:function(b){a.rejected(b)}},!0);return a},isAuthenticationValid:function(){var a=new e,b=this,c=this.proxy.proxyUrl;this.transport.xhr("POST",{handleAs:"json",url:c.substring(0,c.lastIndexOf("/"))+"/authHandler/"+this.proxyPath+"/isAuthValid",load:function(d){b.isAuthenticated=d.result;a.fulfilled(d)},error:function(b){a.rejected(b)}},!0);return a},_notifyError:function(a,b,c){if(a.handle)try{a.handle(b,c)}catch(d){}if(a.error)try{a.error(b,c)}catch(i){}},_notifyResponse:function(a,
b,c){if(a.handle)try{a.handle(b,c)}catch(d){}if(a.load)try{a.load(b,c)}catch(i){}},_authenticate:function(a,b,c){var d=this;return this.authenticator.authenticate({dialogLoginPage:this.loginDialogPage,loginPage:this.loginPage,transport:this.transport,proxy:this.proxy,proxyPath:this.proxyPath,loginUi:b.loginUi||this.loginUi,name:this.name,callback:function(){d.request(a,b).response.then(function(a){c.fulfilled(a.data);c.response.fulfilled(a)},function(a){c.rejected(a);c.response.rejected(a)})},cancel:function(){d._authRejected=
!0;var a=Error();a.message="Authentication is required and has failed or has not yet been provided.";a.code=401;c.rejected(a);c.response.rejected(a)}})},_isAuthRequired:function(a,b){var c=new e,d=a.response.status||null,d=401==d||d==this.authenticationErrorCode;if(this.isAuthenticated)d?this.isAuthenticationValid().then(function(a){c.fulfilled(!a.result)},function(a){c.rejected(a)}):c.fulfilled(!1);else{var i=b.autoAuthenticate||this.autoAuthenticate;void 0==i&&(i=!0);c.fulfilled(d&&i&&this.authenticator&&
!this._authRejected)}return c},_isAuthRequiredFormBasedEP:function(a){return 200==a.status&&"text/html"==a.getHeader("Content-Type")?!0:!1},getErrorMessage:function(a){var b=a.responseText||a.response&&a.response.text;if(b){try{var c=q.parse(b).getElementsByTagName("message");c&&0!=c.length&&(b=c[0].text||c[0].textContent,b=g.trim(b))}catch(d){}return b.replace(/(\r\n|\n|\r)/g,"")?b:a.message}return a}})})},"sbt/Portlet":function(){define([],function(){sbt.getUserPref=function(){}})},"sbt/connections/CommunityService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./CommunityConstants,../base/BaseService,../base/AtomEntity,../base/XmlDataHandler,./ForumService,../pathUtil".split(","),
function(h,g,c,e,b,a,i,k,m,q){var o=h(m,{getEntityId:function(){var a=e.trim(this.getAsString("uid"));return s(this.service,a)}}),n=h(k,{xpath:a.CommunityXPath,namespaces:a.CommunityNamespaces,categoryScheme:'<category term="community" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',constructor:function(){},createDataHandler:function(a,b,d,f,c){return new o({service:a,data:b,namespaces:f,xpath:c})},createEntryData:function(){var a,b=function(a){return a};a=""+e.transform("<snx:communityType>${getCommunityType}</snx:communityType>",
this,b,this);a+=e.transform("<snx:isExternal>${isExternal}</snx:isExternal>",this,b,this);this.getCommunityUuid()&&(a+=e.transform('<snx:communityUuid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${getCommunityUuid}</snx:communityUuid>',this,b,this));this.getCommunityTheme()&&(a+=e.transform('<snx:communityTheme xmlns:snx="http://www.ibm.com/xmlns/prod/sn" snx:uuid="default">${getCommunityTheme}</snx:communityTheme>',this,b,this));return e.trim(a)},getCommunityUuid:function(){var a=this.getAsString("communityUuid");
return s(this.service,a)},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getCommunityType:function(){var b=this.getAsString("communityType");if(!b)b=a.Restricted;return b},setCommunityType:function(a){return this.setAsString("communityType",a)},getCommunityTheme:function(){return this.getAsString("communityTheme")},setCommunityTheme:function(a){return this.setAsString("communityTheme",a)},isExternal:function(){return this.getAsBoolean("isExternal")},setExternal:function(a){return this.setAsBoolean("isExternal",
a)},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getCommunityUrl:function(){return this.getAlternateUrl()},getLogoUrl:function(){return this.getAsString("logoUrl")},getMemberCount:function(){return this.getAsNumber("memberCount")},getForumTopics:function(a){return this.service.getForumTopics(this.getCommunityUuid(),a)},createForumTopic:function(a,b,d){return this.service.createForumTopic(this.getCommunityUuid(),b,d)},getSubCommunities:function(a){return this.service.getSubCommunities(this.getCommunityUuid(),
a)},getMembers:function(a){return this.service.getMembers(this.getCommunityUuid(),a)},addMember:function(a,b){return this.service.addMember(this.getCommunityUuid(),a,b)},removeMember:function(a,b){return this.service.removeMember(this.getCommunityUuid(),a,b)},getMember:function(a,b){return this.service.getMember(this.getCommunityUuid(),a,b)},getAllInvites:function(a){return this.service.getAllInvites(this.getCommunityUuid(),a)},getForums:function(a){var b=this.service.getForumService(),a=c.mixin(a||
{},{communityUuid:this.getCommunityUuid()});return b.getForums(a)},load:function(b){var d=this.getCommunityUuid(),f=this.service._validateCommunityUuid(d);if(f)return f;var j=this,b={handleAs:"text",query:c.mixin({communityUuid:d},b||{})};return this.service.getEntity(a.AtomCommunityInstance,b,d,{createEntity:function(a,b,d){j.setData(b,d);return j}})},remove:function(a){return this.service.deleteCommunity(this.getCommunityUuid(),a)},update:function(a){return this.service.updateCommunity(this,a)},
save:function(a){return this.getCommunityUuid()?this.service.updateCommunity(this,a):this.service.createCommunity(this,a)}}),p=h(k,{xpath:a.MemberXPath,namespaces:a.CommunityNamespaces,categoryScheme:'<category term="person" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',communityUuid:null,constructor:function(){this.getRole()||this.setRole(a.Member)},createEntryData:function(){var a;a=""+e.transform('<snx:role xmlns:snx="http://www.ibm.com/xmlns/prod/sn" component="http://www.ibm.com/xmlns/prod/sn/communities">${getRole}</snx:role>',
this,function(a){return a},this);return e.trim(a)},getCommunityUuid:function(){return this.communityUuid},getName:function(){return this.getAsString("contributorName")},setName:function(a){return this.setAsString("contributorName",a)},getUserid:function(){return this.getAsString("contributorUserid")},setUserid:function(a){return this.setAsString("contributorUserid",a)},getEmail:function(){return this.getAsString("contributorEmail")},setEmail:function(a){return this.setAsString("contributorEmail",
a)},getRole:function(){return this.getAsString("role")},setRole:function(a){return this.setAsString("role",a)},load:function(b){var d=this.communityUuid,f=this.service._validateCommunityUuid(d);if(f)return f;var j=this,d={communityUuid:d},f=null,f=this.getUserid()?d.userid=this.getUserid():d.email=this.getEmail(),d=c.mixin(d,b||{});return this.service.getEntity(a.AtomCommunityMembers,{handleAs:"text",query:d},f,{createEntity:function(a,b,d){j.setData(b,d);return j}})},remove:function(a){var b=this.getUserid()||
this.getEmail();return this.service.removeMember(this.getCommunityUuid(),b,a)}}),d=h(k,{xpath:a.InviteXPath,namespaces:a.CommunityNamespaces,categoryScheme:'<category term="invite" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',communityUuid:null,inviteeUuid:null,constructor:function(a){this.inherited(arguments,[a])},getInviteUuid:function(){var a=this.getAsString("inviteUuid");return a&&0==a.indexOf("urn:lsid:ibm.com:communities:invite-")?a.substring(36):a},setInviteUuid:function(a){return this.setAsString("inviteUuid",
a)},setCommunityUuid:function(a){this.communityUuid=a;return this},getCommunityUuid:function(){if(!this.communityUuid)this.communityUuid=this.service.getUrlParameter(this.getAsString("communityUrl"),"communityUuid");return this.communityUuid},setInviteeUuid:function(a){this.inviteeUuid=a;return this},getInviteeUuid:function(){if(!this.inviteeUuid){var a=this.getInviteUuid(),b=this.getCommunityUuid();this.inviteeUuid=a&&0==a.indexOf(b)?a.substring(b.length+1):a}return this.inviteeUuid},setUserid:function(a){return this.setAsString("contributorUserid",
a)},getUserid:function(){return this.getAsString("contributorUserid")},setEmail:function(a){return this.setAsString("contributorEmail",a)},getEmail:function(){return this.getAsString("contributorEmail")},load:function(b){var d=this.getCommunityUuid(),f=this.service._validateCommunityUuid(d);if(f)return f;var j=this.getInviteeUuid();if(f=this.service._validateUserid(j))return f;var i=this,b={handleAs:"text",query:c.mixin({communityUuid:d,userid:j},b||{})};return this.service.getEntity(a.AtomCommunityInvites,
b,d+"-"+j,{createEntity:function(a,b,d){i.setData(b,d);return i}})},remove:function(a){return this.service.removeInvite(this,a)},update:function(a){return this.service.updateInvite(this,a)},save:function(a){return this.getInviteUuid()?this.service.updateInvite(this,a):this.service.createInvite(this,a)}}),r=h(k,{constructor:function(){},getEventUuid:function(){return this.getAsString("eventUuid")},getLocation:function(){return this.getAsString("location")},getAllDay:function(){return 0!==this.getAsString("allDay")},
getSelfLink:function(){return this.getAsString("selfLink")},getSource:function(){return this.getAsObject(["id","title","link"],["id","title","link"])},getRecurrence:function(){return this.getAsObject("frequency,interval,until,allDay,startDate,endDate,byDay".split(","),"frequency,interval,until,allDay,startDate,endDate,byDay".split(","))},getCommunityLink:function(){this.getAsString("communityLink")},getCommunityUuid:function(){return this.getAsString("communityUuid")}}),f=h(r,{constructor:function(){},
getEventInstUuid:function(){return this.getAsString("eventInstUuid")},getFollowed:function(){return this.getAsString("followed")},getAttended:function(){return this.getAsString("attended")},getParentEventId:function(){return this.getAsString("parentEventId")},getParentEventLink:function(){return this.getAsString("parentEventLink")},getStartDate:function(){return this.getAsString("instStartDate")},getEndDate:function(){return this.getAsString("instEndDate")}}),s=function(a,b){return b&&0==b.indexOf("http")?
a.getUrlParameter(b,"communityUuid"):b},t={createEntities:function(b,d){return new o({service:b,data:d,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(a,b,d){return new n({service:a,data:b,response:d})}},j={createEntities:function(b,d){return new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})}},v={createEntities:function(b,d){return new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(a,b,f){return new d({service:a,
data:b,response:f})}},w={createEntities:function(b,d){return new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(b,d){var f=new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.EventXPath});return new r({service:b,id:f.getEntityId(),dataHandler:f})}},y={createEntities:function(b,d){return new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(b,d){var c=new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.EventXPath});
return new f({service:b,id:c.getEntityId(),dataHandler:c})}},z={createEntity:function(b,d){var c=new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.EventXPath});return new f({service:b,id:c.getEntityId(),dataHandler:c})}},A={createEntities:function(b,d){return new m({service:b,data:d,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(a,b,d){a=a.getForumService().newForumTopic({});a.setData(b,d);return a}};return h(i,{forumService:null,contextRootMap:{communities:"communities"},
constructor:function(){if(!this.endpoint)this.endpoint=g.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getForumService:function(){if(!this.forumService)this.forumService=new q,this.forumService.endpoint=this.endpoint;return this.forumService},getPublicCommunities:function(b){return this.getEntities(a.AtomCommunitiesAll,{method:"GET",handleAs:"text",query:b||{}},t)},getMyCommunities:function(b){return this.getEntities(a.AtomCommunitiesMy,{method:"GET",
handleAs:"text",query:b||{}},t)},getMembers:function(b,d){var f=this._validateCommunityUuid(b);if(f)return f;var f={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},d||{})},i=c.mixin({createEntity:function(a,d,f){return new p({service:a,communityUuid:b,data:d,response:f})}},j);return this.getEntities(a.AtomCommunityMembers,f,i)},getMember:function(a,b,d){a=new p({service:this,communityUuid:a});this.isEmail(b)?a.setEmail(b):a.setUserid(b);return a.load(d)},getEventInsts:function(b){var d=
this._validateEventUuid(b);return d?d:this.getEntities(a.AtomCommunityEvents,{method:"GET",handleAs:"text",query:{eventUuid:b,mode:"list"}},y)},_getCommunityEvents:function(b,d,f,j,i){var e=this._validateCommunityUuid(b)||this._validateDateTimes(d,f);if(e)return e;b={calendarUuid:b};d&&c.mixin(b,{startDate:d});f&&c.mixin(b,{endDate:f});j=c.mixin(j,b);return this.getEntities(a.AtomCommunityEvents,{method:"GET",handleAs:"text",query:j||{}},i)},getCommunityEventInsts:function(a,b,d,f){return this._getCommunityEvents(a,
b,d,f,y)},getCommunityEvents:function(a,b,d,f){return this._getCommunityEvents(a,b,d,c.mixin(f,{type:"event"}),w)},getEventInst:function(b){return this.getEntity(a.AtomCommunityEvents,{method:"GET",handleAs:"text",query:{eventInstUuid:b}},b,z)},getMyInvites:function(b){return this.getEntities(a.AtomCommunityInvitesMy,{method:"GET",handleAs:"text",query:b||{}},v)},getAllInvites:function(b,d){var f=this._validateCommunityUuid(b);if(f)return f;f={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},
d||{})};return this.getEntities(a.AtomCommunityInvites,f,v)},getSubCommunities:function(b,d){var f=this._validateCommunityUuid(b);if(f)return f;f={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},d||{})};return this.getEntities(a.AtomCommunitySubCommunities,f,t)},getForumTopics:function(b,d){var f=this._validateCommunityUuid(b);if(f)return f;f={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},d||{})};return this.getEntities(a.AtomCommunityForumTopics,f,A)},newCommunity:function(a){return this._toCommunity(a)},
newMember:function(a){return this._toMember(a)},newInvite:function(a,b){return this._toInvite(a,b)},getCommunity:function(a,b){return(new n({service:this,_fields:{communityUuid:a}})).load(b)},createCommunity:function(b,d){var f=this._toCommunity(b),c=this._validateCommunity(f,!1,d);if(c)return c;c={method:"POST",query:d||{},headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(a.AtomCommunitiesMy,c,{createEntity:function(a,b,d){a=this.getLocationParameter(d,"communityUuid");f.setCommunityUuid(a);
return f}},d)},updateCommunity:function(b,d){var f=this._toCommunity(b),j=this._validateCommunity(f,!0,d);if(j)return j;j={method:"PUT",query:c.mixin({communityUuid:f.getCommunityUuid()},d||{}),headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(a.AtomCommunityInstance,j,{createEntity:function(a,b,d){a=f.getCommunityUuid();b&&f.setData(b,d);f.setCommunityUuid(a);return f}},d)},deleteCommunity:function(b,d){var f=this._validateCommunityUuid(b);if(f)return f;f={method:"DELETE",
query:c.mixin({communityUuid:b},d||{}),handleAs:"text"};return this.deleteEntity(a.AtomCommunityInstance,f,b)},addMember:function(b,d,f){var j=this._validateCommunityUuid(b);if(j)return j;var i=this._toMember(d);if(j=this._validateMember(i))return j;d={method:"POST",query:c.mixin({communityUuid:b},f||{}),headers:a.AtomXmlHeaders,data:i.createPostData()};return this.updateEntity(a.AtomCommunityMembers,d,{createEntity:function(a,d,f){a=this.getLocationParameter(f,"userid");i.setUserid(a);i.communityUuid=
b;return i}},f)},updateMember:function(b,d,f){var j=this.validateField("communityUuid",b);if(j)return j;d=this._toMember(d);if(j=this._validateMember(d,!0,!0))return j;var b={communityUuid:b},j=d.getEmail()?"email":"userid",i=d.getEmail()?d.getEmail():d.getUserid();b[j]=i;b=c.mixin(b,f||{});f={method:"PUT",headers:a.AtomXmlHeaders,query:b,data:d.createPostData()};return this.updateEntity(a.AtomCommunityMembers,f,{createEntity:function(a,b,d){return d}})},removeMember:function(b,d,f){var j=this._validateCommunityUuid(b);
if(j)return j;d=this._toMember(d);if(j=this._validateMember(d))return j;b={communityUuid:b};j=d.getEmail()?"email":"userid";d=d.getEmail()?d.getEmail():d.getUserid();b[j]=d;b=c.mixin(b,f||{});return this.deleteEntity(a.AtomCommunityMembers,{method:"DELETE",query:b,handleAs:"text"},d)},getInvite:function(a,b){return(new d({service:this,_fields:{communityUuid:a,userid:b}})).load()},createInvite:function(b,d){var f=this._toInvite(b),j=this._validateInvite(f,!0);if(j)return j;j={method:"POST",query:c.mixin({communityUuid:f.getCommunityUuid()},
d||{}),headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(a.AtomCommunityInvites,j,{createEntity:function(a,b,d){f.setData(b,d);return f}},d)},removeInvite:function(b,d){var f=this._toInvite(b),j=this._validateInvite(f,!0);if(j)return j;j={method:"DELETE",query:c.mixin({communityUuid:f.getCommunityUuid(),userid:f.getInviteeUuid()},d||{}),handleAs:"text"};f=f.getCommunityUuid()+"-"+f.getInviteeUuid();return this.deleteEntity(a.AtomCommunityInvites,j,f)},acceptInvite:function(b,
d){var f=this._toInvite(b),j=this._validateInvite(f,!0);if(j)return j;j={method:"POST",query:c.mixin({communityUuid:f.getCommunityUuid()},d||{}),headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(a.AtomCommunityMembers,j,{createEntity:function(a,b,d){f.setData(b,d);return f}},d)},createForumTopic:function(b,d,f){var j=this._validateCommunityUuid(b);if(j)return j;var j=this.getForumService(),i=j.newForumTopic(d);if(j=j._validateForumTopic(i,!1,f))return j;b={method:"POST",query:c.mixin({communityUuid:b},
f||{}),headers:a.AtomXmlHeaders,data:i.createPostData()};return this.updateEntity(a.AtomCommunityForumTopics,b,{createEntity:function(a,b,d){a=this.getLocationParameter(d,"topicUuid");i.setTopicUuid(a);i.setData(b,d);return i}},f)},updateCommunityLogo:function(b,d){var f=this.validateField("File Control Or Id",b);if(f||(f=this.validateHTML5FileSupport()))return f;if(f=this.validateField("CommunityUuid",d))return f;f=null;f=this.getFileControl(b);if(!f)return this.createBadRequestPromise("File Control or ID is required");
filePath=f.value;f=f.files;if(1!=f.length)return this.createBadRequestPromise("Only one file needs to be provided to this API");var c=f[0],f=new FormData;f.append("file",c);var j={communityUuid:d},c=this.constructUrl(a.AtomUpdateCommunityLogo,null,{endpointName:this.endpoint.proxyPath,fileName:encodeURIComponent(c.name)});if(this.endpoint.proxy)c=g.Properties.serviceUrl+c;else return this.createBadRequestPromise("File Proxy is required to run this API");return this.updateEntity(c,{method:"PUT",headers:{"Content-Type":!1,
"Process-Data":!1},query:j,data:f},{createEntity:function(a,b){return b}})},_toCommunity:function(a){if(a instanceof n)return a;c.isString(a)&&(a={communityUuid:a});return new n({service:this,_fields:c.mixin({},a)})},_toInvite:function(a){if(a instanceof d)return a;c.isString(a)&&(a={communityUuid:a});return new d({service:this,_fields:c.mixin({},a)})},_toCommunityUuid:function(a){var b=null;a&&(c.isString(a)?b=a:a instanceof n&&(b=a.getCommunityUuid()));return b},_toMember:function(a){if(a){if(a instanceof
p)return a;var b=new p({service:this});if(c.isString(a))this.isEmail(a)?b.setEmail(a):b.setUserid(a);else{if(a.id&&!a.userid&&!a.email)this.isEmail(a.id)?a.email=a.id:a.userid=a.id,delete a.id;b._fields=c.mixin({},a)}return b}},_validateCommunityUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateUserid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userid.")},_validateDateTimes:function(a,
b){if((!a||0===a.length)&&(!b||0===b.length))return this.createBadRequestPromise("Invalid date arguments, expected either a startDate, endDate or both as parameters.")},_validateContributorId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected contributorId.")},_validateCommunity:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, community with title must be specified.");if(b&&!a.getCommunityUuid())return this.createBadRequestPromise("Invalid argument, community with UUID must be specified.")},
_validateInvite:function(a,b){if(!a||!a.getEmail()&&!a.getUserid()&&!a.getInviteeUuid())return this.createBadRequestPromise("Invalid argument, invite with email or userid or invitee must be specified.");if(b&&!a.getCommunityUuid())return this.createBadRequestPromise("Invalid argument, invite with community UUID must be specified.")},_validateMember:function(a){if(!a||!a.getUserid()&&!a.getEmail())return this.createBadRequestPromise("Invalid argument, member with userid or email must be specified.")},
_validateEventInstUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected event inst uuid.")},_validateEventUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected eventUuid.")}})})},"sbt/smartcloud/Subscriber":function(){define(["../declare","../Endpoint"],function(h){return h(null,{endpoint:null,constructor:function(g,c){this.endpoint=g;c&&this.load(c)},load:function(g){var c=this;this.endpoint.xhrGet({serviceUrl:"/manage/oauth/getUserIdentity",
loginUi:this.endpoint.loginUi,handleAs:"json",load:function(e){g(c,e)},error:function(){g(c,null);console.log("Error fetching feed for getUserIdentity")}})},getSubscriberId:function(g){return g&&g.subscriberid?g.subscriberid:null}})})},"sbt/connections/WikiConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){var c=h.mixin({uuid:"td:uuid",label:"td:label",permissions:"td:permissions",tags:"a:category[not(@scheme)]/@term",modifierName:"td:modifier/a:name",modifierEmail:"td:modifier/a:email",
modifierUserid:"td:modifier/snx:userid",modifierUserState:"td:modifier/snx:userState",created:"td:created",modified:"td:modified",member:"ca:member",memberId:"ca:member/@ca:id",memberType:"ca:member/@ca:type",memberRole:"ca:member/@ca:role"},g.AtomEntryXPath);return h.mixin(g,{WikiFeedXPath:g.ConnectionsFeedXPath,WikiXPath:h.mixin({communityUuid:"snx:communityUuid",themeName:"td:themeName",librarySize:"td:librarySize",libraryQuota:"td:libraryQuota",totalRemovedSize:"td:totalRemovedSize"},c,g.AtomEntryXPath),
WikiPageXPath:h.mixin({lastAccessed:"td:lastAccessed",versionUuid:"td:versionUuid",versionLabel:"td:versionLabel",propagation:"td:propagation",totalMediaSize:"td:totalMediaSize",recommendations:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",comment:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",hit:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/hit']",anonymous_hit:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/anonymous_hit']",share:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/share']",
collections:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/collections']",attachments:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/attachments']",versions:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/versions']"},c,g.AtomEntryXPath),WikisAll:"/{wikis}/{authType}/api/wikis/feed",WikisPublic:"/{wikis}/{authType}/api/wikis/public",WikisMy:"/{wikis}/{authType}/api/mywikis/feed",WikisMostCommented:"/{wikis}/{authType}/anonymous/api/wikis/mostcommented",WikisMostRecommended:"/{wikis}/{authType}/api/wikis/mostrecommended",
WikisMostVisited:"/{wikis}/{authType}/api/wikis/mostvisited",WikiPages:"/{wikis}/{authType}/anonymous/api/wiki/{wikiLabel}/feed",WikiMyPages:"/{wikis}/{authType}/api/wiki/{wikiLabel}/mypages",WikiRecycleBin:"/{wikis}/{authType}/anonymous/api/wiki/{wikiLabelOrId}/recyclebin/feed",WikiEntry:"/{wikis}/{authType}/api/wiki/{wikiLabel}/entry",WikiPageEntry:"/{wikis}/{authType}/api/wiki/{wikiLabel}/page/{pageLabel}/entry",WikiFeed:"/{wikis}/{authType}/api/wiki/{wikiLabel}/feed"})})},"sbt/_bridge/text":function(){define(["dojo/text"],
function(h){return{load:function(g,c,e){h.load(g,c,e)}}})},"sbt/_bridge/Transport":function(){define("dojo/_base/declare,dojo/_base/xhr,dojo/_base/lang,dojox/xml/parser,../util,../Promise".split(","),function(h,g,c,e,b,a){return h(null,{request:function(b,c){var e=c.method||"GET",e=e.toUpperCase(),g=this.createQuery(c.query),h=b;h&&g&&(h+=(~h.indexOf("?")?"&":"?")+g);g={url:h,handleAs:c.handleAs||"text"};if(c.headers)g.headers=c.headers;h=!1;if("PUT"==e)g.putData=c.data||null,h=!0;else if("POST"==
e)g.postData=c.data||null,h=!0;else if("GET"==e)g.preventCache=!0;var n=new a;n.response=new a;var p=this;g.handle=function(a,e){a instanceof Error?(a.response=p.createResponse(b,c,a,e),n.rejected(a),n.response.rejected(a)):(n.fulfilled(a),n.response.fulfilled(p.createResponse(b,c,a,e)))};this.xhr(e,g,h);return n},createResponse:function(a,b,c,e){var g=e._ioargs.xhr;return{url:a,options:b,data:c,text:"text"==(b.handleAs||"text")?c:null,status:g.status,getHeader:function(a){return g.getResponseHeader(a)},
xhr:g,_ioargs:e._ioargs}},createQuery:function(a){if(!a)return null;var b=[],e;for(e in a){var g=a[e];if(c.isArray(g)){e=encodeURIComponent(e);for(var h=0;h<g.length;h++)b.push(e+"="+encodeURIComponent(g[h]))}else b.push(encodeURIComponent(e)+"="+encodeURIComponent(g))}return b.join("&")},xhr:function(a,b,e){var h=c.mixin({},b),o=this;h.handle=function(a,c){o.handleResponse(a,c,b)};g(a,h,e)},handleResponse:function(a,c,e){var g=a;a instanceof Error&&(g=this.createError(a,c));try{var h={args:e,headers:b.getAllResponseHeaders(c.xhr),
_ioargs:c};e.handle(g,h)}catch(n){console.log(n)}},createError:function(a){var b=Error();b.code=a.status||a.response&&a.response.status||400;b.cause=a;if(a.response)b.response=c.mixin({},a.response);return b}})})},"sbt/connections/WikiService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./WikiConstants,../base/BaseService,../base/AtomEntity,../base/XmlDataHandler".split(","),function(h,g,c,e,b,a,i,k,m){var b=h(k,{includeLabelInPost:!1,constructor:function(){},createEntryData:function(){var a=
"",b=function(a){return a};this.getLabel()&&this.includeLabelInPost&&(a+=e.transform("<td:label>${getLabel}</td:label>",this,b,this));this.getPermissions()&&(a+=e.transform("<td:permissions>${getPermissions}</td:permissions>",this,b,this));return e.trim(a)},getTags:function(){this.getAsArray("tags");return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getUuid:function(){var a=this.getAsString("uuid");return a&&0==a.indexOf("urn:lsid:ibm.com:td:")?a.substring(20):a},
setUuid:function(a){return this.setAsString("uuid",a)},getLabel:function(){return this.getAsString("label")},setLabel:function(a){return this.setAsString("label",a)},getPermissions:function(){return this.getAsString("permissions")},setPermissions:function(a){return this.setAsString("permissions",a)},getModifier:function(){return this.getAsObject(["modifierUserid","modifierName","modifierEmail","modifierUserState"],["userid","name","email","userState"])},getCreated:function(){return this.getAsDate("created")},
getModified:function(){return this.getAsDate("modified")}}),q=h(b,{xpath:a.WikiXPath,contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="wiki" label="wiki"></category>',constructor:function(){},getCommunityUuid:function(){return this.getAsString("communityUuid")},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getThemeName:function(){return this.getAsString("themeName")},getLibrarySize:function(){return this.getAsNumber("librarySize")},
getLibraryQuota:function(){return this.getAsNumber("libraryQuota")},getTotalRemovedSize:function(){return this.getAsNumber("totalRemovedSize")},getPages:function(a){return this.service.getWikiPages(this.getLabel(),a)},load:function(b){var c=this.getLabel(),f=this.service._validateWikiLabel(c);if(f)return f;var i=this,b={method:"GET",handleAs:"text",query:b||{}};return this.service.getEntity(this.service.constructUrl(a.WikiEntry,null,{wikiLabel:encodeURIComponent(c)}),b,c,{createEntity:function(a,
b){i.setData(b);return i}})},remove:function(a){return this.service.deleteWiki(this.getLabel(),a)},update:function(a){return this.service.updateWiki(this,a)},save:function(a){return this.getWikiUuid()?this.service.updateWiki(this,a):this.service.createWiki(this,a)}}),o=h(b,{xpath:a.WikiPageXPath,contentType:"html",categoryScheme:'<category term="page" scheme="tag:ibm.com,2006:td/type" label="page"/>',wikiLabel:null,constructor:function(){},getWikiLabel:function(){return this.wikiLabel?this.wikiLabel:
this.getAsString("label")},setWikiLabel:function(a){this.wikiLabel=a;return this},getLastAccessed:function(){return this.getAsDate("lastAccessed")},getVersionUuid:function(){return this.getAsString("versionUuid")},getVersionLabel:function(){return this.getAsString("versionLabel")},getPropagation:function(){return this.getAsBoolean("propagation")},getTotalMediaSize:function(){return this.getAsNumber("totalMediaSize")},getRecommendations:function(){return this.getAsNumber("recommendations")},getComments:function(){return this.getAsNumber("comment")},
getHits:function(){return this.getAsNumber("hit")},getAnonymousHits:function(){return this.getAsNumber("anonymous_hit")},getShare:function(){return this.getAsNumber("share")},getCollections:function(){return this.getAsNumber("collections")},getAttachments:function(){return this.getAsNumber("attachments")},getVersions:function(){return this.getAsNumber("versions")},load:function(b){var c=this.getLabel(),f=this.service._validatePageLabel(c);if(f)return f;var i=this.getWikiLabel();if(f=this.service._validateWikiLabel(i))return f;
var e=this,b={method:"GET",handleAs:"text",query:b||{}},i={pageLabel:encodeURIComponent(c),wikiLabel:encodeURIComponent(i)};return this.service.getEntity(this.service.constructUrl(a.WikiPageEntry,null,i),b,c,{createEntity:function(a,b){e.setData(b);return e}})},remove:function(a){return this.service.deleteWikiPage(this.getLabel(),a)},update:function(a){return this.service.updateWikiPage(this,a)},save:function(a){return this.getWikiUuid()?this.service.updateWikiPage(this,a):this.service.createWikiPage(this,
a)}}),n={createEntities:function(b,c){return new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.WikiFeedXPath})},createEntity:function(a,b){return new q({service:a,data:b})}},p={createEntities:function(b,c){return new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.WikiFeedXPath})}};return h(i,{contextRootMap:{wikis:"wikis"},constructor:function(){if(!this.endpoint)this.endpoint=g.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},newWiki:function(a){return this._toWiki(a)},
newWikiPage:function(a){return this._toWikiPage(a)},getAllWikis:function(b){return this.getEntities(a.WikisAll,{method:"GET",handleAs:"text",query:b||{}},n)},getPublicWikis:function(b){return this.getEntities(a.WikisPublic,{method:"GET",handleAs:"text",query:b||{}},n)},getMyWikis:function(b){return this.getEntities(a.WikisMy,{method:"GET",handleAs:"text",query:b||{}},n)},getMostCommentedWikis:function(b){return this.getEntities(a.WikisMostCommented,{method:"GET",handleAs:"text",query:b||{}},n)},getMostRecommendedWikis:function(b){return this.getEntities(a.WikisMostRecommended,
{method:"GET",handleAs:"text",query:b||{}},n)},getMostVisitedWikis:function(b){return this.getEntities(a.WikisMostVisited,{method:"GET",handleAs:"text",query:b||{}},n)},getWikiPages:function(b,i){var f=this._validateWikiLabel(b);if(f)return f;var f={method:"GET",handleAs:"text",query:i||{}},e=c.mixin(p,{createEntity:function(a,f){return new o({service:a,wikiLabel:b,data:f})}});return this.getEntities(this.constructUrl(a.WikiRecycleBin,null,{wikiLabel:encodeURIComponent(b)}),f,e)},getMyWikiPages:function(b,
i){var f=this._validateWikiLabel(b);if(f)return f;var f={method:"GET",handleAs:"text",query:i||{}},e=c.mixin(p,{createEntity:function(a,f){return new o({service:a,wikiLabel:b,data:f})}});return this.getEntities(this.constructUrl(a.WikiMyPages,null,{wikiLabel:encodeURIComponent(b)}),f,e)},getRecycledWikiPages:function(b,i){var f=this._validateWikiLabel(b);if(f)return f;var f={method:"GET",handleAs:"text",query:i||{}},e=c.mixin(p,{createEntity:function(a,f){return new o({service:a,wikiLabelOrId:b,data:f})}});
return this.getEntities(this.constructUrl(a.WikiRecycleBin,null,{wikiLabelOrId:encodeURIComponent(b)}),f,e)},getWiki:function(a,b){return(new q({service:this,_fields:{label:a}})).load(b)},createWiki:function(b,c){var f=this._toWiki(b),i=this._validateWiki(f,!1,c);if(i)return i;i={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(a.WikisAll,i,{createEntity:function(a,b){f.setData(b);return f}},c)},updateWiki:function(b,c){var f=this._toWiki(b),i=this._validateWiki(f,
!0,c);if(i)return i;i={method:"PUT",query:c||{},headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(this.constructUrl(a.WikiEntry,null,{wikiLabel:encodeURIComponent(f.getLabel())}),i,{createEntity:function(a,b){f.setData(b);return f}},c)},deleteWiki:function(b,c){var f=this._validateWikiLabel(b);if(f)return f;f={method:"DELETE",query:c||{},handleAs:"text"};return this.deleteEntity(this.constructUrl(a.WikiEntry,null,{wikiLabel:encodeURIComponent(b)}),f,b)},getWikiPage:function(a,
b,f){return(new o({service:this,wikiLabel:a,_fields:{label:b}})).load(f)},createWikiPage:function(b,c){var f=this._toWikiPage(b),i=this._validateWikiPage(f,!1,c);if(i)return i;i={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(this.constructUrl(a.WikiFeed,null,{wikiLabel:encodeURIComponent(f.getWikiLabel())}),i,{createEntity:function(a,b){wiki.setData(b);return wiki}},c)},updateWikiPage:function(b,c){var f=this._toWikiPage(b),i=this._validateWikiPage(f,
!0,c);if(i)return i;var i={method:"PUT",query:c||{},headers:a.AtomXmlHeaders,data:f.createPostData()},e={pageLabel:encodeURIComponent(f.getLabel()),wikiLabel:encodeURIComponent(f.getWikiLabel())};return this.updateEntity(this.constructUrl(a.WikiPageEntry,null,e),i,{createEntity:function(a,b){f.setData(b);return f}},c)},deleteWikiPage:function(b,c,f){var i=this._validateWikiLabel(b);if(i||(i=this._validatePageLabel(c)))return i;c={method:"DELETE",query:f||{},handleAs:"text"};f={pageLabel:encodeURIComponent(label),
wikiLabel:encodeURIComponent(b)};return this.deleteEntity(this.constructUrl(a.WikiPageEntry,null,f),c,b)},constructUrl:function(a,b,f){if(!a)throw Error("BaseService.constructUrl: Invalid argument, url is undefined or null.");f=c.mixin({authType:this.endpoint.authType},this.contextRootMap,this.endpoint.serviceMappings,f||{});a=e.replace(a,f);if(b)for(param in b)-1==a.indexOf("?")?a+="?":a.indexOf("&")!=a.length-1&&(a+="&"),(f=encodeURIComponent(b[param]))&&(a+=param+"="+f);return a},_validateWiki:function(a,
b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, wiki with title must be specified.");if(b&&!a.getLabel())return this.createBadRequestPromise("Invalid argument, wiki with label must be specified.")},_validateWikiPage:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, wiki page with title must be specified.");if(b&&!a.getLabel())return this.createBadRequestPromise("Invalid argument, wiki page with label must be specified.");if(b&&
!a.getWikiLabel())return this.createBadRequestPromise("Invalid argument, wiki page with wiki label must be specified.")},_validateWikiLabel:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected wiki label.")},_validatePageLabel:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected wiki page label.")},_validateWikiUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected wikiUuid.")},
_toWiki:function(a){if(a instanceof q)return a;c.isString(a)&&(a={handle:a});return new q({service:this,_fields:c.mixin({},a)})},_toWikiPage:function(a){if(a instanceof o)return a;c.isString(a)&&(a={handle:a});return new o({service:this,_fields:c.mixin({},a)})}})})},"sbt/Jsonpath":function(){define(["./declare"],function(){return function(h,g,c){var e={resultType:c&&c.resultType||"VALUE",result:[],normalize:function(a){var b=[];return a.replace(/[\['](\??\(.*?\))[\]']/g,function(a,c){return"[#"+(b.push(c)-
1)+"]"}).replace(/'?\.'?|\['?/g,";").replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").replace(/#([0-9]+)/g,function(a,c){return b[c]})},asPath:function(a){for(var a=a.split(";"),b="$",c=1,e=a.length;c<e;c++)b+=/^[0-9*]+$/.test(a[c])?"["+a[c]+"]":"['"+a[c]+"']";return b},store:function(a,b){a&&(e.result[e.result.length]="PATH"==e.resultType?e.asPath(a):b);return!!a},trace:function(a,b,c){if(a){var a=a.split(";"),g=a.shift(),a=a.join(";");if(b&&b.hasOwnProperty(g))e.trace(a,b[g],c+";"+g);else if("*"===
g)e.walk(g,a,b,c,function(a,b,c,i,f){e.trace(a+";"+c,i,f)});else if(".."===g)e.trace(a,b,c),e.walk(g,a,b,c,function(a,b,c,i,f){"object"===typeof i[a]&&e.trace("..;"+c,i[a],f+";"+a)});else if(/,/.test(g))for(var g=g.split(/'?,'?/),h=0,o=g.length;h<o;h++)e.trace(g[h]+";"+a,b,c);else/^\(.*?\)$/.test(g)?e.trace(e.eval(g,b,c.substr(c.lastIndexOf(";")+1))+";"+a,b,c):/^\?\(.*?\)$/.test(g)?e.walk(g,a,b,c,function(a,b,c,i,f){e.eval(b.replace(/^\?\((.*?)\)$/,"$1"),i[a],a)&&e.trace(a+";"+c,i,f)}):/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(g)&&
e.slice(g,a,b,c)}else e.store(c,b)},walk:function(a,b,c,e,g){if(c instanceof Array)for(var h=0,n=c.length;h<n;h++)h in c&&g(h,a,b,c,e);else if("object"===typeof c)for(h in c)c.hasOwnProperty(h)&&g(h,a,b,c,e)},slice:function(a,b,c,g){if(c instanceof Array){var h=c.length,o=0,n=h,p=1;a.replace(/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,function(a,b,f,c){o=parseInt(b||o);n=parseInt(f||n);p=parseInt(c||p)});o=0>o?Math.max(0,o+h):Math.min(h,o);n=0>n?Math.max(0,n+h):Math.min(h,n);for(a=o;a<n;a+=p)e.trace(a+
";"+b,c,g)}},eval:function(a,c){try{return b&&c&&eval(a.replace(/@/g,"_v"))}catch(e){throw new SyntaxError("jsonPath: "+e.message+": "+a.replace(/@/g,"_v").replace(/\^/g,"_a"));}}},b=h;if(g&&h&&("VALUE"==e.resultType||"PATH"==e.resultType))return e.trace(e.normalize(g).replace(/^\$;/,""),h,"$"),e.result.length?e.result:!1}})},"sbt/Gadget":function(){define(function(){})},"sbt/IWidget":function(){define([],function(){sbt.getUserPref=function(){}})},"sbt/connections/ProfileService":function(){define("../declare,../lang,../config,../stringUtil,./ProfileConstants,../base/BaseService,../base/BaseEntity,../base/AtomEntity,../base/XmlDataHandler,../base/VCardDataHandler,../Cache,../util".split(","),
function(h,g,c,e,b,a,i,k,m,q,o){var n=h(k,{xpath:b.ProfileXPath,namespaces:b.ProfileNamespaces,categoryScheme:'<category term="profile" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',_update:!1,constructor:function(){},createDataHandler:function(a,f,c,d,j){return c.options&&c.options.query&&"vcard"==c.options.query.output?new q({service:a,data:f,namespaces:d,xpath:b.ProfileVCardXPath}):new m({service:a,data:f,namespaces:d,xpath:j})},getUserid:function(){return this.getAsString("userid")},
getName:function(){return this.getAsString("name")},getEmail:function(){return this.getAsString("email")},getGroupwareMail:function(){return this.getAsString("groupwareMail")},getThumbnailUrl:function(){return this.getAsString("photoUrl")},getJobTitle:function(){return this.getAsString("jobTitle")},getDepartment:function(){return this.getAsString("organizationUnit")},getAddress:function(){return this.getAsObject(b.AddressFields)},getTelephoneNumber:function(){return this.getAsString("telephoneNumber")},
getProfileUrl:function(){return this.getAsString("fnUrl")},getBuilding:function(){return this.getAsString("building")},getFloor:function(){return this.getAsString("floor")},getPronunciationUrl:function(){return this.getAsString("soundUrl")},getSummary:function(){return this.getAsString("summary")},setTelephoneNumber:function(a){this.setAsString("telephoneNumber",a)},setBuilding:function(a){this.setAsString("building",a)},setFloor:function(a){this.setAsString("floor",a)},setJobTitle:function(a){this.setAsString("jobTitle",
a)},setPhotoLocation:function(a){this.setAsString("imageLocation",a)},setAddress:function(a){this.setAsObject(a)},load:function(a){var f=this.getUserid()||this.getEmail(),c=this.service._validateProfileId(f);if(c)return c;var d=this,c={};this.service.isEmail(f)?c.email=f:c.userid=f;g.mixin(c,a||{});c={handleAs:"text",query:c};return this.service.getEntity(this.service.constructUrl(b.AtomProfileDo,{},{authType:this.service._getProfileAuthString()}),c,f,{createEntity:function(a,b,f){d.setData(b,f);
return d}},a)},update:function(a){return this.service.updateProfile(this,a)},getColleagues:function(a){return this.service.getColleagues(this,a)},getColleagueConnections:function(a){return this.service.getColleagueConnections(this,a)},createContent:function(){if(this._update){this._update=!1;var a;return(a=e.transform("\nBEGIN:VCARD\nVERSION:2.1\n${jobTitle}${address}${telephoneNumber}${building}${floor}END:VCARD\n",this,function(a,f){return a="address"==f?this.service._isAddressSet(this)?e.transform("ADR;WORK:;;${streetAddress},${extendedAddress};${locality};${region};${postalCode};${countryName}\n",
{streetAddress:this._fields.streetAddress,extendedAddress:this._fields.extendedAddress,locality:this._fields.locality,region:this._fields.region,postalCode:this._fields.postalCode,countryName:this._fields.countryName}):null:this._fields[f]?e.transform("${attributeName}:${attributeValue}\n",{attributeName:b.ProfileVCardXPath[f],attributeValue:this._fields[f]}):null},this))?e.transform('<content type="${contentType}">${content}</content>',{contentType:"text",content:a}):""}return(a=e.transform('<person xmlns="http://ns.opensocial.org/2008/opensocial"><com.ibm.snx_profiles.attrib>${guid}${email}${uid}${distinguishedName}${displayName}${givenNames}${surname}${userState}</com.ibm.snx_profiles.attrib></person>',
this,function(a,f){if(this._fields[f])return a=e.transform("<entry><key>${attributeName}</key><value><type>text</type><data>${attributeValue}</data></value></entry>",{attributeName:b.profileCreateAttributes[f],attributeValue:this._fields[f]})},this))?e.transform('<content type="${contentType}">${content}</content>',{contentType:"application/xml",content:a}):""},createTags:function(){return""}}),p=h(k,{constructor:function(){}}),d=h(i,{constructor:function(){},getTerm:function(){return this.getAsString("term")},
getFrequency:function(){return this.getAsNumber("frequency")},getIntensity:function(){return this.getAsNumber("intensity")},getVisibility:function(){return this.getAsNumber("visibility")}}),r=h(k,{xpath:b.InviteXPath,contentType:"html",categoryScheme:'<category term="connection" scheme="http://www.ibm.com/xmlns/prod/sn/type" />',constructor:function(){},createEntryData:function(){var a;a=""+e.transform('<category term="${getConnectionType}" scheme="http://www.ibm.com/xmlns/prod/sn/connection/type" />',
this,function(a){return a},this);a+=e.transform('<category term="${getStatus}" scheme="http://www.ibm.com/xmlns/prod/sn/status" />',this,function(a){return a},this);return e.trim(a)},createTags:function(){return""},getConnectionType:function(){return this.getAsString("connectionType")||b.TypeColleague},setConnectionType:function(a){return this.setAsString("connectionType",a)},getStatus:function(){return this.getAsString("status")||b.StatusPending},setStatus:function(a){return this.setAsString("status",
a)},getConnectionId:function(){return this.getAsString("connectionId")},setConnectionId:function(a){return this.setAsString("connectionId",a)}}),f={createEntity:function(a,b,f){return new n({service:a,data:b,response:f})}},s={createEntities:function(a,f){return new m({data:f,namespaces:b.Namespaces,xpath:b.ProfileFeedXPath})},createEntity:function(a,b,f){return new n({service:a,data:b,response:f})}},t={createEntities:function(a,f){return new m({data:f,namespaces:b.Namespaces,xpath:b.ProfileFeedXPath})},
createEntity:function(a,b,f){return new p({service:a,data:b,response:f})}},j={createEntities:function(a,f){return new m({data:f,namespaces:b.Namespaces,xpath:b.ProfileTagsXPath})},createEntity:function(a,f){var c=new m({data:f,namespaces:b.Namespaces,xpath:b.ProfileTagsXPath});return new d({service:a,id:c.getEntityId(),dataHandler:c})}};return h(a,{contextRootMap:{profiles:"profiles"},constructor:function(){if(!this.endpoint)this.endpoint=c.findEndpoint(this.getDefaultEndpointName());if(!this._cache&&
(c.Properties.ProfileCacheSize||b.DefaultCacheSize))this._cache=new o(c.Properties.ProfileCacheSize||b.DefaultCacheSize)},getDefaultEndpointName:function(){return"connections"},newProfile:function(a){return this._toProfile(a)},newInvite:function(a){return this._toInvite(a)},getProfile:function(a,b){var f=this._toProfile(a),c=this._validateProfile(f);return c?c:f.load(b)},updateProfile:function(a,f){var c=this._toProfile(a);c._update=!0;var d=this._validateProfile(c);if(d)return d;d={};c.getUserid()?
d.userid=c.getUserid():d.email=c.getEmail();g.mixin(d,f||{});d={method:"PUT",query:d,headers:b.AtomXmlHeaders,data:c.createPostData()};return this.updateEntity(this.constructUrl(b.AtomProfileEntryDo,{},{authType:this._getProfileAuthString()}),d,{createEntity:function(){return c}},f)},getTags:function(a,f){var c=this._toTargetObject(a),d=this._validateTargetObject(c);if(d)return d;c={method:"GET",handleAs:"text",query:g.mixin(c,f||{})};return this.getEntities(this.constructUrl(b.AtomTagsDo,{},{authType:this._getProfileAuthString()}),
c,this.getProfileTagFeedCallbacks(),f)},getColleagues:function(a,f){var c=this._toIdObject(a),d=this._validateIdObject(c);if(d)return d;c={method:"GET",handleAs:"text",query:g.mixin(c,{connectionType:"colleague",outputType:"profile"},f||{})};return this.getEntities(this.constructUrl(b.AtomConnectionsDo,{},{authType:this._getProfileAuthString()}),c,this.getProfileFeedCallbacks(),f)},getColleagueConnections:function(a,f){var c=this._toIdObject(a),d=this._validateIdObject(c);if(d)return d;c={method:"GET",
handleAs:"text",query:g.mixin(c,{connectionType:"colleague",outputType:"connection"},f||{})};return this.getEntities(this.constructUrl(b.AtomConnectionsDo,{},{authType:this._getProfileAuthString()}),c,this.getColleagueConnectionFeedCallbacks(),f)},getReportingChain:function(a,f){var c=this._toIdObject(a),d=this._validateIdObject(c);if(d)return d;c={method:"GET",handleAs:"text",query:g.mixin(c,f||{})};return this.getEntities(this.constructUrl(b.AtomReportingChainDo,{},{authType:this._getProfileAuthString()}),
c,this.getProfileFeedCallbacks(),f)},getPeopleManaged:function(a,f){var c=this._toIdObject(a),d=this._validateIdObject(c);if(d)return d;c={method:"GET",handleAs:"text",query:g.mixin(c,f||{})};return this.getEntities(this.constructUrl(b.AtomPeopleManagedDo,{},{authType:this._getProfileAuthString()}),c,this.getProfileFeedCallbacks(),f)},search:function(a){if(!a)return this.createBadRequestPromise("Invalid arguments, one or more of the input parameters to narrow the search must be specified.");var f=
{method:"GET",handleAs:"text",query:a};return this.getEntities(this.constructUrl(b.AtomSearchDo,{},{authType:this._getProfileAuthString()}),f,this.getProfileFeedCallbacks(),a)},updateProfilePhoto:function(a,b,f){var d=this.validateField("File Control Or Id",a);if(d)return d;promose=this.validateHTML5FileSupport();if(d)return d;b=this._toIdObject(b);d=null;if("string"==typeof a)a=document.getElementById(a),filePath=a.value,d=a.files;else if("object"==typeof a)filePath=a.value,d=a.files;else return this.createBadRequestPromise("File Control or ID is required");
if(1!=d.length)return this.createBadRequestPromise("Only one file needs to be provided to this API");a=d[0];d=new FormData;d.append("file",a);b=g.mixin(b,f||{});return this.updateEntity(this.constructUrl(c.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/UpdateProfilePhoto/"+encodeURIComponent(a.name),f&&f.parameters?f.parameters:{}),{method:"PUT",headers:{"Content-Type":!1,"Process-Data":!1},query:b||{},data:d},{createEntity:function(a,b){return b}})},createInvite:function(a,
f,c){var a=this._toIdObject(a),d=this._validateIdObject(a);if(d)return d;var j=this._toInvite(f),f={method:"POST",query:g.mixin(a,c||{}),headers:b.AtomXmlHeaders,data:j.createPostData()};return this.updateEntity(this.constructUrl(b.AtomConnectionsDo,{},{authType:this._getProfileAuthString()}),f,{createEntity:function(a,b,f){j.setData(b);a=this.getLocationParameter(f,"connectionId");j.setConnectionId(a);return j}},c)},updateTags:function(a,f,c,d){var j=this._validateProfileId(f);if(j||(j=this._validateProfileId(c)))return j;
j={};this.isEmail(f)?j.targetEmail=f:j.targetKey=f;this.isEmail(c)?j.sourceEmail=c:j.sourceKey=c;g.mixin(j,d||{});a={method:"PUT",query:j,headers:b.AtomXmlHeaders,data:this._createTagsPostData(a)};return this.updateEntity(this.constructUrl(b.AtomTagsDo,{},{authType:this._getProfileAuthString()}),a,{createEntity:function(a,b){return b}},d)},getProfileFeedCallbacks:function(){return s},getColleagueConnectionFeedCallbacks:function(){return t},getProfileCallbacks:function(){return f},getProfileTagFeedCallbacks:function(){return j},
_toIdObject:function(a){var b={};if(g.isString(a))this.isEmail(a)?b.email=a:b.userid=a;else if(a instanceof n)if(a.getUserid())b.userid=a.getUserid();else if(a.getEmail())b.email=a.getEmail();return b},_toTargetObject:function(a){var b={};if(g.isString(a))this.isEmail(a)?b.targetEmail=a:b.targetKey=a;else if(a instanceof n)if(a.getUserid())b.targetKey=a.getUserid();else if(a.getEmail())b.targetEmail=a.getEmail();return b},_validateIdObject:function(a){if(!a.userid&&!a.email)return this.createBadRequestPromise("Invalid argument, userid or email must be specified.")},
_validateTargetObject:function(a){if(!a.targetKey&&!a.targetEmail)return this.createBadRequestPromise("Invalid argument, userid or email must be specified.")},_toProfile:function(a){if(a instanceof n)return a;var b=a;if(g.isString(a))b={},this.isEmail(a)?b.email=a:b.userid=a;else if(b&&b.id&&!b.userid&&!b.email)this.isEmail(b.id)?b.email=b.id:b.userid=b.id,delete b.id;return new n({service:this,_fields:g.mixin({},b)})},_toInvite:function(a){if(a instanceof r)return a;g.isString(a)&&(a={content:a});
return new r({service:this,_fields:g.mixin({},a)})},_isAddressSet:function(a){return a._fields.streetAddress||a._fields.extendedAddress||a._fields.locality||a._fields.region||a._fields.postalCode||a._fields.countryName},_validateProfile:function(a){if(!a||!a.getUserid()&&!a.getEmail())return this.createBadRequestPromise("Invalid argument, profile with valid userid or email must be specified.")},_validateProfileId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userid or email")},
_getProfileAuthString:function(){return this.endpoint.authType==b.AuthTypes.Basic?"":this.endpoint.authType==b.AuthTypes.OAuth?"/oauth":""},_createTagsPostData:function(a){for(var b="",f=0;f<a.length;f++)b+=e.transform('<atom:category term="${tag}"></atom:category>',{tag:a[f]});a=e.transform('<?xml version="1.0" encoding="UTF-8"?><app:categories xmlns:snx="http://www.ibm.com/xmlns/prod/sn" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app">${createTags}</app:categories>',
{createTags:b});return e.trim(a)}})})},"sbt/Cache":function(){define(["./declare"],function(h){return h(null,{constructor:function(g){this.limit=g;this._cache={};this.tail=this.head=null;this.count=0},get:function(g){if(g=this._cache[g]){if(this.head!=g){if(g.prev)g.prev.next=g.next;g.next?g.next.prev=g.prev:this.tail=g.prev;g.next=this.head;this.head.prev=g;g.prev=null;this.head=g}return g.value}return null},put:function(g,c){this._cache[g]&&(this.remove(g),this.count--);var e=this._cache[g]={key:g,
value:c};this.count==this.limit&&(this.remove(this.tail.key),this.count--);e.next=this.head;e.next?e.next.prev=e:this.tail=e;this.head=e;e.prev=null;this.count++},remove:function(g){var c=this._cache[g];if(c)c.next?c.next.prev=c.prev:this.tail=c.prev,c.prev?c.prev.next=c.next:this.head=c.next,c.next=c.prev=null,delete this._cache[g],this.count--},browse:function(g){if(g)for(var c in this._cache){var e=this._cache[c];if(e=g(e.key,e.value))return e}return null}})})},"sbt/GadgetTransport":function(){define(["./declare",
"./lang"],function(h,g){var c={POST:gadgets.io.MethodType.POST,PUT:gadgets.io.MethodType.PUT,DELETE:gadgets.io.MethodType.DELETE,GET:gadgets.io.MethodType.GET},e={XML:gadgets.io.ContentType.DOM,JSON:gadgets.io.ContentType.JSON,TEXT:gadgets.io.ContentType.TEXT,"JSON-COMMENT-OPTIONAL":gadgets.io.ContentType.JSON,"JSON-COMMENT-FILTERED":gadgets.io.ContentType.JSON,JAVASCRIPT:gadgets.io.ContentType.JSON},b={NONE:gadgets.io.AuthorizationType.NONE,OAUTH:gadgets.io.AuthorizationType.OAUTH,OAUTH2:gadgets.io.AuthorizationType.OAUTH2,
SIGNED:gadgets.io.AuthorizationType.SIGNED};return h(null,{serviceName:null,constructor:function(a){this.serviceName=a.serviceName||null},xhr:function(a,i){if(i.sync)throw Error("Gadget transport does not support synchronous requests.");var g={};g[gadgets.io.RequestParameters.METHOD]=c[a.toUpperCase()]||gadgets.io.MethodType.GET;g[gadgets.io.RequestParameters.CONTENT_TYPE]=e[i.handleAs?i.handleAs.toUpperCase():"TEXT"];g[gadgets.io.RequestParameters.HEADERS]=i.headers||{};g[gadgets.io.RequestParameters.POST_DATA]=
this.getPostData(g[gadgets.io.RequestParameters.METHOD],i.postData||i.putData);i.preventCache&&(g[gadgets.io.RequestParameters.REFRESH_INTERVAL]=0);if(this.serviceName||i.serviceName)g[gadgets.io.RequestParameters.OAUTH_SERVICE_NAME]=this.serviceName||i.serviceName;if(i.authType){var h=i.authType.toUpperCase();g[gadgets.io.RequestParameters.AUTHORIZATION]=b[h]||b.NONE}var q=this,h=this.buildUrl(i);gadgets.io.makeRequest(h,function(a){q.handleResponse(i,a)},g)},handleResponse:function(a,b){if(b.errors&&
0<b.errors.length){if(a.error||a.handle){var c=this.createError(b);this.notifyError(a,c)}}else b.oauthApprovalUrl?this.handleApproval(a,b):this.notifyResponse(a,b)},handleApproval:function(a,b){var c=Error();c.code=401;c.response=g.mixin({},b);this.notifyError(a,c)},notifyResponse:function(a,b){if(a.load||a.handle){var c={args:a,headers:b.headers,_ioargs:b};a.handle&&a.handle(b.data||b.text,c);a.load&&a.load(b.data||b.text,c)}},notifyError:function(a,b){a.handle&&a.handle(b);a.error&&a.error(b)},
createError:function(a){var b=Error();b.code=a.rc;b.message=a.errors[0];b.response=g.mixin({},a);return b},getPostData:function(a,b){return a==gadgets.io.MethodType.POST||a==gadgets.io.MethodType.PUT?b:""},buildUrl:function(a){var b=[],c=a.url;if(a.content){for(name in a.content){var e=encodeURIComponent(name)+"="+encodeURIComponent(a.content[name]);b.push(e)}0<b.length&&(a=b.join("&"),c+=(~c.indexOf("?")?"&":"?")+a)}return c}})})},"sbt/connections/ActivityService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./ActivityConstants,../base/BaseService,../base/AtomEntity,../base/BaseEntity,../base/XmlDataHandler,../xml".split(","),
function(h,g,c,e,b,a,i,k,m,q,o){var n=function(a,b){if(a=decodeURIComponent(a)){var f=a.indexOf(b);-1!=f&&(a=a.substring(f+b.length))}return a},p=function(a){if(a)return a},d=h(null,{name:null,fid:null,position:null,type:null,getName:function(){return this.name},setName:function(a){this.name=a},getFid:function(){return this.fid},getPosition:function(){return this.position},getType:function(){return this.type}}),r=h(d,{summary:null,getSummary:function(){return this.summary},setSummary:function(){this.summary=
newSummary}}),f=h(d,{date:null,getDate:function(){return this.date},setDate:function(a){this.date=a}}),s=h(d,{url:null,title:null,getUrl:function(){return this.url},setUrl:function(a){this.url=a},getTitle:function(){return this.title},setTitle:function(a){this.title=a}}),t=h(d,{url:null,fileType:null,size:null,length:null,getUrl:function(){return this.url},getFileType:function(){return this.type},getSize:function(){return this.size},getLength:function(){return this.length}}),j=h(d,{personName:null,
userId:null,email:null,getPersonName:function(){return this.personName},setPersonName:function(a){this.personName=a},getUserId:function(){return this.userId},setUserId:function(a){this.userId=a},getEmail:function(){return this.email},setEmail:function(a){this.email=a}}),v=h(m,{constructor:function(){},getTerm:function(){return this.getAsString("term")},getFrequency:function(){return this.getAsString("frequency")},getBin:function(){return this.getAsString("bin")}}),w=h(k,{xpath:a.ActivityNodeXPath,
namespaces:a.ActivityNamespaces,contentType:"html",categoryScheme:null,constructor:function(){},setCategoryScheme:function(){this.categoryScheme=e.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="${getType}" label="${getType}" />',this,p,this)},getUuid:function(){var a=this.id||this._fields.id||this.getId();this.id=a;return this._fields.id=a},getActivityUuid:function(){return n(this.getUuid(),"urn:lsid:ibm.com:oa:")},getAuthorLdapId:function(){return this.getAsString("authorLdapid")},
getContributorLdapId:function(){return this.getAsString("contributorLdapid")},getType:function(){return this.getAsString("type")},setType:function(a){return this.setAsString("type",a)},getPriority:function(){return this.getAsString("priority")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getDueDate:function(){return this.getAsDate("dueDate")},setDueDate:function(a){return this.setAsDate("dueDate",a)},getMembersUrl:function(){return this.getAsString("membersUrl")},
getHistoryUrl:function(){return this.getAsString("historyUrl")},getTemplatesUrl:function(){return this.getAsString("templatesUrl")},getPosition:function(){return this.getAsString("position")},setPosition:function(a){return this.setAsString("position",a)},isCompleted:function(){return this.getAsBoolean("categoryFlagCompleted")},setCompleted:function(a){return this.setAsBoolean("categoryFlagCompleted",a)},isDeleted:function(){return this.getAsBoolean("categoryFlagDelete")},isTemplate:function(){return this.getAsBoolean("categoryFlagTemplate")},
setTemplate:function(a){return this.setAsBoolean("categoryFlagTemplate",a)},getDepth:function(){return this.getAsString("depth")},getPermissions:function(){return this.getAsString("permissions")},getIconUrl:function(){return this.getAsString("iconUrl")},setIconUrl:function(a){return this.setAsString("iconUrl",a)},getCommunityUuid:function(){return this.getAsString("communityUuid")},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getCommunityUrl:function(){return this.getAsString("communityUrl")},
setCommunityUrl:function(a){return this.setAsString("communityUrl",a)},load:function(){var b=this.service.validateField("activityUuid",this.getActivityUuid());if(b)return b;var b={method:"GET",handleAs:"text",query:{activityNodeUuid:this.getActivityUuid()}},f=this;return this.service.getEntity(a.AtomActivityNode,b,this.getActivityUuid(),{createEntity:function(a,b,c){f.setData(b,c);return f}})},create:function(){return this.service.createActivity(this)},update:function(){return this.service.updateActivity(this)},
deleteActivity:function(){return this.service.deleteActivity(this.getActivityUuid())},restore:function(){return this.service.restoreActivity(this.getActivityUuid())},addMember:function(a){return this.service.addMember(this.getActivityUuid(),a)},removeMember:function(a){return this.service.deleteMember(this.getActivityUuid(),a)},updateMember:function(a){return this.service.updateMember(this.getActivityUuid(),a)},getMember:function(a){return this.service.getMember(this.getActivityUuid(),a)},getMembers:function(a){return this.service.getMembers(this.getActivityUuid(),
a)},createActivityNode:function(a){return this.service.createActivityNode(this.getActivityUuid(),a)},getActivityTags:function(a){return this.service.getActivityTags(this.getActivityUuid(),a)},createContributor:function(){return""},createEntryData:function(){var a="";this.getPosition&&this.getPosition()&&(a+=e.transform("<snx:position>${getPosition}</snx:position>",this,p,this));this.getCommunityUuid&&this.getCommunityUuid()&&(a+=e.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="community_activity" label="Community Activity"/><snx:communityUuid>${getCommunityUuid}</communityUuid><link rel="http://www.ibm.com/xmlns/prod/sn/container" type="application/atom+xml" href="${getCommunityUrl}"/>',
this,p,this));this.isCompleted&&this.isCompleted()&&(a+='<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="completed"/>');this.getDueDate&&this.getDueDate()&&(a+=e.transform("<snx:duedate>${getDueDate}</duedate>",this,p,this));this.getInReplyToId&&this.getInReplyToId()&&(a+=e.transform('<thr:in-reply-to ref="${getInReplyToId}" type="application/atom+xml" href="${getInReplyToUrl}" source="${getActivityUuid}" />',this,p,this));this.getAssignedToUserId&&this.getAssignedToUserId()&&(a+=
e.transform('<snx:assignedto name="${getAssignedToName}" userid="${getAssignedToUserId}">${getAssignedToEmail}</snx:assignedto>',this,p,this));this.getIconUrl&&this.getIconUrl()&&(a+=e.transform("<snx:icon>${getIconUrl}</snx:icon>",this,p,this));this.isTemplate&&this.isTemplate()&&(a+='<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="template"/>');if(this.getFields&&0<this.getFields().length){var b=this.getFields(),f;for(f in b){var c=b[f],d="",j=function(a,b){c[b]?a=o.encodeXmlEntry(c[b]):
""!=d&&(a=d);return a},i='<summary type="text">${summary}</summary>';"person"==c.type?i="<name>${personName}</name> <email>{email}</email> <snx:userid>${userId}</snx:userid>":"link"==c.type?i='<link href="${url}" title="${title}" />':"date"==c.type&&(i="${date}");d=e.transform(i,this,j,this);a+=e.transform('<snx:field name="${name}" fid="${fid}" position="${position}" type="${type}">${getText}${getPerson}${getDate}${getLink}${getFile}</snx:field>',this,j,this)}}return a}}),y=h(w,{constructor:function(){},
getActivityNodeUuid:function(){return n(this.getUuid(),"urn:lsid:ibm.com:oa:")},getActivityUuid:function(){return this.getAsString("activityUuid")},setActivityUuid:function(a){return this.setAsString("activityUuid",a)},getInReplyToId:function(){return this.getAsString("inReplyToId")},getInReplyToUrl:function(){return this.getAsString("inReplyToUrl")},setInReplyTo:function(a,b){return this.setAsObject({inReplyToId:"urn:lsid:ibm.com:oa:"+a,inReplyToUrl:b})},getAssignedToUserId:function(){return this.getAsString("assignedToUserId")},
getAssignedToName:function(){return this.getAsString("assignedToName")},getAssignedToEmail:function(){return this.getAsString("assignedToEmail")},setAssignedTo:function(a,b,f){return this.setAsObject({assignedToUserId:a,assignedToName:b,assignedToEmail:f})},getTextFields:function(){var b=this.getAsNodesArray("textFields"),f=[],c;for(c in b){for(var d=b[c],j=new r,e=0;e<d.attributes.length;e++){var i=d.attributes[e];j[i.name]=i.value}d=new q({service:this.service,data:d,namespaces:a.Namespaces,xpath:a.TextFieldXPath});
j.summary=d.getAsString("summary");f.push(j);this.addTextField(j)}return f},addTextField:function(a){return this._fields.fields?(this._fields.fields.push(a),this):this.setAsArray("fields",[a])},getDateFields:function(){var a=this.getAsNodesArray("dateFields"),b=[],c;for(c in a){for(var d=a[c],j=new f,i=0;i<d.attributes.length;i++){var g=d.attributes[i];j[g.name]=g.value}j.date=new Date(e.trim(d.textContent));b.push(j);this.addDateField(j)}return b},addDateField:function(a){return this._fields.fields?
(this._fields.fields.push(a),this):this.setAsArray("fields",[a])},getLinkFields:function(){var b=this.getAsNodesArray("linkFields"),f=[],c;for(c in b){for(var d=b[c],j=new s,e=0;e<d.attributes.length;e++){var i=d.attributes[e];j[i.name]=i.value}d=new q({service:this.service,data:d,namespaces:a.Namespaces,xpath:a.LinkFieldXPath});j.url=d.getAsString("url");j.title=d.getAsString("title");f.push(j);this.addLinkField(j)}return f},addLinkField:function(a){return this._fields.fields?(this._fields.fields.push(a),
this):this.setAsArray("fields",[a])},getPersonFields:function(){var b=this.getAsNodesArray("personFields"),f=[],c;for(c in b){for(var d=b[c],e=new j,i=0;i<d.attributes.length;i++){var g=d.attributes[i];e[g.name]=g.value}d=new q({service:this.service,data:d,namespaces:a.Namespaces,xpath:a.PersonFieldXPath});e.personName=d.getAsString("name");e.userId=d.getAsString("userId");e.email=d.getAsString("email");f.push(e);this.addPersonField(e)}return f},addPersonField:function(a){return this._fields.fields?
(this._fields.fields.push(a),this):this.setAsArray("fields",[a])},getFileFields:function(){var b=this.getAsNodesArray("fileFields"),f=[],c;for(c in b){for(var d=b[c],j=new t,e=0;e<d.attributes.length;e++){var i=d.attributes[e];j[i.name]=i.value}d=new q({service:this.service,data:d,namespaces:a.Namespaces,xpath:a.FileFieldXPath});j.url=d.getAsString("url");j.size=d.getAsString("size");j.type=d.getAsString("type");j.length=d.getAsString("length");f.push(j)}return f},getFields:function(){if(this._fields.fields&&
0<this._fields.fields.length)return this._fields.fields;var a=this.getTextFields(),b=this.getPersonFields(),f=this.getLinkFields(),c=this.getFileFields(),d=this.getDateFields(),j;for(j in a){var e=a[j];feilds.push(e)}for(j in b)e=b[j],feilds.push(e);for(j in f)e=f[j],feilds.push(e);for(j in c)e=c[j],feilds.push(e);for(j in d)e=d[j],feilds.push(e);return[]},setFields:function(a){this._fields.fields=a},load:function(){var b=this.service.validateField("activityNodeUuid",this.getActivityNodeUuid());if(b)return b;
var b={method:"GET",handleAs:"text",query:{activityNodeUuid:this.getActivityNodeUuid()}},f=this;return this.service.getEntity(a.AtomActivityNode,b,this.getActivityNodeUuid(),{createEntity:function(a,b,c){f.setData(b,c);return f}})},create:function(a){return this.service.createActivityNode(a,this)},update:function(){return this.service.updateActivityNode(this)},deleteActivityNode:function(){return this.service.deleteActivityNode(this.getActivityNodeUuid())},restore:function(){return this.service.restoreActivityNode(this.getActivityNodeUuid())},
changeType:function(a){this.setType(a);return this.service.changeType(this)},moveToSection:function(a){return this.service.moveEntryToSection(this,a)}}),z=h(k,{xpath:a.MemberXPath,namespaces:a.ActivityNamespaces,categoryScheme:null,setCategoryScheme:function(){this.categoryScheme=e.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="${getCategory}" label="${getCategory}" />',this,p,this)},getMemberId:function(){return n(this.getId(),"&memberid=")},getRole:function(){return this.getAsString("role")},
setRole:function(a){return this.setAsString("role",a)},getPermissions:function(){var a=this.getAsString("permissions");return a?a.split(", "):a},getCategory:function(){this.getAsString("category")},setCategory:function(a){this.setAsString("category",a)},getUserId:function(){return this.getContributor().userid},setUserId:function(a){return this.setAsString("contributorUserid",a)},createTitle:function(){return""},createContent:function(){return""},createSummary:function(){return""},createEntryData:function(){var a;
a=""+e.transform('<snx:role xmlns:snx="http://www.ibm.com/xmlns/prod/sn" component="http://www.ibm.com/xmlns/prod/sn/activities">${getRole}</snx:role>',this,p,this);return e.trim(a)},load:function(b){var f=this.service.validateField("memberId",this.getMemberId());f||(f=this.service.validateField("activityUuid",b));if(f)return f;var c=this;return this.service.getEntity(this.service.constructUrl(a.AtomActivitiesMember,null,{activityUuid:b,memberId:this.getMemberId()}),{method:"GET",handleAs:"text"},
this.getMemberId(),{createEntity:function(b,f,d){b=(new q({data:f,namespaces:a.ActivityNamespaces,xpath:a.MemberXPath})).data;c.setData(b,d);return c}})},addToActivity:function(a){return this.service.addMember(a,this)},removeFromActivity:function(a){return this.service.deleteMember(a,this.getMemberId())},updateInActivity:function(a){return this.service.updateMember(a,this)}}),A={createEntities:function(b,f){return new q({service:b,data:f,namespaces:a.Namespaces,xpath:a.TagXPath})},createEntity:function(b,
f){var c=new q({service:b,data:f,namespaces:a.Namespaces,xpath:a.TagXPath});return new v({service:b,dataHandler:c})}},E={createEntities:function(b,f){return new q({service:b,data:f,namespaces:a.Namespaces,xpath:a.ActivitiesFeedXPath})},createEntity:function(b,f){var c=null,c="object"==typeof f?f:(new q({data:f,namespaces:a.Namespaces,xpath:a.MemberXPath})).data,c=new q({data:c,namespaces:a.Namespaces,xpath:a.MemberXPath});return new z({service:b,dataHandler:c})}},x={createEntities:function(b,f){return new q({service:b,
data:f,namespaces:a.ActivityNamespaces,xpath:a.ActivitiesFeedXPath})},createEntity:function(a,b){return new w({service:a,data:b})}},B={createEntities:function(b,f){return new q({service:b,data:f,namespaces:a.ActivityNamespaces,xpath:a.ActivitiesFeedXPath})},createEntity:function(b,f){var c=null,c="object"==typeof f?f:(new q({data:f,namespaces:a.ActivityNamespaces,xpath:a.ActivityNodeXPath})).data;return new y({service:b,data:c})}};return h(i,{contextRootMap:{activities:"activities"},constructor:function(){if(!this.endpoint)this.endpoint=
g.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getMyActivities:function(b){return this.getEntities(a.AtomActivitiesMy,{method:"GET",handleAs:"text",query:b||{}},x)},getActivityNodes:function(b,f){var d={method:"GET",handleAs:"text",query:c.mixin(f||{},{nodeUuid:b})};return this.getEntities(a.AtomActivityNodes,d,B)},getAllActivities:function(b){return this.getEntities(a.AtomActivitiesEverything,{method:"GET",handleAs:"text",query:b||{}},x)},getCompletedActivities:function(b){return this.getEntities(a.AtomActivitiesCompleted,
{method:"GET",handleAs:"text",query:b||{}},x)},getActivityNode:function(a){var b=this.validateField("activityNodeUuid",a);return b?b:this.newActivityNode(a).load()},getActivity:function(a){var b=this.validateField("activityUuid",a);return b?b:this.newActivity(a).load()},createActivityNode:function(b,f){var c=this.validateField("activityUuid",b);c||(c=this.validateField("activityNodeOrJson",f));if(c)return c;c=this.newActivityNode(f);c.setActivityUuid(b);c.setCategoryScheme();c=c.createPostData();
return this.updateEntity(a.AtomCreateActivityNode,{method:"POST",headers:a.AtomXmlHeaders,query:{activityUuid:b},data:c},B)},createActivity:function(b){var f=this.validateField("activityOrJson",b);if(f)return f;b=this.newActivity(b);b.setType(a.ActivityNodeTypes.Activity);b.setCategoryScheme();b=b.createPostData();return this.updateEntity(a.AtomActivitiesMy,{method:"POST",headers:a.AtomXmlHeaders,data:b},x)},_validateActivityNode:function(a,b,f){if(b&&!a.getActivityNodeUuid())return this.createBadRequestPromise("Invalid argument, activity node with UUID must be specified.");
if(f&&!a.getType())return this.createBadRequestPromise("Invalid argument, activity node with Type must be specified.")},_validateActivity:function(a,b){if(b&&!a.getActivityUuid())return this.createBadRequestPromise("Invalid argument, activity with UUID must be specified.")},updateActivityNode:function(a){var b=this.validateField("activityNodeOrJson",a);if(b)return b;a=this.newActivityNode(a);return(b=this._validateActivityNode(a,!0))?b:this._update(a,B)},updateActivity:function(a){var b=this.validateField("activityOrJson",
a);return b?b:(b=this._validateActivity(this.newActivity(a),!0))?b:this._update(a,x)},_update:function(f,c){var d=new b,j=this,e=n(f.getUuid()),i=function(){f.setCategoryScheme();var b=f.createPostData();j.updateEntity(a.AtomActivityNode,{method:"PUT",headers:a.AtomXmlHeaders,query:{activityNodeUuid:e},data:b},c).then(function(a){d.fulfilled(a)},function(a){d.rejected(a)})};if(f.isLoaded())i();else{var g=f._fields;f.load().then(function(){f._fields=g;i()},function(a){d.rejected(a)})}return d},changeEntryType:function(a){var b=
this.validateField("activityNodeOrJson",a);if(b)return b;a=this.newActivityNode(a);this._validateActivityNode(a,!0,!0);return this.updateActivityNode(a)},moveEntryToSection:function(a,f){var c=this,d=this.validateField("activityNodeOrJson",a);d||(d=this.validateField("sectionNodeOrJsonOrId",f));if(d)return d;var j=this.newActivityNode(a),e=this.newActivityNode(f),d=new b,i=function(){j.setInReplyTo(e.getActivityNodeUuid(),e.getSelfUrl());c.updateActivityNode(j).then(function(a){d.fulfilled(a)},function(a){d.rejected(a)})};
e.isLoaded()?i():e.load().then(function(){i()},function(a){d.rejected(a)});return d},deleteActivityNode:function(b){var f=this.validateField("activityNodeUuid",b);return f?f:this.deleteEntity(a.AtomActivityNode,{method:"DELETE",headers:a.AtomXmlHeaders,query:{activityNodeUuid:b}},b)},deleteActivity:function(a){var b=this.validateField("activityUuid",a);return b?b:this.deleteActivityNode(a)},restoreActivity:function(f){var c=this.validateField("activityUuid",f);if(c)return c;var d=this,c=new b;this.getActivityNodeFromTrash(f).then(function(a){return a}).then(function(b){if(b.isDeleted()){var j=
{activityNodeUuid:f};b.setCategoryScheme();b={method:"PUT",headers:a.AtomXmlHeaders,query:j,data:b.createPostData()};d.updateEntity(a.AtomActivityNodeTrash,b,{createEntity:function(a,b,f){return f}}).then(function(a){c.fulfilled(a)},function(a){c.rejected(a)})}else c.rejected("Activity is not in Trash")});return c},restoreActivityNode:function(f){var c=this.validateField("activityNodeUuid",f);if(c)return c;var d=this,c=new b;this.getActivityNodeFromTrash(f).then(function(a){return a}).then(function(b){if(b.isDeleted()){var j=
{activityNodeUuid:f};b.setCategoryScheme();b={method:"PUT",headers:a.AtomXmlHeaders,query:j,data:b.createPostData()};d.updateEntity(a.AtomActivityNodeTrash,b,{createEntity:function(a,b,f){return f}}).then(function(a){c.fulfilled(a)},function(a){c.rejected(a)})}else c.rejected("Activity Node is not in Trash")});return c},getActivityNodeFromTrash:function(b){var f=this.validateField("activityNodeUuid",b);return f?f:this.getEntity(a.AtomActivityNodeTrash,{method:"GET",handleAs:"text",query:{activityNodeUuid:b}},
b,B)},newActivityNode:function(a){if(a instanceof y||a instanceof w)return a;c.isString(a)&&(a={id:a});return new y({service:this,_fields:c.mixin({},a)})},getActivityNodesInTrash:function(b,f){var d=this.validateField("activityUuid",b);if(d)return d;d={method:"GET",handleAs:"text",query:c.mixin(f||{},{activityUuid:b})||{}};return this.getEntities(a.AtomActivitiesTrash,d,B)},newActivity:function(a){if(a instanceof w)return a;c.isString(a)&&(a={id:a});return new w({service:this,_fields:c.mixin({},a)})},
getAllToDos:function(b){return this.getEntities(a.AtomActivitiesToDos,{method:"GET",handleAs:"text",query:b||{}},x)},getAllTags:function(b){return this.getEntities(a.AtomActivitiesTags,{method:"GET",handleAs:"text",query:b||{}},A)},getActivitiesInTrash:function(b){return this.getEntities(a.AtomActivitiesTrash,{method:"GET",handleAs:"text",query:b||{}},x)},getActivityTags:function(b,f){var d=this.validateField("activityUuid",b);if(d)return d;d={method:"GET",handleAs:"text",query:c.mixin(f||{},{activityUuid:b})||
{}};return this.getEntities(a.AtomActivitiesTags,d,A)},getActivityNodeTags:function(b,f){var d=this.validateField("activityNodeUuid",b);if(d)return d;d={method:"GET",handleAs:"text",query:c.mixin(f||{},{activityNodeUuid:b})||{}};return this.getEntities(a.AtomActivitiesTags,d,A)},getMembers:function(b,f){var d=this.validateField("activityUuid",b);if(d)return d;d={method:"GET",handleAs:"text",query:c.mixin(f||{},{activityUuid:b})||{}};return this.getEntities(a.AtomActivitiesMembers,d,E)},_validateMember:function(a,
b,f){if(b&&!a.getMemberId())return this.createBadRequestPromise("Invalid argument, member with ID must be specified.");if(f&&!a.getContributor().userid&&!a.getContributor().email)return this.createBadRequestPromise("Invalid argument, member with User ID or Email must be specified.")},getMember:function(a,b){var f=this.validateField("memberId",b);f||(f=this.validateField("activityUuid",a));return f?f:this._toMember(b).load(a)},addMember:function(b,f){var c=this.validateField("memberOrJson",f);c||(c=
this.validateField("activityUuid",b));if(c)return c;var d=this._toMember(f);if(c=this._validateMember(d,!1,!0))return c;d.getRole()||d.setRole("member");d.setCategoryScheme();c=d.createPostData();return this.updateEntity(a.AtomActivitiesMembers,{method:"POST",headers:a.AtomXmlHeaders,query:{activityUuid:b},data:c},{createEntity:function(a,b,f){return f}})},updateMember:function(b,f){var c=this.validateField("memberOrJson",f);c||(c=this.validateField("activityUuid",b));if(c)return c;var d=this._toMember(f);
if(c=this._validateMember(d,!0,!0))return c;d.setCategoryScheme();c=d.createPostData();d={activityUuid:b,memberid:d.getMemberId()};return this.updateEntity(a.AtomActivitiesMembers,{method:"PUT",headers:a.AtomXmlHeaders,query:d,data:c},{createEntity:function(a,b,f){return f}})},deleteMember:function(b,f){var c=this.validateField("activityUuid",b);c||(c=this.validateField("memberId",f));return c?c:this.deleteEntity(a.AtomActivitiesMembers,{method:"DELETE",headers:a.AtomXmlHeaders,query:{activityUuid:b,
memberid:f}},f)},_toMember:function(a){if(a){if(a instanceof z)return a;var b=new z({service:this});c.isString(a)&&(a={id:a});b._fields=c.mixin({},a);if(b._fields.userId)b._fields.contributorUserid=b._fields.userId;return b}},newMember:function(a){return this._toMember(a)}})})},"sbt/base/JsonDataHandler":function(){define("../declare,../lang,../json,./DataHandler,../Jsonpath,../stringUtil".split(","),function(h,g,c,e,b,a){return h(e,{dataType:"json",jsonpath:null,_values:null,constructor:function(a){g.mixin(this,
a);this._values={};this.data=a.data},getAsString:function(a){this._validateProperty(a,"getAsString");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._get(a).toString()),this._values[a]):_get(a)},getAsNumber:function(a){this._validateProperty(a,"getAsNumber");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._getNumber(a)),this._values[a]):_getNumber(a)},getAsDate:function(a){this._validateProperty(a,"getAsDate");return this._values?(this._values.hasOwnProperty(a)||
(this._values[a]=this._getDate(a)),this._values[a]):_getDate(a)},getAsBoolean:function(a){this._validateProperty(a,"getAsBoolean");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._getBoolean(a)),this._values[a]):_getBoolean(a)},getAsArray:function(a){this._validateProperty(a,"getAsArray");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._get(a)),this._values[a]):_get(a)},getEntityId:function(){return a.trim(this.getAsString(this.jsonpath.id))},
getEntityData:function(){return this.data},getSummary:function(){if(!this._summary&&this._get("totalResults")[0])this._summary={totalResults:this.getAsNumber("totalResults"),startIndex:this.getAsNumber("startIndex"),itemsPerPage:this.getAsNumber("itemsPerPage")};return this._summary},getEntitiesDataArray:function(){return this._get(this._getJPath("entry"))[0]},toJson:function(){return this.data},_getDate:function(a){a=this._get(a)[0];return a instanceof Date?a:new Date(a)},_getBoolean:function(a){return this._get(a)[0]?
!0:!1},_getNumber:function(a){a=this._get(a)[0];return"number"===typeof a?a:g.isArray(a)?a.length:Number(a)},_validateProperty:function(b,c){if(!b){var e=a.substitute("Invalid argument for JsonDataHandler.{1} {0}",[b,c]);throw Error(e);}},_validateObject:function(b){if(!b)throw b=a.substitute("Invalid argument for JsonDataHandler.{0}",[b]),Error(b);},_evalJson:function(a){return b(this.data,a)},_evalJsonWithData:function(a,c){return b(c,a)},_get:function(a){this._validateObject(this.data);return this._evalJson(this._getJPath(a))},
_getJPath:function(a){return this.jsonpath[a]||a},extractFirstElement:function(a){return this._evalJsonWithData("$[0]",a)}})})},"sbt/connections/Tag":function(){define(["../declare","../base/BaseEntity"],function(h,g){return h(g,{constructor:function(){},getTerm:function(){return this.getAsString("term")},getFrequency:function(){return this.getAsNumber("frequency")}})})},"sbt/connections/FileService":function(){define("../declare,../lang,../stringUtil,../Promise,./FileConstants,../base/BaseService,../base/BaseEntity,../base/XmlDataHandler,../config,../util,../xml".split(","),
function(h,g,c,e,b,a,i,k,m,q,o){var n=h(i,{getCommentId:function(){return this.id||this.getAsString("uid")},getTitle:function(){return this.getAsString("title")},getContent:function(){return this.getAsString("content")},getCreated:function(){return this.getAsDate("created")},getModified:function(){return this.getAsDate("modified")},getVersionLabel:function(){return this.getAsString("versionLabel")},getUpdated:function(){return this.getAsDate("updated")},getPublished:function(){return this.getAsDate("published")},
getModifier:function(){return this.getAsObject(["modifierName","modifierUserId","modifierEmail","modifierUserState"])},getAuthor:function(){return this.getAsObject(["authorName","authorUserId","authorEmail","authorUserState"])},getLanguage:function(){return this.getAsString("language")},getDeleteWithRecord:function(){return this.getAsBoolean("deleteWithRecord")}}),p=h(i,{getFileId:function(){return this.id||this._fields.id||this.getAsString("uid")},getLabel:function(){return this.getAsString("label")},
getSelfUrl:function(){return this.getAsString("selfUrl")},getAlternateUrl:function(){return this.getAsString("alternateUrl")},getDownloadUrl:function(){return m.Properties.serviceUrl+"/files/"+this.service.endpoint.proxyPath+"/connections/DownloadFile/"+this.getFileId()+"/"+this.getLibraryId()},getType:function(){return this.getAsString("type")},getCategory:function(){return this.getAsString("category")},getSize:function(){return this.getAsNumber("length")},getEditLink:function(){return this.getAsString("editLink")},
getEditMediaLink:function(){return this.getAsString("editMediaLink")},getThumbnailUrl:function(){return this.getAsString("thumbnailUrl")},getCommentsUrl:function(){return this.getAsString("commentsUrl")},getAuthor:function(){return this.getAsObject(["authorName","authorUserId","authorEmail","authorUserState"])},getTitle:function(){return this.getAsString("title")},getPublished:function(){return this.getAsDate("published")},getUpdated:function(){return this.getAsDate("updated")},getCreated:function(){return this.getAsDate("created")},
getModified:function(){return this.getAsDate("modified")},getLastAccessed:function(){return this.getAsDate("lastAccessed")},getModifier:function(){return this.getAsObject(["modifierName","modifierUserId","modifierEmail","modifierUserState"])},getVisibility:function(){return this.getAsString("visibility")},getLibraryId:function(){return this.getAsString("libraryId")},setLibraryId:function(a){return this.setAsString("libraryId",a)},getLibraryType:function(){return this.getAsString("libraryType")},getVersionUuid:function(){return this.getAsString("versionUuid")},
getVersionLabel:function(){return this.getAsString("versionLabel")},getPropagation:function(){return this.getAsString("propagation")},getRecommendationsCount:function(){return this.getAsNumber("recommendationsCount")},getCommentsCount:function(){return this.getAsNumber("commentsCount")},getSharesCount:function(){return this.getAsNumber("sharesCount")},getFoldersCount:function(){return this.getAsNumber("foldersCount")},getAttachmentsCount:function(){return this.getAsNumber("attachmentsCount")},getVersionsCount:function(){return this.getAsNumber("versionsCount")},
getReferencesCount:function(){return this.getAsNumber("referencesCount")},getTotalMediaSize:function(){return this.getAsNumber("totalMediaSize")},getSummary:function(){return this.getAsString("summary")},getContentUrl:function(){return this.getAsString("contentUrl")},getContentType:function(){return this.getAsString("contentType")},getObjectTypeId:function(){return this.getAsString("objectTypeId")},getLockType:function(){return this.getAsString("lock")},getAcls:function(){return this.getAsString("acls")},
getHitCount:function(){return this.getAsNumber("hitCount")},getAnonymousHitCount:function(){return this.getAsNumber("anonymousHitCount")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},setLabel:function(a){return this.setAsString("label",a)},setSummary:function(a){return this.setAsString("summary",a)},setVisibility:function(a){return this.setAsString("visibility",a)},setNotification:function(a){return this.setAsBoolean("notification",a?"on":
"off")},load:function(a,c,d){var j=this.getFileId(),e=this.service.validateField("fileId",j);if(e||c&&(e=this.service.validateField("libraryId",this.getLibraryId())))return e;var i=this,a={query:g.mixin({fileUuid:j},a||{})};d||(d=c?this.service.constructUrl(b.AtomFileInstancePublic,null,{documentId:j,libraryId:this.getLibraryId()}):this.service.constructUrl(b.AtomFileInstance,null,{documentId:j}));return this.service.getEntity(d,a,j,{createEntity:function(a,f){i.dataHandler=new k({data:f,namespaces:b.Namespaces,
xpath:b.FileXPath});return i}})},save:function(a){if(this.getFileId())return this.service.updateFileMetadata(this,a)},addComment:function(a,b){return this.service.addCommentToFile(this.getAuthor().authorUserId,this.getFileId(),a,b)},pin:function(a){return this.service.pinFile(this.getFileId(),a)},unpin:function(a){return this.service.unpinFile(this.getFileId(),a)},lock:function(a){return this.service.lockFile(this.getFileId(),a)},unlock:function(a){return this.service.unlockFile(this.getFileId(),
a)},remove:function(a){return this.service.deleteFile(this.getFileId(),a)},update:function(a){return this.service.updateFileMetadata(this,a)},download:function(){return this.service.downloadFile(this.getFileId(),this.getLibraryId())}}),d={createEntities:function(a,c){return new k({data:c,namespaces:b.Namespaces,xpath:b.FileFeedXPath})},createEntity:function(a,c){var d=null,d="object"==typeof c?c:(new k({data:c,namespaces:b.Namespaces,xpath:b.FileXPath})).data,d=new k({data:d,namespaces:b.Namespaces,
xpath:b.FileXPath});return new p({service:a,dataHandler:d})}},r={createEntities:function(a,c){return new k({data:c,namespaces:b.Namespaces,xpath:b.CommentFeedXPath})},createEntity:function(a,c){var d=null,d="object"==typeof c?c:(new k({data:c,namespaces:b.Namespaces,xpath:b.CommentXPath})).data,d=new k({data:d,namespaces:b.Namespaces,xpath:b.CommentXPath});return new n({service:a,dataHandler:d})}};return h(a,{contextRootMap:{files:"files"},constructor:function(a){a=a?a.endpoint?a.endpoint:this.getDefaultEndpointName():
this.getDefaultEndpointName();if(!this.endpoint)this.endpoint=m.findEndpoint(a)},getDefaultEndpointName:function(){return"connections"},getFileFeedCallbacks:function(){return d},getCommentFeedCallbacks:function(){return r},newFile:function(a){if(a instanceof p)return a;g.isString(a)&&(a={id:a});return new p({service:this,_fields:g.mixin({},a)})},getFile:function(a,b){var c=this.validateField("fileId",a);return c?c:this.newFile({id:a}).load(b)},getCommunityFile:function(a,c,d){var j=this.validateField("fileId",
a);j||(j=this.validateField("communityId",c));if(j)return j;a=this.newFile({id:a});c=this.constructUrl(b.AtomGetCommunityFile,null,{communityId:c,documentId:a.getFileId()});return a.load(d,null,c)},getMyFiles:function(a){return this.getEntities(b.AtomFilesMy,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getCommunityFiles:function(a,c){var d={method:"GET",handleAs:"text",query:c||{}};return this.getEntities(this.constructUrl(b.AtomGetAllFilesInCommunity,null,{communityId:a}),
d,this.getFileFeedCallbacks())},getFilesSharedWithMe:function(a){a={method:"GET",handleAs:"text",query:g.mixin({direction:"inbound"},a?a:{})};return this.getEntities(b.AtomFilesShared,a,this.getFileFeedCallbacks())},getFilesSharedByMe:function(a){a={method:"GET",handleAs:"text",query:g.mixin({direction:"outbound"},a?a:{})};return this.getEntities(b.AtomFilesShared,a,this.getFileFeedCallbacks())},getPublicFiles:function(a){return this.getEntities(b.AtomFilesPublic,{method:"GET",handleAs:"text",query:a||
{},headers:{}},this.getFileFeedCallbacks())},getMyFolders:function(a){return this.getEntities(b.AtomFoldersMy,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getMyFileComments:function(a,b,c){return this.getFileComments(b,a,!1,null,c)},getPublicFileComments:function(a,b,c){return this.getFileComments(b,a,!0,null,c)},addCommentToFile:function(a,c,d,j,e){var g=this.validateField("fileId",c);g||(g=this.validateField("comment",d));if(g)return g;d={method:"POST",query:e||{},headers:b.AtomXmlHeaders,
data:this._constructPayloadForComment(!1,d)};j||(j=a?this.constructUrl(b.AtomAddCommentToFile,null,{userId:a,documentId:c}):this.constructUrl(b.AtomAddCommentToMyFile,null,{documentId:c}));return this.updateEntity(j,d,this.getCommentFeedCallbacks())},addCommentToMyFile:function(a,b,c){return this.addCommentToFile(null,a,b,null,c)},addCommentToCommunityFile:function(a,c,d,j){d=this.constructUrl(b.AtomAddCommentToCommunityFile,null,{communityId:d,documentId:a});return this.addCommentToFile(null,a,c,
d,j)},updateFileMetadata:function(a,c,d){var j=this.validateField("fileOrJson",a);if(j)return j;a=this.newFile(a);d={method:"PUT",query:d||{},headers:b.AtomXmlHeaders,data:this._constructPayload(a._fields,a.getFileId())};c||(c=this.constructUrl(b.AtomUpdateFileMetadata,null,{documentId:a.getFileId()}));return this.updateEntity(c,d,this.getFileFeedCallbacks())},updateCommunityFileMetadata:function(a,c,d){var j=this.validateField("fileOrJson",a);if(j)return j;var g=this.newFile(a),j=new e,i=this,h=
function(){var a=i.constructUrl(b.AtomUpdateCommunityFileMetadata,null,{libraryId:g.getLibraryId(),documentId:g.getFileId()});i.updateFileMetadata(g,a,d).then(function(a){j.fulfilled(a)},function(a){j.rejected(a)})};g.isLoaded()?h():(a=i.constructUrl(b.AtomGetCommunityFile,null,{communityId:c,documentId:g.getFileId()}),g.load(null,null,a).then(function(){h()},function(a){j.rejected(a)}));return j},pinFile:function(a,c){var d=this.validateField("fileId",a);if(d)return d;d=c?g.mixin({},c):{};d.itemId=
a;return this.updateEntity(b.AtomPinFile,{method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d},{createEntity:function(){return"Success"}})},unpinFile:function(a,c){var d=this.validateField("fileId",a);if(d)return d;d=c?g.mixin({},c):{};d.itemId=a;return this.deleteEntity(b.AtomPinFile,{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d},a)},addFilesToFolder:function(a,c){var d=this.validateField("fileIds",a);d||(d=this.validateField("folderId",c));var d=this.constructUrl(b.AtomAddFilesToFolder,
null,{collectionId:c}),j="?",e;for(e in a)d+=j+"itemId="+a[e],j="&";return this.updateEntity(d,{method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},{createEntity:function(){return"Success"}})},getPinnedFiles:function(a){return this.getEntities(b.AtomFilesMyPinned,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},deleteFile:function(a){var c=this.validateField("fileId",a);return c?c:this.deleteEntity(this.constructUrl(b.AtomDeleteFile,null,{documentId:a}),{method:"DELETE",
headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},lockFile:function(a,c){var d=c?g.mixin({},c):{};d.type="HARD";var j={method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:c||{}};return this.updateEntity(this.constructUrl(b.AtomLockUnlockFile,d,{documentId:a}),j,{createEntity:function(){return"Success"}},c)},unlockFile:function(a,c){var d=c?g.mixin({},c):{};d.type="NONE";var j={method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:c||{}};return this.updateEntity(this.constructUrl(b.AtomLockUnlockFile,
d,{documentId:a}),j,{createEntity:function(){return"Success"}},c)},uploadFile:function(a,b){var c=this.validateField("File Control Or Id",a);if(c||(c=this.validateHTML5FileSupport()))return c;c=null;if("string"==typeof a)c=document.getElementById(a).files;else if("object"==typeof a)c=a.files;else return this.createBadRequestPromise("File Control or ID is required");if(0==c.length)return this.createBadRequestPromise("No files selected for upload");var c=c[0],d=new FormData;d.append("file",c);return this.uploadFileBinary(d,
c.name,b)},uploadFileBinary:function(a,b,c){var d=this.validateField("Binary Content",a);return d?d:(d=this.validateField("File Name",b))?d:-1!=q.getJavaScriptLibrary().indexOf("Dojo 1.4.3")?this.createBadRequestPromise("Dojo 1.4.3 is not supported for File upload"):this.updateEntity(this.constructUrl(m.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/UploadFile/"+encodeURIComponent(b),c&&c.parameters?c.parameters:{}),{method:"POST",headers:{"Content-Type":!1,"Process-Data":!1},
query:c||{},data:a},this.getFileFeedCallbacks())},uploadNewVersion:function(a,b,c){var d=this.validateField("File Control Or Id",b);d||(d=this.validateField("File ID",a));if(d||(d=this.validateHTML5FileSupport()))return d;d=null;if("string"==typeof b)b=document.getElementById(b),filePath=b.value,d=b.files;else if("object"==typeof b)filePath=b.value,d=b.files;else return this.createBadRequestPromise("File Control or ID is required");b=d[0];d=new FormData;d.append("file",b);return this.uploadNewVersionBinary(d,
a,b.name,c)},uploadNewVersionBinary:function(a,b,c,d){var g=this.validateField("Binary Content",a);if(g||(g=this.validateField("File ID",b)))return g;if(g=this.validateField("File Name",c))return g;if(-1!=q.getJavaScriptLibrary().indexOf("Dojo 1.4.3"))return this.createBadRequestPromise("Dojo 1.4.3 is not supported for File Upload");var b=this.constructUrl(m.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/UploadNewVersion/"+encodeURIComponent(b)+"/"+encodeURIComponent(c),d&&
d.parameters?d.parameters:{}),a={method:"PUT",headers:{"Content-Type":!1,"Process-Data":!1},data:a},g=new e,i=this;this.updateEntity(b,a,this.getFileFeedCallbacks()).then(function(a){d?i.updateFile(a.getFileId(),d).then(function(a){g.fulfilled(a)}):g.fulfilled(a)},function(a){g.rejected(a)});return g},updateFile:function(a,d){var e=this.validateField("File ID",a);if(e)return e;var e=this.constructUrl(b.AtomFileInstance,null,{documentId:a}),j="?";if(d&&d.tags){var g=d.tags.split(","),i;for(i in g)e+=
j+"tag="+c.trim(g[i]),j="&";delete d.tags}if(d&&d.removeTags){g=d.removeTags.split(",");for(i in g)e+=j+"removeTag="+c.trim(g[i]),j="&";delete d.removeTags}return this.updateEntity(e,{method:"PUT",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d||{}},this.getFileFeedCallbacks())},downloadFile:function(a,b){window.open(m.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/DownloadFile/"+a+"/"+b)},actOnCommentAwaitingApproval:function(){},actOnFileAwaitingApproval:function(){},
addFileToFolders:function(a,c,d){var j=this.validateField("fileId",a);j||(j=this.validateField("folderIds",c));if(j)return j;j=null;j=d?this.constructUrl(b.AtomAddFileToFolders,null,{userId:d,documentId:a}):this.constructUrl(b.AtomAddMyFileToFolders,null,{documentId:a});a=this._constructPayloadForMultipleEntries(c,"itemId","collection");return this.updateEntity(j,{method:"POST",headers:b.AtomXmlHeaders,data:a},{createEntity:function(){}})},createFolder:function(a,c,d){var j=this.validateField("folderName",
a);if(j)return j;j=b.AtomCreateFolder;a=this._constructPayloadFolder(a,c,d,"create");a={method:"POST",headers:g.mixin(b.AtomXmlHeaders,{"X-Update-Nonce":"{X-Update-Nonce}"}),data:a};return this.updateEntity(j,a,this.getFileFeedCallbacks())},deleteAllFilesFromRecycleBin:function(a){var c=null,c=a?this.constructUrl(b.AtomDeleteAllFilesFromRecyclebBin,null,{userId:a}):b.AtomDeleteMyFilesFromRecyclebBin;return this.deleteEntity(c,{method:"DELETE"},"")},deleteAllVersionsOfFile:function(a,c,d){var j=this.validateField("fileId",
a);j||(j=this.validateField("versionLabel",c));if(j)return j;c={method:"DELETE",query:g.mixin({category:"version",deleteFrom:c},d||{}),headers:{"X-Update-Nonce":"{X-Update-Nonce}"}};return this.deleteEntity(this.constructUrl(b.AtomDeleteAllVersionsOfAFile,null,{documentId:a}),c,a)},deleteComment:function(a,c,d,j){var e=this.validateField("fileId",a);e||(e=this.validateField("commentId",c));if(e)return e;e=null;e=d?this.constructUrl(b.AtomDeleteComment,null,{userId:d,documentId:a,commentId:c}):this.constructUrl(b.AtomDeleteMyComment,
null,{documentId:a,commentId:c});return this.deleteEntity(e,{method:"DELETE",query:j||{},headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},c)},deleteFileFromRecycleBin:function(a,c,d){var j=this.validateField("fileId",a);if(j)return j;j=null;j=c?this.constructUrl(b.AtomDeleteFileFromRecycleBin,null,{userId:c,documentId:a}):this.constructUrl(b.AtomDeleteMyFileFromRecycleBin,null,{documentId:a});return this.deleteEntity(j,{method:"DELETE",query:d||{},headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},
deleteFileShare:function(a,c,d){var j=this.validateField("fileId",a);if(j)return j;d=g.mixin({sharedWhat:a},d||{});if(c)d.sharedWith=c;return this.deleteEntity(b.AtomDeleteFileShare,{method:"DELETE",query:d,headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},deleteFolder:function(a){var c=this.validateField("folderId",a);return c?c:this.deleteEntity(this.constructUrl(b.AtomDeleteFFolder,null,{collectionId:a}),{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},getAllUserFiles:function(a,
c){var d=this.validateField("userId",a);if(d)return d;d={method:"GET",handleAs:"text",query:c||{}};return this.getEntities(this.constructUrl(b.AtomGetAllUsersFiles,null,{userId:a}),d,this.getFileFeedCallbacks())},getFileComments:function(a,c,d,j,e,g){var i=this.validateField("fileId",a);if(i)return i;i=null;if(e)i=this.constructUrl(b.AtomAddCommentToCommunityFile,null,{communityId:e,documentId:a});else if(j)i=c?this.constructUrl(b.AtomGetFileComment,null,{userId:c,documentId:a,commentId:j}):this.constructUrl(b.AtomGetMyFileComment,
null,{documentId:a,commentId:j});else{if(i=this.validateField("userId",c))return i;i=d?this.constructUrl(b.AtomFileCommentsPublic,null,{userId:c,documentId:a}):this.constructUrl(b.AtomFileCommentsMy,null,{userId:c,documentId:a})}return this.getEntities(i,{method:"GET",handleAs:"text",query:g||{}},this.getCommentFeedCallbacks())},getAllCommunityFileComments:function(a,b,c){var d=this.validateField("fileId",a);d||(d=this.validateField("communityId",b));return d?d:this.getFileComments(a,null,null,null,
b,c)},getFileFromRecycleBin:function(a,c,d){var j=this.validateField("fileId",a);if(j)return j;d={method:"GET",handleAs:"text",query:d||{}};return this.getEntity(this.constructUrl(b.AtomGetFileFromRecycleBin,null,{userId:c,documentId:a}),d,{createEntity:function(a,c){self.dataHandler=new k({data:c,namespaces:b.Namespaces,xpath:b.FileXPath});return self}})},getFilesAwaitingApproval:function(a){return this.getEntities(b.AtomGetFilesAwaitingApproval,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},
getFileShares:function(a){return this.getEntities(b.AtomGetFileShares,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getFilesInFolder:function(a,c){return this.getEntities(this.constructUrl(b.AtomGetFilesInFolder,null,{collectionId:a}),{method:"GET",handleAs:"text",query:c||{}},this.getFileFeedCallbacks())},getFilesInMyRecycleBin:function(a){return this.getEntities(b.AtomGetFilesInMyRecycleBin,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getFileWithGivenVersion:function(a,
c,d){var j=this.validateField("fileId",a);if(j)return j;if(!c)return this.getFile(a,d);d={method:"GET",handleAs:"text",query:d||{}};return this.getEntity(this.constructUrl(b.AtomGetFileWithGivenVersion,null,{documentId:a,versionId:c}),d,{createEntity:function(a,c){self.dataHandler=new k({data:c,namespaces:b.Namespaces,xpath:b.FileXPath});return self}})},getFolder:function(a){var c=this.validateField("folderId",a);return c?c:this.getEntity(this.constructUrl(b.AtomGetFolder,null,{collectionId:a}),{method:"GET",
handleAs:"text"},{createEntity:function(a,c){self.dataHandler=new k({data:c,namespaces:b.Namespaces,xpath:b.FileXPath});return self}})},getFoldersWithRecentlyAddedFiles:function(a){return this.getEntities(b.AtomGetFoldersWithRecentlyAddedFiles,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getPinnedFolders:function(a){return this.getEntities(b.AtomGetPinnedFolders,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getPublicFolders:function(a){return this.getEntities(b.AtomGetPublicFolders,
{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},pinFolder:function(a,c){var d=this.validateField("folderId",a);if(d)return d;d=c?g.mixin({},c):{};d.itemId=a;return this.updateEntity(b.AtomPinFolder,{method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d},{createEntity:function(){}})},removeFileFromFolder:function(a,c){var d=this.validateField("folderId",a);if(d||(d=this.validateField("fileId",c)))return d;d=args?g.mixin({},args):{};d.itemId=c;return this.deleteEntity(this.constructUrl(b.AtomRemoveFileFromFolder,
null,{collectionId:a}),{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d},c)},restoreFileFromRecycleBin:function(a,c){var d=this.validateField("fileId",a);if(d||(d=this.validateField("userId",c)))return d;d=args?g.mixin({},args):{};d.undelete="true";d={method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d};return this.updateEntity(this.constructUrl(b.AtomRestoreFileFromRecycleBin,null,{userId:c,documentId:a}),d,{createEntity:function(a,c){self.dataHandler=new k({data:c,
namespaces:b.Namespaces,xpath:b.FileXPath});return self}})},shareFileWithCommunities:function(a,c){var d=this.validateField("fileId",a);d||(d=this.validateField("communityIds",c));if(d)return d;var d=this.constructUrl(b.AtomShareFileWithCommunities,null,{documentId:a}),j=this._constructPayloadForMultipleEntries(c,"itemId","community");return this.updateEntity(d,{method:"POST",headers:b.AtomXmlHeaders,data:j},{createEntity:function(a,b,c){return c}})},unpinFolder:function(a,c){var d=this.validateField("folderId",
a);if(d)return d;d=c?g.mixin({},c):{};d.itemId=a;return this.deleteEntity(b.AtomPinFolder,{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d},a)},updateMyComment:function(a,b,c,d){return updateComment(a,b,c,null,d)},updateComment:function(a,c,d,j,e){var g=this.validateField("fileId",a);g||(g=this.validateField("comment",d));if(g)return g;g||(g=this.validateField("commentId",c));if(g)return g;d={method:"POST",query:e||{},headers:b.AtomXmlHeaders,data:this._constructPayloadForComment(!1,
d)};e=null;e=j?this.constructUrl(b.AtomUpdateComment,null,{userId:j,documentId:a,commentId:c}):this.constructUrl(b.AtomUpdateMyComment,null,{documentId:a,commentId:c});return this.updateEntity(e,d,this.getCommentFeedCallbacks())},addFileToFolder:function(a,b,c,d){return this.addFileToFolders(a,[b],c,d)},_constructPayloadFolder:function(a,b,d,j,e){var g=this,i=null,h=null,k=null;d&&""!=c.trim(d)&&(d=d.split(","),3==d.length&&(i=d[0],h=d[1],k=d[2]));var m=function(c,d){"category"==d?c=o.encodeXmlEntry("collection"):
"id"==d?c=o.encodeXmlEntry(e):"label"==d?c=o.encodeXmlEntry(a):"title"==d?c=o.encodeXmlEntry(a):"summary"==d?c=o.encodeXmlEntry(b):"visibility"==d?c=o.encodeXmlEntry("private"):"shareWithId"==d&&i?c=o.encodeXmlEntry(i):"shareWithWhat"==d&&h?c=o.encodeXmlEntry(h):"shareWithRole"==d&&k&&(c=o.encodeXmlEntry(k));return c},d=c.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom">${getCategory}${getId}${getFolderLabel}${getTitle}${getSummary}${getVisibility}${getVisibilityShare}</entry>',
this,function(a,b){"getCategory"==b?a=c.transform('<category term="${category}" label="${category}" scheme="tag:ibm.com,2006:td/type"/>',g,m,g):"getId"==b&&e?a=c.transform("<id>${id}</id>",g,m,g):"getFolderLabel"==b?a=c.transform('<label xmlns="urn:ibm.com/td" makeUnique="true">${label}</label>',g,m,g):"getTitle"==b?a=c.transform("<title>${title}</title>",g,m,g):"getSummary"==b?a=c.transform('<summary type="text">${summary}</summary>',g,m,g):"getVisibility"==b?a=c.transform('<visibility xmlns="urn:ibm.com/td">${visibility}</visibility>',
g,m,g):"getVisibilityShare"==b&&i&&(a=c.transform('<sharedWith xmlns="urn:ibm.com/td"> <member xmlns="http://www.ibm.com/xmlns/prod/composite-applications/v1.0" ca:type="${shareWithWhat}" xmlns:ca="http://www.ibm.com/xmlns/prod/composite-applications/v1.0" ca:id="${shareWithId}" ca:role="${shareWithRole}"/> </sharedWith>',g,m,g));return a},this);return c.trim(d)},_constructPayloadForMultipleEntries:function(a,b,d){var b='<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">${getEntries}</feed>',
j="",e="",g="",i="",h=function(a,b){"category"==b?a=o.encodeXmlEntry(d):"getCategory"==b?a=e:"fileId"==b?a=o.encodeXmlEntry(i):"getItem"==b?a=g:"getEntries"==b&&(a=j);return a},k;for(k in a){var i=a[k],m="<entry>${getCategory}${getItem}</entry>";d&&(e=c.transform('<category term="${category}" label="${category}" scheme="tag:ibm.com,2006:td/type"/>',this,h,this));g=c.transform('<itemId xmlns="urn:ibm.com/td">${fileId}</itemId>',this,h,this);m=c.transform(m,this,h,this);j+=m}""!=j&&(b=c.transform(b,
this,h,this));return b},_constructPayloadForComment:function(a,b){var d='<entry xmlns="http://www.w3.org/2005/Atom">${getCategory}${getDeleteComment}${getContent}</entry>',j="",e="",g="",i=function(a,c){"category"==c?a=o.encodeXmlEntry("comment"):"content"==c?a=o.encodeXmlEntry(b):"deleteWithRecord"==c?a="true":"getCategory"==c&&""!=j?a=j:"getContent"==c&&""!=e?a=e:"getDeleteComment"==c&&""!=g&&(a=g);return a},j=c.transform('<category term="${category}" label="${category}" scheme="tag:ibm.com,2006:td/type"/>',
this,i,this),e=c.transform('<content type="text/plain">${content}</content>',this,i,this);a&&(g=c.transform('<deleteWithRecord xmlns="urn:ibm.com/td">${deleteWithRecord}</deleteWithRecord>',this,i,this));return d=c.transform(d,this,i,this)},_constructPayload:function(a){var b='<entry xmlns="http://www.w3.org/2005/Atom">${getCategory}${getId}${getUuid}${getLabel}${getTitle}${getSummary}${getVisibility}${getItem}${getTags}${getNotification}</entry>',d="",j="",e="",g="",i="",h="",k="",m="",n="",r="",
q=null,p=function(a,b){q?a=o.encodeXmlEntry(q):"getCategory"==b&&""!=d?a=d:"getId"==b&&""!=j?a=j:"getUuid"==b&&""!=e?a=e:"getLabel"==b&&""!=g?a=g:"getTitle"==b&&""!=i?a=i:"getSummary"==b&&""!=h?a=h:"getVisibility"==b&&""!=k?a=k:"getItem"==b&&""!=m?a=m:"getTags"==b&&""!=n?a=n:"getNotification"==b&&""!=r&&(a=r);return a},u;for(u in a)if(q=a[u],-1!=u.indexOf("category"))d=c.transform('<category term="${category}" label="${category}" scheme="tag:ibm.com,2006:td/type"/>',this,p,this);else if(-1!=u.indexOf("id"))j=
c.transform("<id>${id}</id>",this,p,this);else if(-1!=u.indexOf("uuid"))e=c.transform('<uuid xmlns="urn:ibm.com/td">${uuid}</uuid>',this,p,this);else if(-1!=u.indexOf("label"))g=c.transform('<label xmlns="urn:ibm.com/td">${label}</label>',this,p,this),i=c.transform("<title>${title}</title>",this,p,this);else if(-1!=u.indexOf("summary"))h=c.transform('<summary type="text">${summary}</summary>',this,p,this);else if(-1!=u.indexOf("visibility"))k=c.transform('<visibility xmlns="urn:ibm.com/td">${visibility}</visibility>',
this,p,this);else if(-1!=u.indexOf("itemId"))m=c.transform('<itemId xmlns="urn:ibm.com/td">${fileId}</itemId>',this,p,this);else if(-1!=u.indexOf("tags")){var C=q,D;for(D in C)n+=c.transform('<category term="${tag}" /> ',{tag:C[D]})}else u.contains("notification")&&(r=c.transform("<td:notification>${notification}</td:notification>",this,p,this));q=null;return b=c.transform(b,this,p,this)}})})},"sbt/authenticator/SSO":function(){define(["../declare","../lang","../util","../i18n!../nls/messageSSO"],
function(h,g,c,e){return h(null,{loginUi:"",messageSSO:"/sbt/authenticator/templates/MessageSSO.html",dialogMessageSSO:"authenticator/templates/MessageDialogSSO.html",url:"",constructor:function(b){g.mixin(this,b||{})},authenticate:function(b){var a=this;require(["sbt/config"],function(c){var e=b.loginUi||c.Properties.loginUi||a.loginUi,g=b.messageSSO||c.Properties.messageSSO||a.messageSSO,c=b.dialogMessageSSO||c.Properties.dialogMessageSSO||a.dialogMessageSSO;"popup"==e?a._authPopup(b,g,a.url):"dialog"==
e?a._authDialog(b,c):a._authMainWindow(b,g,a.url)});return!0},_authPopup:function(b,a,g){var h=c.createQuery({loginUi:"popup"},"&"),a=g+a+"?"+h,g=c.createQuery({width:window.screen.availWidth/2,height:window.screen.availHeight/2,left:window.screen.availWidth/4,top:window.screen.availHeight/4,menubar:0,toolbar:0,status:0,location:0,scrollbars:1,resizable:1},","),a=window.open(a,"Authentication",g);a.globalSSOStrings=e;a.globalEndpointAlias=b.name;a.focus();return!0},_authDialog:function(b,a){require(["sbt/_bridge/ui/SSO_Dialog",
"sbt/dom"],function(c,g){c.show(b,a,e);g.setText("reloginMessage",e.message);g.setAttr(g.byId("ssoLoginFormOK"),"value",e.relogin_button_text)});return!0},_authMainWindow:function(b,a,g){b=c.createQuery({redirectURL:document.URL,loginUi:"mainWindow",message_title:e.message_title,message:e.message,relogin_button_text:e.relogin_button_text},"&");window.location.href=g+a+"?"+b;return!0}})})},"sbt/nls/validate":function(){define({root:{error_callback:"Error running error callback : {0}",error_console:"Error received. Error Code = {0}. Error Message = {1}",
validate_nullObject:"{0}.{1} : Null argument provided for {2}. Expected type is {3}",validate_expectedType:"{0}.{1} : {2} argument type does not match expected type {3} for {4}"}})},"sbt/emailService":function(){define(["./declare","./lang","./config","./_bridge/Transport","./json"],function(h,g,c,e,b){var a=new e;return{send:function(e){var g=c.Properties.serviceUrl+"/mailer",e={method:"POST",data:b.stringify(e),headers:{"Content-Type":"application/json"},handleAs:"json"};return a.request(g,e)}}})},
"sbt/main":function(){define("sbt/Cache,sbt/DebugTransport,sbt/Endpoint,sbt/ErrorTransport,sbt/Gadget,sbt/GadgetTransport,sbt/IWidget,sbt/Jsonpath,sbt/MockTransport,sbt/Portlet,sbt/Promise,sbt/Proxy,sbt/_config,sbt/compat,sbt/config,sbt/declare,sbt/defer,sbt/dom,sbt/emailService,sbt/i18n,sbt/itemFactory,sbt/json,sbt/lang,sbt/log,sbt/pathUtil,sbt/ready,sbt/stringUtil,sbt/text,sbt/url,sbt/util,sbt/validate,sbt/xml,sbt/xpath,sbt/xsl,sbt/authenticator/Basic,sbt/authenticator/GadgetOAuth,sbt/authenticator/OAuth,sbt/authenticator/SSO,sbt/base/AtomEntity,sbt/base/BaseConstants,sbt/base/BaseEntity,sbt/base/BaseService,sbt/base/DataHandler,sbt/base/JsonDataHandler,sbt/base/VCardDataHandler,sbt/base/XmlDataHandler,sbt/base/core,sbt/connections/ActivityConstants,sbt/connections/ActivityService,sbt/connections/ActivityStreamConstants,sbt/connections/ActivityStreamService,sbt/connections/BlogConstants,sbt/connections/BlogService,sbt/connections/BookmarkConstants,sbt/connections/BookmarkService,sbt/connections/CommunityConstants,sbt/connections/CommunityService,sbt/connections/ConnectionsConstants,sbt/connections/ConnectionsService,sbt/connections/FileConstants,sbt/connections/FileService,sbt/connections/FollowConstants,sbt/connections/FollowService,sbt/connections/ForumConstants,sbt/connections/ForumService,sbt/connections/ProfileAdminService,sbt/connections/ProfileConstants,sbt/connections/ProfileService,sbt/connections/SearchConstants,sbt/connections/SearchService,sbt/connections/Tag,sbt/connections/WikiConstants,sbt/connections/WikiService,sbt/data/AtomReadStore,sbt/nls/Endpoint,sbt/nls/ErrorTransport,sbt/nls/loginForm,sbt/nls/messageSSO,sbt/nls/util,sbt/nls/validate,sbt/smartcloud/CommunityConstants,sbt/smartcloud/ProfileConstants,sbt/smartcloud/ProfileService,sbt/smartcloud/SmartcloudConstants,sbt/smartcloud/Subscriber,sbt/store/AtomStore,sbt/store/parameter,sbt/authenticator/nls/SSO,sbt/authenticator/templates/ConnectionsLogin.html,sbt/authenticator/templates/ConnectionsLoginDialog.html,sbt/authenticator/templates/Message.html,sbt/authenticator/templates/MessageDialogSSO.html,sbt/authenticator/templates/MessageSSO.html,sbt/authenticator/templates/login.html,sbt/authenticator/templates/login,sbt/authenticator/templates/loginDialog.html,sbt/authenticator/templates/messageSSO,sbt/connections/nls/CommunityService,sbt/connections/nls/ConnectionsService,sbt/connections/nls/ProfileService".split(","),
function(){})},"sbt/Proxy":function(){define(["./declare","./lang","./pathUtil"],function(h,g,c){return h(null,{proxyUrl:null,constructor:function(c){g.mixin(this,c)},rewriteUrl:function(e,b,a){e=b;return this.proxyUrl?(0==e.indexOf("http://")?e="/http/"+e.substring(7):0==e.indexOf("https://")&&(e="/https/"+e.substring(8)),a&&(e=c.concat(a,e)),c.concat(this.proxyUrl,e)):e}})})},"sbt/validate":function(){define(["./log","./stringUtil","sbt/i18n!sbt/nls/validate","./util"],function(h,g,c,e){return{_validateInputTypeAndNotify:function(b,
a,i,h,m,q){return!h||"object"==typeof h&&h.declaredClass&&h.declaredClass!=m||"object"==typeof h&&!h.declaredClass&&typeof h!=m||"object"!=typeof h&&typeof h!=m?(b=h?g.substitute(c.validate_expectedType,[b,a,"object"==typeof h&&h.declaredClass?h.declaredClass:typeof h,m,i]):g.substitute(c.validate_nullObject,[b,a,i,m]),e.notifyError({code:400,message:b},q),!1):!0},_validateInputTypesAndNotify:function(b,a,c,e,g,h){for(var o in e)if(!this._validateInputTypeAndNotify(b,a,c[o],e[o],g[o],h))return!1;
return!0}}})},"sbt/data/AtomReadStore":function(){define("../declare,../config,../lang,../base/core,../xml,../xpath,dojox/html/entities".split(","),function(h,g,c,e,b,a,i){return h(null,{_endpoint:null,_xmlData:null,totalResults:0,startIndex:0,itemsPerPage:5,items:null,url:"",sendQuery:!0,unescapeHTML:!1,urlPreventCache:!1,atom:e.feedXPath,attributes:e.entryXPath,namespaces:e.namespaces,paramSchema:{},constructor:function(a){this._endpoint=g.findEndpoint(a.endpoint||"connections");if(a&&(this.url=
a.url,this.attributes=a.attributes||this.attributes,this.atom=a.feedXPath||this.atom,this.namespaces=a.namespaces||this.namespaces,this.paramSchema=a.paramSchema||this.paramSchema,this.rewriteUrl=a.rewriteUrl,this.label=a.label||this.label,this.sendQuery=a.sendQuery||a.sendquery||this.sendQuery,this.unescapeHTML=a.unescapeHTML,"urlPreventCache"in a))this.urlPreventCache=a.urlPreventCache?!0:!1;if(!this.url)throw Error("sbt.data.AtomReadStore: A service URL must be specified when creating the data store");
},getEndpoint:function(){return this._endpoint},setUrl:function(a){this.url=a},getUrl:function(){return this.url},setAttributes:function(a){this.attributes=a},getValue:function(b,e,g){var h=/^count\(.*\)$/;this._assertIsItem(b);this._assertIsAttribute(e);if(!b._attribs[e]){var n=this.attributes[e];if(c.isFunction(n))b._attribs[e]=n(b,e);else if(n.match(h))b._attribs[e]=a.selectNumber(b.element,this.attributes[e],this.namespaces)+"";else if((h=a.selectNodes(b.element,this.attributes[e],this.namespaces))&&
1==h.length)b._attribs[e]=h[0].text||h[0].textContent;else if(h){b._attribs[e]=[];for(n=0;n<h.length;n++)b._attribs[e].push(h[n].text||h[n].textContent)}else b._attribs[e]=null}if(!b._attribs[e])return g;if("object"==typeof b._attribs[e])for(g=0;g<b._attribs[e].length;g++)b._attribs[e][g]=i.encode(b._attribs[e][g]);else b._attribs[e]=i.encode(b._attribs[e]);return b._attribs[e]},getValues:function(b,c){this._assertIsItem(b);this._assertIsAttribute(c);if(!b._attribs[c]){for(var e=a.selectNodes(b.element,
this.attributes[c],this.namespaces),g=[],i=0;i<e.length;i++)g[i]=e[i].text||e[i].textContent;b._attribs[c]=g}return b._attribs[c]},getAttributes:function(){var a=[],b;for(b in this.attributes)this.attributes.hasOwnProperty(b)&&a.push(b);return a},hasAttribute:function(a,b){return void 0!=this.attributes[b]},containsValue:function(){throw Error("sbt.data.AtomReadStore: Not implemented yet!");},isItem:function(a){return a&&a.element&&a.store&&a.store===this?!0:!1},isItemLoaded:function(a){return this.isItem(a)},
loadItem:function(){throw Error("sbt.data.AtomReadStore: Not implemented yet!");},fetch:function(c){var e=this,g=c.scope||e,i=this._getServiceUrl(this._getQuery(c));i?this._endpoint.xhrGet({serviceUrl:i,handleAs:"text",load:function(i){try{e.response=i;e._xmlData=b.parse(i);e.totalResults=parseInt(a.selectText(e._xmlData,e.atom.totalResults,e.namespaces));e.startIndex=parseInt(a.selectText(e._xmlData,e.atom.startIndex,e.namespaces));e.itemsPerPage=parseInt(a.selectText(e._xmlData,e.atom.itemsPerPage,
e.namespaces));e.items=e._createItems(e._xmlData);c.onBegin&&c.onBegin.call(g,e.totalResults,c);if(c.onItem)for(i=0;i<e._entries;i++)c.onItem.call(g,e.entries[i],c);c.onComplete&&c.onComplete.call(g,c.onItem?null:e.items,c)}catch(h){c.onError&&c.onError.call(h)}},error:function(a){c.onError&&c.onError.call(a)}}):c.onError&&c.onError.call(Error("sbt.data.AtomReadStore: No service URL specified."))},getFeatures:function(){return{"dojo.data.api.Read":!0}},close:function(){throw Error("sbt.data.AtomReadStore: Not implemented yet!");
},getLabel:function(a){return this.getValue(a,this.label)},getLabelAttributes:function(){return[this.label]},_getQuery:function(a){var b=a.query||{};b.pageSize=a.count||b.pageSize;b.pageNumber=Math.floor(a.start/a.count)+1;if(a.sort&&a.sort[0])if(a=a.sort[0],b.sortBy=a.attribute,!0===a.descending)b.sortOrder="desc";else if(!1===a.descending)b.sortOrder="asc";return b},_getServiceUrl:function(a){if(!this.sendQuery||!a)return this.url;if(c.isString(a))return this.url+a;var b="",e=this.paramSchema,g;
for(g in a)if(g in e){var i=e[g].format(a[g]);i&&(b+=i+"&")}else b+=g+"="+a[g]+"&";if(!b)return this.url;a=this.url;a=0>a.indexOf("?")?a+"?":a+"&";return a+b},_createItems:function(b){for(var b=a.selectNodes(b,this.atom.entries,this.namespaces),c=[],e=0;e<b.length;e++)c.push(this._createItem(b[e]));return c},_createItem:function(a){var b=this;return{element:a,store:this,_attribs:{},getValue:function(a){if(b.hasAttribute(this,a))return b.getValue(this,a)}}},_assertIsItem:function(a){if(!this.isItem(a))throw Error("sbt.data.AtomReadStore: Invalid item argument.");
},_assertIsAttribute:function(a){if(!this.attributes[a])throw Error("sbt.data.AtomReadStore: Invalid attribute argument.");}})})},"sbt/Promise":function(){define(["./declare","./log"],function(h){var g=h(null,{_isRejected:!1,_isFulfilled:!1,_isCanceled:!1,_deferreds:null,response:null,error:null,constructor:function(c){c?c instanceof Error?this.rejected(c):this.fulfilled(c):this._deferreds=[]},then:function(c,e){var b=new g;this._isFulfilled?this._fulfilled(c,e,b,this.data):this._isRejected?this._rejected(e,
b,this.error):this._deferreds.push([c,e,b]);return b},cancel:function(){this._isCanceled=!0},isResolved:function(){return this._isRejected||this._isFulfilled},isRejected:function(){return this._isRejected},isFulfilled:function(){return this._isFulfilled},isCanceled:function(){return this._isCanceled},fulfilled:function(c){if(!this._isCanceled&&(this._isFulfilled=!0,this.data=c,this._deferreds))for(;0<this._deferreds.length;){var e=this._deferreds.shift();this._fulfilled(e[0],e[1],e[2],c)}},rejected:function(c){if(!this._canceled&&
(this._isRejected=!0,this.error=c,this._deferreds))for(;0<this._deferreds.length;){var e=this._deferreds.shift();this._rejected(e[1],e[2],c)}},_fulfilled:function(c,e,b,a){if(c)try{var i=c(a);i instanceof g?i.then(function(a){b.fulfilled(a)},function(a){b.rejected(a)}):b.fulfilled(i)}catch(h){b.rejected(h)}else b.fulfilled(a)},_rejected:function(c,e,b){if(c)try{var a=c(b);a||e.rejected(a)}catch(g){e.rejected(g)}else e.rejected(b)}});return g})},"sbt/_bridge/json":function(){define(["dojo/json"],function(h){return h})},
"sbt/ready":function(){define(["./_bridge/ready"],function(h){return h})},"sbt/connections/SearchConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin(g,{SearchNamespaces:{a:"http://www.w3.org/2005/Atom",ibmsc:"http://www.ibm.com/search/content/2010",opensearch:"http://a9.com/-/spec/opensearch/1.1/",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",snx:"http://www.ibm.com/xmlns/prod/sn",spelling:"http://a9.com/-/opensearch/extensions/spelling/1.0/"},
SearchFeedXPath:g.ConnectionsFeedXPath,SingleFacetXPath:{entries:"/a:feed/ibmsc:facets/ibmsc:facet[@id='{facet.id}']/ibmsc:facetValue"},FacetValueXPath:{entry:"/ibmsc:facetValue",uid:"@id",id:"@id",label:"@label",weight:"@weight"},ScopeXPath:h.mixin({},g.AtomEntryXPath,{link:"link"}),SearchXPath:h.mixin({},g.AtomEntryXPath,{rank:"snx:rank",relevance:"relevance:score",type:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",application:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/component']/@term",
applicationCount:"count(a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/component']/@term)",primaryComponent:"a:category[ibmsc:field[@id='primaryComponent']]/@term",tags:"a:category[not(@scheme)]/@term",commentCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",resultLink:"a:link[not(@rel)]/@href",bookmarkLink:"ibmsc:field[@id='dogearURL']",eventStartDate:"ibmsc:field[@id='eventStartDate']",authorJobTitle:"a:content/xhtml:div/xhtml:span/xhtml:div[@class='title']",authorJobLocation:"a:content/xhtml:div/xhtml:span/xhtml:div[@class='location']",
authorCount:"count(a:contributor)",contributorCount:"count(a:author)",tagCount:"count(a:category[not(@scheme)])",highlightField:"ibmsc:field[@id='highlight']",fileExtension:"ibmsc:field[@id='fileExtension']",memberCount:"snx:membercount",communityUuid:"snx:communityUuid",containerType:"ibmsc:field[@id='container_type']",communityParentLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container' and @type='text/html']/@href",parentageMetaID:"ibmsc:field[contains(@id, 'ID')]/@id",parentageMetaURL:"ibmsc:field[contains(@id, 'URL')]",
parentageMetaURLID:"ibmsc:field[contains(@id, 'URL')]/@id",objectRefDisplayName:"ibmsc:field[@id='FIELD_OBJECT_REF_DISPLAY_NAME']",objectRefUrl:"ibmsc:field[@id='FIELD_OBJECT_REF_URL']",accessControl:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/accesscontrolled']/@term",commentsSummary:"ibmsc:field[@id='commentsSummary']"}),AtomScopes:"/${search}/atom/scopes",AtomSearch:"/${search}/atom/search",AtomMySearch:"/${search}/atom/mysearch",publicSearch:"/${search}/atom/search/results",mySearch:"/${search}/atom/mysearch/results",
peopleSearch:"/${search}/atom/search/facets/people",myPeopleSearch:"/${search}/atom/mysearch/facets/people",tagsSearch:"/${search}/atom/search/facets/tags",myTagsSearch:"/${search}/atom/mysearch/facets/tags",dateSearch:"/${search}/atom/search/facets/date",myDateSearch:"/${search}/atom/mysearch/facets/date",sourceSearch:"/${search}/atom/search/facets/source",mySourceSearch:"/${search}/atom/mysearch/facets/source"})})},"sbt/smartcloud/CommunityConstants":function(){define(["../lang","../smartcloud/SmartcloudConstants"],
function(h,g){return h.mixin({CommunityNamespaces:{a:"http://www.w3.org/2005/Atom",app:"http://www.w3.org/2007/app",snx:"http://www.ibm.com/xmlns/prod/sn",opensearch:"http://a9.com/-/spec/opensearch/1.1/"},CommunityFeedXPath:g.SmartcloudFeedXPath,CommunityXPath:h.mixin({},g.AtomEntryXPath,{communityUuid:"a:id",communityTheme:"snx:communityTheme",logoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/logo']/@href",tags:"a:category[not(@scheme)]/@term",memberCount:"snx:membercount",communityType:"snx:communityType",
isExternal:"snx:isExternal"}),MemberXPath:h.mixin({},g.AtomEntryXPath,{id:"a:contributor/snx:userid",uid:"a:contributor/snx:userid",role:"snx:role"}),AtomCommunityMembers:"${communities}/service/atom/community/members"},g)})},"sbt/_bridge/i18n":function(){define(["dojo/i18n","dojo/date/locale"],function(h,g){return{load:function(c,e,b){h.load(c,e,b)},getLocalizedTime:function(c){return g.format(c,{selector:"time",formatLength:"short"})},getLocalizedDate:function(c){return g.format(c,{selector:"date",
formatLength:"medium"})}}})},"sbt/nls/util":function(){define({root:{error_callback:"Error running error callback : {0}",error_console:"Error received. Error Code = {0}. Error Message = {1}"}})},"sbt/declare":function(){define(["./_bridge/declare"],function(h){return h})},"sbt/connections/ActivityStreamService":function(){define("../declare,../lang,../stringUtil,../config,../Promise,./ActivityStreamConstants,../base/BaseService,../base/BaseEntity,../base/DataHandler,sbt/json".split(","),function(h,
g,c,e,b,a,i,k,m,q){var o=h(m,{constructor:function(a){g.mixin(this,a);this.data=a.data},getSummary:function(){if(!this._summary&&this.data.totalResults)this._summary={totalResults:this.data.totalResults,startIndex:this.data.startIndex,itemsPerPage:this.data.itemsPerPage};return this._summary},getEntitiesDataArray:function(){return this.data.list}}),n=h(k,{data:null,getPublishedDate:function(){return this.dataHandler.data.published},getPlainTitle:function(){return this.dataHandler.data.connections.plainTitle},
getActorDisplayName:function(){return this.dataHandler.data.actor.displayName},getActor:function(){return this.dataHandler.data.actor},getVerb:function(){return this.dataHandler.data.verb},getId:function(){return this.dataHandler.data.id}}),p={createEntities:function(a,b){return new o({data:b})},createEntity:function(a,b){var c=new o({data:b});return new n({service:a,dataHandler:c})}};return h(i,{contextRootMap:{connections:"connections"},constructor:function(){if(!this.endpoint)this.endpoint=e.findEndpoint(this.getDefaultEndpointName())},
getDefaultEndpointName:function(){return"connections"},getActivityStreamCallbacks:function(){return p},getStream:function(b,c,f,e){return this.getEntities(this.constructUrl(a.ActivityStreamUrls.activityStreamBaseUrl+"{authType}"+a.ActivityStreamUrls.activityStreamRestUrl+"{userType}/{groupType}/{appType}",{},{authType:this.endpoint.authType,userType:b||a.ASUser.PUBLIC,groupType:c||a.ASGroup.ALL,appType:f||a.ASApplication.STATUS}),{method:"GET",handleAs:"json",query:e||{}},this.getActivityStreamCallbacks())},
getAllUpdates:function(b){return this.getStream(a.ASUser.PUBLIC,a.ASGroup.ALL,a.ASApplication.ALL,b)},getMyStatusUpdates:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.ALL,a.ASApplication.STATUS,b)},getStatusUpdatesFromMyNetwork:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.FRIENDS,a.ASApplication.STATUS,b)},getUpdatesFromMyNetwork:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.FRIENDS,a.ASApplication.ALL,b)},getUpdatesFromPeopleIFollow:function(b){return this.getStream(a.ASUser.ME,
a.ASGroup.FOLLOWING,a.ASApplication.STATUS,b)},getUpdatesFromCommunitiesIFollow:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.ALL,a.ASApplication.COMMUNITIES,b)},getUpdatesFromCommunity:function(b,c){var f=this._validateCommunityUuid(b);return f?f:this.getStream(a.ASUser.COMMUNITY+b,a.ASGroup.ALL,a.ASApplication.ALL,c)},getUpdatesFromUser:function(b,c){var f=this._validateUserId(b);return f?f:this.getStream(b,a.ASGroup.INVOLVED,a.ASApplication.ALL,c)},getNotificationsForMe:function(b){return this.getStream(a.ASUser.ME,
a.ASGroup.RESPONSES,a.ASApplication.ALL,b)},getNotificationsFromMe:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.NOTESFROMME,a.ASApplication.ALL,b)},getResponsesToMyContent:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.RESPONSES,a.ASApplication.ALL,b)},getMyActionableItems:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.ACTIONS,a.ASApplication.ALL,b)},getMyActionableItemsForApplication:function(b,c){var f=this._validateApplicationName(b);return f?f:this.getStream(a.ASUser.ME,
a.ASGroup.ACTIONS,b,c)},getMySavedItems:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.SAVED,a.ASApplication.ALL,b)},getMySavedItemsForApplication:function(b,c){var f=this._validateApplicationName(b);return f?f:this.getStream(a.ASUser.ME,a.ASGroup.SAVED,b,c)},searchByQuery:function(a){var b=this._validateSearchQuery(a);return b?b:this.getStream(null,null,null,{query:a})},searchByFilters:function(a,b){var c=this._validateSearchQuery(a);if(c||(c=this._validateSearchFilters(b)))return c;c={};
c.query=a;c.filters=b;return this.getStream(null,null,null,c)},searchByTags:function(a){var b=this._validateSearchTags(a);if(b)return b;b={};b.filters="[{'type':'tag','values':['"+a+"']}]";return this.getStream(null,null,null,b)},searchByPattern:function(a){var b=this._validateSearchTags(a);if(b)return b;b={};b.custom=a;return this.getStream(null,null,null,b)},postEntry:function(b,c,f,e,g){c=a.ActivityStreamUrls.activityStreamBaseUrl+this.endpoint.authType+a.ActivityStreamUrls.activityStreamRestUrl+
(c||a.ASUser.ME)+"/"+(f||a.ASGroup.ALL)+"/"+(e||a.ASApplication.ALL);b={method:"POST",query:g||{},handleAs:"json",headers:{"Content-Type":"application/json"},data:q.stringify(b)};return this.updateEntity(c,b,{createEntity:function(a,b){return b}},g)},postMicroblogEntry:function(b,c,f,e,g){if("string"==typeof b)b={content:b};else if("object"!=typeof b)return this.createBadRequestPromise("Invalid argument with postMicroblogEntry, expected String or Object");c=a.ActivityStreamUrls.activityStreamBaseUrl+
this.endpoint.authType+a.ActivityStreamUrls.activityStreamUBlogRestUrl+(c||a.ASUser.ME)+"/"+(f||a.ASGroup.ALL)+"/"+(e||"");b={method:"POST",query:g||{},handleAs:"json",headers:{"Content-Type":"application/json"},data:q.stringify(b)};return this.updateEntity(c,b,{createEntity:function(a,b){return b}},g)},_validateCommunityUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateSearchQuery:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},
_validateApplicationName:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected application name.")},_validateSearchTags:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateSearchFilters:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateUserId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userId.")}})})},
"sbt/base/DataHandler":function(){define(["../declare","../lang"],function(h,g){return h(null,{dataType:null,data:null,constructor:function(c){g.mixin(this,c)},setData:function(c){this.data=c},getData:function(){return this.data},getAsString:function(){return null},getAsNumber:function(){return null},getAsDate:function(){return null},getAsBoolean:function(){return null},getAsArray:function(){return null},getEntityId:function(){return null},getEntityData:function(){return data},getSummary:function(){return null},
getEntitiesDataArray:function(){return[]},toJson:function(){}})})},"sbt/dom":function(){define(["./_bridge/dom"],function(h){return h})},"sbt/authenticator/templates/messageSSO":function(){},"sbt/connections/ConnectionsService":function(){define("../declare,../config,../Promise,./ConnectionsConstants,../base/BaseService,../base/AtomEntity,../base/XmlDataHandler,../xpath".split(","),function(h,g,c,e,b,a,i,k){var m=h(i,{getSummary:function(){for(var a=this._selectArray("language"),b=this._selectArray("languageLabels"),
c=[],e=0;e<a.length;e++)c.push({label:b[e],term:a[e]});if(!this._summary)this._summary={isEmailExposed:"email-exposed"==k.selectText(this.data,this._getXPath("emailConfig"),this.namespaces)?"true":"false",displayLanguages:c};return this._summary}}),q=h(a,{xpath:e.ServiceConfigXPath,namespaces:e.Namespaces,categoryScheme:'<category term="service-config" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',constructor:function(){},getAlternateSSLUrl:function(){return this.getAsString("alternateSSLUrl")}});
h(a,{xpath:e.MemberXPath,namespaces:e.Namespaces,categoryScheme:'<category term="person" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',constructor:function(){},getRole:function(){return this.getAsString("role")}});h(a,{xpath:e.ReportEntryXPath,namespaces:e.Namespaces,constructor:function(){},getCategoryIssue:function(){return this.getAsString("categoryIssue")},getReportedItemLink:function(){return this.getAsString("reportItemLink")},getRelatedLink:function(){return this.getAsString("relatedLink")},
getReferredEntryId:function(){return this.getAsString("inRefTo")}});h(a,{xpath:e.ModerationActionEntryXPath,namespaces:e.Namespaces,constructor:function(){},getModerationAction:function(){return this.getAsString("moderationAction")},getRelatedLink:function(){return this.getAsString("relatedLink")},getReferredEntryId:function(){return this.getAsString("inRefTo")}});var o={createEntities:function(a,b){return new m({service:a,data:b,namespaces:e.Namespaces,xpath:e.ConnectionsServiceDocsFeedXPath})},
createEntity:function(a,b,c){return new q({service:a,data:b,response:c})}};return h(b,{constructor:function(){if(!this.endpoint)this.endpoint=g.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getServiceConfigEntries:function(a){a={method:"GET",handleAs:"text",query:a||{}};url=this.constructUrl(e.ServiceConfigs,null,{service:this.serviceName});return this.getEntities(url,a,o)}})})},"sbt/store/parameter":function(){define(["../stringUtil","../config"],
function(){var h={defaultFormat:function(c,e){return c.key+"="+e},sortField:function(c){return function(e,b){return e.key+"="+(c[b]||"")}},ascSortOrderBoolean:function(c,e){return c.key+"="+("asc"===e?!0:!1)},sortOrder:function(c,e){return c.key+"="+("asc"===e?"desc":"asc")},oneBasedInteger:function(c,e){var b=Math.floor(e);1>b&&(b=1);return c.key+"="+b},zeroBaseInteger:function(c,e){var b=Math.floor(e);0>b&&(b=0);return c.key+"="+b}},g=function(c){var e=this;this.key=c.key;var b=c.format||h.defaultFormat;
this.format=function(a){return b(e,a)}};return{defaultFormat:function(c){return new g({key:c,format:h.defaultFormat})},sortField:function(c,e){return new g({key:c,format:h.sortField(e)})},sortOrder:function(c){return new g({key:c,format:h.sortOrder})},booleanSortOrder:function(c){return new g({key:c,format:h.ascSortOrderBoolean})},zeroBasedInteger:function(c){return new g({key:c,format:h.zeroBasedInteger})},oneBasedInteger:function(c){return new g({key:c,format:h.oneBasedInteger})}}})},"sbt/url":function(){define(["./declare"],
function(h){var g=/^(?:([A-z]+)(:))?(\/\/)(?:([^?#]*)(:)([^?#]*)(@))?([\w.\-]+)(?:(:)(\d{0,5}))?([\w.\/\-]+)?(?:(\?)([^?#]*))?(?:(#)(.*))?$/;return h(null,{_resultStore:[],_ensureDelimiter:function(c,e,b){!c&&this._resultStore[e]?this._resultStore[e]=void 0:c&&!this._resultStore[e]&&(this._resultStore[e]=b)},constructor:function(c){this.setUrl(c)},getUrl:function(){return this._resultStore.slice(1).join("")},setUrl:function(c){this._resultStore=g.exec(c)},getScheme:function(){return this._resultStore[1]},
setScheme:function(c,e){this._ensureDelimiter(c,2,":");!e||c?this._ensureDelimiter(c,3,"//"):this._resultStore[3]="//";this._resultStore[1]=c},getUser:function(){return this._resultStore[4]},setUser:function(c){this._ensureDelimiter(c,7,"@");this._resultStore[4]=c},getPassword:function(){return this._resultStore[6]},setPassword:function(c){this._ensureDelimiter(c,5,":");this._resultStore[6]=c},getHostName:function(){return this._resultStore[8]},setHostName:function(c){this._resultStore[8]=c},getPort:function(){return this._resultStore[10]},
setPort:function(c){this._ensureDelimiter(c,9,":");this._resultStore[10]=c},getQuery:function(){return this._resultStore[13]},setQuery:function(c){this._ensureDelimiter(c,12,"?");this._resultStore[13]=c},getFragment:function(){return this._resultStore[15]},setFragment:function(c){this._ensureDelimiter(c,14,"#");this._resultStore[15]=c},getBaseUrl:function(){return this._resultStore.slice(1,13).join("")}})})},"sbt/ErrorTransport":function(){define("./declare,./lang,./Promise,./stringUtil,./log,sbt/i18n!sbt/nls/ErrorTransport".split(","),
function(h,g,c,e,b,a){return h(null,{_called:!1,_endpointName:null,_message:null,constructor:function(b,c){this._endpointName=b;this._message=c?c:e.substitute(a.endpoint_not_available,[b])},request:function(){if(!this._called)alert(this._message),this._called=!0;var a=new c,b=Error(this._message);b.status=400;a.rejected(b);return a},xhr:function(a,c){if(!this._called)b.error(this._message),this._called=!0;var e=c.handle,h=c.error;if(g.isFunction(h)||g.isFunction(e)){var o=Error(this._message);o.status=
400;g.isFunction(h)&&h(o);g.isFunction(e)&&e(o)}}})})},"sbt/_bridge/ready":function(){define(["dojo/ready"],function(h){return function(g){h(g)}})},"sbt/base/core":function(){define(["../config"],function(){return{namespaces:{o:"http://ns.opensocial.org/2008/opensocial",app:"http://www.w3.org/2007/app",thr:"http://purl.org/syndication/thread/1.0",fh:"http://purl.org/syndication/history/1.0",snx:"http://www.ibm.com/xmlns/prod/sn",opensearch:"http://a9.com/-/spec/opensearch/1.1/",a:"http://www.w3.org/2005/Atom",
h:"http://www.w3.org/1999/xhtml",td:"urn:ibm.com/td",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",ibmsc:"http://www.ibm.com/search/content/2010",xhtml:"http://www.w3.org/1999/xhtml"},feedXPath:{entry:"/a:feed/a:entry",entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"},entryXPath:{title:"a:title",summaryText:"a:summary[@type='text']",selfUrl:"a:link[@rel='self']/@href",
terms:"a:category/@term",contentHtml:"a:content[@type='html']",published:"a:published",updated:"a:updated",authorId:"a:author/snx:userid",contributorId:"a:contributor/snx:userid"}}})},"sbt/connections/ActivityStreamConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin({},g,{ASUser:{ME:"@me",PUBLIC:"@public",COMMUNITY:"urn:lsid:lconn.ibm.com:communities.community:",UBLOG:"ublog"},ASGroup:{ALL:"@all",FOLLOWING:"@following",FRIENDS:"@friends",SELF:"@self",INVOLVED:"@involved",
NOTESFORME:"@notesforme",NOTESFROMME:"@notesfromme",RESPONSES:"@responses",ACTIONS:"@actions",SAVED:"@saved"},ASApplication:{ALL:"@all",COMMUNITIES:"@communities",TAGS:"@tags",PEOPLE:"@people",STATUS:"@status",NOTESFORME:"@notesforme",NOTESFROMME:"@notesfromme",RESPONSES:"@responses",COMMENTS:"comments"},Verb:{ACCEPT:"accept",ACCESS:"access",ACKNOWLEDGE:"acknowledge",ADD:"add",AGREE:"agree",APPEND:"append",APPROVE:"approve",ARCHIVE:"archive",ASSIGN:"assign",AT:"at",ATTACH:"attach",ATTEND:"attend",
AUTHOR:"author",AUTHORIZE:"authorize",BORROW:"borrow",BUILD:"build",CANCEL:"cancel",CLOSE:"close",COMMENT:"comment",COMPLETE:"complete",CONFIRM:"confirm",CONSUME:"consume",CHECKIN:"checkin",CREATE:"create",DELETE:"delete",DELIVER:"deliver",DENY:"deny",DISAGREE:"disagree",DISLIKE:"dislike",EXPERIENCE:"experience",FAVORITE:"favorite",FIND:"find",FLAG_AS_INAPPROPRIATE:"flag-as-inappropriate",FOLLOW:"follow",GIVE:"give",HOST:"host",IGNORE:"ignore",INSERT:"insert",INSTALL:"install",INTERACT:"interact",
INVITE:"invite",JOIN:"join",LEAVE:"leave",LIKE:"like",LISTEN:"listen",LOSE:"lose",MAKE_FRIEND:"make-friend",OPEN:"open",POST:"post",PLAY:"play",PRESENT:"present",PURCHASE:"purchase",QUALIFY:"qualify",READ:"read",RECEIVE:"receive",REJECT:"reject",REMOVE:"remove",REMOVE_FRIEND:"remove-friend",REPLACE:"replace",REQUEST:"request",REQUEST_FRIEND:"request-friend",RESOLVE:"resolve",RETURN:"return",RETRACT:"retract",RSVP_MAYBE:"rsvp-maybe",RSVP_NO:"rsvp-no",RSVP_YES:"rsvp-yes",SATISFY:"satisfy",SAVE:"save",
SCHEDULE:"schedule",SEARCH:"search",SELL:"sell",SEND:"send",SHARE:"share",SPONSOR:"sponsor",START:"start",STOP_FOLLOWING:"stop-following",SUBMIT:"submit",TAG:"tag",TERMINATE:"terminate",TIE:"tie",UNFAVORITE:"unfavorite",UNLIKE:"unlike",UNSAVE:"unsave",UNSATISFY:"unsatisfy",UNSHARE:"unshare",UPDATE:"update",USE:"use",WATCH:"watch",WIN:"win"},ActivityStreamUrls:{activityStreamBaseUrl:"/${connections}/opensocial/",activityStreamRestUrl:"/rest/activitystreams/",activityStreamUBlogRestUrl:"/rest/ublog/"},
errorMessages:{args_object:"argument passed to get stream should be an Object",required_communityid:"Community ID is required"}})})},"sbt/_bridge/lang":function(){define(["dojo/_base/lang"],function(h){return{mixin:function(g,c){return h.mixin.apply(this,arguments)},isArray:function(g){return h.isArray(g)},isString:function(g){return h.isString(g)},isFunction:function(g){return"function"==typeof g},isObject:function(g){return"object"==typeof g},clone:function(g){return h.clone(g)},concatPath:function(){var g=
arguments;1==g.length&&this.isArray(g[0])&&(g=g[0]);for(var c="",e=0;e<g.length;e++){var b=g[e].toString();c&&(c+="/");c+="/"==b.charAt(0)?b.substring(1):b}return c},trim:function(g){return h.trim(g)},getObject:function(g,c,e){return h.getObject(g,c,e)},hitch:function(g,c){return h.hitch(g,c)}}})},"sbt/connections/nls/ProfileService":function(){define({root:{invalid_argument:"Invalid Argument"}})},"sbt/connections/ForumService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./ForumConstants,../base/BaseService,../base/AtomEntity,../base/XmlDataHandler".split(","),
function(h,g,c,e,b,a,i,k,m){var q=h(k,{xpath:a.ForumXPath,contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="forum-forum"></category>',constructor:function(){},createEntryData:function(){if(!this.getCommunityUuid())return"";var a=e.transform('<snx:communityUuid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${getCommunityUuid}</snx:communityUuid>',this,function(a){return a},this);return e.trim(a)},getForumUuid:function(){var a=this.getAsString("forumUuid");
return d(a)},setForumUuid:function(a){return this.setAsString("forumUuid",a)},getCommunityUuid:function(){return this.getAsString("communityUuid")},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getModeration:function(){return this.getAsDate("moderation")},getThreadCount:function(){return this.getAsNumber("threadCount")},getForumUrl:function(){return this.getAlternateUrl()},getTopics:function(a){return this.service.getTopics(this.getForumUuid(),a)},getTags:function(){return this.getAsArray("tags")},
setTags:function(a){return this.setAsArray("tags",a)},load:function(b){var d=this.getForumUuid(),f=this.service._validateForumUuid(d);if(f)return f;var e=this,b={handleAs:"text",query:c.mixin({forumUuid:d},b||{})};return this.service.getEntity(a.AtomForum,b,d,{createEntity:function(a,b){e.setData(b);return e}})},remove:function(a){return this.service.deleteForum(this.getForumUuid(),a)},update:function(a){return this.service.updateForum(this,a)},save:function(a){return this.getForumUuid()?this.service.updateForum(this,
a):this.service.createForum(this,a)}}),o=h(k,{xpath:a.ForumTopicXPath,contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="forum-topic"></category>',constructor:function(){},createEntryData:function(){var b="";this.isPinned()&&(b+=e.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="${flag}"></category>',this,function(){return a.FlagPinned},this));this.isLocked()&&(b+=e.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="${flag}"></category>',
this,function(){return a.FlagLocked},this));this.isQuestion()&&(b+=e.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="${flag}"></category>',this,function(){return a.FlagQuestion},this));return e.trim(b)},getTopicUuid:function(){var a=this.getAsString("topicUuid");return d(a)},setTopicUuid:function(a){return this.setAsString("topicUuid",a)},getForumUuid:function(){var a=this.getAsString("forumUuid");return d(a)},setForumUuid:function(a){return this.setAsString("forumUuid",
a)},getCommunityUuid:function(){return this.getAsString("communityUuid")},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getTopicUrl:function(){return this.getAsString("alternateUrl")},getPermisisons:function(){return this.getAsString("permissions")},isPinned:function(){return this.getAsBoolean("pinned")},setPinned:function(a){return this.setAsBoolean("pinned",a)},isLocked:function(){return this.getAsBoolean("locked")},setLocked:function(a){return this.setAsBoolean("locked",
a)},isQuestion:function(){return this.getAsBoolean("question")},setQuestion:function(a){return this.setAsBoolean("question",a)},isAnswered:function(){return this.getAsBoolean("answered")},isNotRecommendedByCurrentUser:function(){return this.getAsBoolean("notRecommendedByCurrentUser")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getRecommendationsUrl:function(){return this.getAsString("recommendationsUrl")},getRecommendations:function(a){return this.service.getForumRecommendations(this.getTopicUuid(),
a)},getReplies:function(a){return this.service.getForumTopicReplies(this.getTopicUuid(),a)},createRecommendation:function(a){return this.service.createForumRecommendation(this.getTopicUuid(),a)},deleteRecommendation:function(a){return this.service.deleteForumRecommendation(this.getTopicUuid(),a)},load:function(b){var d=this.getTopicUuid(),f=this.service._validateTopicUuid(d);if(f)return f;var e=this,b={handleAs:"text",query:c.mixin({topicUuid:d},b||{})};return this.service.getEntity(a.AtomTopic,b,
d,{createEntity:function(a,b){e.setData(b);return e}})},remove:function(a){return this.service.deleteForumTopic(this.getTopicUuid(),a)},update:function(a){return this.service.updateForumTopic(this,a)},save:function(a){return this.getTopicUuid()?this.service.updateForumTopic(this,a):this.service.createForumTopic(this,a)}}),n=h(k,{xpath:a.ForumReplyXPath,contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="forum-reply"></category>',constructor:function(){},
createEntryData:function(){if(!this.getTopicUuid())return"";var b="";this.isAnswer()&&(b+=e.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="${flag}"></category>',this,function(){return a.FlagAnswer},this));b+=e.transform('<thr:in-reply-to xmlns:thr="http://purl.org/syndication/thread/1.0" ref="urn:lsid:ibm.com:forum:${getTopicUuid}" type="application/atom+xml" href=""></thr:in-reply-to>',this,function(a){return a},this);return e.trim(b)},getReplyUuid:function(){var a=this.getAsString("replyUuid");
return d(a)},setReplyUuid:function(a){return this.setAsString("replyUuid",a)},getTopicUuid:function(){var a=this.getAsString("topicUuid");return d(a)},setTopicUuid:function(a){return this.setAsString("topicUuid",a)},getReplyToPostUuid:function(){var a=this.getAsString("replyTo");return d(a)},setReplyToPostUuid:function(a){return this.setAsString("replyTo",a)},getReplyUrl:function(){return this.getAlternateUrl()},getPermisisons:function(){return this.getAsString("permissions")},isAnswer:function(){return this.getAsBoolean("answer")},
setAnswer:function(a){return this.setAsBoolean("answer",a)},isNotRecommendedByCurrentUser:function(){return this.getAsBoolean("notRecommendedByCurrentUser")},getRecommendationsUrl:function(){return this.getAsString("recommendationsUrl")},getRecommendations:function(a){return this.service.getForumRecommendations(this.getReplyUuid(),a)},getReplies:function(a){return this.service.getForumReplyReplies(this.getReplyUuid(),a)},createRecommendation:function(a){return this.service.createForumRecommendation(this.getReplyUuid(),
a)},deleteRecommendation:function(a){return this.service.deleteForumRecommendation(this.getReplyUuid(),a)},load:function(b){var d=this.getReplyUuid(),f=this.service._validateReplyUuid(d);if(f)return f;var e=this,b={handleAs:"text",query:c.mixin({replyUuid:d},b||{})};return this.service.getEntity(a.AtomReply,b,d,{createEntity:function(a,b){e.setData(b);return e}})},remove:function(a){return this.service.deleteForumReply(this.getReplyUuid(),a)},update:function(a){return this.service.updateForumReply(this,
a)},save:function(a){return this.getReplyUuid()?this.service.updateForumReply(this,a):this.service.createForumReply(this,a)}});h(k,{categoryScheme:null,constructor:function(){}});var p=h(k,{xpath:a.ForumRecommendationXPath,contentType:"text",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="recommendation"></category>',constructor:function(){},getTitle:function(){return this.getAsString("title")||"liked"},getRecommendationUuid:function(){var a=this.getAsString("id");return d(a)},
getPostUuid:function(){var a=this.getAsString("postUuid");return this.service.getUrlParameter(a,"postUuid")||a},setPostUuid:function(a){return this.setAsString("postUuid",a)}});h(k,{categoryScheme:null,constructor:function(){}});var d=function(a){return a&&0==a.indexOf("urn:lsid:ibm.com:forum:")?a.substring(23):a},r={createEntities:function(b,c){return new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new q({service:a,data:b})}},f={createEntities:function(b,
c){return new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new o({service:a,data:b})}},s={createEntities:function(b,c){return new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new n({service:a,data:b})}},t={createEntities:function(b,c){return new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new p({service:a,data:b})}};return h(i,
{contextRootMap:{forums:"forums"},constructor:function(){if(!this.endpoint)this.endpoint=g.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},newForum:function(a){return this._toForum(a)},newForumTopic:function(a){return this._toForumTopic(a)},newForumReply:function(a){return this._toForumReply(a)},getMyForums:function(b){return this.getEntities(a.AtomForumsMy,{method:"GET",handleAs:"text",query:b||{}},r)},getMyTopics:function(b){return this.getEntities(a.AtomTopicsMy,
{method:"GET",handleAs:"text",query:b||{}},f)},getAllForums:function(b){return this.getEntities(a.AtomForums,{method:"GET",handleAs:"text",query:b||{}},r)},getPublicForums:function(b){return this.getEntities(a.AtomForumsPublic,{method:"GET",handleAs:"text",query:b||{}},r)},getForumTopics:function(b,d){var e=this._validateForumUuid(b);if(e)return e;e={method:"GET",handleAs:"text",query:c.mixin({forumUuid:b},d||{})};return this.getEntities(a.AtomTopics,e,f)},getCommunityForumTopics:function(b,d){var e=
this._validateCommunityUuid(b);if(e)return e;e={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},d||{})};return this.getEntities(a.AtomTopics,e,f)},getForumRecommendations:function(b,d){var f=this._validatePostUuid(b);if(f)return f;f={method:"GET",handleAs:"text",query:c.mixin({postUuid:b},d||{})};return this.getEntities(a.AtomRecommendationEntries,f,t)},getForumTopicReplies:function(b,d){var f=this._validateTopicUuid(b);if(f)return f;f={method:"GET",handleAs:"text",query:c.mixin({topicUuid:b},
d||{})};return this.getEntities(a.AtomReplies,f,s)},getForumReplyReplies:function(b,d){var f=this._validateReplyUuid(b);if(f)return f;f={method:"GET",handleAs:"text",query:c.mixin({replyUuid:b},d||{})};return this.getEntities(a.AtomReplies,f,s)},getForumReplies:function(b){return this.getEntities(a.AtomReplies,{method:"GET",handleAs:"text",query:b},s)},getForums:function(b){return this.getEntities(a.AtomForums,{method:"GET",handleAs:"text",query:b||{}},r)},getForum:function(a,b){return(new q({service:this,
_fields:{forumUuid:a}})).load(b)},createForum:function(b,c){var d=this._toForum(b),f=this._validateForum(d,!1,c);if(f)return f;f={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:d.createPostData()};return this.updateEntity(a.AtomForumsMy,f,{createEntity:function(a,b,c){d.setData(b);a=this.getLocationParameter(c,"forumUuid");d.setForumUuid(a);return d}},c)},updateForum:function(b,d){var f=this._toForum(b),e=this._validateForum(f,!0,d);if(e)return e;e={method:"PUT",query:c.mixin({forumUuid:f.getForumUuid()},
d||{}),headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(a.AtomForum,e,{createEntity:function(a,b){var c=f.getForumUuid();f.setData(b);f.setForumUuid(c);return f}},d)},deleteForum:function(b,d){var f=this._validateForumUuid(b);if(f)return f;f={method:"DELETE",query:c.mixin({forumUuid:b},d||{}),handleAs:"text"};return this.deleteEntity(a.AtomForum,f,b)},getForumTopic:function(a,b){return(new o({service:this,_fields:{topicUuid:a}})).load(b)},createForumTopic:function(b,d){var f=
this._toForumTopic(b),e=this._validateForumTopic(f,!1,d);if(e)return e;e={method:"POST",query:c.mixin({forumUuid:f.getForumUuid()},d||{}),headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(a.AtomTopics,e,{createEntity:function(a,b,c){a=this.getLocationParameter(c,"topicUuid");f.setTopicUuid(a);f.setData(b);return f}},d)},updateForumTopic:function(b,d){var f=this._toForumTopic(b),e=this._validateForumTopic(f,!0,d);if(e)return e;e={method:"PUT",query:c.mixin({topicUuid:f.getTopicUuid()},
d||{}),headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(a.AtomTopic,e,{createEntity:function(a,b){var c=f.getTopicUuid();f.setData(b);f.setTopicUuid(c);return f}},d)},deleteForumTopic:function(b,d){var f=this._validateTopicUuid(b);if(f)return f;f={method:"DELETE",query:c.mixin({topicUuid:b},d||{}),handleAs:"text"};return this.deleteEntity(a.AtomTopic,f,b)},getForumReply:function(a,b){return(new n({service:this,_fields:{replyUuid:a}})).load(b)},createForumReply:function(b,
c){var d=this._toForumReply(b),f=this._validateForumReply(d,!1,c);if(f)return f;f={method:"POST",query:c||{topicUuid:d.getTopicUuid()},headers:a.AtomXmlHeaders,data:d.createPostData()};return this.updateEntity(a.AtomReplies,f,{createEntity:function(a,b,c){a=this.getLocationParameter(c,"replyUuid");d.setReplyUuid(a);d.setData(b);return d}},c)},updateForumReply:function(b,d){var f=this._toForumReply(b),e=this._validateForumReply(f,!0,d);if(e)return e;e={method:"PUT",query:c.mixin({replyUuid:f.getReplyUuid()},
d||{}),headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(a.AtomReply,e,{createEntity:function(a,b){var c=f.getReplyUuid();f.setData(b);f.setReplyUuid(c);return f}},d)},deleteForumReply:function(b,d){var f=this._validateReplyUuid(b);if(f)return f;f={method:"DELETE",query:c.mixin({replyUuid:b},d||{}),handleAs:"text"};return this.deleteEntity(a.AtomReply,f,b)},getForumRecommendation:function(a,b){return(new p({service:this,_fields:{postUuid:a}})).load(b)},createForumRecommendation:function(b,
c){var d=this._toForumRecommendation(b),f=this._validateForumRecommendation(d,!1,c);if(f)return f;f={method:"POST",query:c||{postUuid:d.getPostUuid()},headers:a.AtomXmlHeaders,data:d.createPostData()};return this.updateEntity(a.AtomRecommendationEntries,f,{createEntity:function(a,b){d.setData(b);return d}},c)},deleteForumRecommendation:function(b,d){var f=this._validatePostUuid(b);if(f)return f;f={method:"DELETE",query:c.mixin({postUuid:b},d||{}),handleAs:"text"};return this.deleteEntity(a.AtomRecommendationEntries,
f,b)},_validateForum:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, forum with title must be specified.");if(b&&!a.getForumUuid())return this.createBadRequestPromise("Invalid argument, forum with UUID must be specified.")},_validateForumTopic:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, forum topic with title must be specified.");if(b&&!a.getTopicUuid())return this.createBadRequestPromise("Invalid argument, forum topic with UUID must be specified.")},
_validateForumReply:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, forum reply with title must be specified.");if(b&&!a.getReplyUuid())return this.createBadRequestPromise("Invalid argument, forum reply with UUID must be specified.")},_validateForumRecommendation:function(a,b){if(!a||!a.getPostUuid())return this.createBadRequestPromise("Invalid argument, forum recommendation with postUuid must be specified.");if(b&&!a.getRecommendationUuid())return this.createBadRequestPromise("Invalid argument, forum recommendation with UUID must be specified.")},
_validateForumUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected forumUuid.")},_validateCommunityUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validatePostUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected postUuid.")},_validateTopicUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected topicUuid.")},
_validateReplyUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected replyUuid.")},_toForum:function(a){if(a instanceof q)return a;c.isString(a)&&(a={forumUuid:a});return new q({service:this,_fields:c.mixin({},a)})},_toForumTopic:function(a){if(a instanceof o)return a;c.isString(a)&&(a={forumTopicUuid:a});return new o({service:this,_fields:c.mixin({},a)})},_toForumReply:function(a){if(a instanceof n)return a;c.isString(a)&&(a={forumReplyUuid:a});return new n({service:this,
_fields:c.mixin({},a)})},_toForumRecommendation:function(a){if(a instanceof p)return a;c.isString(a)&&(a={postUuid:a});a instanceof o&&(a={postUuid:a.getTopicUuid()});a instanceof n&&(a={postUuid:a.getReplyUuid()});return new p({service:this,_fields:c.mixin({},a)})}})})},"sbt/connections/nls/CommunityService":function(){define({root:{invalid_argument:"Invalid Argument"}})},"sbt/connections/BlogConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin({},g,{BlogFeedXPath:g.ConnectionsFeedXPath,
RecommendersFeedXpath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/os:totalResults"},BlogNamespaces:{a:"http://www.w3.org/2005/Atom",app:"http://www.w3.org/2007/app",snx:"http://www.ibm.com/xmlns/prod/sn"},BlogXPath:h.mixin({},g.AtomEntryXPath,{blogUuid:"a:id",handle:"snx:handle",timezone:"snx:timezone",rank:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",categoryupdates:"a:category[@term='updates']",categoryfaq:"a:category[@term='faq']",categorywith:"a:category[@term='with']",
categoryshared:"a:category[@term='shared']"}),BlogPostXPath:h.mixin({},g.AtomEntryXPath,{postUuid:"a:id",replies:"a:link[@rel='replies']/@href",recomendationsUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/recommendations']/@href",rankRecommendations:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",rankComment:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",rankHit:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/hit']",sourceId:"a:source/a:id",sourceTitle:"a:source/a:title ",
sourceLink:"a:source/a:link[@rel='self']/@href",sourceLinkAlternate:"a:source/a:link[@rel='alternate']/@href",sourceUpdated:"a:source/a:updated",sourceCategory:"a:source/a:link[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",blogHandle:"blogHandle"}),CommentXPath:h.mixin({},g.AtomEntryXPath,{commentUuid:"a:id",commentUrl:"a:link[@rel='self']/@href",recomendationsUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/recommendations']/@href",trackbacktitle:"snx:trackbacktitle",replyTo:"thr:in-reply-to/@ref",
replyToSource:"thr:in-reply-to/@source",rankRecommendations:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",sourceId:"a:source/a:id",sourceTitle:"a:source/a:title ",sourceLink:"a:source/a:link[@rel='self']/@href",sourceLinkAlternate:"a:source/a:link[@rel='alternate']/@href",blogHandle:"blogHandle",blogPostUuid:"blogPostUuid"}),RecommendersXPath:h.mixin({},g.AtomEntryXPath,{recommenderUuid:"a:id",category:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term"}),
AtomBlogsAll:"/${blogs}/${blogHomepageHandle}/feed/blogs/atom",AtomBlogsMy:"/${blogs}/${blogHomepageHandle}/api/blogs",AtomBlogInstance:"/${blogs}/${blogHomepageHandle}/api/blogs/{blogUuid}",AtomBlogPostInstance:"/${blogs}/${blogHomepageHandle}/api/entries/{postUuid}",AtomEntriesAll:"/${blogs}/${blogHomepageHandle}/feed/entries/atom",AtomBlogEntries:"/${blogs}/{blogHandle}/feed/entries/atom",AtomBlogComments:"/${blogs}/{blogHandle}/feed/comments/atom",AtomBlogCommentsAll:"/${blogs}/${blogHomepageHandle}/feed/comments/atom",
AtomBlogsFeatured:"/${blogs}/${blogHomepageHandle}/feed/featuredblogs/atom",AtomBlogsPostsFeatured:"/${blogs}/${blogHomepageHandle}/feed/featured/atom",AtomBlogsPostsRecommended:"/${blogs}/${blogHomepageHandle}/feed/recommended/atom",AtomBlogsTags:"/${blogs}/${blogHomepageHandle}/feed/tags/atom",AtomBlogTags:"/${blogs}/{blogHandle}/feed/tags/atom",AtomBlogCreate:"/${blogs}/${blogHomepageHandle}/api/blogs",AtomBlogEditDelete:"/${blogs}/${blogHomepageHandle}/api/blogs/{blogUuid}",AtomBlogPostCreate:"/${blogs}/{blogHandle}/api/entries",
AtomBlogPostEditDelete:"/${blogs}/{blogHandle}/api/entries/{postUuid}",AtomBlogCommentCreate:"/${blogs}/{blogHandle}/api/entrycomments/{postUuid}",AtomBlogCommentEditRemove:"/${blogs}/{blogHandle}/api/comments/{commentUuid}",AtomRecommendBlogPost:"/${blogs}/{blogHandle}/api/recommend/entries/{postUuid}"})})},"sbt/nls/messageSSO":function(){define({root:{message_title:"ReAuthenticate",message:"Authentication expired, Please login again.",relogin_button_text:"Re-Login"}})},"sbt/connections/ConnectionsConstants":function(){define(["../lang",
"../base/BaseConstants"],function(h,g){return h.mixin(g,{BadRequest:400,ConnectionsFeedXPath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"},ConnectionsServiceDocsFeedXPath:{entries:"/a:feed/a:entry",emailConfig:"/a:feed/a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/configuration']/@term",language:"/a:feed/a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/language']/@term",
languageLabels:"/a:feed/a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/language']/@label"},AuthTypes:{OAuth:"oauth",Basic:"basic"},TagsXPath:{entries:"app:categories/a:category",term:"@term",frequency:"@snx:frequency",uid:"@term"},ServiceConfigXPath:h.mixin({},g.AtomEntryXPath,{alternateSSLUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/alternate-ssl']/@href"}),MemberXPath:h.mixin({},g.AtomEntryXPath,{role:"snx:role"}),ReportEntryXPath:h.mixin({},g.AtomEntryXPath,{categoryIssue:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/issue']/@term",
reportItemLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/report-item']/@href",relatedLink:"a:link[@rel='related']/@href",inRefTo:"snx:in-ref-to[@rel='http://www.ibm.com/xmlns/prod/sn/report-item']/@ref"}),ModerationActionEntryXPath:h.mixin({},g.AtomEntryXPath,{moderationAction:"snx:moderation/action",relatedLink:"a:link[@rel='related']/@href",inRefTo:"snx:in-ref-to[@rel='http://www.ibm.com/xmlns/prod/sn/report-item']/@ref"}),ServiceConfigs:"/{service}/serviceconfigs"})})},"sbt/authenticator/Basic":function(){define(["../declare",
"../lang","../util","../i18n!../nls/loginForm"],function(h,g,c,e){return h(null,{loginUi:"",loginPage:"/sbt/authenticator/templates/login.html",dialogLoginPage:"authenticator/templates/loginDialog.html",url:"",constructor:function(b){g.mixin(this,b||{})},authenticate:function(b){var a=this;require(["sbt/config"],function(c){var e=b.loginUi||c.Properties.loginUi||a.loginUi,g=b.loginPage||c.Properties.loginPage||a.loginPage,h=b.dialogLoginPage||c.Properties.dialogLoginPage||a.dialogLoginPage;"popup"==
e?a._authPopup(b,g,c,a.url):"dialog"==e?a._authDialog(b,h,c):a._authMainWindow(b,g,a.url)});return!0},_authDialog:function(b,a,c){require(["sbt/_bridge/ui/BasicAuth_Dialog","sbt/dom"],function(g,h){if(b.cancel)c.cancel=b.cancel;g.show(b,a);h.setText("wrongCredsMessage",e.wrong_creds_message);h.setText("basicLoginFormUsername",e.username);h.setText("basicLoginFormPassword",e.password);h.setAttr(h.byId("basicLoginFormOK"),"value",e.login_ok);h.setAttr(h.byId("basicLoginFormCancel"),"value",e.login_cancel)});
return!0},_authPopup:function(b,a,g,h){var m=b.proxy.proxyUrl,m={actionURL:m.substring(0,m.lastIndexOf("/"))+"/basicAuth/"+b.proxyPath+"/JSApp",redirectURL:"empty",loginUi:"popup",showWrongCredsMessage:"false"},m=c.createQuery(m,"&"),a=h+a+"?"+m,h=c.createQuery({width:window.screen.availWidth/2,height:window.screen.availHeight/2,left:window.screen.availWidth/4,top:window.screen.availHeight/4,menubar:0,toolbar:0,status:0,location:0,scrollbars:1,resizable:1},","),a=window.open(a,"Authentication",h);
if(b.callback)g.callback=b.callback,a.callback=b.callback;if(b.cancel)g.cancel=b.cancel,a.cancel=b.cancel;globalLoginFormStrings=e;globalEndpointAlias=b.name;a.focus();return!0},_authMainWindow:function(b,a,g){var h=b.proxy.proxyUrl,b={actionURL:h.substring(0,h.lastIndexOf("/"))+"/basicAuth/"+b.proxyPath+"/JSApp",redirectURL:document.URL,loginUi:"mainWindow",showWrongCredsMessage:"false",username:e.username,password:e.password,login_ok:e.login_ok,login_cancel:e.login_cancel,wrong_creds_message:e.wrong_creds_message},
b=c.createQuery(b,"&");window.location.href=g+a+"?"+b;return!0}})})},"sbt/connections/BookmarkConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin({},g,{BookmarkFeedXPath:g.ConnectionsFeedXPath,BookmarkXPath:h.mixin({},g.AtomEntryXPath,{BookmarkUuid:"a:id",privateFlag:"a:category[@term='private' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",categoryType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",link:"a:link[not(@rel)]/@href",
linkSame:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/same']/@href",url:"a:link[1]/@href",authorId:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",authorUri:"a:author/a:uri",tags:"a:category[not(@scheme)]/@term",clickcount:"snx:clickcount"}),BookmarkNamespaces:{a:"http://www.w3.org/2005/Atom",snx:"http://www.ibm.com/xmlns/prod/sn"},AtomBookmarksAll:"/${dogear}/atom",AtomBookmarksPopular:"/${dogear}/atom/popular",AtomBookmarksMyNotifications:"/${dogear}/atom/mynotifications",
AtomBookmarksINotifiedMySentNotifications:"/${dogear}/atom/mysentnotifications",AtomBookmarksTags:"/${dogear}/tags",AtomBookmarkCreateUpdateDelete:"/${dogear}/api/app"})})},"sbt/log":function(){define(["./stringUtil"],function(h){var g=function(){return sbt.Properties["js.logging.enabled"]?"true"==sbt.Properties["js.logging.enabled"].toLowerCase():!0},c={DEBUG:1,INFO:2,WARN:3,ERROR:4},e=function(){return c[sbt.Properties["js.logging.level"]?sbt.Properties["js.logging.level"]:"DEBUG"]};return{setLevel:function(b){e=
c[b]},setEnabled:function(b){g=b},debug:function(){if(g&&!(1<e)&&console&&0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=h.substitute(a,b);console.debug?console.debug(b):console.log("DEBUG : "+b)}},info:function(){if(g&&!(2<e)&&console&&0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=h.substitute(a,b);console.info?console.info(b):console.log("INFO : "+b)}},warn:function(){if(g&&!(3<e)&&console&&0<arguments.length){var b=
Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=h.substitute(a,b);console.warn?console.warn(b):console.log("WARN : "+b)}},error:function(){if(g&&console&&0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=h.substitute(a,b);console.error?console.error(b):console.log("ERROR : "+b)}},exception:function(){if(g&&console&&0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=h.substitute(a,b);console.error?console.error("EXCEPTION : "+
b):console.log("EXCEPTION : "+b)}}}})},"sbt/connections/SearchService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,../json,./SearchConstants,../base/BaseService,../base/BaseEntity,../base/AtomEntity,../base/XmlDataHandler".split(","),function(h,g,c,e,b,a,i,k,m,q,o){var n=h(q,{constructor:function(){},getLink:function(){return this.getAsString("link")}}),p=h(q,{constructor:function(){},getRelevance:function(){return this.getAsNumber("relevance")}}),d=h(m,{constructor:function(a){this.dataHandler=
new o({service:a.service,data:a.data,namespaces:c.mixin(i.Namespaces,a.namespaces||{}),xpath:c.mixin(i.FacetValueXPath,a.xpath||this.xpath||{})});this.id=this.getAsString("uid")},getId:function(){var a=this.getAsString("id").split("/");return 1==a.length?a[0]:a[1]},getLabel:function(){return this.getAsString("label")},getWeight:function(){return this.getAsNumber("weight")}}),r={createEntities:function(a,b){return new o({namespaces:i.Namespaces,xpath:i.SearchFeedXPath,service:a,data:b})},createEntity:function(a,
b){return new n({namespaces:i.Namespaces,service:a,data:b})}},f={createEntities:function(a,b){return new o({namespaces:i.Namespaces,xpath:i.SearchFeedXPath,service:a,data:b})},createEntity:function(a,b){return new p({namespaces:i.Namespaces,xpath:i.SearchXPath,service:a,data:b})}},s={createEntities:function(b,d,f){var e=c.mixin({},i.SingleFacetXPath),f=a.parse(f.options.query.facet);e.entries=e.entries.replace("{facet.id}",f.id);return new o({namespaces:i.Namespaces,xpath:e,service:b,data:d})},createEntity:function(a,
b){return new d({namespaces:i.Namespaces,xpath:i.FacetValueXPath,service:a,data:b})}};return h(k,{contextRootMap:{search:"search"},constructor:function(){if(!this.endpoint)this.endpoint=g.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getScopes:function(a){return this.getEntities(i.AtomScopes,{method:"GET",handleAs:"text",query:a||{}},r)},getResults:function(a,b){var b=this._stringifyRequestArgs(b),d={method:"GET",handleAs:"text",query:c.mixin({query:a},
b||{})};return this.getEntities(i.AtomSearch,d,f)},getMyResults:function(a,b){var b=this._stringifyRequestArgs(b),d={method:"GET",handleAs:"text",query:c.mixin({query:a},b||{})};return this.getEntities(i.AtomMySearch,d,f)},getResultsByTag:function(a,b){var d={method:"GET",handleAs:"text",query:c.mixin({constraint:this._createTagConstraint(a)},b||{})};return this.getEntities(i.AtomSearch,d,f)},getMyResultsByTag:function(a,b){var d={method:"GET",handleAs:"text",query:c.mixin({constraint:this._createTagConstraint(a)},
b||{})};return this.getEntities(i.AtomMySearch,d,f)},getPeople:function(a,b){var d={method:"GET",handleAs:"text",query:c.mixin({query:a,pageSize:"0",facet:'{"id": "Person"}'},b||{})};return this.getEntities(i.AtomSearch,d,s)},getMyPeople:function(a,b){var d={method:"GET",handleAs:"text",query:c.mixin({query:a,pageSize:"0",facet:'{"id": "Person"}'},b||{})};return this.getEntities(i.AtomMySearch,d,s)},_stringifyRequestArgs:function(b){if(!b)return null;var d={},f;for(f in b){var e=b[f];d[f]=c.isObject(e)?
a.stringify(e):e}return d},_createTagConstraint:function(b){var d={type:"category",values:[]};if(c.isArray(b))for(var f=0;f<b.length;f++)d.values[f]="Tag/"+b[f];else d.values[0]="Tag/"+b;return a.stringify(d)}})})},"sbt/util":function(){define(["./lang","sbt/i18n!sbt/nls/util","./log"],function(h,g,c){function e(b,a){if(a&&(a.error||a.handle)){if(a.error)try{a.error(b)}catch(e){c.error(g.notifyError_catchError,e)}if(a.handle)try{a.handle(b)}catch(h){c.error(g.notifyError_catchError,h)}}else c.error(g.notifyError_console,
b.code,b.message)}return{notifyError:e,isEmptyObject:function(b){var a=!0,c;for(c in b)if(b.hasOwnProperty(c)){a=!1;break}return a},checkObjectClass:function(b,a,g,h){return b.declaredClass!=a?(h?e({code:400,message:g},h):c(g),!1):!0},checkNullValue:function(b,a,g){if(b)return!0;g?e({code:400,message:a},g):c(a);return!1},minVersion:function(b,a){for(var c=b.split("."),e=a.split("."),g=0;g<c.length;++g){if(e.length==g)return!1;if(c[g]!=e[g])return c[g]>e[g]?!1:!0}return!0},getAllResponseHeaders:function(b){var a=
{};try{var c=b.getAllResponseHeaders();if(c)for(var e=c.split("\n"),b=0;b<e.length;b++){var g=e[b].indexOf(":"),q=h.trim(e[b].substring(0,g)),o=h.trim(e[b].substring(g+1));0<q.length&&(a[q]=o)}}catch(n){console.log(n)}return a},createQuery:function(b,a){if(!b)return null;var c=a;c||(c=",");var e=[],g;for(g in b){var h=b[g];e.push(encodeURIComponent(g)+"="+encodeURIComponent(h))}return e.join(c)},splitQuery:function(b,a){var c,e={},g,h,o,b=b.replace("?","");h=b.split(a);o=h.length;for(c=0;c<o;c++)h[c]&&
(g=h[c].split("="),e[g[0]]=g[1]);return e},getJavaScriptLibrary:function(){var b="Unknown";window.dojo?dojo.version&&(b="Dojo "+dojo.version):define&&define.amd&&define.amd.vendor&&"dojotoolkit.org"===define.amd.vendor?require(["dojo/_base/kernel"],function(a){b="Dojo AMD "+a.version}):window.jQuery&&(b="JQuery "+jQuery.fn.jquery);return b}}})},"sbt/nls/loginForm":function(){define({root:{username:"User name :",password:"Password :",authentication_dialog_title:"Authentication",login_ok:"Log in",login_cancel:"Cancel",
wrong_creds_message:"Wrong Credentials"}})},"sbt/connections/BookmarkService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./BookmarkConstants,./ConnectionsService,../base/AtomEntity,../base/XmlDataHandler,./Tag".split(","),function(h,g,c,e,b,a,i,k,m,q){CategoryTmpl='<category term="${tag}"></category>';var o=h(k,{xpath:a.BookmarkXPath,namespaces:a.BookmarkNamespaces,categoryScheme:'<category term="bookmark" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',constructor:function(){},
getBookmarkUuid:function(){return this.getAsString("BookmarkUuid")},setBookmarkUuid:function(a){return this.setAsString("BookmarkUuid",a)},isPrivate:function(){return this.getAsBoolean("privateFlag")},setPrivate:function(a){return this.setAsBoolean("privateFlag",a)},getUrl:function(){return this.getAsString("link")},setUrl:function(a){return this.setAsString("link",a)},getClickCount:function(){return this.getAsString("clickcount")},getCategoryType:function(){return this.getAsString("categoryType")},
getEditLink:function(){return this.getAsString("linkEdit")},getSameLink:function(){return this.getAsString("linkSame")},getAuthor:function(){return this.getAsObject(["authorId","authorName","authorEmail","authorUri"])},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},load:function(b){var e=this.getUrl(),f=this.service._validateBookmarkUrl(e);if(f)return f;var g=this,b={handleAs:"text",query:c.mixin({url:e},b||{})};return this.service.getEntity(a.AtomBookmarkCreateUpdateDelete,
b,e,{createEntity:function(b,c){g.setDataHandler(new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.BookmarkXPath}));return g}})},remove:function(a){return this.service.deleteBookmark(this.getUrl(),a)},update:function(a){return this.service.updateBookmark(this,a)},save:function(a){return this.getBookmarkUuid()?this.service.updateBookmark(this,a):this.service.createBookmark(this,a)}}),n={createEntities:function(b,c){return new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.BookmarkFeedXPath})},
createEntity:function(a,b){return new o({service:a,data:b})}},p={createEntities:function(b,c){return new m({data:c,namespaces:a.Namespaces,xpath:a.TagsXPath})},createEntity:function(b,c){var f=new m({data:c,namespaces:a.Namespaces,xpath:a.TagsXPath});return new q({service:b,id:f.getEntityId(),dataHandler:f})}};return h(i,{contextRootMap:{dogear:"dogear"},serviceName:"dogear",constructor:function(){if(!this.endpoint)this.endpoint=g.findEndpoint(this.getDefaultEndpointName())},getAllBookmarks:function(b){return this.getEntities(a.AtomBookmarksAll,
{method:"GET",handleAs:"text",query:b||{}},this.getBookmarkFeedCallbacks())},getPopularBookmarks:function(b){return this.getEntities(a.AtomBookmarksPopular,{method:"GET",handleAs:"text",query:b||{}},this.getBookmarkFeedCallbacks())},getBookmarksMyNotifications:function(b){return this.getEntities(a.AtomBookmarksMyNotifications,{method:"GET",handleAs:"text",query:b||{}},this.getBookmarkFeedCallbacks())},getBookmarksMySentNotifications:function(b){return this.getEntities(a.AtomBookmarksINotifiedMySentNotifications,
{method:"GET",handleAs:"text",query:b||{}},this.getBookmarkFeedCallbacks())},getBookmark:function(a,b){return(new o({service:this,_fields:{link:a}})).load(b)},createBookmark:function(b,c){var f=this._toBookmark(b),e=this._validateBookmark(f,!1,c);if(e)return e;e={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:this._constructBookmarkPostData(f)};return this.updateEntity(a.AtomBookmarkCreateUpdateDelete,e,{createEntity:function(b,c){if(c){var d=new m({service:b,data:c,namespaces:a.Namespaces,
xpath:a.BookmarkXPath});f.setDataHandler(d)}f.setData(c);return f}},c)},updateBookmark:function(b,e){var f=this._toBookmark(b),g=this._validateBookmark(f,!0,e);if(g)return g;g={method:"PUT",query:c.mixin({url:f.getUrl()},e||{}),headers:a.AtomXmlHeaders,data:this._constructBookmarkPostData(f)};return this.updateEntity(a.AtomBookmarkCreateUpdateDelete,g,{createEntity:function(b,c){var d=f.getBookmarkUuid();if(c){var e=new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.BookmarkXPath});f.setDataHandler(e)}f.setBookmarkUuid(d);
return f}},e)},deleteBookmark:function(b,e){var f=this._validateBookmarkUrl(b);if(f)return f;f={method:"DELETE",query:c.mixin({url:b},e||{}),handleAs:"text"};return this.deleteEntity(a.AtomBookmarkCreateUpdateDelete,f,b)},getBookmarksTags:function(b){return this.getEntities(a.AtomBookmarksTags,{method:"GET",handleAs:"text",query:b||{}},this.getTagsFeedCallbacks(),b)},newBookmark:function(a){return this._toBookmark(a)},getBookmarkFeedCallbacks:function(){return n},getTagsFeedCallbacks:function(){return p},
_toBookmark:function(a){if(a instanceof o)return a;c.isString(a)&&(a={bookmarkUuid:a});return new o({service:this,_fields:c.mixin({},a)})},_validateBookmarkUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected bookmarkUuid.")},_validateBookmarkUrl:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected bookmarkUrl.")},_validateBookmark:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, bookmark with title must be specified.");
if(b&&!a.getBookmarkUuid())return this.createBadRequestPromise("Invalid argument, bookmark with UUID must be specified.")},_constructBookmarkPostData:function(a){var b=e.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom"><title type="text">${getTitle}</title><category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="bookmark"/><link href=\'${getUrl}\'/>${isPrivate}<content type="html">${getContent}</content>${getTags}</entry>',a,function(b,c){if("getTags"==
c){var g=b,b="",h;for(h in g)b+=e.transform(CategoryTmpl,{tag:g[h]})}else"getTitle"==c&&!b?b=a.getTitle():"getUrl"==c&&!b?b=a.getUrl():"getContent"==c&&!b?b=a.getContent():"isPrivate"==c&&!b&&(b=a.isPrivate()?!0:!1);return b},a);return e.trim(b)}})})},"sbt/connections/CommunityConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin({},g,{Public:"public",Moderated:"publicInviteOnly",Restricted:"private",Owner:"owner",Member:"member",CommunityNamespaces:{a:"http://www.w3.org/2005/Atom",
app:"http://www.w3.org/2007/app",snx:"http://www.ibm.com/xmlns/prod/sn"},CommunityFeedXPath:g.ConnectionsFeedXPath,CommunityXPath:h.mixin({},g.AtomEntryXPath,{communityUuid:"a:id",communityTheme:"snx:communityTheme",logoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/logo']/@href",tags:"a:category[not(@scheme)]/@term",memberCount:"snx:membercount",communityType:"snx:communityType",communityUrl:"a:link[@rel='alternate']/@href",isExternal:"snx:isExternal"}),MemberXPath:h.mixin({},g.AtomEntryXPath,
{id:"a:contributor/snx:userid",uid:"a:contributor/snx:userid",role:"snx:role"}),InviteXPath:h.mixin({},g.AtomEntryXPath,{inviteUuid:"a:id",communityUuid:"snx:communityUuid",communityUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/community']/@href"}),EventXPath:h.mixin({},g.AtomEntryXPath,{eventUuid:"snx:eventUuid",eventInstUuid:"snx:eventInstUuid",location:"snx:location",allDay:"snx:allday",selfLink:"a:link[@rel='self']/@href",sourceId:"a:source/a:id",sourceTitle:"a:source/a:title",sourceLink:"a:source/a:link[@rel='self']/@href",
attendLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/attend']/@href",followLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/follow']/@href",followed:"snx:followed",attended:"snx:attended",attendeesAtomUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/attendees']/@href",containerLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container']/@href",instStartDate:"snx:startDate",instEndDate:"snx:endDate",repeats:"snx:repeats",parentEventId:"snx:parentEvent",
parentEventLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/parentevent']/@href",communityLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container']/@href",communityUuid:"snx:communityUuid",eventAtomInstances:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/instances']/@href",eventAtomAttendees:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/attend']/@href",eventAtomFollowers:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/follow']/@href",
frequency:"snx:recurrence/@frequency",interval:"snx:recurrence/@interval",until:"snx:recurrence/snx:until",byDay:"snx:recurrence/snx:byDay",startDate:"snx:recurrence/snx:startDate",endDate:"snx:recurrence/snx:endDate"}),AtomCommunitiesAll:"/${communities}/service/atom/communities/all",AtomCommunitiesMy:"/${communities}/service/atom/communities/my",AtomCommunityInvitesMy:"/${communities}/service/atom/community/invites/my",AtomCommunityInvites:"${communities}/service/atom/community/invites",AtomCommunitySubCommunities:"${communities}/service/atom/community/subcommunities",
AtomCommunityMembers:"${communities}/service/atom/community/members",AtomCommunityInstance:"${communities}/service/atom/community/instance",AtomCommunityForumTopics:"/${communities}/service/atom/community/forum/topics",AtomCommunityBookmarks:"/${communities}/service/atom/community/bookmarks",AtomCommunityEvents:"/${communities}/calendar/atom/calendar/event",AtomCommunityEventAttend:"/${communities}/calendar/atom/calendar/event/attendees",AtomCommunityEventComments:"/${communities}/calendar/atom/calendar/event/comment",
AtomCommunityInvites:"/${communities}/service/atom/community/invites",AtomUpdateCommunityLogo:"/${files}/{endpointName}/connections/UpdateCommunityLogo/{fileName}"})})},"sbt/connections/ActivityConstants":function(){define(["../lang","./ConnectionsConstants"],function(h,g){return h.mixin({},g,{ActivityNamespaces:{a:g.Namespaces.a,app:g.Namespaces.app,thr:g.Namespaces.thr,snx:g.Namespaces.snx},ActivityNodeTypes:{Activity:"activity",Chat:"chat",Email:"email",Entry:"entry",EntryTemplate:"entrytemplate",
Reply:"reply",Section:"section",ToDo:"todo"},ActivitiesFeedXPath:g.ConnectionsFeedXPath,PersonFieldXPath:{name:"a:name",userId:"snx:userid",email:"a:email"},FileFieldXPath:{url:"a:link[@rel='enclosure']/@href",type:"a:link[@rel='enclosure']/@type",size:"a:link[@rel='enclosure']/@size",length:"a:link/@length"},LinkFieldXPath:{url:"a:link/@href",title:"a:link/@title"},TextFieldXPath:{summary:"a:summary"},ActivityNodeXPath:h.mixin({},g.AtomEntryXPath,{activityUuid:"snx:activity",categoryFlagCompleted:"a:category[@term='completed']/@label",
categoryFlagTemplate:"a:category[@term='template']/@label",categoryFlagDelete:"a:category[@term='deleted']/@label",authorLdapid:"a:author/snx:ldapid",contributorLdapid:"a:contributor/snx:ldapid",type:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@label",priority:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/priority']/@label",coummunityUuid:"snx:communityUuid",communityUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container']/@href",dueDate:"snx:duedate",membersUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/member-list']/@href",
historyUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/history']/@href",templatesUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/templates']/@href",position:"snx:position",depth:"snx:depth",permissions:"snx:permissions",iconUrl:"snx:icon",tags:"a:category[not(@scheme)]/@term",inReplyToId:"thr:in-reply-to/@ref",inReplyToUrl:"thr:in-reply-to/@href",inReplyToActivity:"thr:in-reply-to/snx:activity",assignedToName:"snx:assignedto/@name",assignedToUserId:"snx:assignedto/@userid",assignedToEmail:"snx:assignedto",
textFields:"snx:field[@type='text']",linkFields:"snx:field[@type='link']",personFields:"snx:field[@type='person']",dateFields:"snx:field[@type='date']",fileFields:"snx:field[@type='file']"}),TagXPath:{term:"@term",frequency:"@snx:frequency",entries:"app:categories/a:category",uid:"@term",bin:"@snx:bin"},MemberXPath:h.mixin({},g.AtomEntryXPath,{entry:"a:feed/a:entry",id:"a:id",uid:"a:id",role:"snx:role",permissions:"snx:permissions",category:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term"}),
AtomActivitiesEverything:"/${activities}/service/atom2/everything",AtomActivitiesMy:"${activities}/service/atom2/activities",AtomActivitiesTrash:"${activities}/service/atom2/trash",AtomActivitiesCompleted:"${activities}/service/atom2/completed",AtomActivityNode:"${activities}/service/atom2/activitynode",AtomActivityNodes:"${activities}/service/atom2/descendants",AtomActivityNodeTrash:"${activities}/service/atom2/trashednode",AtomCreateActivityNode:"${activities}/service/atom2/activity",AtomActivitiesToDos:"${activities}/service/atom2/todos",
AtomActivitiesMembers:"${activities}/service/atom2/acl",AtomActivitiesMember:"${activities}/service/atom2/acl?activityUuid={activityUuid}&amp;memberid={memberId}",AtomActivitiesTags:"${activities}/service/atom2/tags"})})},"sbt/text":function(){define(["./_bridge/text"],function(h){return h})},"sbt/xsl":function(){define(["./Cache","./xml","./lang"],function(h,g,c){return{xsltTransform:function(e,b){if(!e)return null;c.isString(e)&&(e=g.parse(sbt.cache.get(e)));if(!b)return c.clone(e);b=sbt.cache.get(b);
if(window.ActiveXObject)return e.transformNode(b);if(document.implementation&&document.implementation.createDocument){var a=new XSLTProcessor;a.importStyleSheet(b);return a.transformToFragment(e,document)}return c.clone(e)}}})},"sbt/xpath":function(){define(["./declare"],function(h){var g=h(null,{ie:!1,constructor:function(c,e){this.xpath=c;this.nsArray=e||{};if(!document.createExpression&&(this.ie=!0,this.nsString="",this.nsArray))for(var b in this.nsArray)this.nsString+=" xmlns:"+b+'="'+this.nsArray[b]+
'"'},selectSingleNode:function(c){var e=c.ownerDocument||c;if(this.ie)try{e.setProperty("SelectionLanguage","XPath");e.setProperty("SelectionNamespaces",this.nsString);if(c===e)c=e.documentElement;return c.selectSingleNode(this.xpath)}catch(b){throw"XPath is not supported";}else{var a=this;return e.evaluate(this.xpath,c,function(b){return a.nsArray[b]},XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}},selectNumber:function(c){var e=c.ownerDocument||c;if(this.ie)return this.selectText(c);
var b=this;return e.evaluate(this.xpath,c,function(a){return b.nsArray[a]},XPathResult.NUMBER_TYPE,null).numberValue},selectNodes:function(c){var e=c.ownerDocument||c;if(this.ie)try{e.setProperty("SelectionLanguage","XPath");e.setProperty("SelectionNamespaces",this.nsString);if(c===e)c=e.documentElement;return c.selectNodes(this.xpath)}catch(b){throw"XPath is not supported";}else{for(var a=this,c=e.evaluate(this.xpath,c,function(b){return a.nsArray[b]},XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),
e=[],g=0;g<c.snapshotLength;g++)e.push(c.snapshotItem(g));return e}},selectText:function(c){return(c=this.selectSingleNode(c))?c.text||c.textContent:null}});return{selectNodes:function(c,e,b){return(new g(e,b)).selectNodes(c)},selectSingleNode:function(c,e,b){return(new g(e,b)).selectSingleNode(c)},selectText:function(c,e,b){return(new g(e,b)).selectText(c)},selectNumber:function(c,e,b){return(new g(e,b)).selectNumber(c)}}})},"sbt/config":function(){define(["./defer!./_config"],function(h){return h})},
"sbt/base/BaseConstants":function(){define(["../config"],function(){return{sbtErrorCodes:{badRequest:400},Namespaces:{o:"http://ns.opensocial.org/2008/opensocial",app:"http://www.w3.org/2007/app",thr:"http://purl.org/syndication/thread/1.0",fh:"http://purl.org/syndication/history/1.0",snx:"http://www.ibm.com/xmlns/prod/sn",opensearch:"http://a9.com/-/spec/opensearch/1.1/",a:"http://www.w3.org/2005/Atom",h:"http://www.w3.org/1999/xhtml",td:"urn:ibm.com/td",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",
ibmsc:"http://www.ibm.com/search/content/2010",xhtml:"http://www.w3.org/1999/xhtml",spelling:"http://a9.com/-/opensearch/extensions/spelling/1.0/",ca:"http://www.ibm.com/xmlns/prod/composite-applications/v1.0 namespace"},AtomFeedXPath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"},AtomEntryXPath:{entry:"/a:entry",uid:"a:id",id:"a:id",title:"a:title",updated:"a:updated",published:"a:published",
authorName:"a:author/a:name",authorEmail:"a:author/a:email",authorUserid:"a:author/snx:userid",authorUserState:"a:author/snx:userState",contributorName:"a:contributor/a:name",contributorEmail:"a:contributor/a:email",contributorUserid:"a:contributor/snx:userid",contributorUserState:"a:contributor/snx:userState",content:"a:content[@type='html']",summary:"a:summary[@type='text']",categoryTerm:"a:category/@term",editUrl:"a:link[@rel='edit']/@href",selfUrl:"a:link[@rel='self']/@href",alternateUrl:"a:link[@rel='alternate']/@href"},
AtomXmlHeaders:{"Content-Type":"application/atom+xml"}}})},"sbt/xml":function(){define(["./lang"],function(h){var g={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"},c={"&amp;":"&","&quot;":'"',"&lt;":"<","&gt;":">"};return{parse:function(c){var b=null;try{"Microsoft Internet Explorer"==navigator.appName?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(c)):window.DOMParser&&(parser=new DOMParser,b=parser.parseFromString(c,"text/xml"))}catch(a){console.log(a.message)}return b},asString:function(c){return null==
c?"":window.ActiveXObject?c.xml:(new XMLSerializer).serializeToString(c)},getText:function(c){return"Microsoft Internet Explorer"==navigator.appName?c.text:c.textContent},encodeXmlEntry:function(c){h.isArray(c)&&(c=c.join());h.isString(c)||(c=c.toString());return c.replace(/([\&"<>])/g,function(b,a){return g[a]})},decodeXmlEntry:function(e){return e.replace(/(&quot;|&lt;|&gt;|&amp;)/g,function(b,a){return c[a]})}}})},"sbt/smartcloud/ProfileService":function(){define("../declare,../lang,../config,../stringUtil,../Cache,./Subscriber,../Jsonpath,../base/BaseService,../base/JsonDataHandler,./ProfileConstants,../base/BaseEntity,../Promise".split(","),
function(h,g,c,e,b,a,i,k,m,q,o,n){var p=h(o,{constructor:function(){},load:function(a){var b=this.getId(),c=this.service._validateProfileId(b);if(c)return c;c={};c.userid=b;g.mixin(c,a||{format:"json"});return this.service.getEntity(consts.GetProfile,{handleAs:"json",query:c},b,{createEntity:function(a,b){return new m({data:b,jsonpath:q.ProfileJsonPath})}},a)},getId:function(){return this.getAsString("id")},getUserid:function(){return this.getAsString("id")},getObjectId:function(){return this.getAsString("objectId")},
getDisplayName:function(){return this.getAsString("displayName")},getName:function(){return this.getAsString("displayName")},getEmail:function(){return this.getAsString("emailAddress")},getThumbnailUrl:function(){var a=this.getAsString("thumbnailUrl");a&&(a=this.service.endpoint.baseUrl+"/contacts/img/photos/"+a);return a},getAddress:function(){var a=this.getAsArray("address");return a=this.dataHandler.extractFirstElement(a)},getDepartment:function(){return this.getAsString("department")},getJobTitle:function(){return this.getAsString("jobTitle")},
getProfileUrl:function(){return this.getAsString("profileUrl")},getTelephoneNumber:function(){return this.getAsString("telephone")},getCountry:function(){return this.getAsString("country")},getOrgId:function(){return this.getAsString("orgId")},getOrg:function(){return this.getAsString("org")},getAbout:function(){return this.getAsString("about")}}),d={createEntity:function(a,b){var c=new m({data:b,jsonpath:q.ProfileJsonPath});return new p({service:a,id:c.getEntityId(),dataHandler:c})}},r={createEntities:function(a,
b){return new m({data:b,jsonpath:q.ProfileJsonPath})},createEntity:function(a,b){var c=new m({data:b,jsonpath:q.ProfileJsonPath});return new p({service:a,id:c.getEntityId(),dataHandler:c})}};return h(k,{_profiles:null,constructor:function(){if(!this.endpoint)this.endpoint=c.findEndpoint(this.getDefaultEndpointName());if(!this._cache&&(c.Properties.ProfileCacheSize||q.DefaultCacheSize))this._cache=new b(c.Properties.ProfileCacheSize||q.DefaultCacheSize)},getDefaultEndpointName:function(){return"smartcloud"},
getProfile:function(a,b){var c=this._toIdObject(a),d=this._validateIdObject(c);if(d)return d;g.mixin(c,b||{format:"json"});d={method:"GET",handleAs:"json",query:b||{format:"json"}};c=encodeURIComponent(c.userid);return this.getEntity(this.constructUrl(q.GetProfileByGUID,{},{idToBeReplaced:c}),d,c,this.getProfileCallbacks())},getProfileByGUID:function(a,b){return this.getProfile(a,b)},getMyProfile:function(a){var b=this,c=q.GetUserIdentity,d=new n;this.endpoint.request(c,{handleAs:"json"}).then(function(c){var e=
b._toIdObject(c.subscriberid);if(c=b._validateIdObject(e))return c;var c={method:"GET",handleAs:"json",query:g.mixin(e,a||{format:"json"})},e=encodeURIComponent(e.userid),h=b.constructUrl(q.GetProfileByGUID,{},{idToBeReplaced:e});b.getEntity(h,c,e,b.getProfileCallbacks()).then(function(a){d.fulfilled(a)},function(a){d.rejected(a)})},function(a){d.rejected(a)});return d},getContact:function(a,b){var c=this._toIdObject(a),d=this._validateIdObject(c);if(d)return d;d={method:"GET",handleAs:"json",query:g.mixin(c,
b||{format:"json"})};c=c.userid;return this.getEntity(this.constructUrl(q.GetContactByGUID,{},{idToBeReplaced:c}),d,c,this.getProfileCallbacks())},getContactByGUID:function(a,b){return this.getContact(a,b)},getMyConnections:function(a){return this.getEntities(q.GetMyConnections,{method:"GET",handleAs:"json",query:a||{format:"json"}},this.getProfileFeedCallbacks())},getMyContacts:function(a){return this.getEntities(q.GetMyContacts,{method:"GET",handleAs:"json",query:a||{format:"json"}},this.getProfileFeedCallbacks())},
getMyContactsByIndex:function(a,b,c){a={method:"GET",handleAs:"json",query:g.mixin({startIndex:a,count:b},c||{format:"json"})};return this.getEntities(q.GetMyContacts,a,this.getProfileFeedCallbacks())},getProfileCallbacks:function(){return d},getProfileFeedCallbacks:function(){return r},_toIdObject:function(a){var b={};if(g.isString(a))b.userid=a;else if(a instanceof p)b.userid=a.getUserid();return b},_validateIdObject:function(a){if(!a.userid)return this.createBadRequestPromise("Invalid argument, userid must be specified.")},
_validateProfileId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userid")}})})},"sbt/connections/ProfileAdminService":function(){define("../declare,../lang,../config,../stringUtil,./ProfileConstants,../base/BaseService,../base/XmlDataHandler,./ProfileService".split(","),function(h,g,c,e,b,a,i,k){return h(k,{createProfile:function(a,c){var e=this._toProfile(a),h=this._validateProfile(e);if(h)return h;h={};e.getUserid()?h.userid=e.getUserid():h.email=
e.getEmail();g.mixin(h,c||{});h={method:"POST",query:h,headers:b.AtomXmlHeaders,data:e.createPostData()};return this.updateEntity(b.AdminAtomProfileDo,h,{createEntity:function(){return e}},c)},deleteProfile:function(a,c){var e=this._validateProfileId(a);if(e)return e;e={};this.isEmail(a)?e.email=a:e.userid=a;g.mixin(e,c||{});return this.deleteEntity(b.AdminAtomProfileEntryDo,{method:"DELETE",query:e,handleAs:"text"},a,c)}})})},"sbt/authenticator/GadgetOAuth":function(){define(["../declare","../lang"],
function(h,g){return h(null,{constructor:function(c){g.mixin(this,c||{})},authenticate:function(c){(new gadgets.oauth.Popup(c.error.response.oauthApprovalUrl,null,function(){},function(){})).createOpenerOnClick()}})})},"sbt/authenticator/OAuth":function(){define(["../declare","../lang","../util"],function(h,g,c){return h(null,{url:"",loginUi:"",constructor:function(c){g.mixin(this,c||{})},authenticate:function(c){var b=this;require(["sbt/config"],function(a){a=c.loginUi||a.Properties.loginUi||this.loginUi;
return"popup"==a?b._authPopup(c,b.url):"dialog"==a?b._authDialog(c,b.url):b._authMainWindow(c,b.url)})},_authMainWindow:function(c,b){var a=b+"?oaredirect="+encodeURIComponent(window.location.href);newwindow=window.location.href=a;return!0},_authPopup:function(e,b){require(["sbt/config"],function(a){a.callback=e.callback;var a=b+"?loginUi=popup",g=c.createQuery({height:window.screen.availHeight/2,width:window.screen.availWidth/3},",");newwindow=window.open(a,"Authentication",g);return!0})},_authDialog:function(c,
b){require(["sbt/_bridge/ui/OAuth10_Dialog"],function(a){a.show(b)});return!0}})})},"sbt/store/AtomStore":function(){define("../declare,../config,../lang,../base/core,../xml,../xpath,../itemFactory,../Promise,dojo/_base/Deferred,dojo/promise/Promise,dojo/store/util/QueryResults,dojox/html/entities".split(","),function(h,g,c,e,b,a,i,k,m,q,o,n){var p=h(q,{_store:null,_isRejected:!1,_isFulfilled:!1,_isCancelled:!1,_callbacks:[],_errbacks:[],_endpoint:null,_xmlData:null,totalResults:null,startIndex:0,
itemsPerPage:5,items:null,url:"",sendQuery:!0,unescapeHTML:!1,atom:e.feedXPath,attributes:e.entryXPath,namespaces:e.namespaces,paramSchema:{},total:new k,constructor:function(a,b,c){this._endpoint=g.findEndpoint(a.endpoint||"connections");this._options=c;this._callbacks=[];this._errbacks=[];if(a)this.url=a.url,this.attributes=a.attributes||this.attributes,this.atom=a.feedXPath||this.atom,this.namespaces=a.namespaces||this.namespaces,this.sendQuery=a.hasOwnProperty("sendQuery")?a.sendQuery:this.sendQuery,
this.unescapeHTML=a.unescapeHTML||this.unescapeHTML,this.paramSchema=a.paramSchema||this.paramSchema;if(this.paramSchema.pageNumber)a=Math.floor(c.start/c.count)+1,b.pageNumber=b.pageNumber||a;if(this.paramSchema.startIndex)b.startIndex=b.startIndex||c.start;if(this.paramSchema.pageSize)b.pageSize=b.pageSize||c.count;if(c.sort&&c.sort[0]){if(c.sort[0].attribute)b.sortBy=c.sort[0].attribute;if(!0===c.sort[0].descending)b.sortOrder="desc";else if(!1===c.sort[0].descending)b.sortOrder="asc"}this._doFetch({query:b})},
then:function(a,b){this._isFulfilled?a(this.items):(a&&this._callbacks.push(a),b&&this._errbacks.push(b))},cancel:function(){this._isCancelled=!0},isResolved:function(){return this._isRejected||this._isFulfilled},isRejected:function(){return this._isRejected},isFulfilled:function(){return this._isFulfilled},isCanceled:function(){return this._isCancelled},_doFetch:function(c){var e=this,f=this._getServiceUrl(c.query);f?this._endpoint.xhrGet({serviceUrl:f,handleAs:"text",load:function(c){try{e.response=
c,e._xmlData=b.parse(c),e.totalResults=parseInt(a.selectText(e._xmlData,e.atom.totalResults,e.namespaces)),e.startIndex=parseInt(a.selectText(e._xmlData,e.atom.startIndex,e.namespaces)),e.itemsPerPage=parseInt(a.selectText(e._xmlData,e.atom.itemsPerPage,e.namespaces)),e.items=e._createItems(e._xmlData),e._options.onComplete&&e._options.onComplete.call(e._options.scope||e,e.items,e._options),e.total.fulfilled(e.totalResults),e._fulfilled(e.items)}catch(d){e.total._rejected(d),e._rejected(d)}},error:function(a){e.total._rejected(a);
e._rejected(a)}}):c.onError&&c.onError.call(Error("sbt.store.AtomStore: No service URL specified."))},_getServiceUrl:function(a){if(!this.sendQuery||!a)return this.url;if(c.isString(a))return this.url+(~this.url.indexOf("?")?"&":"?")+a;var b=[],e=this.paramSchema,g;for(g in a)if(g in e){var h=e[g].format(a[g]);h&&b.push(h)}else b.push(encodeURIComponent(g)+"="+encodeURIComponent(a[g]));return 0==b.length?this.url:this.url+(~this.url.indexOf("?")?"&":"?")+b.join("&")},_createQuery:function(a){if(!a)return null;
var b=[],c;for(c in a){var e=a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(e))}return b.join("&")},_createItems:function(b){for(var b=a.selectNodes(b,this.atom.entries,this.namespaces),c=[],e=0;e<b.length;e++)c.push(this._createItem(b[e]));return c},_createItem:function(b){for(var e=this._getAttributes(),f=/^count\(.*\)$/,g={element:b,getValue:function(a){var b=[];if("object"==typeof this[a])for(var c=0;c<this[a].length;c++)b[c]=n.encode(this[a][c]);else b=n.encode(this[a]);return b}},
h=0;h<e.length;h++){var i=e[h],k=this.attributes[i];if(c.isFunction(k))g[i]=k(this,g);else if(k.match(f))g[i]=a.selectNumber(b,k,this.namespaces)+"";else if((k=a.selectNodes(b,k,this.namespaces))&&1==k.length)g[i]=n.encode(k[0].text)||n.encode(k[0].textContent);else if(k){g[i]=[];for(var m=0;m<k.length;m++)g[i].push(n.encode(k[m].text)||n.encode(k[m].textContent))}else g[i]=null}return g},_getAttributes:function(){var a=[],b;for(b in this.attributes)this.attributes.hasOwnProperty(b)&&a.push(b);return a},
_fulfilled:function(a){if(!this._isCancelled)for(this._isFulfilled=!0;0<this._callbacks.length;)this._callbacks.shift()(a)},_rejected:function(a){if(!this._isCancelled)for(this._isRejected=!0;0<this._errbacks.length;)this._errbacks.shift()(a)}});return h(null,{idProperty:"id",_args:null,constructor:function(a){this._args=a},getEndpoint:function(){return g.findEndpoint(this._args.endpoint||"connections")},get:function(){throw Error("sbt.store.AtomStore: Not implemented yet!");},getIdentity:function(a){return a.id},
setUrl:function(a){this._args.url=a},getUrl:function(){return this._args.url},setAttributes:function(a){this._args.attributes=a},query:function(a,b){var c=new p(this._args,a,b);return o(c)}})})},"sbt/connections/nls/ConnectionsService":function(){define({root:{invalid_argument:"Invalid Argument"}})},"sbt/itemFactory":function(){define(["./lang","./xpath","./base/core"],function(h,g,c){var e=/^count\(.*\)$/;return{createItems:function(b,a,e,h){var m=g.selectNodes(b,c.feedXPath.entry,c.namespaces),
q=[];0==m.length&&(m=g.selectNodes(b,"a:entry",c.namespaces));for(b=0;b<m.length;b++)q.push(this.createItem(m[b],a,e,h));return q},createItem:function(b,a,i,k){for(var m={element:b,getValue:function(a){return this[a]}},q=this.getAttribs(a),o=0;o<q.length;o++){var n=q[o],p=a[n];if(h.isFunction(p))m[n]=p(i,m);else if(p.match(e))m[n]=g.selectNumber(b,p,c.namespaces);else if((p=g.selectNodes(b,p,c.namespaces))&&1==p.length)m[n]=p[0].text||p[0].textContent;else if(p){m[n]=[];for(var d=0;d<p.length;d++)m[n].push(p[d].text||
p[d].textContent)}else m[n]=null;m[n]=k?k.decode(m[n]):m[n]}return m},getAttribs:function(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a}}})},"sbt/compat":function(){define([],function(){if(!Array.prototype.indexOf)Array.prototype.indexOf=function(h,g){for(var c=g||0,e=this.length;c<e;c++)if(this[c]===h)return c;return-1};return{}})},"sbt/authenticator/nls/SSO":function(){define({root:{message_title:"ReAuthenticate",message:"Authentication expired, Please login again."}})},"sbt/_bridge/dom":function(){define(["dojo/dom",
"dojo/_base/window","dojo/dom-construct","dojo/dom-class"],function(h,g,c,e){return{byId:function(b){return h.byId(b)},createTextNode:function(b){return g.doc.createTextNode(b)},create:function(b,a,e){return c.create(b,a,e)},destroy:function(b){return c.destroy(b)},toDom:function(b,a){return c.toDom(b,a)},removeAll:function(b){if(b=this.byId(b))for(;b.firstChild;)b.removeChild(b.firstChild);return b},setText:function(b,a){if(b=this.byId(b))this.removeAll(b),b.appendChild(this.createTextNode(a));return b},
setAttr:function(b,a,c){(b=this.byId(b))&&(c?b.setAttribute(a,c):b.removeAttribute(a));return b},addClass:function(b,a){return e.add(b,a)},removeClass:function(b,a){return e.remove(b,a)}}})},"sbt/connections/FollowService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./FollowConstants,../base/BaseService,../base/AtomEntity,../base/XmlDataHandler".split(","),function(h,g,c,e,b,a,i,k,m){var q=h(k,{xpath:a.FollowedResourceXPath,constructor:function(){},createEntryData:function(){var a,
b=function(a){return a};a=""+e.transform('<category term="${getSource}" scheme="http://www.ibm.com/xmlns/prod/sn/source"></category>',this,b,this);a+=e.transform('<category term="${getResourceType}" scheme="http://www.ibm.com/xmlns/prod/sn/resource-type"></category>',this,b,this);this.getResourceId()&&(a+=e.transform('<category term="${getResourceId}" scheme="http://www.ibm.com/xmlns/prod/sn/resource-id"></category>',this,b,this));return e.trim(a)},getFollowedResourceUuid:function(){var a=this.getAsString("followedResourceUuid");
a&&-1!=a.indexOf("urn:lsid:ibm.com:follow:resource-")&&(a=a.substring(33,a.length));return a},setFollowedResourceUuid:function(a){return this.setAsString("followedResourceUuid",a)},getSource:function(){return this.getAsString("source")},setSource:function(a){return this.setAsString("source",a)},getResourceType:function(){return this.getAsString("resourceType")},setResourceType:function(a){return this.setAsString("resourceType",a)},getResourceId:function(){return this.getAsString("resourceId")},setResourceId:function(a){return this.setAsString("resourceId",
a)},getType:function(){return this.getAsString("categoryType")},setCategoryType:function(a){return this.setAsString("categoryType",a)},startFollowing:function(a){return this.service.startFollowing(this,a)},stopFollowing:function(a){return this.service.stopFollowing(this,a)}}),o={createEntities:function(b,c){return new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.FollowedResourceFeedXPath})},createEntity:function(a,b){return new q({service:a,data:b})}};return h(i,{contextRootMap:{activities:"activities",
blogs:"blogs",communities:"communities",files:"files",forums:"forums",news:"news",profiles:"profiles",wikis:"wikis"},constructor:function(){if(!this.endpoint)this.endpoint=g.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getFollowedResources:function(b,e,d){e={method:"GET",handleAs:"text",query:c.mixin({source:b,type:e},d||{})};d=null;d=this.constructUrl(a.AtomFollowAPI,null,{service:this._getServiceName(b)});return this.getEntities(d,e,this._getFollowedResourceFeedCallbacks())},
getFollowedResource:function(b,e){var d=this._toFollowedResource(b),g=this._validateFollowedResource(d,!1,e);if(g)return g;var g={method:"GET",handleAs:"text",query:c.mixin({source:d.getSource(),type:d.getResourceType(),resource:d.getResourceId()},e||{})},f=null,f=this.constructUrl(a.AtomFollowAPI,null,{service:this._getServiceName(d.getSource())});return this.getEntity(f,g,d.getResourceId(),{createEntity:function(b,c){d.xpath=a.OneFollowedResourceXPath;d.setData(c);return d}})},startFollowing:function(b,
c){var d=this._toFollowedResource(b),e=this._validateFollowedResource(d,!1,c);if(e)return e;var e={method:"POST",headers:a.AtomXmlHeaders,data:d.createPostData()},f=null,f=this.constructUrl(a.AtomFollowAPI,null,{service:this._getServiceName(d.getSource())});return this.updateEntity(f,e,{createEntity:function(a,b){d.setData(b);return d}})},stopFollowing:function(b,e){var d=this._toFollowedResource(b),g=this._validateFollowedResource(d,!0);if(g)return g;g=c.mixin({source:d.getSource(),type:d.getResourceType(),
resource:d.getResourceId()},e||{});g={method:"DELETE",headers:a.AtomXmlHeaders,query:g};return this.deleteEntity(this.constructUrl(a.AtomStopFollowAPI,null,{service:this._getServiceName(d.getSource()),resourceId:d.getFollowedResourceUuid()}),g,d.getResourceId())},newFollowedResource:function(a){return this._toFollowedResource(a)},_getFollowedResourceFeedCallbacks:function(){return o},_validateFollowedResource:function(a,b){if(!a||!a.getSource())return this.createBadRequestPromise("Invalid argument, resource with source must be specified.");
if(!a.getResourceType())return this.createBadRequestPromise("Invalid argument, resource with resource yype must be specified.");if(!a.getResourceId())return this.createBadRequestPromise("Invalid argument, resource with resource id must be specified.");if(b&&!a.getFollowedResourceUuid())return this.createBadRequestPromise("Invalid argument, resource with UUID must be specified.")},_validateFollowedResourceUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected followedResourceUuid.")},
_toFollowedResource:function(a){if(a instanceof q)return a;c.isString(a)&&(a={followedResourceUuid:a});return new q({service:this,_fields:c.mixin({},a)})},_getServiceName:function(a){var b=this.contextRootMap,c;for(c in b)if(a==c)return b[c];return""}})})}}});define([],1);