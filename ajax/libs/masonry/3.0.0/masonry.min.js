!function(t){"use strict";function i(t,i){var e=t.create("masonry");return e.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},e.prototype.measureColumns=function(){var t=this.items[0].element;this.columnWidth=this.columnWidth||i(t).outerWidth,this.columnWidth+=this.gutter,this.cols=Math.floor((this.size.innerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},e.prototype._getItemLayoutPosition=function(t){t.getSize();var i=Math.ceil(t.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var e=this._getColGroup(i),s=Math.min.apply(Math,e),h=o(e,s),r={x:this.columnWidth*h,y:s},n=s+t.size.outerHeight,a=this.cols+1-e.length,u=0;a>u;u++)this.colYs[h+u]=n;return r},e.prototype._getColGroup=function(t){if(1===t)return this.colYs;for(var i=[],o=this.cols+1-t,e=0;o>e;e++){var s=this.colYs.slice(e,e+t);i[e]=Math.max.apply(Math,s)}return i},e.prototype._manageStamp=function(t){var o=i(t),e=this._getElementOffset(t),s=this.options.isOriginLeft?e.left:e.right,h=s+o.outerWidth,r=Math.floor(s/this.columnWidth);r=Math.max(0,r);var n=Math.floor(h/this.columnWidth);n=Math.min(this.cols-1,n);for(var a=(this.options.isOriginTop?e.top:e.bottom)+o.outerHeight,u=r;n>=u;u++)this.colYs[u]=Math.max(a,this.colYs[u])},e.prototype._getContainerSize=function(){return this.maxY=Math.max.apply(Math,this.colYs),{height:this.maxY}},e}var o=Array.prototype.indexOf?function(t,i){return t.indexOf(i)}:function(t,i){for(var o=0,e=t.length;e>o;o++){var s=t[o];if(s===i)return o}return-1};"function"==typeof define&&define.amd?define(["outlayer","get-size"],i):t.Masonry=i(t.Outlayer,t.getSize)}(window);