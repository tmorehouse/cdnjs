var Reveal=function(){function e(e){E.progress=document.querySelector("body>.progress"),E.progressbar=document.querySelector("body>.progress span"),E.controls=document.querySelector(".controls"),E.controlsLeft=document.querySelector(".controls .left"),E.controlsRight=document.querySelector(".controls .right"),E.controlsUp=document.querySelector(".controls .up"),E.controlsDown=document.querySelector(".controls .down"),document.addEventListener("keydown",n,!1),document.addEventListener("touchstart",r,!1),window.addEventListener("hashchange",o,!1),E.controlsLeft.addEventListener("click",t(b),!1),E.controlsRight.addEventListener("click",t(L),!1),E.controlsUp.addEventListener("click",t(w),!1),E.controlsDown.addEventListener("click",t(k),!1),x.rollingLinks=void 0===e.rollingLinks?!0:e.rollingLinks,x.controls=void 0===e.controls?!1:e.controls,x.progress=void 0===e.progress?!1:e.progress,x.transition=void 0===e.transition?"default":e.transition,x.theme=void 0===e.theme?"default":e.theme,D===!1&&(x.transition="linear"),x.controls&&(E.controls.style.display="block"),x.progress&&(E.progress.style.display="block"),"default"!==x.transition&&document.body.classList.add(x.transition),"default"!==x.theme&&document.body.classList.add(x.theme),x.rollingLinks&&s(),m()}function t(e){return function(t){t.preventDefault(),e.call()}}function n(e){if("inherit"===e.target.contentEditable)if(e.keyCode>=37&&e.keyCode<=40){switch(e.keyCode){case 37:b();break;case 39:L();break;case 38:w();break;case 40:k()}u(),e.preventDefault()}else 32===e.keyCode&&D&&(a()?i():l())}function r(e){if(1===e.touches.length){if("a"===e.target.tagName.toLowerCase()||"img"===e.target.tagName.toLowerCase())return;e.preventDefault();var t={x:e.touches[0].clientX,y:e.touches[0].clientY},n=.3*window.innerWidth,r=.3*window.innerHeight;t.x<n?b():t.x>window.innerWidth-n?L():t.y<r?w():t.y>window.innerHeight-r&&k(),u()}}function o(){m()}function s(){if(D)for(var e=document.querySelectorAll("section a:not(.image)"),t=0,n=e.length;n>t;t++){var r=e[t];!r.textContent||r.className&&r.className.match(/roll/g)||(r.className+=" roll",r.innerHTML='<span data-title="'+r.text+'">'+r.innerHTML+"</span>")}}function l(){document.body.classList.add("overview");for(var e=Array.prototype.slice.call(document.querySelectorAll(A)),t=0,n=e.length;n>t;t++){var r=e[t],o="translateZ(-2500px) translate("+105*(t-S)+"%, 0%)";r.setAttribute("data-index-h",t),r.style.display="block",r.style.WebkitTransform=o,r.style.MozTransform=o,r.style.msTransform=o,r.style.OTransform=o,r.style.transform=o,r.addEventListener("click",c,!0);for(var s=Array.prototype.slice.call(r.querySelectorAll("section")),l=0,i=s.length;i>l;l++){var a=s[l],d="translate(0%, "+105*(l-T)+"%)";a.setAttribute("data-index-h",t),a.setAttribute("data-index-v",l),a.style.display="block",a.style.WebkitTransform=d,a.style.MozTransform=d,a.style.msTransform=d,a.style.OTransform=d,a.style.transform=d,a.addEventListener("click",c,!0)}}}function i(){document.body.classList.remove("overview");for(var e=Array.prototype.slice.call(document.querySelectorAll("#main section")),t=0,n=e.length;n>t;t++){var r=e[t];r.style.WebkitTransform="",r.style.MozTransform="",r.style.msTransform="",r.style.OTransform="",r.style.transform="",r.removeEventListener("click",c)}u()}function a(){return document.body.classList.contains("overview")}function c(e){a()&&(e.preventDefault(),i(),S=this.getAttribute("data-index-h"),T=this.getAttribute("data-index-v"),u())}function d(e,t){var n=Array.prototype.slice.call(document.querySelectorAll(e));if(n.length){t=Math.max(Math.min(t,n.length-1),0),n[t].setAttribute("class","present");for(var r=0;r<n.length;r++){var o=n[r];a()===!1&&(o.style.display=Math.abs(t-r)>3?"none":"block"),t>r?o.setAttribute("class","past"):r>t&&o.setAttribute("class","future"),o.querySelector("section")&&o.classList.add("stack")}}else t=0;return t}function u(){S=d(A,S),T=d(q,T),x.progress&&(E.progressbar.style.width=S/(document.querySelectorAll(A).length-1)*window.innerWidth+"px"),a()&&l(),f(),v()}function f(){var e=y();[E.controlsLeft,E.controlsRight,E.controlsUp,E.controlsDown].forEach(function(e){e.classList.remove("enabled")}),e.left&&E.controlsLeft.classList.add("enabled"),e.right&&E.controlsRight.classList.add("enabled"),e.up&&E.controlsUp.classList.add("enabled"),e.down&&E.controlsDown.classList.add("enabled")}function y(){var e=document.querySelectorAll(A),t=document.querySelectorAll(q);return{left:S>0,right:S<e.length-1,up:T>0,down:T<t.length-1}}function m(){var e=window.location.hash.slice(2).split("/");S=e[0]?parseInt(e[0]):0,T=e[1]?parseInt(e[1]):0,p(S,T)}function v(){var e="/";(S>0||T>0)&&(e+=S),T>0&&(e+="/"+T),window.location.hash=e}function g(){if(document.querySelector(q+".present")){var e=document.querySelectorAll(q+".present .fragment:not(.visible)");if(e.length)return e[0].classList.add("visible"),!0}else{var t=document.querySelectorAll(A+".present .fragment:not(.visible)");if(t.length)return t[0].classList.add("visible"),!0}return!1}function h(){if(document.querySelector(q+".present")){var e=document.querySelectorAll(q+".present .fragment.visible");if(e.length)return e[e.length-1].classList.remove("visible"),!0}else{var t=document.querySelectorAll(A+".present .fragment.visible");if(t.length)return t[t.length-1].classList.remove("visible"),!0}return!1}function p(e,t){S=void 0===e?S:e,T=void 0===t?T:t,u()}function b(){(a()||h()===!1)&&(S--,T=0,u())}function L(){(a()||g()===!1)&&(S++,T=0,u())}function w(){(a()||h()===!1)&&(T--,u())}function k(){(a()||g()===!1)&&(T++,u())}var A="#main>section",q="section.present>section",S=0,T=0,x={},E={},D=void 0!==document.body.style.perspectiveProperty||void 0!==document.body.style.WebkitPerspective||void 0!==document.body.style.MozPerspective||void 0!==document.body.style.msTransform;return{initialize:e,navigateTo:p,navigateLeft:b,navigateRight:L,navigateUp:w,navigateDown:k}}();