var Reveal=function(){function e(e){S.controls=document.querySelector(".controls"),S.controlsLeft=document.querySelector(".controls .left"),S.controlsRight=document.querySelector(".controls .right"),S.controlsUp=document.querySelector(".controls .up"),S.controlsDown=document.querySelector(".controls .down"),document.addEventListener("keydown",n,!1),document.addEventListener("touchstart",o,!1),window.addEventListener("hashchange",r,!1),S.controlsLeft.addEventListener("click",t(m),!1),S.controlsRight.addEventListener("click",t(g),!1),S.controlsUp.addEventListener("click",t(p),!1),S.controlsDown.addEventListener("click",t(y),!1),q.rollingLinks=void 0===e.rollingLinks?!0:e.rollingLinks,q.controls=void 0===e.controls?!1:e.controls,q.theme=void 0===e.theme?"default":e.theme,q.controls&&(S.controls.style.display="block"),"default"!==q.theme&&document.body.classList.add(q.theme),q.rollingLinks&&i(),u()}function t(e){return function(t){t.preventDefault(),e.call()}}function n(e){if(e.keyCode>=37&&e.keyCode<=40&&"inherit"===e.target.contentEditable){switch(e.keyCode){case 37:m();break;case 39:g();break;case 38:p();break;case 40:y()}c(),e.preventDefault()}}function o(e){if(1===e.touches.length){if("a"===e.target.tagName.toLowerCase()||"img"===e.target.tagName.toLowerCase())return;e.preventDefault();var t={x:e.touches[0].clientX,y:e.touches[0].clientY},n=.3*window.innerWidth,o=.3*window.innerHeight;t.x<n?m():t.x>window.innerWidth-n?g():t.y<o?p():t.y>window.innerHeight-o&&y(),c()}}function r(){u()}function i(){var e=void 0!==document.body.style.webkitPerspective||void 0!==document.body.style.MozPerspective||void 0!==document.body.style.perspective;if(e)for(var t=document.querySelectorAll("section a:not(.image)"),n=0,o=t.length;o>n;n++){var r=t[n];r.className&&r.className.match(/roll/g)||(r.className+=" roll",r.innerHTML='<span data-title="'+r.text+'">'+r.innerHTML+"</span>")}}function l(e,t){var n=Array.prototype.slice.call(document.querySelectorAll(e));return n.length?(t=Math.max(Math.min(t,n.length-1),0),n[t].setAttribute("class","present"),n.slice(0,t).map(function(e){e.setAttribute("class","past")}),n.slice(t+1).map(function(e){e.setAttribute("class","future")})):t=0,t}function c(){b=l(L,b),k=l(w,k),s(),d()}function s(){var e=a();[S.controlsLeft,S.controlsRight,S.controlsUp,S.controlsDown].forEach(function(e){e.classList.remove("enabled")}),e.left&&S.controlsLeft.classList.add("enabled"),e.right&&S.controlsRight.classList.add("enabled"),e.up&&S.controlsUp.classList.add("enabled"),e.down&&S.controlsDown.classList.add("enabled")}function a(){var e=document.querySelectorAll(L),t=document.querySelectorAll(w);return{left:b>0,right:b<e.length-1,up:k>0,down:k<t.length-1}}function u(){var e=window.location.hash.slice(2).split("/");b=e[0]?parseInt(e[0]):0,k=e[1]?parseInt(e[1]):0,h(b,k)}function d(){var e="/";(b>0||k>0)&&(e+=b),k>0&&(e+="/"+k),window.location.hash=e}function f(){if(document.querySelector(w+".present")){var e=document.querySelectorAll(w+".present .fragment:not(.visible)");if(e.length)return e[0].classList.add("visible"),!0}else{var t=document.querySelectorAll(L+".present .fragment:not(.visible)");if(t.length)return t[0].classList.add("visible"),!0}return!1}function v(){if(document.querySelector(w+".present")){var e=document.querySelectorAll(w+".present .fragment.visible");if(e.length)return e[e.length-1].classList.remove("visible"),!0}else{var t=document.querySelectorAll(L+".present .fragment.visible");if(t.length)return t[t.length-1].classList.remove("visible"),!0}return!1}function h(e,t){b=void 0===e?b:e,k=void 0===t?k:t,c()}function m(){v()===!1&&(b--,k=0,c())}function g(){f()===!1&&(b++,k=0,c())}function p(){v()===!1&&(k--,c())}function y(){f()===!1&&(k++,c())}var L="#main>section",w="section.present>section",b=0,k=0,q={},S={};return{initialize:e,navigateTo:h,navigateLeft:m,navigateRight:g,navigateUp:p,navigateDown:y}}();