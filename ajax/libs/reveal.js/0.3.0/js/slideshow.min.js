var Slideshow=function(){function t(){document.addEventListener("keydown",e,!1),document.addEventListener("touchstart",n,!1),window.addEventListener("hashchange",i,!1),c()}function e(t){if(t.keyCode>=37&&t.keyCode<=40){switch(t.keyCode){case 37:u();break;case 39:d();break;case 38:f();break;case 40:h()}o(),t.preventDefault()}}function n(t){if(1===t.touches.length){if("a"===t.target.tagName.toLowerCase()||"img"===t.target.tagName.toLowerCase())return;t.preventDefault();var e={x:t.touches[0].clientX,y:t.touches[0].clientY},n=.3*window.innerWidth,i=.3*window.innerHeight;e.x<n?u():e.x>window.innerWidth-n?d():e.y<i?f():e.y>window.innerHeight-i&&h(),o()}}function i(){c()}function a(t,e){var n=Array.prototype.slice.call(document.querySelectorAll(t));return n.length?(e=Math.max(Math.min(e,n.length-1),0),n[e].setAttribute("class","present"),n.slice(0,e).map(function(t){t.setAttribute("class","past")}),n.slice(e+1).map(function(t){t.setAttribute("class","future")})):e=0,e}function o(){l=a("#main>section",l),w=a("section.present>section",w),r()}function c(){var t=window.location.hash.slice(2).split("/");l=t[0]?parseInt(t[0]):0,w=t[1]?parseInt(t[1]):0,s(l,w)}function r(){var t="/";(l>0||w>0)&&(t+=l),w>0&&(t+="/"+w),window.location.hash=t}function s(t,e){l=void 0===t?l:t,w=void 0===e?w:e,o()}function u(){l--,w=0,o()}function d(){l++,w=0,o()}function f(){w--,o()}function h(){w++,o()}var l=0,w=0;return t(),{navigateTo:s,navigateLeft:u,navigateRight:d,navigateUp:f,navigateDown:h}}();