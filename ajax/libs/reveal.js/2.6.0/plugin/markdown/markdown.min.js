!function(t,e){"object"==typeof exports?module.exports=e(require("./marked")):(t.RevealMarkdown=e(t.marked),t.RevealMarkdown.initialize())}(this,function(t){function e(t){var e=t.querySelector("script"),a=(e||t).textContent,r=a.match(/^\n?(\s*)/)[1].length,s=a.match(/^\n?(\t*)/)[1].length;return s>0?a=a.replace(new RegExp("\\n?\\t{"+s+"}","g"),"\n"):r>1&&(a=a.replace(new RegExp("\\n? {"+r+"}","g"),"\n")),a}function a(t){for(var e=t.attributes,a=[],r=0,s=e.length;s>r;r++){var n=e[r].name,i=e[r].value;/data\-(markdown|separator|vertical|notes|attributes)/gi.test(n)||a.push(i?n+"="+i:n)}return a.join(" ")}function r(t){return t=t||{},t.separator=t.separator||l,t.notesSeparator=t.notesSeparator||c,t.attributes=t.attributes||"",t.slideAttributesSeparator=t.slideAttributesSeparator||h,t}function s(t,e){e=r(e);var a=t.split(new RegExp(e.notesSeparator,"mgi"));return 2===a.length&&(t=a[0]+'<aside class="notes" data-markdown>'+a[1].trim()+"</aside>"),'<script type="text/template">'+t+"</script>"}function n(t,e){e=r(e);for(var a,n,i,o,u=new RegExp(e.separator+(e.verticalSeparator?"|"+e.verticalSeparator:""),"mg"),d=new RegExp(e.separator),l=new RegExp(e.slideAttributesSeparator,"m"),c=0,p=!0,h=[],g="";a=u.exec(t);)notes=null,n=d.test(a[0]),!n&&p&&h.push([]),i=t.substring(c,a.index),n&&p?h.push(i):h[h.length-1].push(i),c=u.lastIndex,p=n;(p?h:h[h.length-1]).push(t.substring(c));for(var b="",f=0,m=h.length;m>f;f++)h[f]instanceof Array?(firstChild=h[f][0],o=l.exec(firstChild),g=o?o[1]:"",dataAttributes="",""!=g&&(dataAttributes=g.replace(/(data-\S+=\"[^\"]+?\")|\w|[\"=]/g,function(t,e){return e||""})),b+="<section "+e.attributes+" "+dataAttributes+">",h[f].forEach(function(t){o=l.exec(t),g=o?o[1]:"",t=o?t.replace(l,""):t,b+="<section "+g+" data-markdown>"+s(t,e)+"</section>"}),b+="</section>"):(o=l.exec(h[f]),g=o?o[1]:"",i=o?h[f].replace(l,""):h[f],b+="<section "+e.attributes+" "+g+" data-markdown>"+s(i,e)+"</section>");return b}function i(){for(var t,r=document.querySelectorAll("[data-markdown]"),i=0,o=r.length;o>i;i++)if(t=r[i],t.getAttribute("data-markdown").length){var u=new XMLHttpRequest,d=t.getAttribute("data-markdown");datacharset=t.getAttribute("data-charset"),null!=datacharset&&""!=datacharset&&u.overrideMimeType("text/html; charset="+datacharset),u.onreadystatechange=function(){4===u.readyState&&(t.outerHTML=u.status>=200&&u.status<300?n(u.responseText,{separator:t.getAttribute("data-separator"),verticalSeparator:t.getAttribute("data-vertical"),notesSeparator:t.getAttribute("data-notes"),attributes:a(t),slideAttributesSeparator:t.getAttribute("data-attributes")}):'<section data-state="alert">ERROR: The attempt to fetch '+d+" failed with HTTP status "+u.status+".Check your browser's JavaScript console for more details.<p>Remember that you need to serve the presentation HTML from a HTTP server.</p></section>")},u.open("GET",d,!1);try{u.send()}catch(l){alert("Failed to get the Markdown file "+d+". Make sure that the presentation and the file are served by a HTTP server and the file can be found there. "+l)}}else if(t.getAttribute("data-separator")||t.getAttribute("data-vertical")||t.getAttribute("data-notes"))t.outerHTML=n(e(t),{separator:t.getAttribute("data-separator"),verticalSeparator:t.getAttribute("data-vertical"),notesSeparator:t.getAttribute("data-notes"),attributes:a(t),slideAttributesSeparator:t.getAttribute("data-attributes")});else{var c=e(t),p=new RegExp(t.getAttribute("data-attributes")||h,"m"),g=p.exec(c);if(g){var b=g[1];c=c.replace(p,"");for(var f=new RegExp('([^"= ]+?)="([^"=]+?)"',"mg");matchesAttributes=f.exec(b);)t.setAttribute(matchesAttributes[1],matchesAttributes[2])}t.innerHTML=s(c)}}function o(t,e,a){var r=new RegExp(a,"mg"),s=new RegExp('([^"= ]+?)="([^"=]+?)"',"mg"),n=t.nodeValue;if(matches=r.exec(n)){var i=matches[1];for(n=n.substring(0,matches.index)+n.substring(r.lastIndex),t.nodeValue=n;matchesClass=s.exec(i);)e.setAttribute(matchesClass[1],matchesClass[2])}}function u(t,e){if(t.childNodes.length>0)for(var a=0;a<t.childNodes.length;a++)u(t.childNodes[a],e);if(t.nodeType==Node.TEXT_NODE&&/\S/.test(t.nodeValue)&&o(t,t.parentNode,e),t.nodeType==Node.ELEMENT_NODE&&t.attributes.length>0)for(var r=0;r<t.attributes.length;r++){var s=t.attributes[r];o(s,t,e)}}function d(){for(var a=document.querySelectorAll("[data-markdown]"),r=0,s=a.length;s>r;r++){var n=a[r];if(!n.getAttribute("data-markdown-parsed")){n.setAttribute("data-markdown-parsed",!0);var i=n.querySelector("aside.notes"),o=e(n);n.innerHTML=t(o),u(n,n.getAttribute("data-element-attributes")||n.parentNode.getAttribute("data-element-attributes")||p),i&&n.appendChild(i)}}}if("undefined"==typeof t)throw"The reveal.js Markdown plugin requires marked to be loaded";"undefined"!=typeof hljs&&t.setOptions({highlight:function(t,e){return hljs.highlightAuto(t,e).value}});var l="^\n---\n$",c="note:",p="{\\.s*?([^}]+?)}",h="^.*?<!--\\sslide-attributes:\\s(.*?)-->";return{initialize:function(){i(),d()},processSlides:i,convertSlides:d,slidify:n}});