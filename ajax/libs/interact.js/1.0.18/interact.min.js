/* interact.js v1.0.18 | https://raw.github.com/taye/interact.js/master/LICENSE */
!function(e){"use strict";function t(){}function n(e){return!!e&&("object"==typeof Element?e instanceof Element:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)}function i(e,t){s(t,Ot),e.pageX=Ot.x,e.pageY=Ot.y,a(t,Ot),e.clientX=Ot.x,e.clientY=Ot.y,e.timeStamp=(new Date).getTime()}function r(e,t,n){e.pageX=n.pageX-t.pageX,e.pageY=n.pageY-t.pageY,e.clientX=n.clientX-t.clientX,e.clientY=n.clientY-t.clientY,e.timeStamp=(new Date).getTime()-t.timeStamp;var i=Math.max(e.timeStamp/1e3,.001);e.pageSpeed=dt(e.pageX,e.pageY)/i,e.pageVX=e.pageX/i,e.pageVY=e.pageY/i,e.clientSpeed=dt(e.clientX,e.pageY)/i,e.clientVX=e.clientX/i,e.clientVY=e.clientY/i}function o(e,t,n){var i,r,o;return n=n||{},e=e||"page",/touch/.test(t.type)&&t.touches?(i=t.touches.length?t.touches[0]:t.changedTouches[0],r=i[e+"X"],o=i[e+"Y"]):(r=t[e+"X"],o=t[e+"Y"]),n.x=r,n.y=o,n}function s(t,n){return n=n||{},t instanceof Y?/inertiastart/.test(t.type)?(s(zt.pointerUp,n),n.x+=zt.sx,n.y+=zt.sy):(n.x=t.pageX,n.y=t.pageY):rn?(o("screen",t,n),n.x+=e.scrollX,n.y+=e.scrollY):/gesture|inertia/i.test(t.type)?(o("client",t,n),n.x+=nt.documentElement.scrollLeft,n.y+=nt.documentElement.scrollTop):o("page",t,n),n}function a(e,t){return t=t||{},e instanceof Y?/inertiastart/.test(e.type)?(a(zt.pointerUp,t),t.x+=zt.sx,t.y+=zt.sy):(t.x=e.clientX,t.y=e.clientY):o(rn?"screen":"client",e,t),t}function l(){return{x:e.scrollX||nt.documentElement.scrollLeft,y:e.scrollY||nt.documentElement.scrollTop}}function c(e){var t=/ipad|iphone|ipod/i.test(navigator.userAgent)?{x:0,y:0}:l(),n=e instanceof rt?e.getBoundingClientRect():e.getClientRects()[0];return n&&{left:n.left+t.x,right:n.right+t.x,top:n.top+t.y,bottom:n.bottom+t.y,width:n.width||n.right-n.left,height:n.heigh||n.bottom-n.top}}function p(e){var t=[];return e instanceof Array?(t[0]=e[0],t[1]=e[1]):ct?(t[0]=mt[0],t[1]=mt[1]):(t[0]=e.touches[0],t[1]="touchend"===e.type&&1===e.touches.length?e.changedTouches[0]:e.touches[1]),t}function d(e){var t=p(e);return{pageX:(t[0].pageX+t[1].pageX)/2,pageY:(t[0].pageY+t[1].pageY)/2,clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function u(e){if(e.touches&&e.touches.length||ct&&mt.length){var t=p(e),n=Math.min(t[0].pageX,t[1].pageX),i=Math.min(t[0].pageY,t[1].pageY),r=Math.max(t[0].pageX,t[1].pageX),o=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:i,left:n,top:i,width:r-n,height:o-i}}}function h(e){var t=(Dt&&Dt.options||Pt).deltaSource,n=t+"X",i=t+"Y",r=p(e),o=r[0][n]-r[1][n],s=r[0][i]-r[1][i];return dt(o,s)}function f(e,t){var n=(Dt&&Dt.options||Pt).deltaSource,i=n+"X",r=n+"Y",o=p(e),s=o[0][i]-o[1][i],a=o[0][r]-o[1][r],l=180*Math.atan(a/s)/Math.PI;if("number"==typeof t){var c=l-t,d=c%360;d>315?l-=360+l/360|0:d>135?l-=180+l/360|0:-315>d?l+=360+l/360|0:-135>d&&(l+=180+l/360|0)}return l}function g(e,t){e=e||Dt;var i=e?e.options.origin:Pt.origin;return t=t||e._element,"parent"===i?i=t.parentNode:"self"===i&&(i=t),n(i)?(i=c(i),i.x=i.left,i.y=i.top):"function"==typeof i&&(i=i(e&&t)),i}function y(e){for(var t=0,n=e.length;n>t;t++)e[t].rect=e[t].getRect()}function m(){var e=zt.target.options.inertia,t=e.resistance,n=(new Date).getTime()/1e3-zt.t0;if(n<zt.te){var i=1-(Math.exp(-t*n)-zt.lambda_v0)/zt.one_ve_v0;if(zt.modifiedXe===zt.xe&&zt.modifiedYe===zt.ye)zt.sx=zt.xe*i,zt.sy=zt.ye*i;else{var r=x(0,0,zt.xe,zt.ye,zt.modifiedXe,zt.modifiedYe,i);zt.sx=r.x,zt.sy=r.y}P(zt.startEvent),zt.i=sn(m)}else zt.sx=zt.modifiedXe,zt.sy=zt.modifiedYe,zt.active=!1,P(zt.startEvent),K(zt.startEvent)}function v(e,t,n,i){var r=1-e;return r*r*t+2*r*e*n+e*e*i}function x(e,t,n,i,r,o,s){return{x:v(s,e,n,r),y:v(s,t,i,o)}}function b(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1}function S(e,t){return e._context===nt||b(e._context,t)}function E(e,t){var i=e.options.ignoreFrom;return t&&n(t)?"string"==typeof i?t[on](i)||E(e,t.parentNode):n(i)?t===i||b(i,t):!1:!1}function O(e,t){if(t){var n=t.options,i=n.preventDefault;if("auto"===i&&!/^input$|^textarea$/i.test(Dt._element.nodeName)){if(/down|start/.test(e.type)&&"drag"===Qt&&"xy"!==n.dragAxis)return;return void e.preventDefault()}return i===!0||"selectstart"===e.type&&/mouse/.test(i)?void e.preventDefault():void 0}}function z(e,t){if(!t)return!1;var n=t.options.dragAxis;return"xy"===e||"xy"===n||n===e}function _(e){if(e.length){var t,n,i,r,o,s=e[0],a=[],l=[];for(r=1;r<e.length;r++)if(t=e[r],s.parentNode!==nt){if(t.parentNode!==nt){if(!a.length)for(n=s;n.parentNode!==nt;)a.unshift(n),n=n.parentNode;if(s instanceof at&&t instanceof rt&&!(t instanceof ot)){if(t===s.parentNode)continue;n=t.ownerSVGElement}else n=t;for(l=[];n.parentNode!==nt;)l.unshift(n),n=n.parentNode;for(o=0;l[o]&&l[o]===a[o];)o++;var c=[l[o-1],l[o],a[o]];for(i=c[0].lastChild;i;){if(i===c[1]){s=t,a=[];break}if(i===c[2])break;i=i.previousSibling}}}else s=t;return{element:s,index:e.indexOf(s)}}}function X(e,t){if(Yt.length||wt.length){var i,r,o,s=[],a=[],l=[],c=[];for(t=t||Dt._element,i=0;i<Yt.length;i++){var p=Yt[i];if(n(p.options.accept)){if(p.options.accept!==t)continue}else if("string"==typeof p.options.accept&&!t[on](p.options.accept))continue;t!==p._element&&p.dropCheck(e,Dt,t)&&(s.push(p),a.push(p._element))}if(r=_(a),o=r?s[r.index]:null,wt.length){for(i=0;i<wt.length;i++)for(var d=wt[i],u=d._context,h=u.querySelectorAll(d.selector),f=0,g=h.length;g>f;f++){if(d._element=h[f],d.rect=d.getRect(),n(d.options.accept)){if(d.options.accept!==t)continue}else if("string"==typeof d.options.accept&&!t[on](d.options.accept))continue;d._element!==t&&-1===a.indexOf(d._element)&&-1===c.indexOf(d._element)&&d.dropCheck(e,Dt)&&(l.push(d),c.push(d._element))}c.length&&(o&&(l.push(o),c.push(o._element)),r=_(c),r&&(o=l[r.index],o.selector&&(o._element=c[r.index])))}return o?{dropzone:o,element:o._element}:null}}function Y(e,t,n,r,o){var l,c,p=(Dt&&Dt.options||Pt).deltaSource,y=p+"X",m=p+"Y",v=Dt?Dt.options:Pt,x=g(Dt,r);if(r=r||Dt._element,"gesture"===t){var b=d(e);c={x:b.pageX-x.x,y:b.pageY-x.y},l={x:b.clientX-x.x,y:b.clientY-x.y}}else c=s(e),l=a(e),c.x-=x.x,c.y-=x.y,l.x-=x.x,l.y-=x.y,v.snapEnabled&&-1!==v.snap.actions.indexOf(t)&&(this.snap={range:jt.range,locked:jt.locked,x:jt.x,y:jt.y,realX:jt.realX,realY:jt.realY,dx:jt.dx,dy:jt.dy},jt.locked&&(c.x+=jt.dx,c.y+=jt.dy,l.x+=jt.dx,l.y+=jt.dy));if(Dt.options.restrict[t]&&Nt.restricted&&(c.x+=Nt.dx,c.y+=Nt.dy,l.x+=Nt.dx,l.y+=Nt.dy,this.restrict={dx:Nt.dx,dy:Nt.dy}),this.pageX=c.x,this.pageY=c.y,this.clientX=l.x,this.clientY=l.y,"start"!==n||e instanceof Y||i(ft,this),this.x0=ft.pageX,this.y0=ft.pageY,this.clientX0=ft.clientX,this.clientY0=ft.clientY,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.target=r,this.t0=vt,this.type=t+(n||""),zt.active&&(this.detail="inertia"),o&&(this.relatedTarget=o),bt&&"inertia"===bt.detail&&!zt.active&&v.inertia.zeroResumeDelta?this.dx=this.dy=0:"end"===n||"drop"===t?"client"===p?(this.dx=l.x-ft.clientX,this.dy=l.y-ft.clientY):(this.dx=c.x-ft.pageX,this.dy=c.y-ft.pageY):"inertiastart"===n?(this.dx=bt.dx,this.dy=bt.dy):"client"===p?(this.dx=l.x-bt.clientX,this.dy=l.y-bt.clientY):(this.dx=c.x-bt.pageX,this.dy=c.y-bt.pageY),"resize"===t?v.squareResize||e.shiftKey?("y"===Wt?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=Wt,"x"===Wt?this.dy=0:"y"===Wt&&(this.dx=0)):"gesture"===t&&(this.touches=ct?[mt[0],mt[1]]:e.touches,"start"===n?(this.distance=h(e),this.box=u(e),this.scale=1,this.ds=0,this.angle=f(e),this.da=0):"end"===n||e instanceof Y?(this.distance=bt.distance,this.box=bt.box,this.scale=bt.scale,this.ds=this.scale-1,this.angle=bt.angle,this.da=this.angle-_t.startAngle):(this.distance=h(e),this.box=u(e),this.scale=this.distance/_t.startDistance,this.angle=f(e,_t.prevAngle),this.ds=this.scale-_t.prevScale,this.da=this.angle-_t.prevAngle)),"start"===n)this.timeStamp=vt,this.dt=0,this.duration=0,this.speed=0,this.velocityX=0,this.velocityY=0;else if("inertiastart"===n)this.timeStamp=(new Date).getTime(),this.dt=bt.dt,this.duration=bt.duration,this.speed=bt.speed,this.velocityX=bt.velocityX,this.velocityY=bt.velocityY;else{this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-bt.timeStamp,this.duration=this.timeStamp-vt;var S,E,O;"end"===n||e instanceof Y?(O=Math.max(("end"===n?this.duration:this.dt)/1e3,.001),S=this[y]-bt[y],E=this[m]-bt[m],this.snap&&this.snap.locked&&(S-=this.snap.dx,E-=this.snap.dy),this.restrict&&(S-=this.restrict.dx,E-=this.restrict.dy),bt.snap&&bt.snap.locked&&(S-=bt[y]-bt.snap.dx,E-=bt[m]-bt.snap.dy),bt.restrict&&(S+=bt.restrict.dx,E+=bt.restrict.dy),this.speed=dt(S,E)/O,this.velocityX=S/O,this.velocityY=E/O):(this.speed=gt[p+"Speed"],this.velocityX=gt[p+"VX"],this.velocityY=gt[p+"VY"])}if(("end"===n||"inertiastart"===n)&&bt.speed>600&&this.timeStamp-bt.timeStamp<150){var z=180*Math.atan2(bt.velocityY,bt.velocityX)/Math.PI,_=22.5;0>z&&(z+=360);var X=z>=135-_&&225+_>z,w=z>=225-_&&315+_>z,T=!X&&(z>=315-_||45+_>z),A=!w&&z>=45-_&&135+_>z;this.swipe={up:w,down:A,left:X,right:T,angle:z,speed:bt.speed,velocity:{x:bt.velocityX,y:bt.velocityY}}}}function w(){this.originalEvent.preventDefault()}function T(e,t,n){var i,r,o={};for(i in e)o[i]=e[i];o.preventDefault=w,o.stopPropagation=Y.prototype.stopPropagation,o.stopImmediatePropagation=Y.prototype.stopImmediatePropagation,o.timeStamp=(new Date).getTime(),o.originalEvent=e,o.dt=o.timeStamp-vt,o.type="tap";var s=o.timeStamp-St,a=Et&&"doubletap"!==Et.type&&Et.target===o.target&&500>s;for(St=o.timeStamp,r=0;r<t.length;r++){var l=g(t[r],n[r]);if(o.pageX-=l.x,o.pageY-=l.y,o.clientX-=l.x,o.clientY-=l.y,o.currentTarget=n[r],t[r].fire(o),o.immediatePropagationStopped||o.propagationStopped&&t[r+1]!==o.currentTarget)break}if(a){var c={};for(i in o)c[i]=o[i];for(c.dt=s,c.type="doubletap",r=0;r<t.length&&(c.currentTarget=n[r],t[r].fire(c),!(c.immediatePropagationStopped||c.propagationStopped&&t[r+1]!==c.currentTarget));r++);Et=c}else Et=o}function A(e){function t(e,t,s){var a=Element.prototype[on]===tt?s.querySelectorAll(t):void 0;o!==nt&&S(e,o)&&!E(e,r)&&o[on](t,a)&&(n.push(e),i.push(o))}if(!xt||!Vt&&e instanceof xt.constructor&&xt.target===e.target){for(var n=[],i=[],r=e.target instanceof st?e.target.correspondingUseElement:e.target,o=r;o;)Q.isSet(o)&&(n.push(Q(o)),i.push(o)),Xt.forEachSelector(t),o=o.parentNode;n.length&&T(e,n,i)}}function C(e){var t,n,i=this.getRect(),r=null,o=s(e),a=this.options;return i?(Jt.resize&&a.resizable&&(t="y"!==a.resizeAxis&&o.x>i.right-It,n="x"!==a.resizeAxis&&o.y>i.bottom-It),Wt=(t?"x":"")+(n?"y":""),r=Wt?"resize"+Wt:Jt.drag&&a.draggable?"drag":null,Jt.gesture&&(e.touches&&e.touches.length>=2||ct&&yt.length>=2)&&!Gt&&!Kt&&(r="gesture"),r):null}function D(e,t){if("string"!=typeof e)return null;t=t||Dt;var n=-1!==e.indexOf("resize")?"resize":e,i=(t||Dt).options;return("resize"===n&&i.resizable||"drag"===e&&i.draggable||"gesture"===e&&i.gesturable)&&Jt[n]?(("resize"===e||"resizeyx"===e)&&(e="resizexy"),e):null}function k(e){function t(e,t,n){var i=Element.prototype[on]===tt?n.querySelectorAll(t):void 0;S(e,o)&&!E(e,r)&&o[on](t,i)&&(e._element=o,Tt.push(e))}if(Qt&&xt&&e.type!==xt.type)return void O(e,Dt);if(!(xt&&"mousedown"===e.type&&"touchstart"===xt.type&&e.timeStamp-xt.timeStamp<300)){var n,r=e.target instanceof st?e.target.correspondingUseElement:e.target,o=r;if(ct&&j(e),zt.active&&Dt.selector)for(;o&&o!==nt;){if(o===zt.targetElement&&D(Dt.getAction(e))===Qt)return an(zt.i),zt.active=!1,void(ct&&j(e,At));o=o.parentNode}if(!(Gt||Kt||Bt)){if(Tt.length&&/mousedown|pointerdown/i.test(e.type))n=V(e,Tt);else for(;o&&o!==nt&&!n;)Tt=[],Xt.forEachSelector(t),n=V(e,Tt),o=o.parentNode;return n?(Lt=!0,Qt=n,M(e,n)):(vt=(new Date).getTime(),xt=e,i(ut,e),Vt=!1,void 0)}}}function M(e,t){if(!t&&Lt&&xt&&e.type!==xt.type)return void O(e,Dt);if(Lt=!0,ct&&j(e),(e.touches&&e.touches.length<2||yt&&yt.length<2)&&!Dt||!Qt){var n=Xt.get(e.currentTarget);E(n,e.target)||(Dt=n)}var r=Dt&&Dt.options;if(Dt&&!(Gt||Kt||Bt)){var o=D(t||Dt.getAction(e));if(i(ft,e),ct&&e instanceof ct&&(Dt._gesture.target||(Dt._gesture.target=Dt._element),j(e,Dt._gesture)),!o)return e;Vt=!1,r.styleCursor&&(nt.documentElement.style.cursor=Ht[o].cursor),Wt="resizexy"===o?"xy":"resizex"===o?"x":"resizey"===o?"y":"","gesture"===o&&(e.touches&&e.touches.length<2||ct&&yt.length<2)&&(o=null),Qt=o,jt.x=null,jt.y=null,vt=(new Date).getTime(),xt=e,i(ut,e),Vt=!1,O(e,Dt)}else zt.active&&e.currentTarget===zt.targetElement&&Dt===zt.target&&D(Dt.getAction(e))===Qt&&(an(zt.i),zt.active=!1,ct&&(Dt._gesture.target||(Dt._gesture.target=Dt._element),j(e,Dt._gesture)))}function R(e,t){var n,i,r,o,a,l,c,p,d,u,h=Dt.options.snap,f=h.anchors;if(t=t||jt,t.useStatusXY)n={x:t.x,y:t.y};else{var y=g(Dt);n=s(e),n.x-=y.x,n.y-=y.y}if(t.realX=n.x,t.realY=n.y,h.range<0&&(h.range=1/0),"path"===h.mode)for(f=[],d=0,u=h.paths.length;u>d;d++){var m=h.paths[d];"function"==typeof m&&(m=m(n.x,n.y)),f.push({x:"number"==typeof m.x?m.x:n.x,y:"number"==typeof m.y?m.y:n.y,range:"number"==typeof m.range?m.range:h.range})}if("anchor"!==h.mode&&"path"!==h.mode||!f.length){if("grid"===h.mode){var v=Math.round((n.x-h.gridOffset.x)/h.grid.x),x=Math.round((n.y-h.gridOffset.y)/h.grid.y),b=v*h.grid.x+h.gridOffset.x,S=x*h.grid.y+h.gridOffset.y;l=b-n.x,c=S-n.y,p=dt(l,c),o=p<h.range,a=b!==t.x||S!==t.y,t.x=b,t.y=S,t.dx=l,t.dy=c,t.range=h.range}}else{for(i={anchor:null,distance:0,range:0,dx:0,dy:0},d=0,u=f.length;u>d;d++){var E=f[d];r="number"==typeof E.range?E.range:h.range,l=E.x-n.x,c=E.y-n.y,p=dt(l,c),o=r>p,1/0===r&&i.inRange&&1/0!==i.range&&(o=!1),(!i.anchor||(o?i.inRange&&1/0!==r?p/r<i.distance/i.range:p<i.distance:!i.inRange&&p<i.distance))&&(1/0===r&&(o=!0),i.anchor=E,i.distance=p,i.range=r,i.inRange=o,i.dx=l,i.dy=c,t.range=r)}o=i.inRange,a=i.anchor.x!==t.x||i.anchor.y!==t.y,t.x=i.anchor.x,t.y=i.anchor.y,t.dx=i.dx,t.dy=i.dy}return t.changed=a||o&&!t.locked,t.locked=o,t}function $(e,t){var i,r=Q.currentAction()||Qt,o=Dt&&Dt.options.restrict[r];if(t=t||Nt,i=i=t.useStatusXY?{x:t.x,y:t.y}:s(e),t.snap&&t.snap.locked&&(i.x+=t.snap.dx||0,i.y+=t.snap.dy||0),t.dx=0,t.dy=0,t.restricted=!1,!r||!o)return t;var a;return"parent"===o?o=Dt._element.parentNode:"self"===o&&(o=Dt._element),n(o)?a=c(o):("function"==typeof o&&(o=o(i.x,i.y,Dt._element)),a=o,"x"in o&&"y"in o&&(a={left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})),t.dx=Math.max(Math.min(a.right,i.x),a.left)-i.x,t.dy=Math.max(Math.min(a.bottom,i.y),a.top)-i.y,t.restricted=!0,t}function P(e,t){if(Lt&&(e instanceof Y||i(ht,e),Qt&&("mousemove"!==e.type||"touchstart"!==xt.type))){var n,o;if(Vt||(n=ht.clientX-ft.clientX,o=ht.clientY-ft.clientY,Vt=dt(n,o)>1),Vt&&(!zt.active||e instanceof Y&&/inertiastart/.test(e.type))){if(!(Gt||Kt||Bt)&&(r(gt,ut,ht),"drag"===Qt)){var s=Math.abs(n),a=Math.abs(o),l=Dt.options.dragAxis,c=s>a?"x":a>s?"y":"xy";if("xy"!==c&&"xy"!==l&&l!==c){Qt=null;for(var p=e.target instanceof st?e.target.correspondingUseElement:e.target,d=p;d&&d!==nt;){var u=Xt.get(d);if(u&&u!==Dt&&"drag"===u.getAction(xt)&&z(c,u)){Qt="drag",Dt=u;break}d=d.parentNode}if(!Qt){var h=function(e,t,n){var i=Element.prototype[on]===tt?n.querySelectorAll(t):void 0;if(e!==Dt)return e._element=d,S(e,p)&&!E(e,p)&&d[on](t,i)&&"drag"===e.getAction(xt)&&z(c,e)?e:void 0};for(d=p;d&&d!==nt;){var f=Xt.forEachSelector(h);if(f){Qt="drag",Dt=f;break}d=d.parentNode}}}}if(Qt&&Dt){var g=Dt.options.restrictEnabled&&(!Dt.options.restrict.endOnly||t),y=!(Gt||Kt||Bt),m=y?xt:e;y&&(bt=xt),g||(Nt.restricted=!1),!Dt.options.snapEnabled||-1===Dt.options.snap.actions.indexOf(Qt)||Dt.options.snap.endOnly&&!t?(g&&$(e),Ht[Qt].moveListener(e)):(R(m),(jt.changed||!jt.locked||g)&&(g&&$(e),Ht[Qt].moveListener(e)))}}e instanceof Y||(r(gt,ut,ht),i(ut,e)),(Gt||Kt)&&qt.edgeMove(e)}}function j(e,t){if(!yt.length||mt[0].pointerType===e.pointerType){t&&t.addPointer(e.pointerId);var n=yt.indexOf(e.pointerId);-1===n?(yt.push(e.pointerId),mt[yt.length-1]=e):mt[n]=e}}function N(e){var t=yt.indexOf(e.pointerId);-1!==t&&yt.splice(t,1)}function q(e){var t=yt.indexOf(e.pointerId);-1!==t&&(/move/i.test(e.type)?mt[t]=e:/up|cancel/i.test(e.type)&&(N(e),Bt&&yt.length<2&&Dt._gesture.stop()))}function F(e){O(e,Dt);var t,n,i,r,o;if(!Gt){if(t=new Y(xt,"drag","start"),Gt=!0,Dt.fire(t),!Ut){y(Yt);for(var s=0;s<wt.length;s++){var a=wt[s],l=a._context;a._elements=l.querySelectorAll(a.selector)}}bt=t,Dt.options.snapEnabled&&!Dt.options.snap.endOnly&&R(e)}t=new Y(e,"drag","move");var c=Dt._element,p=X(t,c);p?(r=p.dropzone,Mt=p.element):r=Mt=null,Dt._element=c,Mt!==$t&&(Rt&&(i=new Y(e,"drag","leave",$t,c),t.dragLeave=$t,o=Rt,Rt=$t=null),r&&(n=new Y(e,"drag","enter",Mt,c),t.dragEnter=r._element,Rt=r,$t=Rt._element)),Dt.fire(t),i&&o.fire(i),n&&r.fire(n),bt=t}function I(e){O(e,Dt);var t;Kt||(t=new Y(xt,"resize","start"),Dt.fire(t),Dt.fire(t),Kt=!0,bt=t,Dt.options.snapEnabled&&!Dt.options.snap.endOnly&&R(e)),t=new Y(e,"resize","move"),Dt.fire(t),bt=t}function L(e){if(e.touches&&!(e.touches.length<2)||ct){O(e,Dt);var t;Bt||(t=new Y(xt,"gesture","start"),t.ds=0,_t.startDistance=_t.prevDistance=t.distance,_t.startAngle=_t.prevAngle=t.angle,_t.scale=1,Bt=!0,Dt.fire(t),bt=t,Dt.options.snapEnabled&&!Dt.options.snap.endOnly&&R(e)),t=new Y(e,"gesture","move"),t.ds=t.scale-_t.scale,Dt.fire(t),bt=t,_t.prevAngle=t.angle,_t.prevDistance=t.distance,1/0===t.scale||null===t.scale||void 0===t.scale||isNaN(t.scale)||(_t.scale=t.scale)}}function V(e,t){for(var n=0,i=t.length;i>n;n++){var r=t[n],o=D(r.getAction(e,r),r);if(o)return Dt=r,o}}function B(e){function t(e,t){e&&S(e,r)&&!E(e,r)&&r[on](t)&&(e._element=r,n.push(e))}if(!(Lt||Gt||Kt||Bt)){var n=[],i=Dt&&Dt._element,r=e.target instanceof st?e.target.correspondingUseElement:e.target;Dt&&E(Dt,r)&&(Dt=null,Tt=[]);var o=Xt.get(r),s=o&&!E(o,r)&&D(o.getAction(e),o);if(s)Dt=o,Tt=[];else if(Xt.forEachSelector(t),V(e,n))Tt=n,U(e,Tt),un.addToElement(r,"mousemove",U);else if(Dt){var a=i.querySelectorAll("*");if(-1!==Array.prototype.indexOf.call(a,r)){for(var l=0;l<Tt.length;l++)Tt[l]._element=i;U(e,Tt),un.addToElement(Dt._element,"mousemove",U)}else Dt=null,Tt=[]}}}function G(e){if(!(Lt||Gt||Kt||Bt)){var t=e.target instanceof st?e.target.correspondingUseElement:e.target;Xt.get(t)||un.removeFromElement(t,U),Dt&&Dt.options.styleCursor&&!(Gt||Kt||Bt)&&(nt.documentElement.style.cursor="")}}function U(e,t){if(Lt||Gt||Kt||Bt)Qt&&O(e,Dt);else{var n;t?n=V(e,t):Dt&&(n=D(Dt.getAction(e))),Dt&&Dt.options.styleCursor&&(nt.documentElement.style.cursor=n?Ht[n].cursor:"")}}function K(e){if((e instanceof Y||ct||!Lt||!xt||e instanceof xt.constructor)&&!(e.touches&&e.touches.length>=2)){if(pt&&e instanceof pt&&/inertiastart/i.test(e.type))return void e.gestureObject.stop();var t,n,i=Dt&&Dt.options.inertia;if(Gt||Kt||Bt){if(zt.active)return;var r=Dt.options.deltaSource,o=gt[r+"Speed"];if(Dt.options.inertiaEnabled&&"gesture"!==Qt&&-1!==i.actions.indexOf(Qt)&&e!==zt.startEvent&&(new Date).getTime()-ht.timeStamp<50&&o>i.minSpeed&&o>i.endSpeed){var s,a=i.resistance,l=-Math.log(i.endSpeed/o)/a;if(zt.active=!0,zt.target=Dt,zt.targetElement=Dt._element,un.useAttachEvent)for(n in e)zt.pointerUp[n]=e[n];else zt.pointerUp=e;zt.startEvent=s=new Y(e,Qt,"inertiastart"),Dt.fire(zt.startEvent),zt.vx0=gt[r+"VX"],zt.vy0=gt[r+"VY"],zt.v0=o,zt.x0=bt.pageX,zt.y0=bt.pageY,zt.t0=zt.startEvent.timeStamp/1e3,zt.sx=zt.sy=0,zt.modifiedXe=zt.xe=(zt.vx0-l)/a,zt.modifiedYe=zt.ye=(zt.vy0-l)/a,zt.te=l,zt.lambda_v0=a/zt.v0,zt.one_ve_v0=1-i.endSpeed/zt.v0;var c,p=s.pageX,d=s.pageY;if(s.snap&&s.snap.locked&&(p-=s.snap.dx,d-=s.snap.dy),s.restrict&&(p-=s.restrict.dx,d-=s.restrict.dy),c={useStatusXY:!0,x:p+zt.xe,y:d+zt.ye,dx:0,dy:0,snap:null},c.snap=c,Dt.options.snapEnabled&&Dt.options.snap.endOnly){var u=R(e,c);u.locked&&(zt.modifiedXe+=u.dx,zt.modifiedYe+=u.dy)}if(Dt.options.restrictEnabled&&Dt.options.restrict.endOnly){var h=$(e,c);zt.modifiedXe+=h.dx,zt.modifiedYe+=h.dy}return an(zt.i),void(zt.i=sn(m))}(Dt.options.snapEnabled&&Dt.options.snap.endOnly||Dt.options.restrictEnabled&&Dt.options.restrict.endOnly)&&P(e,!0)}if(Gt){t=new Y(e,"drag","end");var f,g=Dt._element,y=X(t,g);if(y?(kt=y.dropzone,Mt=y.element):(kt=null,Mt=null),Dt._element=g,kt)f=new Y(e,"drop",null,Mt,g),t.dropzone=Mt;else if(Rt){var v=new Y(e,"drag","leave",Mt,g);Rt.fire(v,g),t.dragLeave=$t}Dt.fire(t),f&&kt.fire(f)}else Kt?(t=new Y(e,"resize","end"),Dt.fire(t)):Bt&&(t=new Y(e,"gesture","end"),Dt.fire(t));Q.stop()}}function W(e,t){var n={},i=Ct[e.type],r=e.target;t=t?!0:!1;for(var o in e)n[o]=e[o];for(n.originalEvent=e,n.preventDefault=w;r&&r!==nt;){for(var s=0;s<i.selectors.length;s++){var a=i.selectors[s],l=i.contexts[s];if(r[on](a)&&l===e.currentTarget&&b(l,r)){var c=i.listeners[s];n.currentTarget=r;for(var p=0;p<c.length;p++)if(c[p][1]===t)try{c[p][0](n)}catch(d){it.error('Error thrown from delegated listener: "'+a+'" '+e.type+" "+(c[p][0].name?c[p][0].name:"")),it.log(d)}}}r=r.parentNode}}function H(e){return W.call(this,e,!0)}function J(){Dt&&!Dt.selector&&(Dt=null),kt=Mt=Rt=$t=null}function Q(e,t){return Xt.get(e,t)||new et(e,t)}function Z(e){for(var t in Pt)e.hasOwnProperty(t)&&typeof e[t]==typeof Pt[t]&&(this[t]=e[t])}function et(t,i){this._element=t,this._iEvents=this._iEvents||{},"string"==typeof t?(nt.querySelector(t),this.selector=t,this._gesture=At,i&&i.context&&(e.Node?i.context instanceof e.Node:n(i.context)||i.context===nt)&&(this._context=i.context)):n(t)&&(ct?(un.add(this,"pointerdown",M),un.add(this,"pointermove",U),this._gesture=new lt,this._gesture.target=t):(un.add(this,"mousedown",M),un.add(this,"mousemove",U),un.add(this,"touchstart",M),un.add(this,"touchmove",U))),Xt.push(this),this.set(i)}var tt,nt=e.document,it=e.console,rt=e.SVGElement||t,ot=e.SVGSVGElement||t,st=e.SVGElementInstance||t,at=e.HTMLElement||e.Element,lt=e.Gesture||e.MSGesture,ct=lt&&(e.PointerEvent||e.MSPointerEvent),pt=lt&&(e.GestureEvent||e.MSGestureEvent),dt=Math.hypot||function(e,t){return Math.sqrt(e*e+t*t)},ut={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},ht={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},ft={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},gt={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0,pageSpeed:0,clientSpeed:0},yt=ct?[]:null,mt=ct?[]:null,vt=0,xt=null,bt=null,St=0,Et=null,Ot={},zt={active:!1,target:null,targetElement:null,startEvent:null,pointerUp:{},xe:0,ye:0,duration:0,t0:0,vx0:0,vys:0,lambda_v0:0,one_ve_v0:0,i:null},_t={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},Xt=[],Yt=[],wt=[],Tt=[],At=null,Ct={},Dt=null,kt=null,Mt=null,Rt=null,$t=null,Pt={draggable:!1,dragAxis:"xy",dropzone:!1,accept:null,resizable:!1,squareResize:!1,resizeAxis:"xy",gesturable:!1,actionChecker:null,styleCursor:!0,preventDefault:"auto",snap:{mode:"grid",endOnly:!1,actions:["drag"],range:1/0,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],arrayTypes:/^anchors$|^paths$|^actions$/,objectTypes:/^grid$|^gridOffset$/,stringTypes:/^mode$/,numberTypes:/^range$/,boolTypes:/^endOnly$/},snapEnabled:!1,restrict:{drag:null,resize:null,gesture:null,endOnly:!1},restrictEnabled:!0,autoScroll:{container:e,margin:60,speed:300,numberTypes:/^margin$|^speed$/},autoScrollEnabled:!1,inertia:{resistance:10,minSpeed:100,endSpeed:10,actions:["drag","resize"],zeroResumeDelta:!1,numberTypes:/^resistance$|^minSpeed$|^endSpeed$/,arrayTypes:/^actions$/,boolTypes:/^zeroResumeDelta$/},inertiaEnabled:!1,origin:{x:0,y:0},deltaSource:"page",context:nt},jt={locked:!1,x:0,y:0,dx:0,dy:0,realX:0,realY:0,anchors:[],paths:[]},Nt={dx:0,dy:0,snap:jt,restricted:!1},qt={target:null,i:null,x:0,y:0,scroll:function(){var t=qt.target.options.autoScroll,n=t.container,i=(new Date).getTime(),r=(i-qt.prevTime)/1e3,o=t.speed*r;o>=1&&(n instanceof e.Window?n.scrollBy(qt.x*o,qt.y*o):n&&(n.scrollLeft+=qt.x*o,n.scrollTop+=qt.y*o),qt.prevTime=i),qt.isScrolling&&(an(qt.i),qt.i=sn(qt.scroll))},edgeMove:function(t){if(Dt&&Dt.options.autoScrollEnabled&&(Gt||Kt)){var n,i,r,o,s=Dt.options.autoScroll;if(s.container instanceof e.Window)o=t.clientX<qt.margin,n=t.clientY<qt.margin,i=t.clientX>s.container.innerWidth-qt.margin,r=t.clientY>s.container.innerHeight-qt.margin;else{var a=c(s.container);o=t.clientX<a.left+qt.margin,n=t.clientY<a.top+qt.margin,i=t.clientX>a.right-qt.margin,r=t.clientY>a.bottom-qt.margin}qt.x=i?1:o?-1:0,qt.y=r?1:n?-1:0,qt.isScrolling||(qt.margin=s.margin,qt.speed=s.speed,qt.start(Dt))}},isScrolling:!1,prevTime:0,start:function(e){qt.isScrolling=!0,an(qt.i),qt.target=e,qt.prevTime=(new Date).getTime(),qt.i=sn(qt.scroll)},stop:function(){qt.isScrolling=!1,an(qt.i)}},Ft="createTouch"in nt,It=Ft?20:10,Lt=!1,Vt=!1,Bt=!1,Gt=!1,Ut=!1,Kt=!1,Wt="xy",Ht={drag:{cursor:"move",moveListener:F},resizex:{cursor:"e-resize",moveListener:I},resizey:{cursor:"s-resize",moveListener:I},resizexy:{cursor:"se-resize",moveListener:I},gesture:{cursor:"",moveListener:L}},Jt={drag:!0,resize:!0,gesture:!0},Qt=null,Zt="onmousewheel"in nt?"mousewheel":"wheel",en=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","tap","doubletap"],tn={},nn={directBind:0,onevent:1,globalBind:2},rn="Opera"==navigator.appName&&Ft&&navigator.userAgent.match("Presto"),on="matchesSelector"in Element.prototype?"matchesSelector":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",sn=e.requestAnimationFrame,an=e.cancelAnimationFrame,ln={_element:e,events:{}},cn={_element:nt,events:{}},pn={_element:e.parent,events:{}},dn={_element:null,events:{}},un=function(){function t(e,t,n,i){var s=l.indexOf(e),d=c[s];if(d||(d={events:{},typeCount:0},s=l.push(e)-1,c.push(d),p.push(r?{supplied:[],wrapped:[],useCount:[]}:null)),d.events[t]||(d.events[t]=[],d.typeCount++),-1===d.events[t].indexOf(n)){var u;if(r){var h=p[s],f=h.supplied.indexOf(n),g=h.wrapped[f]||function(t){t.immediatePropagationStopped||(t.target=t.srcElement,t.currentTarget=e,/mouse|click/.test(t.type)&&(t.pageX=t.clientX+nt.documentElement.scrollLeft,t.pageY=t.clientY+nt.documentElement.scrollTop),n(t))};u=e[o](a+t,g,Boolean(i)),-1===f?(h.supplied.push(n),h.wrapped.push(g),h.useCount.push(1)):h.useCount[f]++}else u=e[o](t,n,i||!1);return d.events[t].push(n),u}}function n(e,t,i,o){var d,u,h,f=l.indexOf(e),g=c[f],y=i;if(g&&g.events)if(r&&(u=p[f],h=u.supplied.indexOf(i),y=u.wrapped[h]),"all"!==t){if(g.events[t]){var m=g.events[t].length;if("all"===i)for(d=0;m>d;d++)n(e,t,g.events[t][d],Boolean(o));else for(d=0;m>d;d++)if(g.events[t][d]===i){e[s](a+t,y,o||!1),g.events[t].splice(d,1),r&&u&&(u.useCount[h]--,0===u.useCount[h]&&(u.supplied.splice(h,1),u.wrapped.splice(h,1),u.useCount.splice(h,1)));break}g.events[t]&&0===g.events[t].length&&(g.events[t]=null,g.typeCount--)}g.typeCount||(c.splice(f),l.splice(f),p.splice(f))}else for(t in g.events)g.events.hasOwnProperty(t)&&n(e,t,"all")}var i=e.Event,r="attachEvent"in e&&!("addEventListener"in e),o=r?"attachEvent":"addEventListener",s=r?"detachEvent":"removeEventListener",a=r?"on":"",l=[],c=[],p=[];return"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1}),"stopPropagation"in i.prototype||(i.prototype.stopPropagation=function(){this.cancelBubble=!0},i.prototype.stopImmediatePropagation=function(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}),"preventDefault"in i.prototype||(i.prototype.preventDefault=function(){this.returnValue=!1}),"hasOwnProperty"in i.prototype||(i.prototype.hasOwnProperty=Object.prototype.hasOwnProperty),{add:function(e,n,i,r){t(e._element,n,i,r)},remove:function(e,t,i,r){n(e._element,t,i,r)},addToElement:t,removeFromElement:n,useAttachEvent:r}}();Y.prototype={preventDefault:t,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}},Xt.indexOfElement=Yt.indexOfElement=function(e,t){for(var n=0;n<this.length;n++){var i=this[n];if(i.selector===e&&i._context===(t||nt)||!i.selector&&i._element===e)return n}return-1},Xt.get=Yt.get=function(e,t){return this[this.indexOfElement(e,t&&t.context)]},Xt.forEachSelector=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(n.selector){var i=e(n,n.selector,n._context,t,this);if(void 0!==i)return i}}},Z.prototype=Pt,et.prototype={setOnEvents:function(e,t){if("drop"===e){var n=t.ondrop||t.onDrop||t.drop,i=t.ondragenter||t.onDropEnter||t.dragenter,r=t.ondragleave||t.onDropLeave||t.dragleave;"function"==typeof n&&(this.ondrop=n),"function"==typeof i&&(this.ondragenter=i),"function"==typeof r&&(this.ondragleave=r)}else{var o=t.onstart||t.onStart||t.start,s=t.onmove||t.onMove||t.move,a=t.onend||t.onEnd||t.end,l=t.oninertiastart||t.onInertiaStart||t.inertiastart;e="on"+e,"function"==typeof o&&(this[e+"start"]=o),"function"==typeof s&&(this[e+"move"]=s),"function"==typeof a&&(this[e+"end"]=a),"function"==typeof l&&(this[e+"inertiastart"]=l)}return this},draggable:function(e){return e instanceof Object?(this.options.draggable=!0,this.setOnEvents("drag",e),/^x$|^y$|^xy$/.test(e.axis)?this.options.dragAxis=e.axis:null===e.axis&&delete this.options.dragAxis,this):"boolean"==typeof e?(this.options.draggable=e,this):null===e?(delete this.options.draggable,this):this.options.draggable},dropzone:function(e){if(e instanceof Object)return this.options.dropzone=!0,this.setOnEvents("drop",e),this.accept(e.accept),(this.selector?wt:Yt).push(this),Ut||this.selector||(this.rect=this.getRect()),this;if("boolean"==typeof e){if(e)(this.selector?wt:Yt).push(this),Ut||this.selector||(this.rect=this.getRect());else{var t=this.selector?wt:Yt,n=t.indexOf(this);-1!==n&&t.splice(n,1)}return this.options.dropzone=e,this}return null===e?(delete this.options.dropzone,this):this.options.dropzone},dropCheck:function(e,t,n){var i,r,o=s(e),a=g(t,n);return o.x+=a.x,o.y+=a.y,Ut&&(this.rect=this.getRect()),this.rect?(i=o.x>this.rect.left&&o.x<this.rect.right,r=o.y>this.rect.top&&o.y<this.rect.bottom,i&&r):!1},dropChecker:function(e){return"function"==typeof e?(this.dropCheck=e,this):this.dropCheck},accept:function(e){return n(e)?(this.options.accept=e,this):"string"==typeof e?(nt.querySelector(e),this.options.accept=e,this):null===e?(delete this.options.accept,this):this.options.accept},resizable:function(e){return e instanceof Object?(this.options.resizable=!0,this.setOnEvents("resize",e),/^x$|^y$|^xy$/.test(e.axis)?this.options.resizeAxis=e.axis:null===e.axis&&(this.options.resizeAxis=Pt.resizeAxis),this):"boolean"==typeof e?(this.options.resizable=e,this):this.options.resizable},resizeable:t,squareResize:function(e){return"boolean"==typeof e?(this.options.squareResize=e,this):null===e?(delete this.options.squareResize,this):this.options.squareResize},gesturable:function(e){return e instanceof Object?(this.options.gesturable=!0,this.setOnEvents("gesture",e),this):"boolean"==typeof e?(this.options.gesturable=e,this):null===e?(delete this.options.gesturable,this):this.options.gesturable},gestureable:t,autoScroll:function(t){var i=Pt.autoScroll;if(t instanceof Object){var r=this.options.autoScroll;return r===i&&(r=this.options.autoScroll={margin:i.margin,distance:i.distance,interval:i.interval,container:i.container}),r.margin=this.validateSetting("autoScroll","margin",t.margin),r.speed=this.validateSetting("autoScroll","speed",t.speed),r.container=n(t.container)||t.container instanceof e.Window?t.container:i.container,this.options.autoScrollEnabled=!0,this.options.autoScroll=r,this}return"boolean"==typeof t?(this.options.autoScrollEnabled=t,this):null===t?(delete this.options.autoScrollEnabled,delete this.options.autoScroll,this):this.options.autoScrollEnabled?this.options.autoScroll:!1},snap:function(e){var t=Pt.snap;if(e instanceof Object){var n=this.options.snap;return n===t&&(n={}),n.mode=this.validateSetting("snap","mode",e.mode),n.endOnly=this.validateSetting("snap","endOnly",e.endOnly),n.actions=this.validateSetting("snap","actions",e.actions),n.range=this.validateSetting("snap","range",e.range),n.paths=this.validateSetting("snap","paths",e.paths),n.grid=this.validateSetting("snap","grid",e.grid),n.gridOffset=this.validateSetting("snap","gridOffset",e.gridOffset),n.anchors=this.validateSetting("snap","anchors",e.anchors),this.options.snapEnabled=!0,this.options.snap=n,this
}return"boolean"==typeof e?(this.options.snapEnabled=e,this):null===e?(delete this.options.snapEnabled,delete this.options.snap,this):this.options.snapEnabled?this.options.snap:!1},inertia:function(e){var t=Pt.inertia;if(e instanceof Object){var n=this.options.inertia;return n===t&&(n=this.options.inertia={resistance:t.resistance,minSpeed:t.minSpeed,endSpeed:t.endSpeed,actions:t.actions,zeroResumeDelta:t.zeroResumeDelta}),n.resistance=this.validateSetting("inertia","resistance",e.resistance),n.minSpeed=this.validateSetting("inertia","minSpeed",e.minSpeed),n.endSpeed=this.validateSetting("inertia","endSpeed",e.endSpeed),n.actions=this.validateSetting("inertia","actions",e.actions),n.zeroResumeDelta=this.validateSetting("inertia","zeroResumeDelta",e.zeroResumeDelta),this.options.inertiaEnabled=!0,this.options.inertia=n,this}return"boolean"==typeof e?(this.options.inertiaEnabled=e,this):null===e?(delete this.options.inertiaEnabled,delete this.options.inertia,this):this.options.inertiaEnabled?this.options.inertia:!1},getAction:function(e){var t=this.defaultActionChecker(e);return this.options.actionChecker&&(t=this.options.actionChecker(e,t,this)),t},defaultActionChecker:C,actionChecker:function(e){return"function"==typeof e?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(){return this.selector&&!n(this._element)&&(this._element=this._context.querySelector(this.selector)),c(this._element)},rectChecker:function(e){return"function"==typeof e?(this.getRect=e,this):null===e?(delete this.options.getRect,this):this.getRect},styleCursor:function(e){return"boolean"==typeof e?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(e){return"boolean"==typeof e||"auto"===e?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},origin:function(e){return e instanceof Object||/^parent$|^self$/.test(e)?(this.options.origin=e,this):null===e?(delete this.options.origin,this):this.options.origin},deltaSource:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):null===e?(delete this.options.deltaSource,this):this.options.deltaSource},restrict:function(e){if(void 0===e)return this.options.restrict;if(e instanceof Object){var t={};(e.drag instanceof Object||/^parent$|^self$/.test(e.drag))&&(t.drag=e.drag),(e.resize instanceof Object||/^parent$|^self$/.test(e.resize))&&(t.resize=e.resize),(e.gesture instanceof Object||/^parent$|^self$/.test(e.gesture))&&(t.gesture=e.gesture),"boolean"==typeof e.endOnly&&(t.endOnly=e.endOnly),this.options.restrictEnabled=!0,this.options.restrict=t}else null===e&&(delete this.options.restrict,delete this.options.restrictEnabled);return this},context:function(){return this._context},_context:nt,ignoreFrom:function(e){return"string"==typeof e||n(e)?(this.options.ignoreFrom=e,this):null===e?(delete this.options.ignoreFrom,this):this.options.ignoreFrom},validateSetting:function(e,t,i){var r=Pt[e],o=this.options[e];if(void 0!==r&&void 0!==r[t]){if("objectTypes"in r&&r.objectTypes.test(t))return i instanceof Object?i:t in o&&o[t]instanceof Object?o[t]:r[t];if("arrayTypes"in r&&r.arrayTypes.test(t))return i instanceof Array?i:t in o&&o[t]instanceof Array?o[t]:r[t];if("stringTypes"in r&&r.stringTypes.test(t))return"string"==typeof i?i:t in o&&"string"==typeof o[t]?o[t]:r[t];if("numberTypes"in r&&r.numberTypes.test(t))return"number"==typeof i?i:t in o&&"number"==typeof o[t]?o[t]:r[t];if("boolTypes"in r&&r.boolTypes.test(t))return"boolean"==typeof i?i:t in o&&"boolean"==typeof o[t]?o[t]:r[t];if("elementTypes"in r&&r.elementTypes.test(t))return n(i)?i:t in o&&n(o[t])?o[t]:r[t]}return null},element:function(){return this._element},fire:function(e){if(!e||!e.type||-1===en.indexOf(e.type))return this;for(var t,n,i=0,r=0,o="on"+e.type;3>i;)try{switch(i){case nn.directBind:if(e.type in this._iEvents){for(t=this._iEvents[e.type],n=t.length;n>r&&!e.immediatePropagationStopped;r++)t[r](e);break}break;case nn.onevent:"function"==typeof this[o]&&this[o](e);break;case nn.globalBind:if(e.type in tn&&(t=tn[e.type]))for(n=t.length;n>r&&!e.immediatePropagationStopped;r++)t[r](e)}if(e.propagationStopped)break;r=0,i++}catch(s){it.error("Error thrown from "+e.type+" listener"),it.error(s),r++,i===nn.onevent&&i++}return this},on:function(e,t,n){if("wheel"===e&&(e=Zt),n=n?!0:!1,-1!==en.indexOf(e))e in this._iEvents?-1===this._iEvents[e].indexOf(t)&&this._iEvents[e].push(t):this._iEvents[e]=[t];else if(this.selector){Ct[e]||(Ct[e]={selectors:[],contexts:[],listeners:[]},un.addToElement(this._context,e,W),un.addToElement(this._context,e,H,!0));var i,r=Ct[e];for(i=r.selectors.length-1;i>=0&&(r.selectors[i]!==this.selector||r.contexts[i]!==this._context);i--);-1===i&&(i=r.selectors.length,r.selectors.push(this.selector),r.contexts.push(this._context),r.listeners.push([])),r.listeners[i].push([t,n])}else un.add(this,e,t,n);return this},off:function(e,t,n){var i,r=-1;if(n=n?!0:!1,"wheel"===e&&(e=Zt),-1!==en.indexOf(e))i=this._iEvents[e],i&&-1!==(r=i.indexOf(t))&&this._iEvents[e].splice(r,1);else if(this.selector){var o=Ct[e],s=!1;if(!o)return this;for(r=o.selectors.length-1;r>=0;r--)if(o.selectors[r]===this.selector&&o.contexts[r]===this._context){for(var a=o.listeners[r],l=a.length-1;l>=0;l--){var c=a[l][0],p=a[l][1];if(c===t&&p===n){a.splice(l,1),a.length||(o.selectors.splice(r,1),o.contexts.splice(r,1),o.listeners.splice(r,1),un.removeFromElement(this._context,e,W),un.removeFromElement(this._context,e,H,!0),o.selectors.length||(Ct[e]=null)),s=!0;break}}if(s)break}}else un.remove(this,t,n);return this},set:function(e){e&&"object"==typeof e||(e={}),this.options=new Z(e),this.draggable("draggable"in e?e.draggable:this.options.draggable),this.dropzone("dropzone"in e?e.dropzone:this.options.dropzone),this.resizable("resizable"in e?e.resizable:this.options.resizable),this.gesturable("gesturable"in e?e.gesturable:this.options.gesturable);for(var t=["accept","actionChecker","autoScroll","dropChecker","ignoreFrom","inertia","origin","rectChecker","restrict","snap"],n=0,i=t.length;i>n;n++){var r=t[n];r in e&&this[r](e[r])}return this},unset:function(){if(un.remove(this,"all"),"string"!=typeof this.selector)un.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor=""),this._gesture&&(this._gesture.target=null);else for(var e in Ct)for(var t=Ct[e],n=0;n<t.selectors.length;n++){t.selectors[n]===this.selector&&t.contexts[n]===this._context&&(t.selectors.splice(n,1),t.contexts.splice(n,1),t.listeners.splice(n,1),t.selectors.length||(Ct[e]=null)),un.removeFromElement(this._context,e,W),un.removeFromElement(this._context,e,H,!0);break}return this.dropzone(!1),Xt.splice(Xt.indexOf(this),1),Q}},et.prototype.gestureable=et.prototype.gesturable,et.prototype.resizeable=et.prototype.resizable,Q.isSet=function(e,t){return-1!==Xt.indexOfElement(e,t&&t.context)},Q.on=function(e,t,n){return-1!==en.indexOf(e)?tn[e]?-1===tn[e].indexOf(t)&&tn[e].push(t):tn[e]=[t]:un.add(cn,e,t,n),Q},Q.off=function(e,t,n){if(-1===en.indexOf(e))un.remove(cn,e,t,n);else{var i;e in tn&&-1!==(i=tn[e].indexOf(t))&&tn[e].splice(i,1)}return Q},Q.simulate=function(e,n,i){var r,o,s={};if("resize"===e&&(e="resizexy"),!(e in Ht))return Q;if(i)for(r in i)s[r]=i[r];else o=Dt._element instanceof rt?n.getBoundingClientRect():o=n.getClientRects()[0],"drag"===e?(s.pageX=o.left+o.width/2,s.pageY=o.top+o.height/2):(s.pageX=o.right,s.pageY=o.bottom);return s.target=s.currentTarget=n,s.preventDefault=s.stopPropagation=t,M(s,e),Q},Q.enableDragging=function(e){return null!==e&&void 0!==e?(Jt.drag=e,Q):Jt.drag},Q.enableResizing=function(e){return null!==e&&void 0!==e?(Jt.resize=e,Q):Jt.resize},Q.enableGesturing=function(e){return null!==e&&void 0!==e?(Jt.gesture=e,Q):Jt.gesture},Q.eventTypes=en,Q.debug=function(){return{target:Dt,dragging:Gt,resizing:Kt,gesturing:Bt,prepared:Qt,matches:Tt,prevCoords:ut,downCoords:ft,pointerIds:yt,pointerMoves:mt,addPointer:j,removePointer:N,recordPointers:q,inertia:zt,downTime:vt,downEvent:xt,prevEvent:bt,Interactable:et,IOptions:Z,interactables:Xt,dropzones:Yt,pointerIsDown:Lt,defaultOptions:Pt,defaultActionChecker:C,actions:Ht,dragMove:F,resizeMove:I,gestureMove:L,pointerUp:K,pointerDown:M,pointerMove:P,pointerHover:U,events:un,globalEvents:tn,delegatedEvents:Ct}},Q.getTouchAverage=d,Q.getTouchBBox=u,Q.getTouchDistance=h,Q.getTouchAngle=f,Q.getElementRect=c,Q.margin=function(e){return"number"==typeof e?(It=e,Q):It},Q.styleCursor=function(e){return"boolean"==typeof e?(Pt.styleCursor=e,Q):Pt.styleCursor},Q.autoScroll=function(t){var i=Pt.autoScroll;return t instanceof Object?(Pt.autoScrollEnabled=!0,"number"==typeof t.margin&&(i.margin=t.margin),"number"==typeof t.speed&&(i.speed=t.speed),i.container=n(t.container)||t.container instanceof e.Window?t.container:i.container,Q):"boolean"==typeof t?(Pt.autoScrollEnabled=t,Q):Pt.autoScrollEnabled?i:!1},Q.snap=function(e){var t=Pt.snap;return e instanceof Object?(Pt.snapEnabled=!0,"string"==typeof e.mode&&(t.mode=e.mode),"boolean"==typeof e.endOnly&&(t.endOnly=e.endOnly),"number"==typeof e.range&&(t.range=e.range),e.actions instanceof Array&&(t.actions=e.actions),e.anchors instanceof Array&&(t.anchors=e.anchors),e.grid instanceof Object&&(t.grid=e.grid),e.gridOffset instanceof Object&&(t.gridOffset=e.gridOffset),Q):"boolean"==typeof e?(Pt.snapEnabled=e,Q):{enabled:Pt.snapEnabled,mode:t.mode,actions:t.actions,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors,paths:t.paths,range:t.range,locked:jt.locked,x:jt.x,y:jt.y,realX:jt.realX,realY:jt.realY,dx:jt.dx,dy:jt.dy}},Q.inertia=function(e){var t=Pt.inertia;return e instanceof Object?(Pt.inertiaEnabled=!0,"number"==typeof e.resistance&&(t.resistance=e.resistance),"number"==typeof e.minSpeed&&(t.minSpeed=e.minSpeed),"number"==typeof e.endSpeed&&(t.endSpeed=e.endSpeed),"boolean"==typeof e.zeroResumeDelta&&(t.zeroResumeDelta=e.zeroResumeDelta),e.actions instanceof Array&&(t.actions=e.actions),Q):"boolean"==typeof e?(Pt.inertiaEnabled=e,Q):{enabled:Pt.inertiaEnabled,resistance:t.resistance,minSpeed:t.minSpeed,endSpeed:t.endSpeed,actions:t.actions,zeroResumeDelta:t.zeroResumeDelta}},Q.supportsTouch=function(){return Ft},Q.currentAction=function(){return Gt&&"drag"||Kt&&"resize"||Bt&&"gesture"||null},Q.stop=function(e){if(Gt||Kt||Bt){qt.stop(),Tt=[],Dt.options.styleCursor&&(nt.documentElement.style.cursor=""),Dt._gesture&&Dt._gesture.stop();for(var t=0;t<wt.length;t++)wt._elements=[];e&&"function"==typeof e.preventDefault&&O(e,Dt),J()}return yt&&yt.length&&(yt.splice(0),mt.splice(0)),Lt=jt.locked=Gt=Kt=Bt=!1,Qt=bt=null,Q},Q.dynamicDrop=function(e){return"boolean"==typeof e?(Gt&&Ut!==e&&!e&&y(Yt),Ut=e,Q):Ut},Q.deltaSource=function(e){return"page"===e||"client"===e?(Pt.deltaSource=e,this):Pt.deltaSource},Q.restrict=function(e){var t=Pt.restrict;return void 0===e?Pt.restrict:(e instanceof Object?((e.drag instanceof Object||/^parent$|^self$/.test(e.drag))&&(t.drag=e.drag),(e.resize instanceof Object||/^parent$|^self$/.test(e.resize))&&(t.resize=e.resize),(e.gesture instanceof Object||/^parent$|^self$/.test(e.gesture))&&(t.gesture=e.gesture),"boolean"==typeof e.endOnly&&(t.endOnly=e.endOnly)):null===e&&(t.drag=t.resize=t.gesture=null,t.endOnly=!1),this)},ct?(un.add(cn,"pointerup",A),un.add(cn,"pointerdown",k),un.add(cn,"MSGestureChange",P),un.add(cn,"MSGestureEnd",K),un.add(cn,"MSInertiaStart",K),un.add(cn,"pointerover",B),un.add(cn,"pointerout",G),un.add(cn,"pointermove",q),un.add(cn,"pointerup",q),un.add(cn,"pointercancel",q),un.add(cn,"pointerup",function(){Gt||Kt||Bt||(Lt=!1)}),At=new lt,At.target=nt.documentElement):(un.add(cn,"mouseup",A),un.add(cn,"touchend",A),un.add(cn,"mousedown",k),un.add(cn,"mousemove",P),un.add(cn,"mouseup",K),un.add(cn,"mouseover",B),un.add(cn,"mouseout",G),un.add(cn,"touchstart",k),un.add(cn,"touchmove",P),un.add(cn,"touchend",K),un.add(cn,"touchcancel",K)),un.add(ln,"blur",K);try{e.frameElement&&(dn._element=e.frameElement.ownerDocument,un.add(dn,"mouseup",K),un.add(dn,"touchend",K),un.add(dn,"touchcancel",K),un.add(dn,"pointerup",K),un.add(pn,"blur",K))}catch(hn){Q.windowParentError=hn}un.add(cn,"selectstart",function(e){(Gt||Kt||Bt)&&O(e,Dt)}),on in Element.prototype&&"function"==typeof Element.prototype[on]||(Element.prototype[on]=tt=function(e,t){t=t||this.parentNode.querySelectorAll(e);for(var n=t.length,i=0;n>i;i++)if(t[i]===this)return!0;return!1}),function(){for(var t=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!e.requestAnimationFrame;++i)sn=e[n[i]+"RequestAnimationFrame"],an=e[n[i]+"CancelAnimationFrame"]||e[n[i]+"CancelRequestAnimationFrame"];sn||(sn=function(n){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),o=e.setTimeout(function(){n(i+r)},r);return t=i+r,o}),an||(an=function(e){clearTimeout(e)})}(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Q),exports.interact=Q):"function"==typeof define&&define.amd?define("interact",function(){return Q}):e.interact=Q}(this);
