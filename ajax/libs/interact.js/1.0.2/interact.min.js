/**
 * Copyright (c) 2012, 2013 Taye Adeyemi
 * http://taye.mit-license.org/
 */
window.interact=function(){"use strict";function e(){}function t(e){P=e.pageX,j=e.pageY,q=e.clientX,L=e.clientY}function n(e,t){var n,i,r;return e=e||"page",t.touches?(n=t.touches.length?t.touches[0]:t.changedTouches[0],i=n[e+"X"],r=n[e+"Y"]):(i=t[e+"X"],r=t[e+"Y"]),{x:i,y:r}}function i(e){if(wt){var t=n("screen",e);return t.x+=window.scrollX,t.y+=window.scrollY,t}return n("page",e)}function r(e){return n(wt?"screen":"client",e)}function o(){return{x:window.scrollX||A.documentElement.scrollLeft,y:window.scrollY||A.documentElement.scrollTop}}function s(e){var t,n=e.touches,i=0,r=0,o=0,s=0;for(t=0;t<n.length;t++)i+=n[t].pageX/n.length,r+=n[t].pageY/n.length,o+=n[t].clientX/n.length,s+=n[t].clientY/n.length;return{pageX:i,pageY:r,clientX:o,clientY:s}}function a(e){if(e.touches.length){var t,n=e.touches,i=e.touches[0].pageX,r=e.touches[0].pageY,o=i,s=r;for(t=1;t<n.length;t++)i=i>e.touches[t].pageX?i:e.touches[t].pageX,r=i>e.touches[t].pageX?r:e.touches[t].pageY;return{left:i,top:r,width:o-i,height:s-r}}}function l(e){var t=(Q&&Q.options||tt).deltaSource,n=t+"X",i=e.touches[0][n],r=e.touches[0][n];return"touchend"===e.type&&1===e.touches.length?(i-=e.changedTouches[0][n],r-=e.changedTouches[0][n]):(i-=e.touches[1][n],r-=e.touches[1][n]),Math.sqrt(i*i+r*r)}function c(e){var t=(Q&&Q.options||tt).deltaSource,n=t+"X",i=e.touches[0][n],r=e.touches[0][n];return"touchend"===e.type&&1===e.touches.length?(i-=e.changedTouches[0][n],r-=e.changedTouches[0][n]):(i-=e.touches[1][n],r-=e.touches[1][n]),180*-Math.atan(r/i)/Math.PI}function h(e){for(var t=0,n=e.length;n>t;t++)e[t].rect=e[t].getRect()}function u(e){if(e.length){var t,n,i,r,o,s=e[0],a=[],l=[];for(r=1;r<e.length;r++){if(t=e[r],!a.length)for(n=s;n.parentNode!==A;)a.unshift(n),n=n.parentNode;if(s instanceof D&&t instanceof M&&!(t instanceof C)){if(t===s.parentNode)continue;n=t.ownerSVGElement}else n=t;for(l=[];n.parentNode!==A;)l.unshift(n),n=n.parentNode;for(o=0;l[o]&&l[o]===a[o];)o++;var c=[l[o-1],l[o],a[o]];for(i=c[0].lastChild;i;){if(i===c[1]){s=t,a=[];break}if(i===c[2])break;i=i.previousSibling}}return{element:s,index:e.indexOf(s)}}}function d(e){if(U.length||W.length){var t,n,i=[],r=[],o=[],s=[];for(t=0;t<U.length;t++)U[t].dropCheck(e)&&(i.push(U[t]),r.push(U[t]._element));if(n=u(r),Z=n?U[n.index]:null,W.length){var a=Q._element;for(t=0;t<W.length;t++)for(var l=W[t],c=A.querySelectorAll(l.selector),h=0,d=c.length;d>h;h++)l._element=c[h],l.rect=l.getRect(),l._element!==a&&-1===r.indexOf(l._element)&&s.indexOf(-1===l._element)&&l.dropCheck(e)&&(o.push(l),s.push(l._element));s.length&&(Z&&(o.push(Z),s.push(Z._element)),n=u(s),n&&(Z=o[n.index],Z.selector&&(Z._element=s[n.index])))}return Z}}function p(e,t,n,o,h){var u,d,p=(Q&&Q.options||tt).deltaSource,g=Q?Q.options:tt;if(o=o||Q._element,"gesture"===t){var f=s(e);d={x:f.pageX-g.origin.x,y:f.pageY-g.origin.y},u={x:f.clientX-g.origin.x,y:f.clientY-g.origin.y}}else if(u=r(e),d=i(e),d.x-=g.origin.x,d.y-=g.origin.y,Q.options.snapEnabled){var y=g.snap;this.snap={mode:y.mode,anchors:nt.anchors,range:nt.range,locked:nt.locked,x:nt.x,y:nt.y,realX:nt.realX,realY:nt.realY,dx:nt.dx,dy:nt.dy},nt.locked&&("path"===y.mode?(nt.xInRange&&(d.x+=nt.dx,u.x+=nt.dx),nt.yInRange&&(d.y+=nt.dy,u.y+=nt.dy)):(d.x+=nt.dx,d.y+=nt.dy,u.x+=nt.dx,u.y+=nt.dy))}this.x0=N,this.y0=$,this.clientX0=B,this.clientY0=K,this.pageX=d.x,this.pageY=d.y,this.clientX=u.x,this.clientY=u.y,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.target=o,this.timeStamp=(new Date).getTime(),this.type=t+(n||""),h&&(this.relatedTarget=h),"start"===n||"end"===n||"drop"===t?"client"===p?(this.dx=u.x-N,this.dy=u.y-$):(this.dx=d.x-N,this.dy=d.y-$):"client"===p?(this.dx=u.x-q,this.dy=u.y-L):(this.dx=d.x-P,this.dy=d.y-j),"resize"===t?g.squareResize||e.shiftKey?("y"===pt?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=pt,"x"===pt?this.dy=0:"y"===pt&&(this.dx=0)):"gesture"===t&&(this.touches=e.touches,this.distance=l(e),this.box=a(e),this.angle=c(e),"start"===n?(this.scale=1,this.ds=0,this.rotation=0):(this.scale=this.distance/G.startDistance,"end"===n?(this.rotation=this.angle-G.startAngle,this.ds=this.scale-1):(this.rotation=this.angle-G.prevAngle,this.ds=this.scale-G.prevScale)))}function g(e,t){if("string"!=typeof e)return null;t=t||Q;var n=-1!==e.indexOf("resize")?"resize":e,i=(t||Q).options;return("resize"===n&&i.resizeable||"drag"===e&&i.draggable||"gesture"===e&&i.gestureable)&&ft[n]?(("resize"===e||"resizeyx"===e)&&(e="resizexy"),e):null}function f(e){var t;if(!(ht||dt||ct)){if(J.length&&"mousedown"===e.type)t=w(e,J);else for(var n,i,r=e.target instanceof k?e.target.correspondingUseElement:e.target;r!==A.documentElement&&!t;){J=[];for(n in H)i=Element.prototype[Et]===T?A.querySelectorAll(n):void 0,r[Et](n,i)&&(H[n]._element=r,J.push(H[n]));t=w(e,J),r=r.parentNode}return t?(st=!0,y(e,t)):void 0}}function y(e,t){if(e.touches&&e.touches.length<2&&!Q||!st){var n=Rt.useAttachEvent?e.currentTarget:this;Q=V.get(n)}var o=Q&&Q.options;if(Q&&!(ht||dt||ct)){var a,l,c,h=g(t||Q.getAction(e));if(e.touches?(a=s(e),l={x:a.pageX,y:a.pageY},c={x:a.clientX,y:a.clientY}):(l=i(e),c=r(e)),!h)return e;st=!0,at=!1,o.styleCursor&&(A.documentElement.style.cursor=gt[h].cursor),pt="resizexy"===h?"xy":"resizex"===h?"x":"resizey"===h?"y":"",yt=h,N=l.x-o.origin.x,$=l.y-o.origin.y,B=c.x-o.origin.x,K=c.y-o.origin.y,nt.x=null,nt.y=null,e.preventDefault()}}function m(e){if(st&&(N===P&&$===j&&(at=!0),yt&&Q))if(Q.options.snapEnabled){var t,n,r,o,s,a,l,c,h,u=Q.options.snap,d=i(e);if(nt.realX=d.x,nt.realY=d.y,d.x-=Q.options.origin.x,d.y-=Q.options.origin.y,u.range<0&&(u.range=1/0),"anchor"===u.mode&&u.anchors.length){for(t={anchor:null,distance:0,range:0,distX:0,distY:0},c=0,h=u.anchors.length;h>c;c++){var p=u.anchors[c];n="number"==typeof p.range?p.range:u.range,s=p.x-d.x,a=p.y-d.y,l=Math.sqrt(s*s+a*a),r=n>l,1/0===n&&t.inRange&&1/0!==t.range&&(r=!1),(!t.anchor||(r?t.inRange&&1/0!==n?l/n<t.distance/t.range:l<t.distance:!t.inRange&&l<t.distance))&&(1/0===n&&(r=!0),t.anchor=p,t.distance=l,t.range=n,t.inRange=r,t.distX=s,t.distY=a,nt.range=n)}r=t.inRange,o=t.anchor.x!==nt.x||t.anchor.y!==nt.y,nt.x=t.anchor.x,nt.y=t.anchor.y,nt.dx=t.distX,nt.dy=t.distY,Q.options.snap.anchors.closest=nt.anchors.closest=t.anchor}else if("grid"===u.mode){var g=Math.round((d.x-u.gridOffset.x)/u.grid.x),f=Math.round((d.y-u.gridOffset.y)/u.grid.y),y=g*u.grid.x+u.gridOffset.x,m=f*u.grid.y+u.gridOffset.y;s=y-d.x,a=m-d.y,l=Math.sqrt(s*s+a*a),r=l<u.range,o=y!==nt.x||m!==nt.y,nt.x=y,nt.y=m,nt.dx=s,nt.dy=a,nt.range=u.range}if("path"===u.mode&&u.paths.length){for(t={path:{},distX:0,distY:0,range:0},c=0,h=u.paths.length;h>c;c++){var v,x,b=u.paths[c],w=!1,E=!1,S=b;"function"==typeof b&&(S=b(d.x,d.y)),"number"==typeof S.x?(v=S.x,w=!0):v=d.x,"number"==typeof S.y?(x=S.y,E=!0):x=d.y,n="number"==typeof S.range?S.range:u.range,s=v-d.x,a=x-d.y;var O=Math.abs(s)<n&&w,z=Math.abs(a)<n&&E;1/0===n&&t.xInRange&&1/0!==t.range&&(O=!1),"x"in t.path&&!(O?t.xInRange&&1/0!==n?l/n<t.distX/t.range:Math.abs(s)<Math.abs(t.distX):!t.xInRange&&Math.abs(s)<Math.abs(t.distX))||(1/0===n&&(O=!0),t.path.x=v,t.distX=s,t.xInRange=O,t.range=n,nt.range=n),1/0===n&&t.yInRange&&1/0!==t.range&&(z=!1),"y"in t.path&&!(z?t.yInRange&&1/0!==n?l/n<t.distY/t.range:Math.abs(a)<Math.abs(t.distY):!t.yInRange&&Math.abs(a)<Math.abs(t.distY))||(1/0===n&&(z=!0),t.path.y=x,t.distY=a,t.yInRange=z,t.range=n,nt.range=n)}r=t.xInRange||t.yInRange,o=!t.xInRange||!t.yInRange||nt.xInRange&&nt.yInRange?!t.xInRange||!t.yInRange||t.path.x!==nt.x||t.path.y!==nt.y:!0,nt.x=t.path.x,nt.y=t.path.y,nt.dx=t.distX,nt.dy=t.distY,nt.xInRange=t.xInRange,nt.yInRange=t.yInRange,Q.options.snap.paths.closest=nt.paths.closest=t.path}!o&&nt.locked||!r?(o||!r)&&(nt.locked=!1,gt[yt].moveListener(e)):(nt.locked=!0,gt[yt].moveListener(e))}else gt[yt].moveListener(e);(ht||dt)&&it.edgeMove(e)}function v(e){e.preventDefault();var n,i,r,o,s;if(ht){var a=Q._element,l=o?o._element:null;n=new p(e,"drag","move"),o=d(e,Q),Q._element=a,o!==et&&(et&&(r=new p(e,"drag","leave",l,a),n.dragLeave=et._element,s=et,et=null),o&&(i=new p(e,"drag","enter",l,a),n.dragEnter=o._element,et=o))}else if(n=new p(e,"drag","start"),ht=!0,!ut){h(U);for(var c=0;c<W.length;c++)W[c]._elements=A.querySelectorAll(W[c].selector)}Q.fire(n),r&&s.fire(r),i&&o.fire(i),t(n)}function x(e){e.preventDefault();var n;dt?(n=new p(e,"resize","move"),Q.fire(n)):(n=new p(e,"resize","start"),Q.fire(n),dt=!0),t(n)}function b(e){if(e.touches&&!(e.touches.length<2)){e.preventDefault();var n;ct?(n=new p(e,"gesture","move"),n.ds=n.scale-G.scale,Q.fire(n)):(n=new p(e,"gesture","start"),n.ds=0,G.startDistance=n.distance,G.startAngle=n.angle,G.scale=1,Q.fire(n),ct=!0),t(n),G.prevAngle=n.angle,G.prevDistance=n.distance,1/0===n.scale||null===n.scale||void 0===n.scale||isNaN(n.scale)||(G.scale=n.scale)}}function w(e,t){for(var n=0,i=t.length;i>n;n++){var r=t[n],o=g(r.getAction(e,r),r);if(o)return Q=r,o}}function E(e){if(!(st||ht||dt||ct)){var t=[],n=Q&&Q._element,i=e.target instanceof k?e.target.correspondingUseElement:e.target;for(var r in H)H.hasOwnProperty(r)&&H[r]&&i[Et](r)&&(H[r]._element=i,t.push(H[r]));{var o=V.get(i);o&&g(o.getAction(e,o),o)}if(!o||!g(o.getAction(e)))if(w(e,t))J=t,O(e,J),Rt.addToElement(i,"mousemove",O);else if(Q){var s=n.querySelectorAll("*");if(-1!==Array.prototype.indexOf.call(s,i)){for(var a=0;a<J.length;a++)J[a]._element=n;O(e,J),Rt.addToElement(Q._element,"mousemove",O)}else Q=null,J=[]}}}function S(e){var t=e.target instanceof k?e.target.correspondingUseElement:e.target;V.get(t)||Rt.removeFromElement(t,O),Q&&Q.options.styleCursor&&!(ht||dt||ct)&&(A.documentElement.style.cursor="")}function O(e,t){if(st||ht||dt||ct)e.preventDefault();else{var n;t?n=w(e,t):Q&&(n=g(Q.getAction(e))),Q&&Q.options.styleCursor&&(A.documentElement.style.cursor=n?gt[n].cursor:"")}}function z(e){var t;if(!(e.touches&&e.touches.length>=2)){if(ht){t=new p(e,"drag","end");var n,i=Q._element,r=d(e,Q),o=r?r._element:null;if(Q._element=i,r)n=new p(e,"drop",null,o,i),t.dropzone=o;else if(et){var s=new p(e,"drag","leave",o,i);et.fire(s,i),t.dragLeave=et._element}Q.fire(t),n&&Z.fire(n)}else if(dt)t=new p(e,"resize","end"),Q.fire(t);else if(ct)t=new p(e,"gesture","end"),t.ds=t.scale,Q.fire(t);else if(("mouseup"===e.type||"touchend"===e.type)&&Q&&st&&!at){var a={};for(var l in e)e.hasOwnProperty(l)&&(a[l]=e[l]);a.type="click",Q.fire(a)}return R.stop(),e}}function _(){Q.selector||(Q=null),Z=et=null}function R(e){return V.get(e)||new Y(e)}function X(e){for(var t in tt)e.hasOwnProperty(t)&&typeof e[t]==typeof tt[t]&&(this[t]=e[t])}function Y(e,t){this._element=e,this._iEvents=this._iEvents||{},"string"==typeof e?(A.querySelector(e),H[e]=this,this.selector=e):(e instanceof Element&&(Rt.add(this,"mousemove",O),Rt.add(this,"mousedown",y),Rt.add(this,"touchmove",O),Rt.add(this,"touchstart",y)),F.push(this)),V.push(this),this.set(t)}var T,A=window.document,I=window.console,M=window.SVGElement||e,C=window.SVGSVGElement||e,k=window.SVGElementInstance||e,D=window.HTMLElement||window.Element,P=0,j=0,q=0,L=0,N=0,$=0,B=0,K=0,G={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},V=[],U=[],F=[],H={},W=[],J=[],Q=null,Z=null,et=null,tt={draggable:!1,dropzone:!1,resizeable:!1,squareResize:!1,gestureable:!1,styleCursor:!0,snap:{mode:"grid",range:1/0,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],arrayTypes:/^anchors$|^paths$/,objectTypes:/^grid$|^gridOffset$/,stringTypes:/^mode$/,numberTypes:/^range$/},snapEnabled:!1,autoScroll:{container:window,margin:60,interval:20,distance:10,elementTypes:/^container$/,numberTypes:/^range$|^interval$|^distance$/},autoScrollEnabled:!1,origin:{x:0,y:0},deltaSource:"page"},nt={locked:!1,x:0,y:0,dx:0,dy:0,realX:0,realY:0,anchors:[],paths:[]},it={margin:60,interval:20,i:null,distance:10,x:0,y:0,scroll:function(){var e=Q.options.autoScroll.container;e===window?window.scrollBy(it.x,it.y):e&&(e.scrollLeft+=it.x,e.scrollTop+=it.y)},edgeMove:function(e){if(Q&&Q.options.autoScrollEnabled&&(ht||dt)){var t,n,i,r,o=Q.options.autoScroll;if(o.container===window)r=e.clientX<it.margin,t=e.clientY<it.margin,n=e.clientX>window.innerWidth-it.margin,i=e.clientY>window.innerHeight-it.margin;else{var s=R(o.container).getRect();r=e.clientX<s.left+it.margin,t=e.clientY<s.top+it.margin,n=e.clientX>s.right-it.margin,i=e.clientY>s.bottom-it.margin}it.x=it.distance*(n?1:r?-1:0),it.y=it.distance*(i?1:t?-1:0),it.isScrolling||(it.margin=o.margin,it.distance=o.distance,it.interval=o.interval,it.start())}},isScrolling:!1,start:function(){it.isScrolling=!0,window.clearInterval(it.i),it.i=window.setInterval(it.scroll,it.interval)},stop:function(){window.clearInterval(it.i),it.isScrolling=!1}},rt="createTouch"in A,ot=rt?20:10,st=!1,at=!1,lt=!1,ct=!1,ht=!1,ut=!1,dt=!1,pt="xy",gt={drag:{cursor:"move",moveListener:v},resizex:{cursor:"e-resize",moveListener:x},resizey:{cursor:"s-resize",moveListener:x},resizexy:{cursor:"se-resize",moveListener:x},gesture:{cursor:"",moveListener:b}},ft={drag:!0,resize:!0,gesture:!0},yt=null,mt="onmousewheel"in A?"mousewheel":"wheel",vt=["resizestart","resizemove","resizeend","dragstart","dragmove","dragend","dragenter","dragleave","drop","gesturestart","gesturemove","gestureend","click"],xt={},bt={onevent:0,directBind:1,globalBind:2},wt="Opera"==navigator.appName&&rt&&navigator.userAgent.match("Presto"),Et="matchesSelector"in Element.prototype?"matchesSelector":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",St={_element:window,events:{}},Ot={_element:A,events:{}},zt={_element:window.parent,events:{}},_t={_element:window.parent.document,events:{}},Rt=function(){function e(e,t,n,o){var c=l[a.indexOf(e)];if(c||(c={events:{},typeCount:0},a.push(e),l.push(c)),t in c.events||(c.events[t]=[],c.typeCount++),-1===c.events[t].indexOf(n)){var h;return h=i?e[r](s+t,function(t){t.immediatePropagationStopped||(t.target=t.srcElement,t.currentTarget=e,/mouse|click/.test(t.type)&&(t.pageX=t.clientX+A.documentElement.scrollLeft,t.pageY=t.clientY+A.documentElement.scrollTop),n(t))},n,o||!1):e[r](t,n,o||!1),c.events[t].push(n),h}}function t(e,n,i,r){var c,h=l[a.indexOf(e)];if(h&&h.events)if("all"!==n){if(h.events[n]){var u=h.events[n].length;if("all"===i){for(c=0;u>c;c++)e[o](s+n,h.events[n][c],r||!1);h.events[n]=null,h.typeCount--}else for(c=0;u>c;c++)if(h.events[n][c]===i){e[o](s+n,h.events[n][c],r||!1),h.events[n].splice(c,1);break}h.events[n]&&0===h.events[n].length&&(h.events[n]=null,h.typeCount--)}h.typeCount||(l.splice(l.indexOf(h),1),a.splice(a.indexOf(e),1))}else for(n in h.events)h.events.hasOwnProperty(n)&&t(e,n,"all")}var n=window.Event,i="attachEvent"in window&&!("addEventListener"in window),r=i?"attachEvent":"addEventListener",o=i?"detachEvent":"removeEventListener",s=i?"on":"",a=[],l=[];return"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1}),"stopPropagation"in n.prototype||(n.prototype.stopPropagation=function(){this.cancelBubble=!0},n.prototype.stopImmediatePropagation=function(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}),"preventDefault"in n.prototype||(n.prototype.preventDefault=function(){this.returnValue=!1}),"hasOwnProperty"in n.prototype||(n.prototype.hasOwnProperty=Object.prototype.hasOwnProperty),{add:function(t,n,i,r){e(t._element,n,i,r)},remove:function(e,n,i,r){t(e._element,n,i,r)},addToElement:e,removeFromElement:t,useAttachEvent:i}}();if(p.prototype={preventDefault:e,stopImmediatePropagation:function(){lt=!0},stopPropagation:e},V.indexOfElement=U.indexOfElement=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(n.selector===e||!n.selector&&n._element===e)return t}return-1},V.get=function(e){return"string"==typeof e?H[e]:this[this.indexOfElement(e)]},U.get=function(e){return this[this.indexOfElement(e)]},X.prototype=tt,Y.prototype={setOnEvents:function(e,t){var n=t.onstart||t.onStart,i=t.onmove||t.onMove,r=t.onend||t.onEnd;e="on"+e,"function"==typeof n&&(this[e+"start"]=n),"function"==typeof i&&(this[e+"move"]=i),"function"==typeof r&&(this[e+"end"]=r)},draggable:function(e){return e instanceof Object?(this.options.draggable=!0,this.setOnEvents("drag",e),this):"boolean"==typeof e?(this.options.draggable=e,this):null===e?(delete this.options.draggable,this):this.options.draggable},dropzone:function(e){if(e instanceof Object){var t=e.ondrop||e.onDrop;return"function"==typeof t&&(this.ondrop=t),this.options.dropzone=!0,(this.selector?W:U).push(this),ut||this.selector||(this.rect=this.getRect()),this}if("boolean"==typeof e){if(e)(this.selector?W:U).push(this),ut||this.selector||(this.rect=this.getRect());else{var n=this.selector?W:U,i=n.indexOf(this);-1!==i&&n.splice(i,1)}return this.options.dropzone=e,this}return null===e?(delete this.options.dropzone,this):this.options.dropzone},dropCheck:function(e){var t,n,r=i(e);return ut&&(this.rect=this.getRect()),t=r.x>this.rect.left&&r.x<this.rect.right,n=r.y>this.rect.top&&r.y<this.rect.bottom,t&&n},dropChecker:function(e){return"function"==typeof e?(this.dropCheck=e,this):this.dropCheck},resizeable:function(e){return e instanceof Object?(this.options.resizeable=!0,this.setOnEvents("resize",e),this):"boolean"==typeof e?(this.options.resizeable=e,this):this.options.resizeable},squareResize:function(e){return"boolean"==typeof e?(this.options.squareResize=e,this):null===e?(delete this.options.squareResize,this):this.options.squareResize},gestureable:function(e){return e instanceof Object?(this.options.gestureable=!0,this.setOnEvents("gesture",e),this):"boolean"==typeof e?(this.options.gestureable=e,this):null===e?(delete this.options.gestureable,this):this.options.gestureable},autoScroll:function(e){var t=tt.autoScroll;if(e instanceof Object){var n=this.options.autoScroll;return n===t&&(n=this.options.autoScroll={margin:t.margin,distance:t.distance,interval:t.interval,container:t.container}),n.margin=this.validateSetting("autoScroll","margin",e.margin),n.distance=this.validateSetting("autoScroll","distance",e.distance),n.interval=this.validateSetting("autoScroll","interval",e.interval),n.container=this.validateSetting("autoScroll","container",e.container),this.options.autoScrollEnabled=!0,this.options.autoScroll=n,this}return"boolean"==typeof e?(this.options.autoScrollEnabled=e,this):null===e?(delete this.options.autoScrollEnabled,delete this.options.autoScroll,this):this.options.autoScrollEnabled?this.options.autoScroll:!1},snap:function(e){var t=tt.snap;if(e instanceof Object){var n=this.options.snap;return n===t&&(n=this.options.snap={mode:t.mode,range:t.range,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors}),n.mode=this.validateSetting("snap","mode",e.mode),n.range=this.validateSetting("snap","range",e.range),n.paths=this.validateSetting("snap","paths",e.paths),n.grid=this.validateSetting("snap","grid",e.grid),n.gridOffset=this.validateSetting("snap","gridOffset",e.gridOffset),n.anchors=this.validateSetting("snap","anchors",e.anchors),this.options.snapEnabled=!0,this.options.snap=n,this}return"boolean"==typeof e?(this.options.snapEnabled=e,this):null===e?(delete this.options.snapEnabled,delete this.options.snap,this):this.options.snapEnabled?this.options.snap:!1},getAction:function(e){var t,n,r,o=this.getRect(),s=i(e),a=this.options;return ft.resize&&a.resizeable&&(t=s.x>o.right-ot,n=s.y>o.bottom-ot),ft.gesture&&e.touches&&e.touches.length>=2&&!ht&&!dt?r="gesture":(pt=(t?"x":"")+(n?"y":""),r=pt?"resize"+pt:ft.drag&&a.draggable?"drag":null),r},actionChecker:function(e){return"function"==typeof e?(this.getAction=e,this):null===e?(delete this.options.getAction,this):this.getAction},getRect:function(){var e=o(),t=this._element instanceof M?this._element.getBoundingClientRect():this._element.getClientRects()[0];return{left:t.left+e.x,right:t.right+e.x,top:t.top+e.y,bottom:t.bottom+e.y,width:t.width||t.right-t.left,height:t.heigh||t.bottom-t.top}},rectChecker:function(e){return"function"==typeof e?(this.getRect=e,this):null===e?(delete this.options.getRect,this):this.getRect},styleCursor:function(e){return"boolean"==typeof e?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},origin:function(e){return e instanceof Object?(this.options.origin=e,this):null===e?(delete this.options.origin,this):this.options.origin},deltaSource:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):null===e?(delete this.options.deltaSource,this):this.options.deltaSource},validateSetting:function(e,t,n){var i=tt[e],r=this.options[e];if(void 0!==i&&void 0!==i[t]){if("objectTypes"in i&&i.objectTypes.test(t))return n instanceof Object?n:t in r&&r[t]instanceof Object?r[t]:i[t];if("arrayTypes"in i&&i.arrayTypes.test(t))return n instanceof Array?n:t in r&&r[t]instanceof Array?r[t]:i[t];if("stringTypes"in i&&i.stringTypes.test(t))return"string"==typeof n?n:t in r&&"string"==typeof r[t]?r[t]:i[t];if("numberTypes"in i&&i.numberTypes.test(t))return"number"==typeof n?n:t in r&&"number"==typeof r[t]?r[t]:i[t];if("elementTypes"in i&&i.elementTypes.test(t))return n instanceof Element?n:t in r&&r[t]instanceof Element?r[t]:i[t]}return null},element:function(){return this._element},fire:function(e){if(!e||!e.type||-1===vt.indexOf(e.type))return this;for(var t,n,i=0,r=0,o="on"+e.type;3>i;)try{switch(i){case bt.onevent:"function"==typeof this[o]&&this[o](e);break;case bt.directBind:if(e.type in this._iEvents){for(t=this._iEvents[e.type],n=t.length;n>r&&!lt;r++)t[r](e);break}break;case bt.globalBind:if(e.type in xt&&(t=xt[e.type]))for(t=xt[e.type],n=t.length;n>r&&!lt;r++)t[r](e)}r=0,i++}catch(s){I.error("Error thrown from "+e.type+" listener"),I.error(s),r++,i===bt.onevent&&i++}return lt=!1,this},on:function(e,t,n){if("wheel"===e&&(e=mt),-1!==vt.indexOf(e))e in this._iEvents?-1===this._iEvents[e].indexOf(t)&&this._iEvents[e].push(t):this._iEvents[e]=[t];else if(this.selector)for(var i=A.querySelectorAll(this.selector),r=0,o=i.length;o>r;r++)Rt.addToElement(i[r],e,t,n);else Rt.add(this,e,t,n);return this},off:function(e,t,n){if("wheel"===e&&(e=mt),-1!==vt.indexOf(e)){var i,r=this._iEvents[e];r&&-1!==(i=r.indexOf(t))&&this._iEvents[e].splice(i,1)}else if(this.selector)for(var o=A.querySelectorAll(this.selector),s=0,a=o.length;a>s;s++)Rt.removeFromElement(o[s],e,t,n);else Rt.remove(this._element,t,n);return this},set:function(e){return e&&"object"==typeof e||(e={}),this.options=new X(e),this.draggable("draggable"in e?e.draggable:this.options.draggable),this.dropzone("dropzone"in e?e.dropzone:this.options.dropzone),this.resizeable("resizeable"in e?e.resizeable:this.options.resizeable),this.gestureable("gestureable"in e?e.gestureable:this.options.gestureable),"autoScroll"in e&&this.autoScroll(e.autoScroll),this},unset:function(){return Rt.remove(this,"all"),"string"==typeof this.selector?delete H[this.selector]:(Rt.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor=""),F.splice(F.indexOf(this.element()))),this.dropzone(!1),V.splice(V.indexOf(this),1),R}},R.isSet=function(e){return-1!==V.indexOfElement(e)},R.on=function(e,t){return-1!==vt.indexOf(e)&&(xt[e]?-1===xt[e].indexOf(t)&&xt[e].push(t):xt[e]=[t]),R},R.off=function(e,t){var n=xt[e].indexOf(t);return-1!==n&&xt[e].splice(n,1),R},R.simulate=function(t,n,i){var r,o,s={};if("resize"===t&&(t="resizexy"),!(t in gt))return R;if(i)for(r in i)i.hasOwnProperty(r)&&(s[r]=i[r]);else o=Q._element instanceof M?n.getBoundingClientRect():o=n.getClientRects()[0],"drag"===t?(s.pageX=o.left+o.width/2,s.pageY=o.top+o.height/2):(s.pageX=o.right,s.pageY=o.bottom);return s.target=s.currentTarget=n,s.preventDefault=s.stopPropagation=e,y(s,t),R},R.enableDragging=function(e){return null!==e&&void 0!==e?(ft.drag=e,R):ft.drag},R.enableResizing=function(e){return null!==e&&void 0!==e?(ft.resize=e,R):ft.resize},R.enableGesturing=function(e){return null!==e&&void 0!==e?(ft.gesture=e,R):ft.gesture},R.eventTypes=vt,R.debug=function(){return{target:Q,dragging:ht,resizing:dt,gesturing:ct,prevX:P,prevY:j,x0:N,y0:$,Interactable:Y,IOptions:X,interactables:V,dropzones:U,pointerIsDown:st,supportsTouch:rt,defaultOptions:tt,defaultActionChecker:Y.prototype.getAction,dragMove:v,resizeMove:x,gestureMove:b,pointerUp:z,pointerDown:y,pointerHover:O,events:Rt,globalEvents:xt,log:function(){I.log("target         :  "+Q),I.log("prevX, prevY   :  "+P,j),I.log("x0, y0         :  "+N,$),I.log("supportsTouch  :  "+rt),I.log("pointerIsDown  :  "+st),I.log("currentAction  :  "+R.currentAction())}}},R.margin=function(e){return"number"==typeof e?(ot=e,R):ot},R.styleCursor=function(e){return"boolean"==typeof e?(tt.styleCursor=e,R):tt.styleCursor},R.autoScroll=function(e){var t=tt.autoScroll;return e instanceof Object?(tt.autoScrollEnabled=!0,"number"==typeof e.margin&&(t.margin=e.margin),"number"==typeof e.distance&&(t.distance=e.distance),"number"==typeof e.interval&&(t.interval=e.interval),t.container=e.container instanceof Element?e.container:t.container,R):"boolean"==typeof e?(tt.autoScrollEnabled=e,R):tt.autoScrollEnabled?t:!1},R.snap=function(e){var t=tt.snap;return e instanceof Object?(tt.snapEnabled=!0,"string"==typeof e.mode&&(t.mode=e.mode),"number"==typeof e.range&&(t.range=e.range),e.anchors instanceof Array&&(t.anchors=e.anchors),e.grid instanceof Object&&(t.grid=e.grid),e.gridOffset instanceof Object&&(t.gridOffset=e.gridOffset),R):"boolean"==typeof e?(tt.snapEnabled=e,R):{enabled:tt.snapEnabled,mode:t.mode,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors,paths:t.paths,range:t.range,locked:nt.locked,x:nt.x,y:nt.y,realX:nt.realX,realY:nt.realY,dx:nt.dx,dy:nt.dy}},R.supportsTouch=function(){return rt},R.currentAction=function(){return ht&&"drag"||dt&&"resize"||ct&&"gesture"||null},R.stop=function(e){if(ht||dt||ct){it.stop(),J=[],Q.options.styleCursor&&(A.documentElement.style.cursor=""),_();for(var t=0;t<W.length;t++)W._elements=[];e&&"function"==typeof e.preventDefault&&e.preventDefault()}return st=nt.locked=ht=dt=ct=!1,at=!0,yt=null,R},R.dynamicDrop=function(e){return"boolean"==typeof e?(ht&&ut!==e&&!e&&h(U),ut=e,R):ut},R.deltaSource=function(e){return"page"===e||"client"===e?(tt.deltaSource=e,this):tt.deltaSource},Rt.add(Ot,"mousedown",f),Rt.add(Ot,"touchstart",f),Rt.add(Ot,"mousemove",m),Rt.add(Ot,"touchmove",m),Rt.add(Ot,"mouseover",E),Rt.add(Ot,"mouseout",S),Rt.add(Ot,"mouseup",z),Rt.add(Ot,"touchend",z),Rt.add(Ot,"touchcancel",z),Rt.add(St,"blur",z),window.parent!==window)try{Rt.add(_t,"mouseup",z),Rt.add(_t,"touchend",z),Rt.add(_t,"touchcancel",z),Rt.add(zt,"blur",z)}catch(Xt){R.windowParentError=Xt}return Rt.add(Ot,"selectstart",function(e){(ht||dt||ct)&&e.preventDefault()}),Et in Element.prototype&&"function"==typeof Element.prototype[Et]||(Element.prototype[Et]=T=function(e,t){t=t||this.parentNode.querySelectorAll(e),count=t.length;for(var n=0;count>n;n++)if(t[n]===this)return!0;return!1}),R}();
