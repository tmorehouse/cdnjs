/* interact.js v1.0.24 | https://raw.github.com/taye/interact.js/master/LICENSE */
!function(e){"use strict";function t(){}function n(e){return!!e&&"object"==typeof e&&(/object|function/.test(typeof Element)?e instanceof Element:1===e.nodeType&&"string"==typeof e.nodeName)}function r(e){return e instanceof Object}function i(e){return e instanceof Array}function o(e){return"function"==typeof e}function s(e){return"number"==typeof e}function a(e){return"boolean"==typeof e}function l(e){return"string"==typeof e}function c(e,t){for(var n in t)e[n]=t[n];return e}function d(e){var t,n=c({},e);if(n.constructor=e.constructor,e.touches){for(n.touches=[],n.changedTouches=[],t=0;t<e.touches.length;t++)n.touches.push(c({},e.touches[t]));for(t=0;t<e.touches.length;t++)n.changedTouches.push(c({},e.changedTouches[t]))}return n}function p(e,t){g(t,Qt),e.pageX=Qt.x,e.pageY=Qt.y,f(t,Qt),e.clientX=Qt.x,e.clientY=Qt.y,e.timeStamp=(new Date).getTime()}function u(e,t,n){e.pageX=n.pageX-t.pageX,e.pageY=n.pageY-t.pageY,e.clientX=n.clientX-t.clientX,e.clientY=n.clientY-t.clientY,e.timeStamp=(new Date).getTime()-t.timeStamp;var r=Math.max(e.timeStamp/1e3,.001);e.pageSpeed=Pt(e.pageX,e.pageY)/r,e.pageVX=e.pageX/r,e.pageVY=e.pageY/r,e.clientSpeed=Pt(e.clientX,e.pageY)/r,e.clientVX=e.clientX/r,e.clientVY=e.clientY/r}function h(e,t,n){var r,i,o;return n=n||{},e=e||"page",/touch/.test(t.type)&&t.touches?(r=t.touches.length?t.touches[0]:t.changedTouches[0],i=r[e+"X"],o=r[e+"Y"]):(i=t[e+"X"],o=t[e+"Y"]),n.x=i,n.y=o,n}function g(t,n){return n=n||{},t instanceof B?/inertiastart/.test(t.type)?(g(Zt.pointerUp,n),n.x+=Zt.sx,n.y+=Zt.sy):(n.x=t.pageX,n.y=t.pageY):An?(h("screen",t,n),n.x+=e.scrollX,n.y+=e.scrollY):/gesture|inertia/i.test(t.type)?(h("client",t,n),n.x+=Tt.documentElement.scrollLeft,n.y+=Tt.documentElement.scrollTop):h("page",t,n),n}function f(e,t){return t=t||{},e instanceof B?/inertiastart/.test(e.type)?(f(Zt.pointerUp,t),t.x+=Zt.sx,t.y+=Zt.sy):(t.x=e.clientX,t.y=e.clientY):h(An?"screen":"client",e,t),t}function m(){return{x:e.scrollX||Tt.documentElement.scrollLeft,y:e.scrollY||Tt.documentElement.scrollTop}}function v(e){var t=/ipad|iphone|ipod/i.test(navigator.userAgent)?{x:0,y:0}:m(),n=e instanceof Ot?e.getBoundingClientRect():e.getClientRects()[0];return n&&{left:n.left+t.x,right:n.right+t.x,top:n.top+t.y,bottom:n.bottom+t.y,width:n.width||n.right-n.left,height:n.heigh||n.bottom-n.top}}function y(e){var t=[];return i(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function x(e){var t=y(e);return{pageX:(t[0].pageX+t[1].pageX)/2,pageY:(t[0].pageY+t[1].pageY)/2,clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function S(e){if(e.touches&&e.touches.length||Vt.length){var t=y(e),n=Math.min(t[0].pageX,t[1].pageX),r=Math.min(t[0].pageY,t[1].pageY),i=Math.max(t[0].pageX,t[1].pageX),o=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:r,left:n,top:r,width:i-n,height:o-r}}}function E(e){var t=(ln&&ln.options||hn).deltaSource,n=t+"X",r=t+"Y",i=y(e),o=i[0][n]-i[1][n],s=i[0][r]-i[1][r];return Pt(o,s)}function b(e,t){var n=(ln&&ln.options||hn).deltaSource,r=n+"X",i=n+"Y",o=y(e),a=o[0][r]-o[1][r],l=o[0][i]-o[1][i],c=180*Math.atan(l/a)/Math.PI;if(s(t)){var d=c-t,p=d%360;p>315?c-=360+c/360|0:p>135?c-=180+c/360|0:-315>p?c+=360+c/360|0:-135>p&&(c+=180+c/360|0)}return c}function z(e,t){e=e||ln;var r=e?e.options.origin:hn.origin;return t=t||e._element,"parent"===r?r=t.parentNode:"self"===r&&(r=t),n(r)?(r=v(r),r.x=r.left,r.y=r.top):o(r)&&(r=r(e&&t)),r}function X(e){var t=e.target.options.inertia,n=t.resistance,r=-Math.log(t.endSpeed/e.v0)/n;e.x0=Lt.pageX,e.y0=Lt.pageY,e.t0=e.startEvent.timeStamp/1e3,e.sx=e.sy=0,e.modifiedXe=e.xe=(e.vx0-r)/n,e.modifiedYe=e.ye=(e.vy0-r)/n,e.te=r,e.lambda_v0=n/e.v0,e.one_ve_v0=1-t.endSpeed/e.v0}function Y(){var e=Zt.target.options.inertia,t=e.resistance,n=(new Date).getTime()/1e3-Zt.t0;if(n<Zt.te){var r=1-(Math.exp(-t*n)-Zt.lambda_v0)/Zt.one_ve_v0;if(Zt.modifiedXe===Zt.xe&&Zt.modifiedYe===Zt.ye)Zt.sx=Zt.xe*r,Zt.sy=Zt.ye*r;else{var i=T(0,0,Zt.xe,Zt.ye,Zt.modifiedXe,Zt.modifiedYe,r);Zt.sx=i.x,Zt.sy=i.y}et(Zt.startEvent),Zt.i=Rn(Y)}else Zt.sx=Zt.modifiedXe,Zt.sy=Zt.modifiedYe,et(Zt.startEvent),Zt.active=!1,ft(Zt.startEvent)}function _(){var e=(new Date).getTime()-Zt.t0,t=Zt.target.options.inertia.smoothEndDuration;t>e?(Zt.sx=D(e,0,Zt.xe,t),Zt.sy=D(e,0,Zt.ye,t),et(Zt.startEvent),Zt.i=Rn(_)):(Zt.active=!1,Zt.smoothEnd=!1,et(Zt.startEvent),ft(Zt.startEvent))}function w(e,t,n,r){var i=1-e;return i*i*t+2*i*e*n+e*e*r}function T(e,t,n,r,i,o,s){return{x:w(s,e,n,i),y:w(s,t,r,o)}}function D(e,t,n,r){return e/=r,-n*e*(e-2)+t}function O(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1}function M(e,t){return e._context===Tt||O(e._context,t)}function C(e,t){var r=e.options.ignoreFrom;return r&&n(t)&&t!==e._element.parentNode?l(r)?Xt(t,r)||C(e,t.parentNode):n(r)?t===r||O(r,t):!1:!1}function A(e,t){var r=e.options.allowFrom;return r?n(t)&&t!==e._element.parentNode?l(r)?Xt(t,r)||A(e,t.parentNode):n(r)?t===r||O(r,t):!1:!1:!0}function k(e,t){if(t){var n=t.options,r=n.preventDefault;if("auto"===r&&!/^input$|^textarea$/i.test(ln._element.nodeName)){if(/down|start/i.test(e.type)&&"drag"===Tn&&"xy"!==n.dragAxis)return;return void e.preventDefault()}return r===!0?void e.preventDefault():void 0}}function R(e,t){if(!t)return!1;var n=t.options.dragAxis;return"xy"===e||"xy"===n||n===e}function $(e,t){var n=e.options;return t=t||Tn,/^resize/.test(t)&&(t="resize"),n.snapEnabled&&zt(n.snap.actions,t)}function P(e,t){var n=e.options;return t=t||Tn,/^resize/.test(t)&&(t="resize"),n.restrictEnabled&&n.restrict[t]}function N(e){var t,r=[],i=[];for(e=e||ln._element,t=0;t<nn.length;t++){var o=nn[t];if(!(n(o.options.accept)&&o.options.accept!==e||l(o.options.accept)&&!Xt(e,o.options.accept))){o.selector&&(o._dropElements=o._context.querySelectorAll(o.selector));for(var s=0,a=o._dropElements.length;a>s;s++){var c=o._dropElements[s];c!==e&&(r.push(o),i.push(c))}}}return{dropzones:r,elements:i}}function F(e){var t,n,r,i;for(t=0;t<rn.dropzones.length;t++)n=rn.dropzones[t],r=rn.elements[t],r!==i&&(e.target=r,n.fire(e)),i=r}function q(e){var t,n,r,i,o,s=e[0],a=s?0:-1,l=[],c=[];for(i=1;i<e.length;i++)if(t=e[i],t&&t!==s)if(s){if(t.parentNode!==Tt)if(s.parentNode!==Tt){if(!l.length)for(n=s;n.parentNode&&n.parentNode!==Tt;)l.unshift(n),n=n.parentNode;if(s instanceof At&&t instanceof Ot&&!(t instanceof Mt)){if(t===s.parentNode)continue;n=t.ownerSVGElement}else n=t;for(c=[];n.parentNode!==Tt;)c.unshift(n),n=n.parentNode;for(o=0;c[o]&&c[o]===l[o];)o++;var d=[c[o-1],c[o],l[o]];for(r=d[0].lastChild;r;){if(r===d[1]){s=t,a=i,l=[];break}if(r===d[2])break;r=r.previousSibling}}else s=t,a=i}else s=t,a=i;return a}function I(e){var t=N(e,!0);rn.dropzones=t.dropzones,rn.elements=t.elements,rn.rects=[];for(var n=0;n<rn.dropzones.length;n++)rn.rects[n]=rn.dropzones[n].getRect(rn.elements[n])}function G(e,t){var n=[];zn&&I(t);for(var r=0;r<rn.dropzones.length;r++){var i=rn.dropzones[r],o=rn.elements[r],s=rn.rects[r];n.push(i.dropCheck(e,ln,t,s)?o:null)}var a=q(n),l=rn.dropzones[a]||null,c=rn.elements[a]||null;return l&&l.selector&&(l._element=c),{dropzone:l,element:c}}function V(e,t){var n=null,r=null,i=null,o=null,s=null,a=null;return dn!==un&&(pn&&(n=new B(e,"drag","leave",un,t.target),t.dragLeave=un),cn&&(r=new B(e,"drag","enter",dn,t.target),t.dragEnter=dn)),"dragend"===t.type&&cn&&(a=new B(e,"drop",null,dn,t.target)),"dragstart"===t.type&&(i=new B(e,"drop","activate",null,t.target)),"dragend"===t.type&&(o=new B(e,"drop","deactivate",null,t.target)),"dragmove"===t.type&&cn&&(s={target:dn,relatedTarget:t.target,dragmove:t,type:"dropmove",timeStamp:t.timeStamp}),{enter:r,leave:n,activate:i,deactivate:o,move:s,drop:a}}function B(e,t,n,r,i){var o,s,a=(ln&&ln.options||hn).deltaSource,l=a+"X",c=a+"Y",d=ln?ln.options:hn,p=z(ln,r),u="start"===n,h="end"===n;if(r=r||ln._element,"gesture"===t){var m=x(Vt);s={x:m.pageX-p.x,y:m.pageY-p.y},o={x:m.clientX-p.x,y:m.clientY-p.y}}else s=g(e),o=f(e),s.x-=p.x,s.y-=p.y,o.x-=p.x,o.y-=p.y,!$(ln)||u&&d.snap.elementOrigin||(this.snap={range:gn.range,locked:gn.locked,x:gn.snappedX,y:gn.snappedY,realX:gn.realX,realY:gn.realY,dx:gn.dx,dy:gn.dy},gn.locked&&(s.x+=gn.dx,s.y+=gn.dy,o.x+=gn.dx,o.y+=gn.dy));if(!P(ln)||u&&d.restrict.elementRect||!fn.restricted||(s.x+=fn.dx,s.y+=fn.dy,o.x+=fn.dx,o.y+=fn.dy,this.restrict={dx:fn.dx,dy:fn.dy}),this.pageX=s.x,this.pageY=s.y,this.clientX=o.x,this.clientY=o.y,this.x0=qt.pageX,this.y0=qt.pageY,this.clientX0=qt.clientX,this.clientY0=qt.clientY,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.target=r,this.t0=Bt,this.type=t+(n||""),this.interactable=ln,Zt.active&&(this.detail="inertia"),i&&(this.relatedTarget=i),h||"drop"===t?"client"===a?(this.dx=o.x-qt.clientX,this.dy=o.y-qt.clientY):(this.dx=s.x-qt.pageX,this.dy=s.y-qt.pageY):"inertiastart"===n?(this.dx=Lt.dx,this.dy=Lt.dy):"client"===a?(this.dx=o.x-Lt.clientX,this.dy=o.y-Lt.clientY):(this.dx=s.x-Lt.pageX,this.dy=s.y-Lt.pageY),Lt&&"inertia"===Lt.detail&&!Zt.active&&d.inertia.zeroResumeDelta&&(Zt.resumeDx+=this.dx,Zt.resumeDy+=this.dy,this.dx=this.dy=0),"resize"===t?d.squareResize||e.shiftKey?("y"===Yn?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=Yn,"x"===Yn?this.dy=0:"y"===Yn&&(this.dx=0)):"gesture"===t&&(this.touches=Rt?[Vt[0],Vt[1]]:e.touches,u?(this.distance=E(Vt),this.box=S(Vt),this.scale=1,this.ds=0,this.angle=b(Vt),this.da=0):h||e instanceof B?(this.distance=Lt.distance,this.box=Lt.box,this.scale=Lt.scale,this.ds=this.scale-1,this.angle=Lt.angle,this.da=this.angle-en.startAngle):(this.distance=E(Vt),this.box=S(Vt),this.scale=this.distance/en.startDistance,this.angle=b(Vt,en.prevAngle),this.ds=this.scale-en.prevScale,this.da=this.angle-en.prevAngle)),u)this.timeStamp=Bt,this.dt=0,this.duration=0,this.speed=0,this.velocityX=0,this.velocityY=0;else if("inertiastart"===n)this.timeStamp=(new Date).getTime(),this.dt=Lt.dt,this.duration=Lt.duration,this.speed=Lt.speed,this.velocityX=Lt.velocityX,this.velocityY=Lt.velocityY;else{this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-Lt.timeStamp,this.duration=this.timeStamp-Bt;var v,y,X;h||e instanceof B?(X=Math.max((h?this.duration:this.dt)/1e3,.001),v=this[l]-Lt[l],y=this[c]-Lt[c],this.snap&&this.snap.locked&&(v-=this.snap.dx,y-=this.snap.dy),this.restrict&&(v-=this.restrict.dx,y-=this.restrict.dy),Lt.snap&&Lt.snap.locked&&(v-=Lt[l]-Lt.snap.dx,y-=Lt[c]-Lt.snap.dy),Lt.restrict&&(v+=Lt.restrict.dx,y+=Lt.restrict.dy),this.speed=Pt(v,y)/X,this.velocityX=v/X,this.velocityY=y/X):(this.speed=It[a+"Speed"],this.velocityX=It[a+"VX"],this.velocityY=It[a+"VY"])}if((h||"inertiastart"===n)&&Lt.speed>600&&this.timeStamp-Lt.timeStamp<150){var Y=180*Math.atan2(Lt.velocityY,Lt.velocityX)/Math.PI,_=22.5;0>Y&&(Y+=360);var w=Y>=135-_&&225+_>Y,T=Y>=225-_&&315+_>Y,D=!w&&(Y>=315-_||45+_>Y),O=!T&&Y>=45-_&&135+_>Y;this.swipe={up:T,down:O,left:w,right:D,angle:Y,speed:Lt.speed,velocity:{x:Lt.velocityX,y:Lt.velocityY}}}}function U(){this.originalEvent.preventDefault()}function L(e,t,n){var r,i={};c(i,e),i.preventDefault=U,i.stopPropagation=B.prototype.stopPropagation,i.stopImmediatePropagation=B.prototype.stopImmediatePropagation,i.timeStamp=(new Date).getTime(),i.originalEvent=e,i.dt=i.timeStamp-Bt,i.type="tap";var o=i.timeStamp-Kt,s=jt&&"doubletap"!==jt.type&&jt.target===i.target&&500>o;for(Kt=i.timeStamp,r=0;r<t.length;r++){var a=z(t[r],n[r]);if(i.pageX-=a.x,i.pageY-=a.y,i.clientX-=a.x,i.clientY-=a.y,i.currentTarget=n[r],t[r].fire(i),i.immediatePropagationStopped||i.propagationStopped&&t[r+1]!==i.currentTarget)break}if(s){var l={};for(c(l,i),l.dt=o,l.type="doubletap",r=0;r<t.length&&(l.currentTarget=n[r],t[r].fire(l),!(l.immediatePropagationStopped||l.propagationStopped&&t[r+1]!==l.currentTarget));r++);jt=l}else jt=i}function K(e){function t(e,t,s){var a=wt?s.querySelectorAll(t):void 0;o!==Tt&&M(e,o)&&!C(e,i)&&A(e,i)&&Xt(o,t,a)&&(n.push(e),r.push(o))}if(!Ut||!Sn&&e instanceof Ut.constructor&&Ut.target===e.target){for(var n=[],r=[],i=e.target instanceof Ct?e.target.correspondingUseElement:e.target,o=i;o;)xt.isSet(o)&&(n.push(xt(o)),r.push(o)),tn.forEachSelector(t),o=o.parentNode;n.length&&L(e,n,r)}}function j(e){var t,n,r=this.getRect(),i=null,o=g(e),s=this.options;return r?(wn.resize&&s.resizable&&(t="y"!==s.resizeAxis&&o.x>r.right-yn,n="x"!==s.resizeAxis&&o.y>r.bottom-yn),Yn=(t?"x":"")+(n?"y":""),i=Yn?"resize"+Yn:wn.drag&&s.draggable?"drag":null,wn.gesture&&Gt.length>=2&&!bn&&!Xn&&(i="gesture"),i):null}function W(e,t){if(!l(e))return null;t=t||ln;var n=-1!==e.search("resize")?"resize":e,r=(t||ln).options;return("resize"===n&&r.resizable||"drag"===e&&r.draggable||"gesture"===e&&r.gesturable)&&wn[n]?(("resize"===e||"resizeyx"===e)&&(e="resizexy"),e):null}function H(e){function t(e,t,n){var o=wt?n.querySelectorAll(t):void 0;M(e,i)&&!C(e,r)&&A(e,r)&&Xt(i,t,o)&&(e._element=i,on.push(e))}if(Tn&&Ut&&e.type!==Ut.type)return void k(e,ln);if(!(Ut&&"mousedown"===e.type&&"touchstart"===Ut.type&&e.timeStamp-Ut.timeStamp<300)){xn=!0;var n,r=e.target instanceof Ct?e.target.correspondingUseElement:e.target,i=r;if(tt(e),Zt.active&&ln.selector)for(;i&&i!==Tt;){if(i===Zt.targetElement&&W(ln.getAction(e))===Tn)return $n(Zt.i),Zt.active=!1,void tt(e,sn);i=i.parentNode}if(!(bn||Xn||En)){if(on.length&&/mousedown|pointerdown/i.test(e.type))n=pt(e,on);else for(;i&&i!==Tt&&!n;)on=[],tn.forEachSelector(t),n=pt(e,on),i=i.parentNode;return n?(Tn=n,J(e,n)):(Bt=(new Date).getTime(),Ut=d(e),p(Nt,e),Sn=!1,void 0)}}}function J(e,t){if(!t&&xn&&Ut&&e.type!==Ut.type)return void k(e,ln);if(xn=!0,tt(e),(e.touches&&e.touches.length<2||Gt&&Gt.length<2)&&!ln||!Tn){var n=tn.get(e.currentTarget);!C(n,e.target)&&A(n,e.target)&&(ln=n)}var r=ln&&ln.options;if(ln&&!(bn||Xn||En)){var i=W(t||ln.getAction(e));if(p(qt,e),Rt&&e instanceof Rt&&(ln._gesture.target||(ln._gesture.target=ln._element),tt(e,ln._gesture)),!i)return e;r.styleCursor&&(Tt.documentElement.style.cursor=_n[i].cursor),Yn="resizexy"===i?"xy":"resizex"===i?"x":"resizey"===i?"y":"","gesture"===i&&(e.touches&&e.touches.length<2||Rt&&Gt.length<2)&&(i=null),Tn=i,gn.snappedX=gn.snappedY=fn.restrictedX=fn.restrictedY=0/0,Bt=(new Date).getTime(),Ut=d(e),p(Nt,e),Sn=!1,k(e,ln)}else Zt.active&&e.currentTarget===Zt.targetElement&&ln===Zt.target&&W(ln.getAction(e))===Tn&&($n(Zt.i),Zt.active=!1,Rt&&(ln._gesture.target||(ln._gesture.target=ln._element),tt(e,ln._gesture)))}function Q(e,t){var n,r,i,a,l,c,d,p,u,h,f=ln.options.snap,m=f.anchors;if(t=t||gn,t.useStatusXY)n={x:t.x,y:t.y};else{var v=z(ln);n=g(e),n.x-=v.x,n.y-=v.y}if(n.x-=Zt.resumeDx,n.y-=Zt.resumeDy,t.realX=n.x,t.realY=n.y,f.range<0&&(f.range=1/0),"path"===f.mode)for(m=[],u=0,h=f.paths.length;h>u;u++){var y=f.paths[u];o(y)&&(y=y(n.x,n.y)),m.push({x:s(y.x)?y.x:n.x,y:s(y.y)?y.y:n.y,range:s(y.range)?y.range:f.range})}if("anchor"!==f.mode&&"path"!==f.mode||!m.length){if("grid"===f.mode){var x=Math.round((n.x-f.gridOffset.x-Jt.x)/f.grid.x),S=Math.round((n.y-f.gridOffset.y-Jt.y)/f.grid.y),E=x*f.grid.x+f.gridOffset.x+Jt.x,b=S*f.grid.y+f.gridOffset.y+Jt.y;c=E-n.x,d=b-n.y,p=Pt(c,d),a=p<f.range,l=E!==t.snappedX||b!==t.snappedY,t.snappedX=E,t.snappedY=b,t.dx=c,t.dy=d,t.range=f.range}}else{for(r={anchor:null,distance:0,range:0,dx:0,dy:0},u=0,h=m.length;h>u;u++){var X=m[u];i=s(X.range)?X.range:f.range,c=X.x-n.x+Jt.x,d=X.y-n.y+Jt.y,p=Pt(c,d),a=i>p,1/0===i&&r.inRange&&1/0!==r.range&&(a=!1),(!r.anchor||(a?r.inRange&&1/0!==i?p/i<r.distance/r.range:p<r.distance:!r.inRange&&p<r.distance))&&(1/0===i&&(a=!0),r.anchor=X,r.distance=p,r.range=i,r.inRange=a,r.dx=c,r.dy=d,t.range=i)}a=r.inRange,l=r.anchor.x!==t.x||r.anchor.y!==t.y,t.snappedX=r.anchor.x,t.snappedY=r.anchor.y,t.dx=r.dx,t.dy=r.dy}return t.changed=l||a&&!t.locked,t.locked=a,t}function Z(e,t){var r,i=ln&&ln.options.restrict,s=i&&i[Tn];if(!s)return t;t=t||fn,r=r=t.useStatusXY?{x:t.x,y:t.y}:g(e),t.snap&&t.snap.locked&&(r.x+=t.snap.dx||0,r.y+=t.snap.dy||0),r.x-=Zt.resumeDx,r.y-=Zt.resumeDy,t.dx=0,t.dy=0,t.restricted=!1;var a;"parent"===s?s=ln._element.parentNode:"self"===s&&(s=ln._element),n(s)?a=v(s):(o(s)&&(s=s(r.x,r.y,ln._element)),a=s,"x"in s&&"y"in s&&(a={left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height}));var l=Math.max(Math.min(a.right-Ht.right,r.x),a.left+Ht.left),c=Math.max(Math.min(a.bottom-Ht.bottom,r.y),a.top+Ht.top);return t.dx=l-r.x,t.dy=c-r.y,t.changed=t.restrictedX!==l||t.restrictedY!==c,t.restricted=!(!t.dx&&!t.dy),t.restrictedX=l,t.restrictedY=c,t}function et(e,t){if(xn){e instanceof B||p(Ft,e);var n,r;if(Sn||(n=Ft.clientX-qt.clientX,r=Ft.clientY-qt.clientY,Sn=Pt(n,r)>hn.pointerMoveTolerance),Tn&&("mousemove"!==e.type||"touchstart"!==Ut.type)){if(Sn&&(!Zt.active||e instanceof B&&/inertiastart/.test(e.type))){if(!(bn||Xn||En)&&(u(It,Nt,Ft),"drag"===Tn)){var i=Math.abs(n),o=Math.abs(r),s=ln.options.dragAxis,a=i>o?"x":o>i?"y":"xy";if("xy"!==a&&"xy"!==s&&s!==a){Tn=null;for(var l=e.target instanceof Ct?e.target.correspondingUseElement:e.target,c=l;c&&c!==Tt;){var d=tn.get(c);if(d&&d!==ln&&"drag"===d.getAction(Ut)&&R(a,d)){Tn="drag",ln=d;break}c=c.parentNode}if(!Tn){var h=function(e,t,n){var r=wt?n.querySelectorAll(t):void 0;if(e!==ln)return e._element=c,M(e,l)&&!C(e,l)&&A(e,l)&&Xt(c,t,r)&&"drag"===e.getAction(Ut)&&R(a,e)?e:void 0};for(c=l;c&&c!==Tt;){var g=tn.forEachSelector(h);if(g){Tn="drag",ln=g;break}c=c.parentNode}}}}if(Tn&&ln){var f=$(ln)&&(!ln.options.snap.endOnly||t),m=P(ln)&&(!ln.options.restrict.endOnly||t),v=!(bn||Xn||En),y=v?Ut:e;if(v){Lt=Ut;var x=ln.getRect(),S=ln.options.snap,E=ln.options.restrict;x?(Wt.left=qt.pageX-x.left,Wt.top=qt.pageY-x.top,Wt.right=x.right-qt.pageX,Wt.bottom=x.bottom-qt.pageY):Wt.left=Wt.top=Wt.right=Wt.bottom=0,x&&S.elementOrigin?(Jt.x=Wt.left-x.width*S.elementOrigin.x,Jt.y=Wt.top-x.height*S.elementOrigin.y):Jt.x=Jt.y=0,x&&E.elementRect?(Ht.left=Wt.left-x.width*E.elementRect.left,Ht.top=Wt.top-x.height*E.elementRect.top,Ht.right=Wt.right-x.width*(1-E.elementRect.right),Ht.bottom=Wt.bottom-x.height*(1-E.elementRect.bottom)):Ht.left=Ht.top=Ht.right=Ht.bottom=0}f?Q(y):gn.locked=!1,m?Z(y):fn.restricted=!1;var b=(f?gn.changed||!gn.locked:!0)&&(m?!fn.restricted||fn.restricted&&fn.changed:!0);b&&(v&&(Lt=_n[Tn].start(Ut),f&&Q(e),m&&Z(e)),Lt=_n[Tn].move(e))}}e instanceof B||(u(It,Nt,Ft),p(Nt,e)),(bn||Xn)&&mn.edgeMove(e)}}}function tt(e,t,n){if(n=n||e.type,/touch/.test(e.type))for(var r=/cancel|touchend/.test(n)?e.changedTouches:e.touches,i=0;i<r.length;i++)tt(r[i],t,n);else if(!Gt.length||Vt[0].pointerType===e.pointerType){var o=e.pointerId||e.identifier||0;t&&t.addPointer(o);var s=bt(Gt,o);-1===s?(Gt.push(o),Vt[Gt.length-1]=e):Vt[s]=e}}function nt(e){var t=bt(Gt,e.pointerId||e.identifier||0);-1!==t&&Gt.splice(t,1)}function rt(e,t){var n=bt(Gt,e.pointerId||e.identifier||0);-1!==n&&(t=t||e.type,/move/i.test(t)?Vt[n]=e:/up|end|cancel/i.test(t)&&(nt(e),En&&ln._gesture&&Gt.length<2&&ln._gesture.stop()))}function it(e){for(var t=/cancel|touchend/.test(e.type)?e.changedTouches:e.touches,n=0;n<t.length;n++)rt(t[n],e.type)}function ot(e){var t=new B(e,"drag","start");bn=!0,ln.fire(t),rn.dropzones=[],rn.elements=[],rn.rects=[],zn||I(ln._element);var n=V(e,t);return n.activate&&F(n.activate),t}function st(e){k(e,ln);var t=new B(e,"drag","move"),n=ln._element,r=G(t,n);cn=r.dropzone,dn=r.element,ln._element=n;var i=V(e,t);return ln.fire(t),i.leave&&pn.fire(i.leave),i.enter&&cn.fire(i.enter),i.move&&cn.fire(i.move),pn=cn,un=dn,t}function at(e){var t=new B(e,"resize","start");return ln.fire(t),ln.fire(t),Xn=!0,t}function lt(e){k(e,ln);var t;return t=new B(e,"resize","move"),ln.fire(t),t}function ct(e){var t=new B(e,"gesture","start");return t.ds=0,en.startDistance=en.prevDistance=t.distance,en.startAngle=en.prevAngle=t.angle,en.scale=1,En=!0,ln.fire(t),t}function dt(e){if(!Gt.length)return Lt;k(e,ln);var t;return t=new B(e,"gesture","move"),t.ds=t.scale-en.scale,ln.fire(t),en.prevAngle=t.angle,en.prevDistance=t.distance,1/0===t.scale||null===t.scale||void 0===t.scale||isNaN(t.scale)||(en.scale=t.scale),t}function pt(e,t){for(var n=0,r=t.length;r>n;n++){var i=t[n],o=W(i.getAction(e,i),i);if(o)return ln=i,o}}function ut(e){function t(e,t){e&&M(e,i)&&!C(e,i)&&A(e,i)&&Xt(i,t)&&(e._element=i,n.push(e))}if(!Tn){var n=[],r=ln&&ln._element,i=e.target instanceof Ct?e.target.correspondingUseElement:e.target;!ln||!C(ln,i)&&A(ln,i)||(ln=null,on=[]);var o=tn.get(i),s=o&&!C(o,i)&&A(o,i)&&W(o.getAction(e),o);if(s)ln=o,on=[];else if(tn.forEachSelector(t),pt(e,n))on=n,gt(e,on),In.addToElement(i,"mousemove",gt);else if(ln){var a=r.querySelectorAll("*");if(zt(a,i)){for(var l=0;l<on.length;l++)on[l]._element=r;gt(e,on),In.addToElement(ln._element,"mousemove",gt)}else ln=null,on=[]}}}function ht(e){if(!Tn){var t=e.target instanceof Ct?e.target.correspondingUseElement:e.target;tn.get(t)||In.removeFromElement(t,gt),ln&&ln.options.styleCursor&&!(bn||Xn||En)&&(Tt.documentElement.style.cursor="")}}function gt(e,t){if(Tn)Tn&&k(e,ln);else{var n;t?n=pt(e,t):ln&&(n=W(ln.getAction(e))),ln&&ln.options.styleCursor&&(Tt.documentElement.style.cursor=n?_n[n].cursor:"")}}function ft(e){if((e instanceof B||Rt||!xn||!Ut||e instanceof Ut.constructor)&&!(e.touches&&e.touches.length>=2)){if($t&&e instanceof $t&&/inertiastart/i.test(e.type))return void e.gestureObject.stop();var t,n=ln&&ln.options,r=n&&n.inertia;if(bn||Xn||En){if(Zt.active)return;var i,o=n.deltaSource,s=It[o+"Speed"],a=(new Date).getTime(),l=!1,d=!1,p=!1,u=$(ln)&&n.snap.endOnly,h=P(ln)&&n.restrict.endOnly,f=0,m=0;if(l=n.inertiaEnabled&&"gesture"!==Tn&&zt(r.actions,Tn)&&e!==Zt.startEvent,d=l&&a-Ft.timeStamp<50&&s>r.minSpeed&&s>r.endSpeed,l&&!d&&(u||h)){var v={};v.snap=v.restrict=v,u&&(Q(e,v),v.locked&&(f+=v.dx,m+=v.dy)),h&&(Z(e,v),v.restricted&&(f+=v.dx,m+=v.dy)),(f||m)&&(p=!0)}if(d||p){if(In.useAttachEvent?c(Zt.pointerUp,e):Zt.pointerUp=e,Zt.startEvent=i=new B(e,Tn,"inertiastart"),ln.fire(Zt.startEvent),Zt.target=ln,Zt.targetElement=ln._element,Zt.t0=a,d){Zt.vx0=It[o+"VX"],Zt.vy0=It[o+"VY"],Zt.v0=s,X(Zt);var y,x=g(e),S=z(ln,ln._element);if(x.x=x.x+(d?Zt.xe:0)-S.x,x.y=x.y+(d?Zt.ye:0)-S.y,y={useStatusXY:!0,x:x.x,y:x.y,dx:0,dy:0,snap:null},y.snap=y,f=m=0,u){var E=Q(e,y);E.locked&&(f+=E.dx,m+=E.dy)}if(h){var b=Z(e,y);b.restricted&&(f+=b.dx,m+=b.dy)}Zt.modifiedXe+=f,Zt.modifiedYe+=m,Zt.i=Rn(Y)}else Zt.smoothEnd=!0,Zt.xe=f,Zt.ye=m,Zt.sx=Zt.sy=0,Zt.i=Rn(_);return void(Zt.active=!0)}(u||h)&&et(e,!0)}if(bn){t=new B(e,"drag","end");var w,T=ln._element,D=G(t,T);if(cn=D.dropzone,dn=D.element,ln._element=T,cn)w=new B(e,"drop",null,dn,T),t.dropzone=dn;else if(pn){var O=new B(e,"drag","leave",dn,T);pn.fire(O,T),t.dragLeave=un}var M=V(e,t);ln.fire(t),M.leave&&pn.fire(M.leave),M.enter&&cn.fire(M.enter),M.drop&&cn.fire(M.drop),M.deactivate&&F(M.deactivate)}else Xn?(t=new B(e,"resize","end"),ln.fire(t)):En&&(t=new B(e,"gesture","end"),ln.fire(t));xt.stop()}}function mt(e,t){var n={},r=an[e.type],i=e.target;t=t?!0:!1;for(var o in e)n[o]=e[o];for(n.originalEvent=e,n.preventDefault=U;i&&i!==Tt;){for(var s=0;s<r.selectors.length;s++){var a=r.selectors[s],l=r.contexts[s];if(Xt(i,a)&&l===e.currentTarget&&O(l,i)){var c=r.listeners[s];n.currentTarget=i;for(var d=0;d<c.length;d++)if(c[d][1]===t)try{c[d][0](n)}catch(p){Dt.error('Error thrown from delegated listener: "'+a+'" '+e.type+" "+(c[d][0].name?c[d][0].name:"")),Dt.log(p)}}}i=i.parentNode}}function vt(e){return mt.call(this,e,!0)}function yt(){ln&&!ln.selector&&(ln=null),cn=dn=pn=un=null}function xt(e,t){return tn.get(e,t)||new Et(e,t)}function St(e){for(var t in hn)e.hasOwnProperty(t)&&typeof e[t]==typeof hn[t]&&(this[t]=e[t])}function Et(t,r){this._element=t,this._iEvents=this._iEvents||{},l(t)?(Tt.querySelector(t),this.selector=t,this._gesture=sn,r&&r.context&&(e.Node?r.context instanceof e.Node:n(r.context)||r.context===Tt)&&(this._context=r.context)):n(t)&&(Rt?(In.add(this,Yt.down,J),In.add(this,Yt.move,gt),this._gesture=new kt,this._gesture.target=t):(In.add(this,"mousedown",J),In.add(this,"mousemove",gt),In.add(this,"touchstart",J),In.add(this,"touchmove",gt))),tn.push(this),this.set(r)}function bt(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function zt(e,t){return-1!==bt(e,t)}function Xt(e,t,n){return wt?wt(e,t,n):e[kn](t)}var Yt,_t,wt,Tt=e.document,Dt=e.console,Ot=e.SVGElement||t,Mt=e.SVGSVGElement||t,Ct=e.SVGElementInstance||t,At=e.HTMLElement||e.Element,kt=e.Gesture||e.MSGesture,Rt=kt&&(e.PointerEvent||e.MSPointerEvent),$t=kt&&(e.GestureEvent||e.MSGestureEvent),Pt=Math.hypot||function(e,t){return Math.sqrt(e*e+t*t)},Nt={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},Ft={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},qt={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},It={pageX:0,pageY:0,clientX:0,clientY:0,pageSpeed:0,clientSpeed:0,timeStamp:0},Gt=[],Vt=[],Bt=0,Ut=null,Lt=null,Kt=0,jt=null,Wt={left:0,right:0,top:0,bottom:0},Ht={left:0,right:0,top:0,bottom:0},Jt={x:0,y:0},Qt={},Zt={active:!1,smoothEnd:!1,target:null,targetElement:null,startEvent:null,pointerUp:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null},en={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},tn=[],nn=[],rn={dropzones:[],elements:[],rects:[]},on=[],sn=null,an={},ln=null,cn=null,dn=null,pn=null,un=null,hn={draggable:!1,dragAxis:"xy",dropzone:!1,accept:null,resizable:!1,squareResize:!1,resizeAxis:"xy",gesturable:!1,pointerMoveTolerance:1,actionChecker:null,styleCursor:!0,preventDefault:"auto",snap:{mode:"grid",endOnly:!1,actions:["drag"],range:1/0,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],elementOrigin:null,arrayTypes:/^anchors$|^paths$|^actions$/,objectTypes:/^grid$|^gridOffset$|^elementOrigin$/,stringTypes:/^mode$/,numberTypes:/^range$/,boolTypes:/^endOnly$/},snapEnabled:!1,restrict:{drag:null,resize:null,gesture:null,endOnly:!1},restrictEnabled:!1,autoScroll:{container:e,margin:60,speed:300,numberTypes:/^margin$|^speed$/},autoScrollEnabled:!1,inertia:{resistance:10,minSpeed:100,endSpeed:10,zeroResumeDelta:!1,smoothEndDuration:300,actions:["drag","resize"],numberTypes:/^resistance$|^minSpeed$|^endSpeed$|^smoothEndDuration$/,arrayTypes:/^actions$/,boolTypes:/^zeroResumeDelta$/},inertiaEnabled:!1,origin:{x:0,y:0},deltaSource:"page",context:Tt},gn={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,anchors:[],paths:[],locked:!1,changed:!1},fn={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:gn,restricted:!1,changed:!1},mn={target:null,i:null,x:0,y:0,scroll:function(){var t=mn.target.options.autoScroll,n=t.container,r=(new Date).getTime(),i=(r-mn.prevTime)/1e3,o=t.speed*i;o>=1&&(n instanceof e.Window?n.scrollBy(mn.x*o,mn.y*o):n&&(n.scrollLeft+=mn.x*o,n.scrollTop+=mn.y*o),mn.prevTime=r),mn.isScrolling&&($n(mn.i),mn.i=Rn(mn.scroll))},edgeMove:function(t){if(ln&&ln.options.autoScrollEnabled&&(bn||Xn)){var n,r,i,o,s=ln.options.autoScroll;if(s.container instanceof e.Window)o=t.clientX<mn.margin,n=t.clientY<mn.margin,r=t.clientX>s.container.innerWidth-mn.margin,i=t.clientY>s.container.innerHeight-mn.margin;else{var a=v(s.container);o=t.clientX<a.left+mn.margin,n=t.clientY<a.top+mn.margin,r=t.clientX>a.right-mn.margin,i=t.clientY>a.bottom-mn.margin}mn.x=r?1:o?-1:0,mn.y=i?1:n?-1:0,mn.isScrolling||(mn.margin=s.margin,mn.speed=s.speed,mn.start(ln))}},isScrolling:!1,prevTime:0,start:function(e){mn.isScrolling=!0,$n(mn.i),mn.target=e,mn.prevTime=(new Date).getTime(),mn.i=Rn(mn.scroll)},stop:function(){mn.isScrolling=!1,$n(mn.i)}},vn="ontouchstart"in e||e.DocumentTouch&&Tt instanceof e.DocumentTouch,yn=vn?20:10,xn=!1,Sn=!1,En=!1,bn=!1,zn=!1,Xn=!1,Yn="xy",_n={drag:{cursor:"move",start:ot,move:st},resizex:{cursor:"e-resize",start:at,move:lt},resizey:{cursor:"s-resize",start:at,move:lt},resizexy:{cursor:"se-resize",start:at,move:lt},gesture:{cursor:"",start:ct,move:dt}},wn={drag:!0,resize:!0,gesture:!0},Tn=null,Dn="onmousewheel"in Tt?"mousewheel":"wheel",On=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","tap","doubletap"],Mn={},Cn={directBind:0,onevent:1,globalBind:2},An="Opera"==navigator.appName&&vn&&navigator.userAgent.match("Presto"),kn="matchesSelector"in Element.prototype?"matchesSelector":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",Rn=e.requestAnimationFrame,$n=e.cancelAnimationFrame,Pn={_element:e,events:{}},Nn={_element:Tt,events:{}},Fn={_element:e.parent,events:{}},qn={_element:null,events:{}},In=function(){function t(e,t,n,l){var h=bt(d,e),g=p[h];if(g||(g={events:{},typeCount:0},h=d.push(e)-1,p.push(g),u.push(s?{supplied:[],wrapped:[],useCount:[]}:null)),g.events[t]||(g.events[t]=[],g.typeCount++),!zt(g.events[t],n)){var f;if(s){var m=u[h],v=bt(m.supplied,n),y=m.wrapped[v]||function(t){t.immediatePropagationStopped||(t.target=t.srcElement,t.currentTarget=e,t.preventDefault=t.preventDefault||r,t.stopPropagation=t.stopPropagation||i,t.stopImmediatePropagation=t.stopImmediatePropagation||o,/mouse|click/.test(t.type)&&(t.pageX=t.clientX+Tt.documentElement.scrollLeft,t.pageY=t.clientY+Tt.documentElement.scrollTop),n(t))};f=e[a](c+t,y,Boolean(l)),-1===v?(m.supplied.push(n),m.wrapped.push(y),m.useCount.push(1)):m.useCount[v]++}else f=e[a](t,n,l||!1);return g.events[t].push(n),f}}function n(e,t,r,i){var o,a,h,g=bt(d,e),f=p[g],m=r;if(f&&f.events)if(s&&(a=u[g],h=bt(a.supplied,r),m=a.wrapped[h]),"all"!==t){if(f.events[t]){var v=f.events[t].length;if("all"===r)for(o=0;v>o;o++)n(e,t,f.events[t][o],Boolean(i));else for(o=0;v>o;o++)if(f.events[t][o]===r){e[l](c+t,m,i||!1),f.events[t].splice(o,1),s&&a&&(a.useCount[h]--,0===a.useCount[h]&&(a.supplied.splice(h,1),a.wrapped.splice(h,1),a.useCount.splice(h,1)));break}f.events[t]&&0===f.events[t].length&&(f.events[t]=null,f.typeCount--)}f.typeCount||(p.splice(g),d.splice(g),u.splice(g))}else for(t in f.events)f.events.hasOwnProperty(t)&&n(e,t,"all")}function r(){this.returnValue=!1}function i(){this.cancelBubble=!0}function o(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}var s="attachEvent"in e&&!("addEventListener"in e),a=s?"attachEvent":"addEventListener",l=s?"detachEvent":"removeEventListener",c=s?"on":"",d=[],p=[],u=[];return{add:function(e,n,r,i){t(e._element,n,r,i)},remove:function(e,t,r,i){n(e._element,t,r,i)},addToElement:t,removeFromElement:n,useAttachEvent:s,indexOf:bt}}();B.prototype={preventDefault:t,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}},tn.indexOfElement=nn.indexOfElement=function(e,t){for(var n=0;n<this.length;n++){var r=this[n];if(r.selector===e&&r._context===(t||Tt)||!r.selector&&r._element===e)return n}return-1},tn.get=nn.get=function(e,t){return this[this.indexOfElement(e,t&&t.context)]},tn.forEachSelector=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(n.selector){var r=e(n,n.selector,n._context,t,this);if(void 0!==r)return r}}},St.prototype=hn,Et.prototype={setOnEvents:function(e,t){if("drop"===e){var n=t.ondrop||t.onDrop||t.drop,r=t.ondropactivate||t.onDropActivate||t.dropactivate,i=t.ondropdeactivate||t.onDropDeactivate||t.dropdeactivate,s=t.ondragenter||t.onDropEnter||t.dragenter,a=t.ondragleave||t.onDropLeave||t.dragleave,l=t.ondropmove||t.onDropMove||t.dropmove;o(n)&&(this.ondrop=n),o(r)&&(this.ondropactivate=r),o(i)&&(this.ondropdeactivate=i),o(s)&&(this.ondragenter=s),o(a)&&(this.ondragleave=a),o(l)&&(this.ondropmove=l)}else{var c=t.onstart||t.onStart||t.start,d=t.onmove||t.onMove||t.move,p=t.onend||t.onEnd||t.end,u=t.oninertiastart||t.onInertiaStart||t.inertiastart;e="on"+e,o(c)&&(this[e+"start"]=c),o(d)&&(this[e+"move"]=d),o(p)&&(this[e+"end"]=p),o(u)&&(this[e+"inertiastart"]=u)
}return this},draggable:function(e){return r(e)?(this.options.draggable=!0,this.setOnEvents("drag",e),/^x$|^y$|^xy$/.test(e.axis)?this.options.dragAxis=e.axis:null===e.axis&&delete this.options.dragAxis,this):a(e)?(this.options.draggable=e,this):null===e?(delete this.options.draggable,this):this.options.draggable},dropzone:function(e){if(r(e))return this.options.dropzone=!0,this.setOnEvents("drop",e),this.accept(e.accept),this._dropElements=this.selector?null:[this._element],nn.push(this),this;if(a(e)){if(e)this._dropElements=this.selector?null:[this._element],nn.push(this);else{var t=bt(nn,this);-1!==t&&nn.splice(t,1)}return this.options.dropzone=e,this}return null===e?(delete this.options.dropzone,this):this.options.dropzone},dropCheck:function(e,t,n,r){if(!(r=r||this.getRect()))return!1;var i,o,s=g(e),a=z(t,n);return s.x+=a.x,s.y+=a.y,i=s.x>r.left&&s.x<r.right,o=s.y>r.top&&s.y<r.bottom,i&&o},dropChecker:function(e){return o(e)?(this.dropCheck=e,this):this.dropCheck},accept:function(e){return n(e)?(this.options.accept=e,this):l(e)?(Tt.querySelector(e),this.options.accept=e,this):null===e?(delete this.options.accept,this):this.options.accept},resizable:function(e){return r(e)?(this.options.resizable=!0,this.setOnEvents("resize",e),/^x$|^y$|^xy$/.test(e.axis)?this.options.resizeAxis=e.axis:null===e.axis&&(this.options.resizeAxis=hn.resizeAxis),this):a(e)?(this.options.resizable=e,this):this.options.resizable},resizeable:t,squareResize:function(e){return a(e)?(this.options.squareResize=e,this):null===e?(delete this.options.squareResize,this):this.options.squareResize},gesturable:function(e){return r(e)?(this.options.gesturable=!0,this.setOnEvents("gesture",e),this):a(e)?(this.options.gesturable=e,this):null===e?(delete this.options.gesturable,this):this.options.gesturable},gestureable:t,autoScroll:function(t){var i=hn.autoScroll;if(r(t)){var o=this.options.autoScroll;return o===i&&(o=this.options.autoScroll={margin:i.margin,distance:i.distance,interval:i.interval,container:i.container}),o.margin=this.validateSetting("autoScroll","margin",t.margin),o.speed=this.validateSetting("autoScroll","speed",t.speed),o.container=n(t.container)||t.container instanceof e.Window?t.container:i.container,this.options.autoScrollEnabled=!0,this.options.autoScroll=o,this}return a(t)?(this.options.autoScrollEnabled=t,this):null===t?(delete this.options.autoScrollEnabled,delete this.options.autoScroll,this):this.options.autoScrollEnabled?this.options.autoScroll:!1},snap:function(e){var t=hn.snap;if(r(e)){var n=this.options.snap;return n===t&&(n={}),n.mode=this.validateSetting("snap","mode",e.mode),n.endOnly=this.validateSetting("snap","endOnly",e.endOnly),n.actions=this.validateSetting("snap","actions",e.actions),n.range=this.validateSetting("snap","range",e.range),n.paths=this.validateSetting("snap","paths",e.paths),n.grid=this.validateSetting("snap","grid",e.grid),n.gridOffset=this.validateSetting("snap","gridOffset",e.gridOffset),n.anchors=this.validateSetting("snap","anchors",e.anchors),n.elementOrigin=this.validateSetting("snap","elementOrigin",e.elementOrigin),this.options.snapEnabled=!0,this.options.snap=n,this}return a(e)?(this.options.snapEnabled=e,this):null===e?(delete this.options.snapEnabled,delete this.options.snap,this):this.options.snapEnabled?this.options.snap:!1},inertia:function(e){var t=hn.inertia;if(r(e)){var n=this.options.inertia;return n===t&&(n=this.options.inertia={resistance:t.resistance,minSpeed:t.minSpeed,endSpeed:t.endSpeed,actions:t.actions,zeroResumeDelta:t.zeroResumeDelta,smoothEndDuration:t.smoothEndDuration}),n.resistance=this.validateSetting("inertia","resistance",e.resistance),n.minSpeed=this.validateSetting("inertia","minSpeed",e.minSpeed),n.endSpeed=this.validateSetting("inertia","endSpeed",e.endSpeed),n.actions=this.validateSetting("inertia","actions",e.actions),n.zeroResumeDelta=this.validateSetting("inertia","zeroResumeDelta",e.zeroResumeDelta),n.smoothEndDuration=this.validateSetting("inertia","smoothEndDuration",e.smoothEndDuration),this.options.inertiaEnabled=!0,this.options.inertia=n,this}return a(e)?(this.options.inertiaEnabled=e,this):null===e?(delete this.options.inertiaEnabled,delete this.options.inertia,this):this.options.inertiaEnabled?this.options.inertia:!1},getAction:function(e){var t=this.defaultActionChecker(e);return this.options.actionChecker&&(t=this.options.actionChecker(e,t,this)),t},defaultActionChecker:j,actionChecker:function(e){return o(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(e){return e=e||this._element,this.selector&&!n(e)&&(e=this._context.querySelector(this.selector)),v(e)},rectChecker:function(e){return o(e)?(this.getRect=e,this):null===e?(delete this.options.getRect,this):this.getRect},styleCursor:function(e){return a(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(e){return a(e)||"auto"===e?(this.options.preventDefault=e,this):null===e?(delete this.options.preventDefault,this):this.options.preventDefault},origin:function(e){return r(e)||/^parent$|^self$/.test(e)?(this.options.origin=e,this):null===e?(delete this.options.origin,this):this.options.origin},deltaSource:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):null===e?(delete this.options.deltaSource,this):this.options.deltaSource},restrict:function(e){if(void 0===e)return this.options.restrict;if(a(e))hn.restrictEnabled=e;else if(r(e)){var t={};(r(e.drag)||/^parent$|^self$/.test(e.drag))&&(t.drag=e.drag),(r(e.resize)||/^parent$|^self$/.test(e.resize))&&(t.resize=e.resize),(r(e.gesture)||/^parent$|^self$/.test(e.gesture))&&(t.gesture=e.gesture),a(e.endOnly)&&(t.endOnly=e.endOnly),r(e.elementRect)&&(t.elementRect=e.elementRect),this.options.restrictEnabled=!0,this.options.restrict=t}else null===e&&(delete this.options.restrict,delete this.options.restrictEnabled);return this},context:function(){return this._context},_context:Tt,ignoreFrom:function(e){return l(e)?(Tt.querySelector(e),this.options.ignoreFrom=e,this):n(e)?(this.options.ignoreFrom=e,this):null===e?(delete this.options.ignoreFrom,this):this.options.ignoreFrom},allowFrom:function(e){return l(e)?(Tt.querySelector(e),this.options.allowFrom=e,this):n(e)?(this.options.allowFrom=e,this):null===e?(delete this.options.allowFrom,this):this.options.allowFrom},validateSetting:function(e,t,o){var c=hn[e],d=this.options[e];if(void 0!==c&&void 0!==c[t]){if("objectTypes"in c&&c.objectTypes.test(t))return r(o)?o:t in d&&r(d[t])?d[t]:c[t];if("arrayTypes"in c&&c.arrayTypes.test(t))return i(o)?o:t in d&&i(d[t])?d[t]:c[t];if("stringTypes"in c&&c.stringTypes.test(t))return l(o)?o:t in d&&l(d[t])?d[t]:c[t];if("numberTypes"in c&&c.numberTypes.test(t))return s(o)?o:t in d&&s(d[t])?d[t]:c[t];if("boolTypes"in c&&c.boolTypes.test(t))return a(o)?o:t in d&&a(d[t])?d[t]:c[t];if("elementTypes"in c&&c.elementTypes.test(t))return n(o)?o:t in d&&n(d[t])?d[t]:c[t]}return null},element:function(){return this._element},fire:function(e){if(!e||!e.type||!zt(On,e.type))return this;for(var t,n,r=0,i=0,s="on"+e.type;3>r;)try{switch(r){case Cn.directBind:if(e.type in this._iEvents){for(t=this._iEvents[e.type],n=t.length;n>i&&!e.immediatePropagationStopped;i++)t[i](e);break}break;case Cn.onevent:o(this[s])&&this[s](e);break;case Cn.globalBind:if(e.type in Mn&&(t=Mn[e.type]))for(n=t.length;n>i&&!e.immediatePropagationStopped;i++)t[i](e)}if(e.propagationStopped)break;i=0,r++}catch(a){Dt.error("Error thrown from "+e.type+" listener"),Dt.error(a),i++,r===Cn.onevent&&r++}return this},on:function(e,t,n){if("wheel"===e&&(e=Dn),n=n?!0:!1,zt(On,e))e in this._iEvents?zt(this._iEvents[e],t)||this._iEvents[e].push(t):this._iEvents[e]=[t];else if(this.selector){an[e]||(an[e]={selectors:[],contexts:[],listeners:[]},In.addToElement(this._context,e,mt),In.addToElement(this._context,e,vt,!0));var r,i=an[e];for(r=i.selectors.length-1;r>=0&&(i.selectors[r]!==this.selector||i.contexts[r]!==this._context);r--);-1===r&&(r=i.selectors.length,i.selectors.push(this.selector),i.contexts.push(this._context),i.listeners.push([])),i.listeners[r].push([t,n])}else In.add(this,e,t,n);return this},off:function(e,t,n){var r,i=-1;if(n=n?!0:!1,"wheel"===e&&(e=Dn),zt(On,e))r=this._iEvents[e],r&&-1!==(i=bt(r,t))&&this._iEvents[e].splice(i,1);else if(this.selector){var o=an[e],s=!1;if(!o)return this;for(i=o.selectors.length-1;i>=0;i--)if(o.selectors[i]===this.selector&&o.contexts[i]===this._context){for(var a=o.listeners[i],l=a.length-1;l>=0;l--){var c=a[l][0],d=a[l][1];if(c===t&&d===n){a.splice(l,1),a.length||(o.selectors.splice(i,1),o.contexts.splice(i,1),o.listeners.splice(i,1),In.removeFromElement(this._context,e,mt),In.removeFromElement(this._context,e,vt,!0),o.selectors.length||(an[e]=null)),s=!0;break}}if(s)break}}else In.remove(this,t,n);return this},set:function(e){e&&r(e)||(e={}),this.options=new St(e),this.draggable("draggable"in e?e.draggable:this.options.draggable),this.dropzone("dropzone"in e?e.dropzone:this.options.dropzone),this.resizable("resizable"in e?e.resizable:this.options.resizable),this.gesturable("gesturable"in e?e.gesturable:this.options.gesturable);for(var t=["accept","actionChecker","allowFrom","autoScroll","deltaSource","dropChecker","ignoreFrom","inertia","origin","preventDefault","rectChecker","restrict","snap","styleCursor"],n=0,i=t.length;i>n;n++){var o=t[n];o in e&&this[o](e[o])}return this},unset:function(){if(In.remove(this,"all"),l(this.selector))for(var e in an)for(var t=an[e],n=0;n<t.selectors.length;n++){t.selectors[n]===this.selector&&t.contexts[n]===this._context&&(t.selectors.splice(n,1),t.contexts.splice(n,1),t.listeners.splice(n,1),t.selectors.length||(an[e]=null)),In.removeFromElement(this._context,e,mt),In.removeFromElement(this._context,e,vt,!0);break}else In.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor=""),this._gesture&&(this._gesture.target=null);return this.dropzone(!1),tn.splice(bt(tn,this),1),xt}},Et.prototype.gestureable=Et.prototype.gesturable,Et.prototype.resizeable=Et.prototype.resizable,xt.isSet=function(e,t){return-1!==tn.indexOfElement(e,t&&t.context)},xt.on=function(e,t,n){return zt(On,e)?Mn[e]?zt(Mn[e],t)||Mn[e].push(t):Mn[e]=[t]:In.add(Nn,e,t,n),xt},xt.off=function(e,t,n){if(zt(On,e)){var r;e in Mn&&-1!==(r=bt(Mn[e],t))&&Mn[e].splice(r,1)}else In.remove(Nn,e,t,n);return xt},xt.simulate=function(e,n,r){var i,o={};return"resize"===e&&(e="resizexy"),e in _n?(r?c(o,r):(i=ln._element instanceof Ot?n.getBoundingClientRect():i=n.getClientRects()[0],"drag"===e?(o.pageX=i.left+i.width/2,o.pageY=i.top+i.height/2):(o.pageX=i.right,o.pageY=i.bottom)),o.target=o.currentTarget=n,o.preventDefault=o.stopPropagation=t,J(o,e),xt):xt},xt.enableDragging=function(e){return null!==e&&void 0!==e?(wn.drag=e,xt):wn.drag},xt.enableResizing=function(e){return null!==e&&void 0!==e?(wn.resize=e,xt):wn.resize},xt.enableGesturing=function(e){return null!==e&&void 0!==e?(wn.gesture=e,xt):wn.gesture},xt.eventTypes=On,xt.debug=function(){return{target:ln,dragging:bn,resizing:Xn,gesturing:En,prepared:Tn,matches:on,prevCoords:Nt,downCoords:qt,pointerIds:Gt,pointerMoves:Vt,addPointer:tt,removePointer:nt,recordPointers:rt,recordTouches:it,snap:gn,restrict:fn,inertia:Zt,downTime:Bt,downEvent:Ut,prevEvent:Lt,Interactable:Et,IOptions:St,interactables:tn,dropzones:nn,pointerIsDown:xn,defaultOptions:hn,defaultActionChecker:j,actions:_n,dragMove:st,resizeMove:lt,gestureMove:dt,pointerUp:ft,pointerDown:J,pointerMove:et,pointerHover:gt,events:In,globalEvents:Mn,delegatedEvents:an}},xt.getTouchAverage=x,xt.getTouchBBox=S,xt.getTouchDistance=E,xt.getTouchAngle=b,xt.getElementRect=v,xt.margin=function(e){return s(e)?(yn=e,xt):yn},xt.styleCursor=function(e){return a(e)?(hn.styleCursor=e,xt):hn.styleCursor},xt.autoScroll=function(t){var i=hn.autoScroll;return r(t)?(hn.autoScrollEnabled=!0,s(t.margin)&&(i.margin=t.margin),s(t.speed)&&(i.speed=t.speed),i.container=n(t.container)||t.container instanceof e.Window?t.container:i.container,xt):a(t)?(hn.autoScrollEnabled=t,xt):hn.autoScrollEnabled?i:!1},xt.snap=function(e){var t=hn.snap;return r(e)?(hn.snapEnabled=!0,l(e.mode)&&(t.mode=e.mode),a(e.endOnly)&&(t.endOnly=e.endOnly),s(e.range)&&(t.range=e.range),i(e.actions)&&(t.actions=e.actions),i(e.anchors)&&(t.anchors=e.anchors),r(e.grid)&&(t.grid=e.grid),r(e.gridOffset)&&(t.gridOffset=e.gridOffset),r(e.elementOrigin)&&(t.elementOrigin=e.elementOrigin),xt):a(e)?(hn.snapEnabled=e,xt):{enabled:hn.snapEnabled,mode:t.mode,actions:t.actions,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors,paths:t.paths,range:t.range,locked:gn.locked,x:gn.snappedX,y:gn.snappedY,realX:gn.realX,realY:gn.realY,dx:gn.dx,dy:gn.dy}},xt.inertia=function(e){var t=hn.inertia;return r(e)?(hn.inertiaEnabled=!0,s(e.resistance)&&(t.resistance=e.resistance),s(e.minSpeed)&&(t.minSpeed=e.minSpeed),s(e.endSpeed)&&(t.endSpeed=e.endSpeed),s(e.smoothEndDuration)&&(t.smoothEndDuration=e.smoothEndDuration),a(e.zeroResumeDelta)&&(t.zeroResumeDelta=e.zeroResumeDelta),i(e.actions)&&(t.actions=e.actions),xt):a(e)?(hn.inertiaEnabled=e,xt):{enabled:hn.inertiaEnabled,resistance:t.resistance,minSpeed:t.minSpeed,endSpeed:t.endSpeed,actions:t.actions,zeroResumeDelta:t.zeroResumeDelta}},xt.supportsTouch=function(){return vn},xt.currentAction=function(){return bn&&"drag"||Xn&&"resize"||En&&"gesture"||null},xt.stop=function(e){if(bn||Xn||En){if(mn.stop(),on=[],ln.options.styleCursor&&(Tt.documentElement.style.cursor=""),ln._gesture&&ln._gesture.stop(),e&&o(e.preventDefault)&&k(e,ln),bn){rn.dropzones=rn.elements=rn.rects=null;for(var t=0;t<nn.length;t++)nn[t].selector&&(nn[t]._dropElements=null)}yt()}return Gt.splice(0),Vt.splice(0),xn=gn.locked=bn=Xn=En=!1,Tn=Lt=null,Zt.resumeDx=Zt.resumeDy=0,xt},xt.dynamicDrop=function(e){return a(e)?(zn=e,xt):zn},xt.deltaSource=function(e){return"page"===e||"client"===e?(hn.deltaSource=e,this):hn.deltaSource},xt.restrict=function(e){var t=hn.restrict;return void 0===e?hn.restrict:(a(e)?hn.restrictEnabled=e:r(e)?((r(e.drag)||/^parent$|^self$/.test(e.drag))&&(t.drag=e.drag),(r(e.resize)||/^parent$|^self$/.test(e.resize))&&(t.resize=e.resize),(r(e.gesture)||/^parent$|^self$/.test(e.gesture))&&(t.gesture=e.gesture),a(e.endOnly)&&(t.endOnly=e.endOnly),r(e.elementRect)&&(t.elementRect=e.elementRect),hn.restrictEnabled=!0):null===e&&(t.drag=t.resize=t.gesture=null,t.endOnly=!1),this)},xt.pointerMoveTolerance=function(e){return s(e)?(hn.pointerMoveTolerance=e,this):hn.pointerMoveTolerance},Rt?(Yt=Rt===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"MSPointerOver",out:"MSPointerOut",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},_t=$t===e.MSGestureEvent?{start:"MSGestureStart",change:"MSGestureChange",inertia:"MSInertiaStart",end:"MSGestureEnd"}:{start:"gesturestart",change:"gesturechange",inertia:"inertiastart",end:"gestureend"},In.add(Nn,Yt.up,K),In.add(Nn,Yt.down,H),In.add(Nn,_t.change,et),In.add(Nn,_t.end,ft),In.add(Nn,_t.inertia,ft),In.add(Nn,Yt.over,ut),In.add(Nn,Yt.out,ht),In.add(Nn,Yt.move,rt),In.add(Nn,Yt.up,rt),In.add(Nn,Yt.cancel,rt),In.add(Nn,Yt.up,function(){bn||Xn||En||(xn=!1)}),sn=new kt,sn.target=Tt.documentElement):(In.add(Nn,"mouseup",K),In.add(Nn,"touchend",K),In.add(Nn,"mousedown",H),In.add(Nn,"mousemove",et),In.add(Nn,"mouseup",ft),In.add(Nn,"mouseover",ut),In.add(Nn,"mouseout",ht),In.add(Nn,"touchmove",it),In.add(Nn,"touchend",it),In.add(Nn,"touchcancel",it),In.add(Nn,"touchstart",H),In.add(Nn,"touchmove",et),In.add(Nn,"touchend",ft),In.add(Nn,"touchcancel",ft)),In.add(Pn,"blur",ft);try{e.frameElement&&(qn._element=e.frameElement.ownerDocument,In.add(qn,"mouseup",ft),In.add(qn,"touchend",ft),In.add(qn,"touchcancel",ft),In.add(qn,"pointerup",ft),In.add(qn,"MSPointerUp",ft),In.add(Fn,"blur",ft))}catch(Gn){xt.windowParentError=Gn}In.add(Nn,"selectstart",function(e){(bn||Xn||En)&&k(e,ln)}),kn in Element.prototype&&o(Element.prototype[kn])||(wt=function(e,t,n){n=n||e.parentNode.querySelectorAll(t);for(var r=0,i=n.length;i>r;r++)if(n[r]===e)return!0;return!1}),function(){for(var t=0,n=["ms","moz","webkit","o"],r=0;r<n.length&&!e.requestAnimationFrame;++r)Rn=e[n[r]+"RequestAnimationFrame"],$n=e[n[r]+"CancelAnimationFrame"]||e[n[r]+"CancelRequestAnimationFrame"];Rn||(Rn=function(n){var r=(new Date).getTime(),i=Math.max(0,16-(r-t)),o=e.setTimeout(function(){n(r+i)},i);return t=r+i,o}),$n||($n=function(e){clearTimeout(e)})}(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=xt),exports.interact=xt):"function"==typeof define&&define.amd?define("interact",function(){return xt}):e.interact=xt}(this);
