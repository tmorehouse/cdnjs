/* interact.js v1.0.8 | https://raw.github.com/taye/interact.js/master/LICENSE */
!function(e){"use strict";function t(){}function n(e){N=e.pageX,$=e.pageY,K=e.clientX,V=e.clientY,Z=e}function i(e,t){var n,i,r;return e=e||"page",t.touches?(n=t.touches.length?t.touches[0]:t.changedTouches[0],i=n[e+"X"],r=n[e+"Y"]):(i=t[e+"X"],r=t[e+"Y"]),{x:i,y:r}}function r(t){var n;if(At)n=i("screen",t),n.x+=e.scrollX,n.y+=e.scrollY;else{if(/gesture|inertia/i.test(t.type))return n=i("client",t),n.x+=D.documentElement.scrollLeft,n.y+=D.documentElement.scrollTop,n;n=i("page",t)}return n}function o(e){return i(At?"screen":"client",e)}function s(){return{x:e.scrollX||D.documentElement.scrollLeft,y:e.scrollY||D.documentElement.scrollTop}}function a(e){var t,n=e.touches,i=0,r=0,o=0,s=0;for(t=0;t<n.length;t++)i+=n[t].pageX/n.length,r+=n[t].pageY/n.length,o+=n[t].clientX/n.length,s+=n[t].clientY/n.length;return{pageX:i,pageY:r,clientX:o,clientY:s}}function l(e){if(e.touches.length){var t,n=e.touches,i=e.touches[0].pageX,r=e.touches[0].pageY,o=i,s=r;for(t=1;t<n.length;t++)i=i>e.touches[t].pageX?i:e.touches[t].pageX,r=i>e.touches[t].pageX?r:e.touches[t].pageY;return{left:i,top:r,width:o-i,height:s-r}}}function c(e){var t=(ct&&ct.options||gt).deltaSource,n=t+"X",i=t+"Y",r=e.touches[0][n],o=e.touches[0][i];return"touchend"===e.type&&1===e.touches.length?(r-=e.changedTouches[0][n],o-=e.changedTouches[0][i]):(r-=e.touches[1][n],o-=e.touches[1][i]),Math.sqrt(r*r+o*o)}function u(e,t){var n=(ct&&ct.options||gt).deltaSource,i=n+"X",r=n+"Y",o=e.touches[0][i],s=e.touches[0][r];"touchend"===e.type&&1===e.touches.length?(o-=e.changedTouches[0][i],s-=e.changedTouches[0][r]):(o-=e.touches[1][i],s-=e.touches[1][r]);var a=180*Math.atan(s/o)/Math.PI;if("number"==typeof t){var l=a-t,c=l%360;c>315?a-=360+a/360|0:c>135?a-=180+a/360|0:-315>c?a+=360+a/360|0:-135>c&&(a+=180+a/360|0)}return a}function h(e){e=e||ct;var t=e?e.options.origin:gt.origin;return t instanceof Element?(t=M(t).getRect(),t.x=t.left,t.y=t.top):"function"==typeof t&&(t=t(e&&e._element)),t}function p(e){for(var t=0,n=e.length;n>t;t++)e[t].rect=e[t].getRect()}function d(e){if(e.length){var t,n,i,r,o,s=e[0],a=[],l=[];for(r=1;r<e.length;r++){if(t=e[r],!a.length)for(n=s;n.parentNode!==D;)a.unshift(n),n=n.parentNode;if(s instanceof q&&t instanceof P&&!(t instanceof j)){if(t===s.parentNode)continue;n=t.ownerSVGElement}else n=t;for(l=[];n.parentNode!==D;)l.unshift(n),n=n.parentNode;for(o=0;l[o]&&l[o]===a[o];)o++;var c=[l[o-1],l[o],a[o]];for(i=c[0].lastChild;i;){if(i===c[1]){s=t,a=[];break}if(i===c[2])break;i=i.previousSibling}}return{element:s,index:e.indexOf(s)}}}function g(e,t){if(nt.length||ot.length){var n,i,r,o=[],s=[],a=[],l=[];for(t=t||ct._element,n=0;n<nt.length;n++){var c=nt[n];if(c.options.accept instanceof Element){if(c.options.accept!==t)continue}else if("string"==typeof c.options.accept&&!t[Dt](c.options.accept))continue;t!==c._element&&c.dropCheck(e)&&(o.push(c),s.push(c._element))}if(i=d(s),r=i?o[i.index]:null,ot.length){for(n=0;n<ot.length;n++)for(var u=ot[n],h=D.querySelectorAll(u.selector),p=0,g=h.length;g>p;p++){if(u._element=h[p],u.rect=u.getRect(),u.options.accept instanceof Element){if(u.options.accept!==t)continue}else if("string"==typeof u.options.accept&&!t[Dt](u.options.accept))continue;u._element!==t&&-1===s.indexOf(u._element)&&l.indexOf(-1===u._element)&&u.dropCheck(e)&&(a.push(u),l.push(u._element))}l.length&&(r&&(a.push(r),l.push(r._element)),i=d(l),i&&(r=a[i.index],r.selector&&(r._element=l[i.index])))}return r?{dropzone:r,element:r._element}:null}}function f(e,t,n,i,s){var p,d,g=(ct&&ct.options||gt).deltaSource,f=ct?ct.options:gt,y=h(ct);if(i=i||ct._element,"gesture"===t){var m=a(e);d={x:m.pageX-y.x,y:m.pageY-y.y},p={x:m.clientX-y.x,y:m.clientY-y.y}}else if(d=r(e),p=o(e),d.x-=y.x,d.y-=y.y,p.x-=y.x,p.y-=y.y,ct.options.snapEnabled&&-1!==ct.options.snap.actions.indexOf(t)){var v=f.snap;this.snap={mode:v.mode,anchors:ft.anchors,range:ft.range,locked:ft.locked,x:ft.x,y:ft.y,realX:ft.realX,realY:ft.realY,dx:ft.dx,dy:ft.dy},ft.locked&&("path"===v.mode?(ft.xInRange&&(d.x+=ft.dx,p.x+=ft.dx),ft.yInRange&&(d.y+=ft.dy,p.y+=ft.dy)):(d.x+=ft.dx,d.y+=ft.dy,p.x+=ft.dx,p.y+=ft.dy))}if(ct.options.restrictions[t]){var x,b=ct.options.restrictions[t],E=d.x,S=d.y;b instanceof Element?x=M(b).getRect():("function"==typeof b&&(b=b(d.x,d.y,ct._element)),x=b,"x"in b&&"y"in b&&(x={left:b.x,top:b.y,right:b.x+b.width,bottom:b.y+b.height})),d.x=Math.max(Math.min(x.right,d.x),x.left),d.y=Math.max(Math.min(x.bottom,d.y),x.top);var O=d.x-E,z=d.y-S;p.x+=O,p.y+=z}if(this.x0=U,this.y0=H,this.clientX0=F,this.clientY0=W,this.pageX=d.x,this.pageY=d.y,this.clientX=p.x,this.clientY=p.y,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.target=i,this.t0=J,this.type=t+(n||""),s&&(this.relatedTarget=s),"end"===n||"drop"===t?"client"===g?(this.dx=p.x-U,this.dy=p.y-H):(this.dx=d.x-U,this.dy=d.y-H):"client"===g?(this.dx=p.x-K,this.dy=p.y-V):(this.dx=d.x-N,this.dy=d.y-$),"resize"===t?f.squareResize||e.shiftKey?("y"===wt?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=wt,"x"===wt?this.dy=0:"y"===wt&&(this.dx=0)):"gesture"===t&&(this.touches=e.touches,this.distance=c(e),this.box=l(e),"start"===n?(this.scale=1,this.ds=0,this.angle=u(e),this.da=0):(this.scale=this.distance/et.startDistance,this.angle=u(e,et.prevAngle),"end"===n?(this.da=this.angle-et.startAngle,this.ds=this.scale-1):(this.da=this.angle-et.prevAngle,this.ds=this.scale-et.prevScale))),"start"===n)this.timeStamp=J,this.dt=0,this.duration=0,this.speed=0;else{this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-Z.timeStamp,this.duration=this.timeStamp-J;var _=("end"===n?this.duration:this.dt)/1e3;this.speed=Math.sqrt(this.dx*this.dx+this.dy*this.dy)/_}}function y(e,t){if("string"!=typeof e)return null;t=t||ct;var n=-1!==e.indexOf("resize")?"resize":e,i=(t||ct).options;return("resize"===n&&i.resizeable||"drag"===e&&i.draggable||"gesture"===e&&i.gestureable)&&Xt[n]?(("resize"===e||"resizeyx"===e)&&(e="resizexy"),e):null}function m(e){var t;if(!(Ot||_t||St)){if(st.length&&/mousedown|pointerdown/i.test(e.type))t=O(e,st);else for(var n,i,r=e.target instanceof L?e.target.correspondingUseElement:e.target;r!==D&&!t;){st=[];for(n in rt)i=Element.prototype[Dt]===A?D.querySelectorAll(n):void 0,r[Dt](n,i)&&(rt[n]._element=r,st.push(rt[n]));t=O(e,st),r=r.parentNode}return t?(xt=!0,v(e,t)):void 0}}function v(e,t){(e.touches&&e.touches.length<2&&!ct||!xt)&&(ct=tt.get(e.currentTarget));var n=ct&&ct.options;if(ct&&!(Ot||_t||St)){var i,s,l,c=y(t||ct.getAction(e)),u=h(ct);if(B&&e instanceof B&&(ct.selector?lt.addPointer(e.pointerId):(ct._gesture.target||(ct._gesture.target=ct._element),ct._gesture.addPointer(e.pointerId))),e.touches?(i=a(e),s={x:i.pageX,y:i.pageY},l={x:i.clientX,y:i.clientY}):(s=r(e),l=o(e)),!c)return e;xt=!0,bt=!1,n.styleCursor&&(D.documentElement.style.cursor=Rt[c].cursor),wt="resizexy"===c?"xy":"resizex"===c?"x":"resizey"===c?"y":"",Tt=c,U=s.x-u.x,H=s.y-u.y,F=l.x-u.x,W=l.y-u.y,ft.x=null,ft.y=null,e.preventDefault(),J=(new Date).getTime(),Q=e}}function x(e){if(xt&&(U===N&&H===$&&(bt=!0),Tt&&ct))if(ct.options.snapEnabled&&-1!==ct.options.snap.actions.indexOf(Tt)){var t,n,i,s,a,l,c,u,p,d=ct.options.snap,g=r(e),f=h(ct);if(ft.realX=g.x,ft.realY=g.y,g.x-=f.x,g.y-=f.y,d.range<0&&(d.range=1/0),"anchor"===d.mode&&d.anchors.length){for(t={anchor:null,distance:0,range:0,distX:0,distY:0},u=0,p=d.anchors.length;p>u;u++){var y=d.anchors[u];n="number"==typeof y.range?y.range:d.range,a=y.x-g.x,l=y.y-g.y,c=Math.sqrt(a*a+l*l),i=n>c,1/0===n&&t.inRange&&1/0!==t.range&&(i=!1),(!t.anchor||(i?t.inRange&&1/0!==n?c/n<t.distance/t.range:c<t.distance:!t.inRange&&c<t.distance))&&(1/0===n&&(i=!0),t.anchor=y,t.distance=c,t.range=n,t.inRange=i,t.distX=a,t.distY=l,ft.range=n)}i=t.inRange,s=t.anchor.x!==ft.x||t.anchor.y!==ft.y,ft.x=t.anchor.x,ft.y=t.anchor.y,ft.dx=t.distX,ft.dy=t.distY,ct.options.snap.anchors.closest=ft.anchors.closest=t.anchor}else if("grid"===d.mode){var m=Math.round((g.x-d.gridOffset.x)/d.grid.x),v=Math.round((g.y-d.gridOffset.y)/d.grid.y),x=m*d.grid.x+d.gridOffset.x,b=v*d.grid.y+d.gridOffset.y;a=x-g.x,l=b-g.y,c=Math.sqrt(a*a+l*l),i=c<d.range,s=x!==ft.x||b!==ft.y,ft.x=x,ft.y=b,ft.dx=a,ft.dy=l,ft.range=d.range}if("path"===d.mode&&d.paths.length){for(t={path:{},distX:0,distY:0,range:0},u=0,p=d.paths.length;p>u;u++){var E,S,O=d.paths[u],z=!1,_=!1,w=O;"function"==typeof O&&(w=O(g.x,g.y)),"number"==typeof w.x?(E=w.x,z=!0):E=g.x,"number"==typeof w.y?(S=w.y,_=!0):S=g.y,n="number"==typeof w.range?w.range:d.range,a=E-g.x,l=S-g.y;var R=Math.abs(a)<n&&z,X=Math.abs(l)<n&&_;1/0===n&&t.xInRange&&1/0!==t.range&&(R=!1),"x"in t.path&&!(R?t.xInRange&&1/0!==n?c/n<t.distX/t.range:Math.abs(a)<Math.abs(t.distX):!t.xInRange&&Math.abs(a)<Math.abs(t.distX))||(1/0===n&&(R=!0),t.path.x=E,t.distX=a,t.xInRange=R,t.range=n,ft.range=n),1/0===n&&t.yInRange&&1/0!==t.range&&(X=!1),"y"in t.path&&!(X?t.yInRange&&1/0!==n?c/n<t.distY/t.range:Math.abs(l)<Math.abs(t.distY):!t.yInRange&&Math.abs(l)<Math.abs(t.distY))||(1/0===n&&(X=!0),t.path.y=S,t.distY=l,t.yInRange=X,t.range=n,ft.range=n)}i=t.xInRange||t.yInRange,s=!t.xInRange||!t.yInRange||ft.xInRange&&ft.yInRange?!t.xInRange||!t.yInRange||t.path.x!==ft.x||t.path.y!==ft.y:!0,ft.x=t.path.x,ft.y=t.path.y,ft.dx=t.distX,ft.dy=t.distY,ft.xInRange=t.xInRange,ft.yInRange=t.yInRange,ct.options.snap.paths.closest=ft.paths.closest=t.path}if(!s&&ft.locked||!i)(s||!i)&&(ft.locked=!1,Rt[Tt].moveListener(e));else{if(ft.locked=!0,!(Ot||_t||St)){var T=r(e),Y=o(e);U=T.x-f.x+ft.dx,H=T.y-f.y+ft.dy,F=Y.x-f.x+ft.dx,W=Y.y-f.y+ft.dy}Rt[Tt].moveListener(e)}}else Rt[Tt].moveListener(e);(Ot||_t)&&yt.edgeMove(e)}function b(e){e.preventDefault();var t,i,r,o,s;if(!Ot){if(n(Q),t=new f(Q,"drag","start"),Ot=!0,ct.fire(t),!zt){p(nt);for(var a=0;a<ot.length;a++)ot[a]._elements=D.querySelectorAll(ot[a].selector)}n(t)}var l=ct._element,c=g(e,l);t=new f(e,"drag","move"),c?(o=c.dropzone,ht=c.element):o=ht=null,ct._element=l,ht!==dt&&(pt&&(r=new f(e,"drag","leave",dt,l),t.dragLeave=dt,s=pt,pt=dt=null),o&&(i=new f(e,"drag","enter",ht,l),t.dragEnter=o._element,pt=o,dt=pt._element)),ct.fire(t),r&&s.fire(r),i&&o.fire(i),n(t)}function E(e){e.preventDefault();var t;_t||(n(Q),t=new f(Q,"resize","start"),ct.fire(t),ct.fire(t),_t=!0,n(t)),t=new f(e,"resize","move"),ct.fire(t),n(t)}function S(e){if(e.touches&&!(e.touches.length<2)){e.preventDefault();var t;St||(n(Q),t=new f(Q,"gesture","start"),t.ds=0,et.startDistance=et.prevDistance=t.distance,et.startAngle=et.prevAngle=t.angle,et.scale=1,St=!0,ct.fire(t),n(t)),t=new f(e,"gesture","move"),t.ds=t.scale-et.scale,ct.fire(t),n(t),et.prevAngle=t.angle,et.prevDistance=t.distance,1/0===t.scale||null===t.scale||void 0===t.scale||isNaN(t.scale)||(et.scale=t.scale)}}function O(e,t){for(var n=0,i=t.length;i>n;n++){var r=t[n],o=y(r.getAction(e,r),r);if(o)return ct=r,o}}function z(e){if(!(xt||Ot||_t||St)){var t=[],n=ct&&ct._element,i=e.target instanceof L?e.target.correspondingUseElement:e.target;for(var r in rt)rt.hasOwnProperty(r)&&rt[r]&&i[Dt](r)&&(rt[r]._element=i,t.push(rt[r]));var o=tt.get(i),s=o&&y(o.getAction(e),o);if(s)ct=o,st=[];else if(O(e,t))st=t,w(e,st),qt.addToElement(i,"mousemove",w);else if(ct){var a=n.querySelectorAll("*");if(-1!==Array.prototype.indexOf.call(a,i)){for(var l=0;l<st.length;l++)st[l]._element=n;w(e,st),qt.addToElement(ct._element,"mousemove",w)}else ct=null,st=[]}}}function _(e){var t=e.target instanceof L?e.target.correspondingUseElement:e.target;tt.get(t)||qt.removeFromElement(t,w),ct&&ct.options.styleCursor&&!(Ot||_t||St)&&(D.documentElement.style.cursor="")}function w(e,t){if(xt||Ot||_t||St)e.preventDefault();else{var n;t?n=O(e,t):ct&&(n=y(ct.getAction(e))),ct&&ct.options.styleCursor&&(D.documentElement.style.cursor=n?Rt[n].cursor:"")}}function R(e){var t;if(!(e.touches&&e.touches.length>=2)){if(Ot){t=new f(e,"drag","end");var n,i=ct._element,r=g(e,i);if(r?(ut=r.dropzone,ht=r.element):(ut=null,ht=null),ct._element=i,ut)n=new f(e,"drop",null,ht,i),t.dropzone=ht;else if(pt){var o=new f(e,"drag","leave",ht,i);pt.fire(o,i),t.dragLeave=dt}ct.fire(t),n&&ut.fire(n)}else if(_t)t=new f(e,"resize","end"),ct.fire(t);else if(St)t=new f(e,"gesture","end"),ct.fire(t);else if(/mouseup|touchend|pointerup/i.test(e.type)&&ct&&xt&&!bt){var s={};for(var a in e)s[a]=e[a];s.currentTarget=ct._element,s.type="tap",ct.fire(s)}M.stop()}}function X(e,t){var n,i,r={},o=at[e.type],s=e.target;t=t?!0:!1;for(var a in e)r[a]=e[a];for(r.preventDefault=function(){e.preventDefault()};s!==D;){for(n in o)if(s[Dt](n)){var l=o[n];for(r.currentTarget=s,i=0;i<l.length;i++)if(l[i][1]===t)try{l[i][0](r)}catch(c){k.error('Error thrown from delegated listener: "'+n+'" '+e.type+" "+(l[i][0].name?l[i][0].name:"")),k.log(c)}}s=s.parentNode}}function T(e){return X.call(this,e,!0)}function Y(){ct&&!ct.selector&&(ct=null),ut=ht=pt=dt=null}function M(e){return tt.get(e)||new I(e)}function C(e){for(var t in gt)e.hasOwnProperty(t)&&typeof e[t]==typeof gt[t]&&(this[t]=e[t])}function I(e,t){this._element=e,this._iEvents=this._iEvents||{},"string"==typeof e?(D.querySelector(e),rt[e]=this,this.selector=e):(e instanceof Element&&(B?(qt.add(this,"pointerdown",v),qt.add(this,"pointermove",w),this._gesture=new G,this._gesture.target=e):(qt.add(this,"mousedown",v),qt.add(this,"mousemove",w),qt.add(this,"touchstart",v),qt.add(this,"touchmove",w))),it.push(this)),tt.push(this),this.set(t)}var A,D=e.document,k=e.console,P=e.SVGElement||t,j=e.SVGSVGElement||t,L=e.SVGElementInstance||t,q=e.HTMLElement||e.Element,B=e.PointerEvent||e.MSPointerEvent,G=(e.GestureEvent||e.MSGestureEvent,e.Gesture||e.MSGesture),N=0,$=0,K=0,V=0,U=0,H=0,F=0,W=0,J=0,Q=null,Z=null,et={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},tt=[],nt=[],it=[],rt={},ot=[],st=[],at={},lt=null,ct=null,ut=null,ht=null,pt=null,dt=null,gt={draggable:!1,dropzone:!1,accept:null,resizeable:!1,squareResize:!1,gestureable:!1,styleCursor:!0,snap:{mode:"grid",actions:["drag"],range:1/0,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],arrayTypes:/^anchors$|^paths$|^actions$/,objectTypes:/^grid$|^gridOffset$/,stringTypes:/^mode$/,numberTypes:/^range$/},snapEnabled:!1,restrictions:{},autoScroll:{container:e,margin:60,interval:20,distance:10,elementTypes:/^container$/,numberTypes:/^range$|^interval$|^distance$/},autoScrollEnabled:!1,origin:{x:0,y:0},deltaSource:"page"},ft={locked:!1,x:0,y:0,dx:0,dy:0,realX:0,realY:0,anchors:[],paths:[]},yt={margin:60,interval:20,i:null,distance:10,x:0,y:0,scroll:function(){var t=ct.options.autoScroll.container;t===e?e.scrollBy(yt.x,yt.y):t&&(t.scrollLeft+=yt.x,t.scrollTop+=yt.y)},edgeMove:function(t){if(ct&&ct.options.autoScrollEnabled&&(Ot||_t)){var n,i,r,o,s=ct.options.autoScroll;if(s.container===e)o=t.clientX<yt.margin,n=t.clientY<yt.margin,i=t.clientX>e.innerWidth-yt.margin,r=t.clientY>e.innerHeight-yt.margin;else{var a=M(s.container).getRect();o=t.clientX<a.left+yt.margin,n=t.clientY<a.top+yt.margin,i=t.clientX>a.right-yt.margin,r=t.clientY>a.bottom-yt.margin}yt.x=yt.distance*(i?1:o?-1:0),yt.y=yt.distance*(r?1:n?-1:0),yt.isScrolling||(yt.margin=s.margin,yt.distance=s.distance,yt.interval=s.interval,yt.start())}},isScrolling:!1,start:function(){yt.isScrolling=!0,e.clearInterval(yt.i),yt.i=e.setInterval(yt.scroll,yt.interval)},stop:function(){e.clearInterval(yt.i),yt.isScrolling=!1}},mt="createTouch"in D,vt=mt?20:10,xt=!1,bt=!1,Et=!1,St=!1,Ot=!1,zt=!1,_t=!1,wt="xy",Rt={drag:{cursor:"move",moveListener:b},resizex:{cursor:"e-resize",moveListener:E},resizey:{cursor:"s-resize",moveListener:E},resizexy:{cursor:"se-resize",moveListener:E},gesture:{cursor:"",moveListener:S}},Xt={drag:!0,resize:!0,gesture:!0},Tt=null,Yt="onmousewheel"in D?"mousewheel":"wheel",Mt=["resizestart","resizemove","resizeend","dragstart","dragmove","dragend","dragenter","dragleave","drop","gesturestart","gesturemove","gestureend","tap"],Ct={},It={directBind:0,onevent:1,globalBind:2},At="Opera"==navigator.appName&&mt&&navigator.userAgent.match("Presto"),Dt="matchesSelector"in Element.prototype?"matchesSelector":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",kt={_element:e,events:{}},Pt={_element:D,events:{}},jt={_element:e.parent,events:{}},Lt={_element:null,events:{}},qt=function(){function t(e,t,n,i){var s=l.indexOf(e),h=c[s];if(h||(h={events:{},typeCount:0},s=l.push(e)-1,c.push(h),u.push(r?{supplied:[],wrapped:[],useCount:[]}:null)),h.events[t]||(h.events[t]=[],h.typeCount++),-1===h.events[t].indexOf(n)){var p;if(r){var d=u[s],g=d.supplied.indexOf(n),f=d.wrapped[g]||function(t){t.immediatePropagationStopped||(t.target=t.srcElement,t.currentTarget=e,/mouse|click/.test(t.type)&&(t.pageX=t.clientX+D.documentElement.scrollLeft,t.pageY=t.clientY+D.documentElement.scrollTop),n(t))};p=e[o](a+t,f,Boolean(i)),-1===g?(d.supplied.push(n),d.wrapped.push(f),d.useCount.push(1)):d.useCount[g]++}else p=e[o](t,n,i||!1);return h.events[t].push(n),p}}function n(e,t,i,o){var h,p,d,g=l.indexOf(e),f=c[g],y=i;if(f&&f.events)if(r&&(p=u[g],d=p.supplied.indexOf(i),y=p.wrapped[d]),"all"!==t){if(f.events[t]){var m=f.events[t].length;if("all"===i)for(h=0;m>h;h++)n(e,t,f.events[t][h],Boolean(o));else for(h=0;m>h;h++)if(f.events[t][h]===i){e[s](a+t,y,o||!1),f.events[t].splice(h,1),r&&p&&(p.useCount[d]--,0===p.useCount[d]&&(p.supplied.splice(d,1),p.wrapped.splice(d,1),p.useCount.splice(d,1)));break}f.events[t]&&0===f.events[t].length&&(f.events[t]=null,f.typeCount--)}f.typeCount||(c.splice(g),l.splice(g),u.splice(g))}else for(t in f.events)f.events.hasOwnProperty(t)&&n(e,t,"all")}var i=e.Event,r="attachEvent"in e&&!("addEventListener"in e),o=r?"attachEvent":"addEventListener",s=r?"detachEvent":"removeEventListener",a=r?"on":"",l=[],c=[],u=[];return"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1}),"stopPropagation"in i.prototype||(i.prototype.stopPropagation=function(){this.cancelBubble=!0},i.prototype.stopImmediatePropagation=function(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}),"preventDefault"in i.prototype||(i.prototype.preventDefault=function(){this.returnValue=!1}),"hasOwnProperty"in i.prototype||(i.prototype.hasOwnProperty=Object.prototype.hasOwnProperty),{add:function(e,n,i,r){t(e._element,n,i,r)},remove:function(e,t,i,r){n(e._element,t,i,r)},addToElement:t,removeFromElement:n,useAttachEvent:r}}();f.prototype={preventDefault:t,stopImmediatePropagation:function(){Et=!0},stopPropagation:t},tt.indexOfElement=nt.indexOfElement=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(n.selector===e||!n.selector&&n._element===e)return t}return-1},tt.get=function(e){return"string"==typeof e?rt[e]:this[this.indexOfElement(e)]},nt.get=function(e){return this[this.indexOfElement(e)]},C.prototype=gt,I.prototype={setOnEvents:function(e,t){if("drop"===e){var n=t.ondrop||t.onDrop||t.drop,i=t.ondragenter||t.onDropEnter||t.dragenter,r=t.ondragleave||t.onDropLeave||t.dragleave;"function"==typeof n&&(this.ondrop=n),"function"==typeof i&&(this.ondragenter=i),"function"==typeof r&&(this.ondragleave=r)}else{var o=t.onstart||t.onStart||t.start,s=t.onmove||t.onMove||t.move,a=t.onend||t.onEnd||t.end,e="on"+e;"function"==typeof o&&(this[e+"start"]=o),"function"==typeof s&&(this[e+"move"]=s),"function"==typeof a&&(this[e+"end"]=a)}return this},draggable:function(e){return e instanceof Object?(this.options.draggable=!0,this.setOnEvents("drag",e),this):"boolean"==typeof e?(this.options.draggable=e,this):null===e?(delete this.options.draggable,this):this.options.draggable},dropzone:function(e){if(e instanceof Object)return this.options.dropzone=!0,this.setOnEvents("drop",e),this.accept(e.accept),(this.selector?ot:nt).push(this),zt||this.selector||(this.rect=this.getRect()),this;if("boolean"==typeof e){if(e)(this.selector?ot:nt).push(this),zt||this.selector||(this.rect=this.getRect());else{var t=this.selector?ot:nt,n=t.indexOf(this);-1!==n&&t.splice(n,1)}return this.options.dropzone=e,this}return null===e?(delete this.options.dropzone,this):this.options.dropzone},dropCheck:function(e){var t,n,i=r(e);return zt&&(this.rect=this.getRect()),t=i.x>this.rect.left&&i.x<this.rect.right,n=i.y>this.rect.top&&i.y<this.rect.bottom,t&&n},dropChecker:function(e){return"function"==typeof e?(this.dropCheck=e,this):this.dropCheck},accept:function(e){return e instanceof Element?(this.options.accept=e,this):"string"==typeof e?(D.querySelector(e),this.options.accept=e,this):null===e?(delete this.options.accept,this):this.options.accept},resizeable:function(e){return e instanceof Object?(this.options.resizeable=!0,this.setOnEvents("resize",e),this):"boolean"==typeof e?(this.options.resizeable=e,this):this.options.resizeable},squareResize:function(e){return"boolean"==typeof e?(this.options.squareResize=e,this):null===e?(delete this.options.squareResize,this):this.options.squareResize},gestureable:function(e){return e instanceof Object?(this.options.gestureable=!0,this.setOnEvents("gesture",e),this):"boolean"==typeof e?(this.options.gestureable=e,this):null===e?(delete this.options.gestureable,this):this.options.gestureable},autoScroll:function(e){var t=gt.autoScroll;if(e instanceof Object){var n=this.options.autoScroll;return n===t&&(n=this.options.autoScroll={margin:t.margin,distance:t.distance,interval:t.interval,container:t.container}),n.margin=this.validateSetting("autoScroll","margin",e.margin),n.distance=this.validateSetting("autoScroll","distance",e.distance),n.interval=this.validateSetting("autoScroll","interval",e.interval),n.container=this.validateSetting("autoScroll","container",e.container),this.options.autoScrollEnabled=!0,this.options.autoScroll=n,this}return"boolean"==typeof e?(this.options.autoScrollEnabled=e,this):null===e?(delete this.options.autoScrollEnabled,delete this.options.autoScroll,this):this.options.autoScrollEnabled?this.options.autoScroll:!1},snap:function(e){var t=gt.snap;if(e instanceof Object){var n=this.options.snap;return n===t&&(n=this.options.snap={mode:t.mode,range:t.range,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors}),n.mode=this.validateSetting("snap","mode",e.mode),n.actions=this.validateSetting("snap","actions",e.actions),n.range=this.validateSetting("snap","range",e.range),n.paths=this.validateSetting("snap","paths",e.paths),n.grid=this.validateSetting("snap","grid",e.grid),n.gridOffset=this.validateSetting("snap","gridOffset",e.gridOffset),n.anchors=this.validateSetting("snap","anchors",e.anchors),this.options.snapEnabled=!0,this.options.snap=n,this}return"boolean"==typeof e?(this.options.snapEnabled=e,this):null===e?(delete this.options.snapEnabled,delete this.options.snap,this):this.options.snapEnabled?this.options.snap:!1},getAction:function(e){var t,n,i,o=this.getRect(),s=r(e),a=this.options;return Xt.resize&&a.resizeable&&(t=s.x>o.right-vt,n=s.y>o.bottom-vt),Xt.gesture&&e.touches&&e.touches.length>=2&&!Ot&&!_t?i="gesture":(wt=(t?"x":"")+(n?"y":""),i=wt?"resize"+wt:Xt.drag&&a.draggable?"drag":null),i},actionChecker:function(e){return"function"==typeof e?(this.getAction=e,this):null===e?(delete this.options.getAction,this):this.getAction},getRect:function(){!this.selector||this._element instanceof Element||(this._element=D.querySelector(this.selector));var e=s(),t=this._element instanceof P?this._element.getBoundingClientRect():this._element.getClientRects()[0];return{left:t.left+e.x,right:t.right+e.x,top:t.top+e.y,bottom:t.bottom+e.y,width:t.width||t.right-t.left,height:t.heigh||t.bottom-t.top}},rectChecker:function(e){return"function"==typeof e?(this.getRect=e,this):null===e?(delete this.options.getRect,this):this.getRect},styleCursor:function(e){return"boolean"==typeof e?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},origin:function(e){return e instanceof Object?(this.options.origin=e,this):null===e?(delete this.options.origin,this):this.options.origin},deltaSource:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):null===e?(delete this.options.deltaSource,this):this.options.deltaSource},restrict:function(e){return void 0===e?this.options.restrictions:(e instanceof Object?this.options.restrictions=e:null===e&&delete this.options.restrictions,this)},validateSetting:function(e,t,n){var i=gt[e],r=this.options[e];if(void 0!==i&&void 0!==i[t]){if("objectTypes"in i&&i.objectTypes.test(t))return n instanceof Object?n:t in r&&r[t]instanceof Object?r[t]:i[t];if("arrayTypes"in i&&i.arrayTypes.test(t))return n instanceof Array?n:t in r&&r[t]instanceof Array?r[t]:i[t];if("stringTypes"in i&&i.stringTypes.test(t))return"string"==typeof n?n:t in r&&"string"==typeof r[t]?r[t]:i[t];if("numberTypes"in i&&i.numberTypes.test(t))return"number"==typeof n?n:t in r&&"number"==typeof r[t]?r[t]:i[t];if("elementTypes"in i&&i.elementTypes.test(t))return n instanceof Element?n:t in r&&r[t]instanceof Element?r[t]:i[t]}return null},element:function(){return this._element},fire:function(e){if(!e||!e.type||-1===Mt.indexOf(e.type))return this;for(var t,n,i=0,r=0,o="on"+e.type;3>i;)try{switch(i){case It.directBind:if(e.type in this._iEvents){for(t=this._iEvents[e.type],n=t.length;n>r&&!Et;r++)t[r](e);break}break;case It.onevent:"function"==typeof this[o]&&this[o](e);break;case It.globalBind:if(e.type in Ct&&(t=Ct[e.type]))for(n=t.length;n>r&&!Et;r++)t[r](e)}r=0,i++}catch(s){k.error("Error thrown from "+e.type+" listener"),k.error(s),r++,i===It.onevent&&i++}return Et=!1,this},on:function(e,t,n){if("wheel"===e&&(e=Yt),-1!==Mt.indexOf(e))e in this._iEvents?-1===this._iEvents[e].indexOf(t)&&this._iEvents[e].push(t):this._iEvents[e]=[t];else if(this.selector){at[e]||(at[e]={});var i=at[e];i[this.selector]||(i[this.selector]=[]),i[this.selector].push([t,n?!0:!1]),qt.add(Pt,e,n?T:X,n)}else qt.add(this,e,t,n);return this},off:function(e,t,n){var i,r=-1;if(n=n?!0:!1,"wheel"===e&&(e=Yt),-1!==Mt.indexOf(e))i=this._iEvents[e],i&&-1!==(r=i.indexOf(t))&&this._iEvents[e].splice(r,1);else if(this.selector){var o=at[e];if(o&&(i=o[this.selector])){for(r=0;r<i.length&&i[r][1]!==n;r++);r<i.length&&i.splice(r,1)}}else qt.remove(this._element,t,n);return this},set:function(e){return e&&"object"==typeof e||(e={}),this.options=new C(e),this.draggable("draggable"in e?e.draggable:this.options.draggable),this.dropzone("dropzone"in e?e.dropzone:this.options.dropzone),this.resizeable("resizeable"in e?e.resizeable:this.options.resizeable),this.gestureable("gestureable"in e?e.gestureable:this.options.gestureable),"autoScroll"in e&&this.autoScroll(e.autoScroll),this},unset:function(){return qt.remove(this,"all"),"string"==typeof this.selector?delete rt[this.selector]:(qt.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor=""),this._gesture&&(this._gesture.target=null),it.splice(it.indexOf(this.element()))),this.dropzone(!1),tt.splice(tt.indexOf(this),1),M}},M.isSet=function(e){return-1!==tt.indexOfElement(e)},M.on=function(e,t,n){return-1!==Mt.indexOf(e)?Ct[e]?-1===Ct[e].indexOf(t)&&Ct[e].push(t):Ct[e]=[t]:qt.add(Pt,e,t,n),M},M.off=function(e,t,n){if(-1===Mt.indexOf(e))qt.remove(Pt,e,t,n);else{var i;e in Ct&&-1!==(i=Ct[e].indexOf(t))&&Ct[e].splice(i,1)}return M},M.simulate=function(e,n,i){var r,o,s={};if("resize"===e&&(e="resizexy"),!(e in Rt))return M;if(i)for(r in i)i.hasOwnProperty(r)&&(s[r]=i[r]);else o=ct._element instanceof P?n.getBoundingClientRect():o=n.getClientRects()[0],"drag"===e?(s.pageX=o.left+o.width/2,s.pageY=o.top+o.height/2):(s.pageX=o.right,s.pageY=o.bottom);return s.target=s.currentTarget=n,s.preventDefault=s.stopPropagation=t,v(s,e),M},M.enableDragging=function(e){return null!==e&&void 0!==e?(Xt.drag=e,M):Xt.drag},M.enableResizing=function(e){return null!==e&&void 0!==e?(Xt.resize=e,M):Xt.resize},M.enableGesturing=function(e){return null!==e&&void 0!==e?(Xt.gesture=e,M):Xt.gesture},M.eventTypes=Mt,M.debug=function(){return{target:ct,dragging:Ot,resizing:_t,gesturing:St,prepared:Tt,prevX:N,prevY:$,x0:U,y0:H,downTime:J,downEvent:Q,prevEvent:Z,Interactable:I,IOptions:C,interactables:tt,dropzones:nt,pointerIsDown:xt,defaultOptions:gt,actions:Rt,dragMove:b,resizeMove:E,gestureMove:S,pointerUp:R,pointerDown:v,pointerMove:x,pointerHover:w,events:qt,globalEvents:Ct,delegatedEvents:at,log:function(){k.log("target         :  "+ct),k.log("prevX, prevY   :  "+N,$),k.log("x0, y0         :  "+U,H),k.log("supportsTouch  :  "+mt),k.log("pointerIsDown  :  "+xt),k.log("currentAction  :  "+M.currentAction())}}},M.getTouchAverage=a,M.getTouchBBox=l,M.getTouchDistance=c,M.getTouchAngle=u,M.margin=function(e){return"number"==typeof e?(vt=e,M):vt},M.styleCursor=function(e){return"boolean"==typeof e?(gt.styleCursor=e,M):gt.styleCursor},M.autoScroll=function(e){var t=gt.autoScroll;return e instanceof Object?(gt.autoScrollEnabled=!0,"number"==typeof e.margin&&(t.margin=e.margin),"number"==typeof e.distance&&(t.distance=e.distance),"number"==typeof e.interval&&(t.interval=e.interval),t.container=e.container instanceof Element?e.container:t.container,M):"boolean"==typeof e?(gt.autoScrollEnabled=e,M):gt.autoScrollEnabled?t:!1},M.snap=function(e){var t=gt.snap;return e instanceof Object?(gt.snapEnabled=!0,"string"==typeof e.mode&&(t.mode=e.mode),"number"==typeof e.range&&(t.range=e.range),e.actions instanceof Array&&(t.actions=e.actions),e.anchors instanceof Array&&(t.anchors=e.anchors),e.grid instanceof Object&&(t.grid=e.grid),e.gridOffset instanceof Object&&(t.gridOffset=e.gridOffset),M):"boolean"==typeof e?(gt.snapEnabled=e,M):{enabled:gt.snapEnabled,mode:t.mode,actions:t.actions,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors,paths:t.paths,range:t.range,locked:ft.locked,x:ft.x,y:ft.y,realX:ft.realX,realY:ft.realY,dx:ft.dx,dy:ft.dy}},M.supportsTouch=function(){return mt},M.currentAction=function(){return Ot&&"drag"||_t&&"resize"||St&&"gesture"||null},M.stop=function(e){if(Ot||_t||St){yt.stop(),st=[],ct.options.styleCursor&&(D.documentElement.style.cursor=""),ct._gesture&&(ct._gesture.stop(),lt.stop()),Y();for(var t=0;t<ot.length;t++)ot._elements=[];e&&"function"==typeof e.preventDefault&&e.preventDefault()}return xt=ft.locked=Ot=_t=St=!1,bt=!0,Tt=Q=Z=null,M},M.dynamicDrop=function(e){return"boolean"==typeof e?(Ot&&zt!==e&&!e&&p(nt),zt=e,M):zt},M.deltaSource=function(e){return"page"===e||"client"===e?(gt.deltaSource=e,this):gt.deltaSource},M.restrict=function(e){return void 0===e?gt.restrictions:(e instanceof Object?gt.restrictions=e:null===e&&(gt.restrictions={}),this)},B?(qt.add(Pt,"pointerdown",m),qt.add(Pt,"pointercancel",R),qt.add(Pt,"MSGestureChange",x),qt.add(Pt,"MSGestureEnd",R),qt.add(Pt,"MSInertiaStart",R),qt.add(Pt,"pointerover",z),qt.add(Pt,"pointerout",_),lt=new G,lt.target=D.documentElement):(qt.add(Pt,"mousedown",m),qt.add(Pt,"mousemove",x),qt.add(Pt,"mouseup",R),qt.add(Pt,"mouseover",z),qt.add(Pt,"mouseout",_),qt.add(Pt,"touchstart",m),qt.add(Pt,"touchmove",x),qt.add(Pt,"touchend",R),qt.add(Pt,"touchcancel",R)),qt.add(kt,"blur",R);try{e.frameElement&&(Lt._element=e.frameElement.ownerDocument,qt.add(Lt,"mouseup",R),qt.add(Lt,"touchend",R),qt.add(Lt,"touchcancel",R),qt.add(Lt,"pointerup",R),qt.add(jt,"blur",R))}catch(Bt){M.windowParentError=Bt}qt.add(Pt,"selectstart",function(e){(Ot||_t||St)&&e.preventDefault()}),Dt in Element.prototype&&"function"==typeof Element.prototype[Dt]||(Element.prototype[Dt]=A=function(e,t){t=t||this.parentNode.querySelectorAll(e),count=t.length;for(var n=0;count>n;n++)if(t[n]===this)return!0;return!1}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=M),exports.interact=M):e.interact=M}(this);
