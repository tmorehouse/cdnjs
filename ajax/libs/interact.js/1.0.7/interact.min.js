/* interact.js v1.0.7 | https://raw.github.com/taye/interact.js/master/LICENSE */
!function(e){"use strict";function t(){}function n(e){N=e.pageX,B=e.pageY,$=e.clientX,K=e.clientY,J=e}function i(e,t){var n,i,r;return e=e||"page",t.touches?(n=t.touches.length?t.touches[0]:t.changedTouches[0],i=n[e+"X"],r=n[e+"Y"]):(i=t[e+"X"],r=t[e+"Y"]),{x:i,y:r}}function r(t){if(Yt){var n=i("screen",t);return n.x+=e.scrollX,n.y+=e.scrollY,n}return i("page",t)}function o(e){return i(Yt?"screen":"client",e)}function s(){return{x:e.scrollX||D.documentElement.scrollLeft,y:e.scrollY||D.documentElement.scrollTop}}function a(e){var t,n=e.touches,i=0,r=0,o=0,s=0;for(t=0;t<n.length;t++)i+=n[t].pageX/n.length,r+=n[t].pageY/n.length,o+=n[t].clientX/n.length,s+=n[t].clientY/n.length;return{pageX:i,pageY:r,clientX:o,clientY:s}}function l(e){if(e.touches.length){var t,n=e.touches,i=e.touches[0].pageX,r=e.touches[0].pageY,o=i,s=r;for(t=1;t<n.length;t++)i=i>e.touches[t].pageX?i:e.touches[t].pageX,r=i>e.touches[t].pageX?r:e.touches[t].pageY;return{left:i,top:r,width:o-i,height:s-r}}}function c(e){var t=(st&&st.options||ct).deltaSource,n=t+"X",i=t+"Y",r=e.touches[0][n],o=e.touches[0][i];return"touchend"===e.type&&1===e.touches.length?(r-=e.changedTouches[0][n],o-=e.changedTouches[0][i]):(r-=e.touches[1][n],o-=e.touches[1][i]),Math.sqrt(r*r+o*o)}function h(e,t){var n=(st&&st.options||ct).deltaSource,i=n+"X",r=n+"Y",o=e.touches[0][i],s=e.touches[0][r];"touchend"===e.type&&1===e.touches.length?(o-=e.changedTouches[0][i],s-=e.changedTouches[0][r]):(o-=e.touches[1][i],s-=e.touches[1][r]);var a=180*Math.atan(s/o)/Math.PI;if("number"==typeof t){var l=a-t,c=l%360;c>315?a-=360+a/360|0:c>135?a-=180+a/360|0:-315>c?a+=360+a/360|0:-135>c&&(a+=180+a/360|0)}return a}function u(e){e=e||st;var t=e?e.options.origin:ct.origin;return t instanceof Element?(t=M(t).getRect(),t.x=t.left,t.y=t.top):"function"==typeof t&&(t=t(e&&e._element)),t}function d(e){for(var t=0,n=e.length;n>t;t++)e[t].rect=e[t].getRect()}function p(e){if(e.length){var t,n,i,r,o,s=e[0],a=[],l=[];for(r=1;r<e.length;r++){if(t=e[r],!a.length)for(n=s;n.parentNode!==D;)a.unshift(n),n=n.parentNode;if(s instanceof L&&t instanceof j&&!(t instanceof P)){if(t===s.parentNode)continue;n=t.ownerSVGElement}else n=t;for(l=[];n.parentNode!==D;)l.unshift(n),n=n.parentNode;for(o=0;l[o]&&l[o]===a[o];)o++;var c=[l[o-1],l[o],a[o]];for(i=c[0].lastChild;i;){if(i===c[1]){s=t,a=[];break}if(i===c[2])break;i=i.previousSibling}}return{element:s,index:e.indexOf(s)}}}function g(e){if(et.length||it.length){var t,n,i=[],r=[],o=[],s=[];for(t=0;t<et.length;t++)et[t].dropCheck(e)&&(i.push(et[t]),r.push(et[t]._element));if(n=p(r),at=n?i[n.index]:null,it.length){var a=st._element;for(t=0;t<it.length;t++)for(var l=it[t],c=D.querySelectorAll(l.selector),h=0,u=c.length;u>h;h++)l._element=c[h],l.rect=l.getRect(),l._element!==a&&-1===r.indexOf(l._element)&&s.indexOf(-1===l._element)&&l.dropCheck(e)&&(o.push(l),s.push(l._element));s.length&&(at&&(o.push(at),s.push(at._element)),n=p(s),n&&(at=o[n.index],at.selector&&(at._element=s[n.index])))}return at}}function f(e,t,n,i,s){var d,p,g=(st&&st.options||ct).deltaSource,f=st?st.options:ct,y=u(st);if(i=i||st._element,"gesture"===t){var m=a(e);p={x:m.pageX-y.x,y:m.pageY-y.y},d={x:m.clientX-y.x,y:m.clientY-y.y}}else if(p=r(e),d=o(e),p.x-=y.x,p.y-=y.y,d.x-=y.x,d.y-=y.y,st.options.snapEnabled&&-1!==st.options.snap.actions.indexOf(t)){var v=f.snap;this.snap={mode:v.mode,anchors:ht.anchors,range:ht.range,locked:ht.locked,x:ht.x,y:ht.y,realX:ht.realX,realY:ht.realY,dx:ht.dx,dy:ht.dy},ht.locked&&("path"===v.mode?(ht.xInRange&&(p.x+=ht.dx,d.x+=ht.dx),ht.yInRange&&(p.y+=ht.dy,d.y+=ht.dy)):(p.x+=ht.dx,p.y+=ht.dy,d.x+=ht.dx,d.y+=ht.dy))}if(st.options.restrictions[t]){var x,b=st.options.restrictions[t],E=p.x,S=p.y;b instanceof Element?x=M(b).getRect():("function"==typeof b&&(b=b(p.x,p.y,st._element)),x=b,"x"in b&&"y"in b&&(x={left:b.x,top:b.y,right:b.x+b.width,bottom:b.y+b.height})),p.x=Math.max(Math.min(x.right,p.x),x.left),p.y=Math.max(Math.min(x.bottom,p.y),x.top);var O=p.x-E,z=p.y-S;d.x+=O,d.y+=z}if(this.x0=G,this.y0=V,this.clientX0=U,this.clientY0=H,this.pageX=p.x,this.pageY=p.y,this.clientX=d.x,this.clientY=d.y,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.target=i,this.t0=F,this.type=t+(n||""),s&&(this.relatedTarget=s),"end"===n||"drop"===t?"client"===g?(this.dx=d.x-G,this.dy=d.y-V):(this.dx=p.x-G,this.dy=p.y-V):"client"===g?(this.dx=d.x-$,this.dy=d.y-K):(this.dx=p.x-N,this.dy=p.y-B),"resize"===t?f.squareResize||e.shiftKey?("y"===Et?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=Et,"x"===Et?this.dy=0:"y"===Et&&(this.dx=0)):"gesture"===t&&(this.touches=e.touches,this.distance=c(e),this.box=l(e),"start"===n?(this.scale=1,this.ds=0,this.angle=h(e),this.da=0):(this.scale=this.distance/Q.startDistance,this.angle=h(e,Q.prevAngle),"end"===n?(this.da=this.angle-Q.startAngle,this.ds=this.scale-1):(this.da=this.angle-Q.prevAngle,this.ds=this.scale-Q.prevScale))),"start"===n)this.timeStamp=F,this.dt=0,this.duration=0,this.speed=0;else{this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-J.timeStamp,this.duration=this.timeStamp-F;var _=("end"===n?this.duration:this.dt)/1e3;this.speed=Math.sqrt(this.dx*this.dx+this.dy*this.dy)/_}}function y(e,t){if("string"!=typeof e)return null;t=t||st;var n=-1!==e.indexOf("resize")?"resize":e,i=(t||st).options;return("resize"===n&&i.resizeable||"drag"===e&&i.draggable||"gesture"===e&&i.gestureable)&&Ot[n]?(("resize"===e||"resizeyx"===e)&&(e="resizexy"),e):null}function m(e){var t;if(!(vt||bt||mt)){if(rt.length&&"mousedown"===e.type)t=O(e,rt);else for(var n,i,r=e.target instanceof q?e.target.correspondingUseElement:e.target;r!==D&&!t;){rt=[];for(n in nt)i=Element.prototype[Tt]===C?D.querySelectorAll(n):void 0,r[Tt](n,i)&&(nt[n]._element=r,rt.push(nt[n]));t=O(e,rt),r=r.parentNode}return t?(gt=!0,v(e,t)):void 0}}function v(e,t){if(e.touches&&e.touches.length<2&&!st||!gt){var n=Dt.useAttachEvent?e.currentTarget:this;st=Z.get(n)}var i=st&&st.options;if(st&&!(vt||bt||mt)){var s,l,c,h=y(t||st.getAction(e)),d=u(st);if(e.touches?(s=a(e),l={x:s.pageX,y:s.pageY},c={x:s.clientX,y:s.clientY}):(l=r(e),c=o(e)),!h)return e;gt=!0,ft=!1,i.styleCursor&&(D.documentElement.style.cursor=St[h].cursor),Et="resizexy"===h?"xy":"resizex"===h?"x":"resizey"===h?"y":"",zt=h,G=l.x-d.x,V=l.y-d.y,U=c.x-d.x,H=c.y-d.y,ht.x=null,ht.y=null,e.preventDefault(),F=(new Date).getTime(),W=e}}function x(e){if(gt&&(G===N&&V===B&&(ft=!0),zt&&st))if(st.options.snapEnabled&&-1!==st.options.snap.actions.indexOf(zt)){var t,n,i,s,a,l,c,h,d,p=st.options.snap,g=r(e),f=u(st);if(ht.realX=g.x,ht.realY=g.y,g.x-=f.x,g.y-=f.y,p.range<0&&(p.range=1/0),"anchor"===p.mode&&p.anchors.length){for(t={anchor:null,distance:0,range:0,distX:0,distY:0},h=0,d=p.anchors.length;d>h;h++){var y=p.anchors[h];n="number"==typeof y.range?y.range:p.range,a=y.x-g.x,l=y.y-g.y,c=Math.sqrt(a*a+l*l),i=n>c,1/0===n&&t.inRange&&1/0!==t.range&&(i=!1),(!t.anchor||(i?t.inRange&&1/0!==n?c/n<t.distance/t.range:c<t.distance:!t.inRange&&c<t.distance))&&(1/0===n&&(i=!0),t.anchor=y,t.distance=c,t.range=n,t.inRange=i,t.distX=a,t.distY=l,ht.range=n)}i=t.inRange,s=t.anchor.x!==ht.x||t.anchor.y!==ht.y,ht.x=t.anchor.x,ht.y=t.anchor.y,ht.dx=t.distX,ht.dy=t.distY,st.options.snap.anchors.closest=ht.anchors.closest=t.anchor}else if("grid"===p.mode){var m=Math.round((g.x-p.gridOffset.x)/p.grid.x),v=Math.round((g.y-p.gridOffset.y)/p.grid.y),x=m*p.grid.x+p.gridOffset.x,b=v*p.grid.y+p.gridOffset.y;a=x-g.x,l=b-g.y,c=Math.sqrt(a*a+l*l),i=c<p.range,s=x!==ht.x||b!==ht.y,ht.x=x,ht.y=b,ht.dx=a,ht.dy=l,ht.range=p.range}if("path"===p.mode&&p.paths.length){for(t={path:{},distX:0,distY:0,range:0},h=0,d=p.paths.length;d>h;h++){var E,S,O=p.paths[h],z=!1,_=!1,w=O;"function"==typeof O&&(w=O(g.x,g.y)),"number"==typeof w.x?(E=w.x,z=!0):E=g.x,"number"==typeof w.y?(S=w.y,_=!0):S=g.y,n="number"==typeof w.range?w.range:p.range,a=E-g.x,l=S-g.y;var R=Math.abs(a)<n&&z,X=Math.abs(l)<n&&_;1/0===n&&t.xInRange&&1/0!==t.range&&(R=!1),"x"in t.path&&!(R?t.xInRange&&1/0!==n?c/n<t.distX/t.range:Math.abs(a)<Math.abs(t.distX):!t.xInRange&&Math.abs(a)<Math.abs(t.distX))||(1/0===n&&(R=!0),t.path.x=E,t.distX=a,t.xInRange=R,t.range=n,ht.range=n),1/0===n&&t.yInRange&&1/0!==t.range&&(X=!1),"y"in t.path&&!(X?t.yInRange&&1/0!==n?c/n<t.distY/t.range:Math.abs(l)<Math.abs(t.distY):!t.yInRange&&Math.abs(l)<Math.abs(t.distY))||(1/0===n&&(X=!0),t.path.y=S,t.distY=l,t.yInRange=X,t.range=n,ht.range=n)}i=t.xInRange||t.yInRange,s=!t.xInRange||!t.yInRange||ht.xInRange&&ht.yInRange?!t.xInRange||!t.yInRange||t.path.x!==ht.x||t.path.y!==ht.y:!0,ht.x=t.path.x,ht.y=t.path.y,ht.dx=t.distX,ht.dy=t.distY,ht.xInRange=t.xInRange,ht.yInRange=t.yInRange,st.options.snap.paths.closest=ht.paths.closest=t.path}if(!s&&ht.locked||!i)(s||!i)&&(ht.locked=!1,St[zt].moveListener(e));else{if(ht.locked=!0,!(vt||bt||mt)){var Y=r(e),T=o(e);G=Y.x-f.x+ht.dx,V=Y.y-f.y+ht.dy,U=T.x-f.x+ht.dx,H=T.y-f.y+ht.dy}St[zt].moveListener(e)}}else St[zt].moveListener(e);(vt||bt)&&ut.edgeMove(e)}function b(e){e.preventDefault();var t,i,r,o,s;if(!vt){if(n(W),t=new f(W,"drag","start"),vt=!0,st.fire(t),!xt){d(et);for(var a=0;a<it.length;a++)it[a]._elements=D.querySelectorAll(it[a].selector)}n(t)}var l=st._element,c=o?o._element:null;t=new f(e,"drag","move"),o=g(e,st),st._element=l,o!==lt&&(lt&&(r=new f(e,"drag","leave",c,l),t.dragLeave=lt._element,s=lt,lt=null),o&&(i=new f(e,"drag","enter",c,l),t.dragEnter=o._element,lt=o)),st.fire(t),r&&s.fire(r),i&&o.fire(i),n(t)}function E(e){e.preventDefault();var t;bt||(n(W),t=new f(W,"resize","start"),st.fire(t),st.fire(t),bt=!0,n(t)),t=new f(e,"resize","move"),st.fire(t),n(t)}function S(e){if(e.touches&&!(e.touches.length<2)){e.preventDefault();var t;mt||(n(W),t=new f(W,"gesture","start"),t.ds=0,Q.startDistance=Q.prevDistance=t.distance,Q.startAngle=Q.prevAngle=t.angle,Q.scale=1,mt=!0,st.fire(t),n(t)),t=new f(e,"gesture","move"),t.ds=t.scale-Q.scale,st.fire(t),n(t),Q.prevAngle=t.angle,Q.prevDistance=t.distance,1/0===t.scale||null===t.scale||void 0===t.scale||isNaN(t.scale)||(Q.scale=t.scale)}}function O(e,t){for(var n=0,i=t.length;i>n;n++){var r=t[n],o=y(r.getAction(e,r),r);if(o)return st=r,o}}function z(e){if(!(gt||vt||bt||mt)){var t=[],n=st&&st._element,i=e.target instanceof q?e.target.correspondingUseElement:e.target;for(var r in nt)nt.hasOwnProperty(r)&&nt[r]&&i[Tt](r)&&(nt[r]._element=i,t.push(nt[r]));{var o=Z.get(i);o&&y(o.getAction(e,o),o)}if(!o||!y(o.getAction(e),o))if(O(e,t))rt=t,w(e,rt),Dt.addToElement(i,"mousemove",w);else if(st){var s=n.querySelectorAll("*");if(-1!==Array.prototype.indexOf.call(s,i)){for(var a=0;a<rt.length;a++)rt[a]._element=n;w(e,rt),Dt.addToElement(st._element,"mousemove",w)}else st=null,rt=[]}}}function _(e){var t=e.target instanceof q?e.target.correspondingUseElement:e.target;Z.get(t)||Dt.removeFromElement(t,w),st&&st.options.styleCursor&&!(vt||bt||mt)&&(D.documentElement.style.cursor="")}function w(e,t){if(gt||vt||bt||mt)e.preventDefault();else{var n;t?n=O(e,t):st&&(n=y(st.getAction(e))),st&&st.options.styleCursor&&(D.documentElement.style.cursor=n?St[n].cursor:"")}}function R(e){var t;if(!(e.touches&&e.touches.length>=2)){if(vt){t=new f(e,"drag","end");var n,i=st._element,r=g(e,st),o=r?r._element:null;if(st._element=i,r)n=new f(e,"drop",null,o,i),t.dropzone=o;else if(lt){var s=new f(e,"drag","leave",o,i);lt.fire(s,i),t.dragLeave=lt._element}st.fire(t),n&&at.fire(n)}else if(bt)t=new f(e,"resize","end"),st.fire(t);else if(mt)t=new f(e,"gesture","end"),st.fire(t);else if(("mouseup"===e.type||"touchend"===e.type)&&st&&gt&&!ft){var a={};for(var l in e)a[l]=e[l];a.currentTarget=st._element,a.type="tap",st.fire(a)}M.stop()}}function X(e,t){var n,i,r={},o=ot[e.type],s=e.target;t=t?!0:!1;for(var a in e)r[a]=e[a];for(r.preventDefault=function(){e.preventDefault()};s!==D;){for(n in o)if(s[Tt](n)){var l=o[n];for(r.currentTarget=s,i=0;i<l.length;i++)if(l[i][1]===t)try{l[i][0](r)}catch(c){k.error('Error thrown from delegated listener: "'+n+'" '+e.type+" "+(l[i][0].name?l[i][0].name:"")),k.log(c)}}s=s.parentNode}}function Y(e){return X.call(this,e,!0)}function T(){st.selector||(st=null),at=lt=null}function M(e){return Z.get(e)||new I(e)}function A(e){for(var t in ct)e.hasOwnProperty(t)&&typeof e[t]==typeof ct[t]&&(this[t]=e[t])}function I(e,t){this._element=e,this._iEvents=this._iEvents||{},"string"==typeof e?(D.querySelector(e),nt[e]=this,this.selector=e):(e instanceof Element&&(Dt.add(this,"mousemove",w),Dt.add(this,"mousedown",v),Dt.add(this,"touchmove",w),Dt.add(this,"touchstart",v)),tt.push(this)),Z.push(this),this.set(t)}var C,D=e.document,k=e.console,j=e.SVGElement||t,P=e.SVGSVGElement||t,q=e.SVGElementInstance||t,L=e.HTMLElement||e.Element,N=0,B=0,$=0,K=0,G=0,V=0,U=0,H=0,F=0,W=null,J=null,Q={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},Z=[],et=[],tt=[],nt={},it=[],rt=[],ot={},st=null,at=null,lt=null,ct={draggable:!1,dropzone:!1,resizeable:!1,squareResize:!1,gestureable:!1,styleCursor:!0,snap:{mode:"grid",actions:["drag"],range:1/0,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],arrayTypes:/^anchors$|^paths$|^actions$/,objectTypes:/^grid$|^gridOffset$/,stringTypes:/^mode$/,numberTypes:/^range$/},snapEnabled:!1,restrictions:{},autoScroll:{container:e,margin:60,interval:20,distance:10,elementTypes:/^container$/,numberTypes:/^range$|^interval$|^distance$/},autoScrollEnabled:!1,origin:{x:0,y:0},deltaSource:"page"},ht={locked:!1,x:0,y:0,dx:0,dy:0,realX:0,realY:0,anchors:[],paths:[]},ut={margin:60,interval:20,i:null,distance:10,x:0,y:0,scroll:function(){var t=st.options.autoScroll.container;t===e?e.scrollBy(ut.x,ut.y):t&&(t.scrollLeft+=ut.x,t.scrollTop+=ut.y)},edgeMove:function(t){if(st&&st.options.autoScrollEnabled&&(vt||bt)){var n,i,r,o,s=st.options.autoScroll;if(s.container===e)o=t.clientX<ut.margin,n=t.clientY<ut.margin,i=t.clientX>e.innerWidth-ut.margin,r=t.clientY>e.innerHeight-ut.margin;else{var a=M(s.container).getRect();o=t.clientX<a.left+ut.margin,n=t.clientY<a.top+ut.margin,i=t.clientX>a.right-ut.margin,r=t.clientY>a.bottom-ut.margin}ut.x=ut.distance*(i?1:o?-1:0),ut.y=ut.distance*(r?1:n?-1:0),ut.isScrolling||(ut.margin=s.margin,ut.distance=s.distance,ut.interval=s.interval,ut.start())}},isScrolling:!1,start:function(){ut.isScrolling=!0,e.clearInterval(ut.i),ut.i=e.setInterval(ut.scroll,ut.interval)},stop:function(){e.clearInterval(ut.i),ut.isScrolling=!1}},dt="createTouch"in D,pt=dt?20:10,gt=!1,ft=!1,yt=!1,mt=!1,vt=!1,xt=!1,bt=!1,Et="xy",St={drag:{cursor:"move",moveListener:b},resizex:{cursor:"e-resize",moveListener:E},resizey:{cursor:"s-resize",moveListener:E},resizexy:{cursor:"se-resize",moveListener:E},gesture:{cursor:"",moveListener:S}},Ot={drag:!0,resize:!0,gesture:!0},zt=null,_t="onmousewheel"in D?"mousewheel":"wheel",wt=["resizestart","resizemove","resizeend","dragstart","dragmove","dragend","dragenter","dragleave","drop","gesturestart","gesturemove","gestureend","tap"],Rt={},Xt={directBind:0,onevent:1,globalBind:2},Yt="Opera"==navigator.appName&&dt&&navigator.userAgent.match("Presto"),Tt="matchesSelector"in Element.prototype?"matchesSelector":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",Mt={_element:e,events:{}},At={_element:D,events:{}},It={_element:e.parent,events:{}},Ct={_element:null,events:{}},Dt=function(){function t(e,t,n,i){var s=c[l.indexOf(e)];if(s||(s={events:{},typeCount:0},l.push(e),c.push(s)),t in s.events||(s.events[t]=[],s.typeCount++),-1===s.events[t].indexOf(n)){var h;return h=r?e[o](a+t,function(t){t.immediatePropagationStopped||(t.target=t.srcElement,t.currentTarget=e,/mouse|click/.test(t.type)&&(t.pageX=t.clientX+D.documentElement.scrollLeft,t.pageY=t.clientY+D.documentElement.scrollTop),n(t))},n,i||!1):e[o](t,n,i||!1),s.events[t].push(n),h}}function n(e,t,i,r){var o,h=c[l.indexOf(e)];if(h&&h.events)if("all"!==t){if(h.events[t]){var u=h.events[t].length;if("all"===i){for(o=0;u>o;o++)e[s](a+t,h.events[t][o],r||!1);h.events[t]=null,h.typeCount--}else for(o=0;u>o;o++)if(h.events[t][o]===i){e[s](a+t,h.events[t][o],r||!1),h.events[t].splice(o,1);break}h.events[t]&&0===h.events[t].length&&(h.events[t]=null,h.typeCount--)}h.typeCount||(c.splice(c.indexOf(h),1),l.splice(l.indexOf(e),1))}else for(t in h.events)h.events.hasOwnProperty(t)&&n(e,t,"all")}var i=e.Event,r="attachEvent"in e&&!("addEventListener"in e),o=r?"attachEvent":"addEventListener",s=r?"detachEvent":"removeEventListener",a=r?"on":"",l=[],c=[];return"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1}),"stopPropagation"in i.prototype||(i.prototype.stopPropagation=function(){this.cancelBubble=!0},i.prototype.stopImmediatePropagation=function(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}),"preventDefault"in i.prototype||(i.prototype.preventDefault=function(){this.returnValue=!1}),"hasOwnProperty"in i.prototype||(i.prototype.hasOwnProperty=Object.prototype.hasOwnProperty),{add:function(e,n,i,r){t(e._element,n,i,r)},remove:function(e,t,i,r){n(e._element,t,i,r)},addToElement:t,removeFromElement:n,useAttachEvent:r}}();f.prototype={preventDefault:t,stopImmediatePropagation:function(){yt=!0},stopPropagation:t},Z.indexOfElement=et.indexOfElement=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(n.selector===e||!n.selector&&n._element===e)return t}return-1},Z.get=function(e){return"string"==typeof e?nt[e]:this[this.indexOfElement(e)]},et.get=function(e){return this[this.indexOfElement(e)]},A.prototype=ct,I.prototype={setOnEvents:function(e,t){var n=t.onstart||t.onStart,i=t.onmove||t.onMove,r=t.onend||t.onEnd;e="on"+e,"function"==typeof n&&(this[e+"start"]=n),"function"==typeof i&&(this[e+"move"]=i),"function"==typeof r&&(this[e+"end"]=r)},draggable:function(e){return e instanceof Object?(this.options.draggable=!0,this.setOnEvents("drag",e),this):"boolean"==typeof e?(this.options.draggable=e,this):null===e?(delete this.options.draggable,this):this.options.draggable},dropzone:function(e){if(e instanceof Object){var t=e.ondrop||e.onDrop;return"function"==typeof t&&(this.ondrop=t),this.options.dropzone=!0,(this.selector?it:et).push(this),xt||this.selector||(this.rect=this.getRect()),this}if("boolean"==typeof e){if(e)(this.selector?it:et).push(this),xt||this.selector||(this.rect=this.getRect());else{var n=this.selector?it:et,i=n.indexOf(this);-1!==i&&n.splice(i,1)}return this.options.dropzone=e,this}return null===e?(delete this.options.dropzone,this):this.options.dropzone},dropCheck:function(e){var t,n,i=r(e);return xt&&(this.rect=this.getRect()),t=i.x>this.rect.left&&i.x<this.rect.right,n=i.y>this.rect.top&&i.y<this.rect.bottom,t&&n},dropChecker:function(e){return"function"==typeof e?(this.dropCheck=e,this):this.dropCheck},resizeable:function(e){return e instanceof Object?(this.options.resizeable=!0,this.setOnEvents("resize",e),this):"boolean"==typeof e?(this.options.resizeable=e,this):this.options.resizeable},squareResize:function(e){return"boolean"==typeof e?(this.options.squareResize=e,this):null===e?(delete this.options.squareResize,this):this.options.squareResize},gestureable:function(e){return e instanceof Object?(this.options.gestureable=!0,this.setOnEvents("gesture",e),this):"boolean"==typeof e?(this.options.gestureable=e,this):null===e?(delete this.options.gestureable,this):this.options.gestureable},autoScroll:function(e){var t=ct.autoScroll;if(e instanceof Object){var n=this.options.autoScroll;return n===t&&(n=this.options.autoScroll={margin:t.margin,distance:t.distance,interval:t.interval,container:t.container}),n.margin=this.validateSetting("autoScroll","margin",e.margin),n.distance=this.validateSetting("autoScroll","distance",e.distance),n.interval=this.validateSetting("autoScroll","interval",e.interval),n.container=this.validateSetting("autoScroll","container",e.container),this.options.autoScrollEnabled=!0,this.options.autoScroll=n,this}return"boolean"==typeof e?(this.options.autoScrollEnabled=e,this):null===e?(delete this.options.autoScrollEnabled,delete this.options.autoScroll,this):this.options.autoScrollEnabled?this.options.autoScroll:!1},snap:function(e){var t=ct.snap;if(e instanceof Object){var n=this.options.snap;return n===t&&(n=this.options.snap={mode:t.mode,range:t.range,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors}),n.mode=this.validateSetting("snap","mode",e.mode),n.actions=this.validateSetting("snap","actions",e.actions),n.range=this.validateSetting("snap","range",e.range),n.paths=this.validateSetting("snap","paths",e.paths),n.grid=this.validateSetting("snap","grid",e.grid),n.gridOffset=this.validateSetting("snap","gridOffset",e.gridOffset),n.anchors=this.validateSetting("snap","anchors",e.anchors),this.options.snapEnabled=!0,this.options.snap=n,this}return"boolean"==typeof e?(this.options.snapEnabled=e,this):null===e?(delete this.options.snapEnabled,delete this.options.snap,this):this.options.snapEnabled?this.options.snap:!1},getAction:function(e){var t,n,i,o=this.getRect(),s=r(e),a=this.options;return Ot.resize&&a.resizeable&&(t=s.x>o.right-pt,n=s.y>o.bottom-pt),Ot.gesture&&e.touches&&e.touches.length>=2&&!vt&&!bt?i="gesture":(Et=(t?"x":"")+(n?"y":""),i=Et?"resize"+Et:Ot.drag&&a.draggable?"drag":null),i},actionChecker:function(e){return"function"==typeof e?(this.getAction=e,this):null===e?(delete this.options.getAction,this):this.getAction},getRect:function(){!this.selector||this._element instanceof Element||(this._element=D.querySelector(this.selector));var e=s(),t=this._element instanceof j?this._element.getBoundingClientRect():this._element.getClientRects()[0];return{left:t.left+e.x,right:t.right+e.x,top:t.top+e.y,bottom:t.bottom+e.y,width:t.width||t.right-t.left,height:t.heigh||t.bottom-t.top}},rectChecker:function(e){return"function"==typeof e?(this.getRect=e,this):null===e?(delete this.options.getRect,this):this.getRect},styleCursor:function(e){return"boolean"==typeof e?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},origin:function(e){return e instanceof Object?(this.options.origin=e,this):null===e?(delete this.options.origin,this):this.options.origin},deltaSource:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):null===e?(delete this.options.deltaSource,this):this.options.deltaSource},restrict:function(e){return void 0===e?this.options.restrictions:(e instanceof Object?this.options.restrictions=e:null===e&&delete this.options.restrictions,this)},validateSetting:function(e,t,n){var i=ct[e],r=this.options[e];if(void 0!==i&&void 0!==i[t]){if("objectTypes"in i&&i.objectTypes.test(t))return n instanceof Object?n:t in r&&r[t]instanceof Object?r[t]:i[t];if("arrayTypes"in i&&i.arrayTypes.test(t))return n instanceof Array?n:t in r&&r[t]instanceof Array?r[t]:i[t];if("stringTypes"in i&&i.stringTypes.test(t))return"string"==typeof n?n:t in r&&"string"==typeof r[t]?r[t]:i[t];if("numberTypes"in i&&i.numberTypes.test(t))return"number"==typeof n?n:t in r&&"number"==typeof r[t]?r[t]:i[t];if("elementTypes"in i&&i.elementTypes.test(t))return n instanceof Element?n:t in r&&r[t]instanceof Element?r[t]:i[t]}return null},element:function(){return this._element},fire:function(e){if(!e||!e.type||-1===wt.indexOf(e.type))return this;for(var t,n,i=0,r=0,o="on"+e.type;3>i;)try{switch(i){case Xt.directBind:if(e.type in this._iEvents){for(t=this._iEvents[e.type],n=t.length;n>r&&!yt;r++)t[r](e);break}break;case Xt.onevent:"function"==typeof this[o]&&this[o](e);break;case Xt.globalBind:if(e.type in Rt&&(t=Rt[e.type]))for(n=t.length;n>r&&!yt;r++)t[r](e)}r=0,i++}catch(s){k.error("Error thrown from "+e.type+" listener"),k.error(s),r++,i===Xt.onevent&&i++}return yt=!1,this},on:function(e,t,n){if("wheel"===e&&(e=_t),-1!==wt.indexOf(e))e in this._iEvents?-1===this._iEvents[e].indexOf(t)&&this._iEvents[e].push(t):this._iEvents[e]=[t];else if(this.selector){ot[e]||(ot[e]={});var i=ot[e];i[this.selector]||(i[this.selector]=[]),i[this.selector].push([t,n?!0:!1]),Dt.add(At,e,n?Y:X,n)}else Dt.add(this,e,t,n);return this},off:function(e,t,n){var i,r=-1;if(n=n?!0:!1,"wheel"===e&&(e=_t),-1!==wt.indexOf(e))i=this._iEvents[e],i&&-1!==(r=i.indexOf(t))&&this._iEvents[e].splice(r,1);else if(this.selector){var o=ot[e];if(o&&(i=o[this.selector])){for(r=0;r<i.length&&i[r][1]!==n;r++);r<i.length&&i.splice(r,1)}}else Dt.remove(this._element,t,n);return this},set:function(e){return e&&"object"==typeof e||(e={}),this.options=new A(e),this.draggable("draggable"in e?e.draggable:this.options.draggable),this.dropzone("dropzone"in e?e.dropzone:this.options.dropzone),this.resizeable("resizeable"in e?e.resizeable:this.options.resizeable),this.gestureable("gestureable"in e?e.gestureable:this.options.gestureable),"autoScroll"in e&&this.autoScroll(e.autoScroll),this},unset:function(){return Dt.remove(this,"all"),"string"==typeof this.selector?delete nt[this.selector]:(Dt.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor=""),tt.splice(tt.indexOf(this.element()))),this.dropzone(!1),Z.splice(Z.indexOf(this),1),M}},M.isSet=function(e){return-1!==Z.indexOfElement(e)},M.on=function(e,t,n){return-1!==wt.indexOf(e)?Rt[e]?-1===Rt[e].indexOf(t)&&Rt[e].push(t):Rt[e]=[t]:Dt.add(At,e,t,n),M},M.off=function(e,t,n){if(-1===wt.indexOf(e))Dt.remove(At,e,t,n);else{var i;e in Rt&&-1!==(i=Rt[e].indexOf(t))&&Rt[e].splice(i,1)}return M},M.simulate=function(e,n,i){var r,o,s={};if("resize"===e&&(e="resizexy"),!(e in St))return M;if(i)for(r in i)i.hasOwnProperty(r)&&(s[r]=i[r]);else o=st._element instanceof j?n.getBoundingClientRect():o=n.getClientRects()[0],"drag"===e?(s.pageX=o.left+o.width/2,s.pageY=o.top+o.height/2):(s.pageX=o.right,s.pageY=o.bottom);return s.target=s.currentTarget=n,s.preventDefault=s.stopPropagation=t,v(s,e),M},M.enableDragging=function(e){return null!==e&&void 0!==e?(Ot.drag=e,M):Ot.drag},M.enableResizing=function(e){return null!==e&&void 0!==e?(Ot.resize=e,M):Ot.resize},M.enableGesturing=function(e){return null!==e&&void 0!==e?(Ot.gesture=e,M):Ot.gesture},M.eventTypes=wt,M.debug=function(){return{target:st,dragging:vt,resizing:bt,gesturing:mt,prepared:zt,prevX:N,prevY:B,x0:G,y0:V,downTime:F,downEvent:W,prevEvent:J,Interactable:I,IOptions:A,interactables:Z,dropzones:et,pointerIsDown:gt,defaultOptions:ct,actions:St,dragMove:b,resizeMove:E,gestureMove:S,pointerUp:R,pointerDown:v,pointerMove:x,pointerHover:w,events:Dt,globalEvents:Rt,delegatedEvents:ot,log:function(){k.log("target         :  "+st),k.log("prevX, prevY   :  "+N,B),k.log("x0, y0         :  "+G,V),k.log("supportsTouch  :  "+dt),k.log("pointerIsDown  :  "+gt),k.log("currentAction  :  "+M.currentAction())}}},M.getTouchAverage=a,M.getTouchBBox=l,M.getTouchDistance=c,M.getTouchAngle=h,M.margin=function(e){return"number"==typeof e?(pt=e,M):pt},M.styleCursor=function(e){return"boolean"==typeof e?(ct.styleCursor=e,M):ct.styleCursor},M.autoScroll=function(e){var t=ct.autoScroll;return e instanceof Object?(ct.autoScrollEnabled=!0,"number"==typeof e.margin&&(t.margin=e.margin),"number"==typeof e.distance&&(t.distance=e.distance),"number"==typeof e.interval&&(t.interval=e.interval),t.container=e.container instanceof Element?e.container:t.container,M):"boolean"==typeof e?(ct.autoScrollEnabled=e,M):ct.autoScrollEnabled?t:!1},M.snap=function(e){var t=ct.snap;return e instanceof Object?(ct.snapEnabled=!0,"string"==typeof e.mode&&(t.mode=e.mode),"number"==typeof e.range&&(t.range=e.range),e.actions instanceof Array&&(t.actions=e.actions),e.anchors instanceof Array&&(t.anchors=e.anchors),e.grid instanceof Object&&(t.grid=e.grid),e.gridOffset instanceof Object&&(t.gridOffset=e.gridOffset),M):"boolean"==typeof e?(ct.snapEnabled=e,M):{enabled:ct.snapEnabled,mode:t.mode,actions:t.actions,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors,paths:t.paths,range:t.range,locked:ht.locked,x:ht.x,y:ht.y,realX:ht.realX,realY:ht.realY,dx:ht.dx,dy:ht.dy}},M.supportsTouch=function(){return dt},M.currentAction=function(){return vt&&"drag"||bt&&"resize"||mt&&"gesture"||null},M.stop=function(e){if(vt||bt||mt){ut.stop(),rt=[],st.options.styleCursor&&(D.documentElement.style.cursor=""),T();for(var t=0;t<it.length;t++)it._elements=[];e&&"function"==typeof e.preventDefault&&e.preventDefault()}return gt=ht.locked=vt=bt=mt=!1,ft=!0,zt=W=J=null,M},M.dynamicDrop=function(e){return"boolean"==typeof e?(vt&&xt!==e&&!e&&d(et),xt=e,M):xt},M.deltaSource=function(e){return"page"===e||"client"===e?(ct.deltaSource=e,this):ct.deltaSource},M.restrict=function(e){return void 0===e?ct.restrictions:(e instanceof Object?ct.restrictions=e:null===e&&(ct.restrictions={}),this)},Dt.add(At,"mousedown",m),Dt.add(At,"touchstart",m),Dt.add(At,"mousemove",x),Dt.add(At,"touchmove",x),Dt.add(At,"mouseover",z),Dt.add(At,"mouseout",_),Dt.add(At,"mouseup",R),Dt.add(At,"touchend",R),Dt.add(At,"touchcancel",R),Dt.add(Mt,"blur",R);try{e.frameElement&&(Ct._element=e.frameElement.ownerDocument,Dt.add(Ct,"mouseup",R),Dt.add(Ct,"touchend",R),Dt.add(Ct,"touchcancel",R),Dt.add(It,"blur",R))}catch(kt){M.windowParentError=kt}Dt.add(At,"selectstart",function(e){(vt||bt||mt)&&e.preventDefault()}),Tt in Element.prototype&&"function"==typeof Element.prototype[Tt]||(Element.prototype[Tt]=C=function(e,t){t=t||this.parentNode.querySelectorAll(e),count=t.length;for(var n=0;count>n;n++)if(t[n]===this)return!0;return!1}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=M),exports.interact=M):e.interact=M}(this);
