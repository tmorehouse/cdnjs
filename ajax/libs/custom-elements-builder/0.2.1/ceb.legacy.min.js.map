{"version":3,"file":"ceb.legacy.min.js","sources":["../node_modules/webcomponents.js/webcomponents-lite.js","../src/ceb.js"],"names":["window","WebComponents","scope","flags","file","script","document","querySelector","noOpts","location","search","slice","split","forEach","o","a","i","attributes","name","value","log","parts","f","shadow","shadowdom","polyfill","HTMLElement","prototype","createShadowRoot","register","CustomElements","WeakMap","defineProperty","Object","counter","Date","now","this","Math","random","set","key","entry","writable","get","undefined","delete","has","global","scheduleCallback","observer","scheduledObservers","push","isScheduled","setImmediate","dispatchCallbacks","wrapIfNeeded","node","ShadowDOMPolyfill","observers","sort","o1","o2","uid_","anyNonEmpty","queue","takeRecords","removeTransientObserversFor","length","callback_","nodes_","registrations","registrationsTable","registration","removeTransientObservers","forEachAncestorAndObserverEnqueueRecord","target","callback","parentNode","j","options","subtree","record","enqueue","JsMutationObserver","records_","uidCounter","MutationRecord","type","addedNodes","removedNodes","previousSibling","nextSibling","attributeName","attributeNamespace","oldValue","copyMutationRecord","original","getRecord","currentRecord","getRecordWithOldValue","recordWithOldValue","clearRecords","recordRepresentsCurrentMutation","selectRecord","lastRecord","newRecord","Registration","transientObservedNodes","test","navigator","userAgent","setTimeout","setImmediateQueue","sentinel","String","addEventListener","e","data","func","postMessage","observe","childList","characterData","attributeOldValue","attributeFilter","characterDataOldValue","SyntaxError","removeListeners","addListeners","disconnect","splice","copyOfRecords","records","recordToReplaceLast","addListeners_","removeListeners_","removeEventListener","addTransientObserver","handleEvent","stopImmediatePropagation","attrName","namespace","relatedNode","namespaceURI","attrChange","MutationEvent","ADDITION","prevValue","indexOf","changedNode","MutationObserver","HTMLImports","whenReady","doc","rootDocument","whenDocumentReady","watchImportsLoad","isDocumentReady","readyState","requiredReadyState","checkReady","READY_EVENT","markTargetLoaded","event","__loaded","checkDone","loaded","l","loadedImport","imports","querySelectorAll","imp","isImportLoaded","call","link","useNative","__importParsed","handleImports","nodes","n","isImport","handleImport","element","localName","rel","IMPORT_LINK_TYPE","Boolean","createElement","hasShadowDOMPolyfill","wrap","currentScriptDescriptor","currentScript","scripts","configurable","isIE","mxns","m","head","ready","readyTime","getTime","evt","createEvent","initCustomEvent","dispatchEvent","modules","addModule","module","initializeModules","CSS_URL_REGEXP","CSS_IMPORT_REGEXP","path","resolveUrlsInStyle","style","ownerDocument","resolver","textContent","resolveUrlsInCssText","cssText","urlObj","r","replaceUrls","text","regexp","replace","pre","url","post","urlPath","href","xhr","async","ok","request","status","load","next","nextContext","XMLHttpRequest","debug","bust","open","locationHeader","getResponseHeader","redirectedUrl","substr","origin","response","responseText","send","loadDocument","responseType","Loader","onLoad","onComplete","cache","onload","oncomplete","inflight","pending","addNodes","require","addNode","elt","src","__nodeUrl","dedupe","fetch","tail","console","match","pieces","header","body","atob","decodeURIComponent","receive","bind","receiveXhr","err","resource","error","p","$p","Observer","addCallback","mo","handler","mutations","children","root","nodeIsImport","generateScriptDataUrl","scriptContent","generateScriptContent","encodeURIComponent","generateSourceMapHint","owner","__importedScripts","moniker","baseURI","num","cloneStyle","clone","IMPORT_SELECTOR","importParser","documentSelectors","importsSelectors","join","map","dynamicElements","parseNext","nextToParse","parse","isParsed","fn","markParsing","parseDynamic","quiet","parsingElement","markParsingComplete","markDynamicParsingComplete","__importElement","parseImport","__importsParsingHook","__resource","__error","CustomEvent","bubbles","__pending","shift","parseLink","linkElt","parseGeneric","parseStyle","trackElement","addElementToDocument","rootImportForElement","__importLink","port","insertBefore","self","done","fakeLoad","sheet","csr","cssRules","len","CSSRule","IMPORT_RULE","styleSheet","parseScript","scriptElt","removeChild","_mayParse","nextToParseInDoc","nextToParseDynamic","parseSelectorsForNode","hasResource","needsDynamicParsing","parser","isImportLink","isLinkRel","getAttribute","makeDocument","implementation","createHTMLDocument","_URL","base","setAttribute","meta","appendChild","innerHTML","HTMLTemplateElement","bootstrap","importer","documents","documentPreloadSelectors","importsPreloadSelectors","loadNode","importLoader","loadSubtree","parent","marshalNodes","loadSelectorsForNode","bootDocument","loadedAll","baseURIDescriptor","dynamic","added","parsed","loading","shouldLoadNode","shouldParseNode","nodeType","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","inType","params","cancelable","detail","Event","attachEvent","hasNative","registerElement","forSubtree","cb","findAllElements","forRoots","find","firstElementChild","firstChild","Node","ELEMENT_NODE","nextElementSibling","shadowRoot","olderShadowRoot","forDocumentTree","processingDocuments","_forDocumentTree","addedNode","addedSubtree","upgrade","attached","attachedNode","inDocument","deferMutation","pendingMutations","isPendingMutations","takeMutations","hasPolyfillMutations","_attached","__upgraded__","attachedCallback","detachedCallback","__attached","detachedNode","detached","_detached","host","watchShadow","__watched","dom","mx","d","u","URL","pop","group","groupEnd","__observer","inRoot","upgradeDocument","upgradeDocumentTree","Array","originalCreateShadowRoot","Element","upgradeSubtree","upgradeAll","is","definition","getRegisteredDefinition","tag","upgradeWithDefinition","implementPrototype","created","__proto__","customMixin","inTarget","inSrc","inNative","used","k","keys","getOwnPropertyNames","getOwnPropertyDescriptor","getPrototypeOf","createdCallback","Error","isReservedTag","create","__name","toLowerCase","lifecycle","ancestry","resolveTagName","resolvePrototypeChain","overrideAttributeApi","registerDefinition","ctor","generateConstructor","constructor","_polyfilled","changeAttribute","removeAttribute","operation","apply","arguments","newValue","attributeChangedCallback","reservedTagList","extnds","extendee","concat","baseTag","nativePrototype","inst","expectedPrototype","ancestor","proto","instantiate","domCreateElement","registry","createElementNS","typeExtension","HTML_NAMESPACE","domCreateElementNS","cloneNode","deep","domCloneNode","isInstance","obj","elapsed","isIE11OrOlder","nop","unwrap","unwrapIfNeeded","eager","loadEvent","TEMPLATE_TAG","decorate","template","content","createDocumentFragment","child","t","templates","g","factory","exports","define","amd","ceb","emptyFn","listValues","propName","fromCamelCaseToHyphenCase","part","charAt","compareLevels","b","level","applyAttributeValue","el","attName","isBoolean","hasAttribute","accessorFactory","wrappers","wrapped","stack","reduce","previous","current","attributeAccessorSetFactory","setter","attValue","attributeAccessorGetFactory","getter","methodFactory","args","sanitizeStructure","struct","features","interceptors","listeners","properties","methods","assign","setupFeatures","builder","tagName","registered","feature","setup","createAttributesHash","filter","property","createDefinedPropertiesHash","definedProperty","enumerable","attribute","hasOwnProperty","setStack","getStack","createMethodsHash","methName","build","definedProperties","defineProperties","wrappedMethods","delegableSetAccessorInterceptor","delegate","targetPropName","targetAttName","delegableGetAccessorInterceptor","result","eventListener","baseStructFactory","builtInFeature","sanitizeProperty","api","isNaN","intercept","setFn","getFn","anExtend","aProto","someProperties","sanitizedProperties","someMethods","listen","queries","trim","query","listener","source","valueFactory","Number","MAX_VALUE","__eventHandlers","oldVal","newVal"],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n// @version 0.5.3\nwindow.WebComponents = window.WebComponents || {};\n\n(function(scope) {\n  var flags = scope.flags || {};\n  var file = \"webcomponents.js\";\n  var script = document.querySelector('script[src*=\"' + file + '\"]');\n  if (!flags.noOpts) {\n    location.search.slice(1).split(\"&\").forEach(function(o) {\n      o = o.split(\"=\");\n      o[0] && (flags[o[0]] = o[1] || true);\n    });\n    if (script) {\n      for (var i = 0, a; a = script.attributes[i]; i++) {\n        if (a.name !== \"src\") {\n          flags[a.name] = a.value || true;\n        }\n      }\n    }\n    if (flags.log) {\n      var parts = flags.log.split(\",\");\n      flags.log = {};\n      parts.forEach(function(f) {\n        flags.log[f] = true;\n      });\n    } else {\n      flags.log = {};\n    }\n  }\n  flags.shadow = flags.shadow || flags.shadowdom || flags.polyfill;\n  if (flags.shadow === \"native\") {\n    flags.shadow = false;\n  } else {\n    flags.shadow = flags.shadow || !HTMLElement.prototype.createShadowRoot;\n  }\n  if (flags.register) {\n    window.CustomElements = window.CustomElements || {\n      flags: {}\n    };\n    window.CustomElements.flags.register = flags.register;\n  }\n  scope.flags = flags;\n})(WebComponents);\n\nif (typeof WeakMap === \"undefined\") {\n  (function() {\n    var defineProperty = Object.defineProperty;\n    var counter = Date.now() % 1e9;\n    var WeakMap = function() {\n      this.name = \"__st\" + (Math.random() * 1e9 >>> 0) + (counter++ + \"__\");\n    };\n    WeakMap.prototype = {\n      set: function(key, value) {\n        var entry = key[this.name];\n        if (entry && entry[0] === key) entry[1] = value; else defineProperty(key, this.name, {\n          value: [ key, value ],\n          writable: true\n        });\n        return this;\n      },\n      get: function(key) {\n        var entry;\n        return (entry = key[this.name]) && entry[0] === key ? entry[1] : undefined;\n      },\n      \"delete\": function(key) {\n        var entry = key[this.name];\n        if (!entry || entry[0] !== key) return false;\n        entry[0] = entry[1] = undefined;\n        return true;\n      },\n      has: function(key) {\n        var entry = key[this.name];\n        if (!entry) return false;\n        return entry[0] === key;\n      }\n    };\n    window.WeakMap = WeakMap;\n  })();\n}\n\n(function(global) {\n  var registrationsTable = new WeakMap();\n  var setImmediate;\n  if (/Trident|Edge/.test(navigator.userAgent)) {\n    setImmediate = setTimeout;\n  } else if (window.setImmediate) {\n    setImmediate = window.setImmediate;\n  } else {\n    var setImmediateQueue = [];\n    var sentinel = String(Math.random());\n    window.addEventListener(\"message\", function(e) {\n      if (e.data === sentinel) {\n        var queue = setImmediateQueue;\n        setImmediateQueue = [];\n        queue.forEach(function(func) {\n          func();\n        });\n      }\n    });\n    setImmediate = function(func) {\n      setImmediateQueue.push(func);\n      window.postMessage(sentinel, \"*\");\n    };\n  }\n  var isScheduled = false;\n  var scheduledObservers = [];\n  function scheduleCallback(observer) {\n    scheduledObservers.push(observer);\n    if (!isScheduled) {\n      isScheduled = true;\n      setImmediate(dispatchCallbacks);\n    }\n  }\n  function wrapIfNeeded(node) {\n    return window.ShadowDOMPolyfill && window.ShadowDOMPolyfill.wrapIfNeeded(node) || node;\n  }\n  function dispatchCallbacks() {\n    isScheduled = false;\n    var observers = scheduledObservers;\n    scheduledObservers = [];\n    observers.sort(function(o1, o2) {\n      return o1.uid_ - o2.uid_;\n    });\n    var anyNonEmpty = false;\n    observers.forEach(function(observer) {\n      var queue = observer.takeRecords();\n      removeTransientObserversFor(observer);\n      if (queue.length) {\n        observer.callback_(queue, observer);\n        anyNonEmpty = true;\n      }\n    });\n    if (anyNonEmpty) dispatchCallbacks();\n  }\n  function removeTransientObserversFor(observer) {\n    observer.nodes_.forEach(function(node) {\n      var registrations = registrationsTable.get(node);\n      if (!registrations) return;\n      registrations.forEach(function(registration) {\n        if (registration.observer === observer) registration.removeTransientObservers();\n      });\n    });\n  }\n  function forEachAncestorAndObserverEnqueueRecord(target, callback) {\n    for (var node = target; node; node = node.parentNode) {\n      var registrations = registrationsTable.get(node);\n      if (registrations) {\n        for (var j = 0; j < registrations.length; j++) {\n          var registration = registrations[j];\n          var options = registration.options;\n          if (node !== target && !options.subtree) continue;\n          var record = callback(options);\n          if (record) registration.enqueue(record);\n        }\n      }\n    }\n  }\n  var uidCounter = 0;\n  function JsMutationObserver(callback) {\n    this.callback_ = callback;\n    this.nodes_ = [];\n    this.records_ = [];\n    this.uid_ = ++uidCounter;\n  }\n  JsMutationObserver.prototype = {\n    observe: function(target, options) {\n      target = wrapIfNeeded(target);\n      if (!options.childList && !options.attributes && !options.characterData || options.attributeOldValue && !options.attributes || options.attributeFilter && options.attributeFilter.length && !options.attributes || options.characterDataOldValue && !options.characterData) {\n        throw new SyntaxError();\n      }\n      var registrations = registrationsTable.get(target);\n      if (!registrations) registrationsTable.set(target, registrations = []);\n      var registration;\n      for (var i = 0; i < registrations.length; i++) {\n        if (registrations[i].observer === this) {\n          registration = registrations[i];\n          registration.removeListeners();\n          registration.options = options;\n          break;\n        }\n      }\n      if (!registration) {\n        registration = new Registration(this, target, options);\n        registrations.push(registration);\n        this.nodes_.push(target);\n      }\n      registration.addListeners();\n    },\n    disconnect: function() {\n      this.nodes_.forEach(function(node) {\n        var registrations = registrationsTable.get(node);\n        for (var i = 0; i < registrations.length; i++) {\n          var registration = registrations[i];\n          if (registration.observer === this) {\n            registration.removeListeners();\n            registrations.splice(i, 1);\n            break;\n          }\n        }\n      }, this);\n      this.records_ = [];\n    },\n    takeRecords: function() {\n      var copyOfRecords = this.records_;\n      this.records_ = [];\n      return copyOfRecords;\n    }\n  };\n  function MutationRecord(type, target) {\n    this.type = type;\n    this.target = target;\n    this.addedNodes = [];\n    this.removedNodes = [];\n    this.previousSibling = null;\n    this.nextSibling = null;\n    this.attributeName = null;\n    this.attributeNamespace = null;\n    this.oldValue = null;\n  }\n  function copyMutationRecord(original) {\n    var record = new MutationRecord(original.type, original.target);\n    record.addedNodes = original.addedNodes.slice();\n    record.removedNodes = original.removedNodes.slice();\n    record.previousSibling = original.previousSibling;\n    record.nextSibling = original.nextSibling;\n    record.attributeName = original.attributeName;\n    record.attributeNamespace = original.attributeNamespace;\n    record.oldValue = original.oldValue;\n    return record;\n  }\n  var currentRecord, recordWithOldValue;\n  function getRecord(type, target) {\n    return currentRecord = new MutationRecord(type, target);\n  }\n  function getRecordWithOldValue(oldValue) {\n    if (recordWithOldValue) return recordWithOldValue;\n    recordWithOldValue = copyMutationRecord(currentRecord);\n    recordWithOldValue.oldValue = oldValue;\n    return recordWithOldValue;\n  }\n  function clearRecords() {\n    currentRecord = recordWithOldValue = undefined;\n  }\n  function recordRepresentsCurrentMutation(record) {\n    return record === recordWithOldValue || record === currentRecord;\n  }\n  function selectRecord(lastRecord, newRecord) {\n    if (lastRecord === newRecord) return lastRecord;\n    if (recordWithOldValue && recordRepresentsCurrentMutation(lastRecord)) return recordWithOldValue;\n    return null;\n  }\n  function Registration(observer, target, options) {\n    this.observer = observer;\n    this.target = target;\n    this.options = options;\n    this.transientObservedNodes = [];\n  }\n  Registration.prototype = {\n    enqueue: function(record) {\n      var records = this.observer.records_;\n      var length = records.length;\n      if (records.length > 0) {\n        var lastRecord = records[length - 1];\n        var recordToReplaceLast = selectRecord(lastRecord, record);\n        if (recordToReplaceLast) {\n          records[length - 1] = recordToReplaceLast;\n          return;\n        }\n      } else {\n        scheduleCallback(this.observer);\n      }\n      records[length] = record;\n    },\n    addListeners: function() {\n      this.addListeners_(this.target);\n    },\n    addListeners_: function(node) {\n      var options = this.options;\n      if (options.attributes) node.addEventListener(\"DOMAttrModified\", this, true);\n      if (options.characterData) node.addEventListener(\"DOMCharacterDataModified\", this, true);\n      if (options.childList) node.addEventListener(\"DOMNodeInserted\", this, true);\n      if (options.childList || options.subtree) node.addEventListener(\"DOMNodeRemoved\", this, true);\n    },\n    removeListeners: function() {\n      this.removeListeners_(this.target);\n    },\n    removeListeners_: function(node) {\n      var options = this.options;\n      if (options.attributes) node.removeEventListener(\"DOMAttrModified\", this, true);\n      if (options.characterData) node.removeEventListener(\"DOMCharacterDataModified\", this, true);\n      if (options.childList) node.removeEventListener(\"DOMNodeInserted\", this, true);\n      if (options.childList || options.subtree) node.removeEventListener(\"DOMNodeRemoved\", this, true);\n    },\n    addTransientObserver: function(node) {\n      if (node === this.target) return;\n      this.addListeners_(node);\n      this.transientObservedNodes.push(node);\n      var registrations = registrationsTable.get(node);\n      if (!registrations) registrationsTable.set(node, registrations = []);\n      registrations.push(this);\n    },\n    removeTransientObservers: function() {\n      var transientObservedNodes = this.transientObservedNodes;\n      this.transientObservedNodes = [];\n      transientObservedNodes.forEach(function(node) {\n        this.removeListeners_(node);\n        var registrations = registrationsTable.get(node);\n        for (var i = 0; i < registrations.length; i++) {\n          if (registrations[i] === this) {\n            registrations.splice(i, 1);\n            break;\n          }\n        }\n      }, this);\n    },\n    handleEvent: function(e) {\n      e.stopImmediatePropagation();\n      switch (e.type) {\n       case \"DOMAttrModified\":\n        var name = e.attrName;\n        var namespace = e.relatedNode.namespaceURI;\n        var target = e.target;\n        var record = new getRecord(\"attributes\", target);\n        record.attributeName = name;\n        record.attributeNamespace = namespace;\n        var oldValue = e.attrChange === MutationEvent.ADDITION ? null : e.prevValue;\n        forEachAncestorAndObserverEnqueueRecord(target, function(options) {\n          if (!options.attributes) return;\n          if (options.attributeFilter && options.attributeFilter.length && options.attributeFilter.indexOf(name) === -1 && options.attributeFilter.indexOf(namespace) === -1) {\n            return;\n          }\n          if (options.attributeOldValue) return getRecordWithOldValue(oldValue);\n          return record;\n        });\n        break;\n\n       case \"DOMCharacterDataModified\":\n        var target = e.target;\n        var record = getRecord(\"characterData\", target);\n        var oldValue = e.prevValue;\n        forEachAncestorAndObserverEnqueueRecord(target, function(options) {\n          if (!options.characterData) return;\n          if (options.characterDataOldValue) return getRecordWithOldValue(oldValue);\n          return record;\n        });\n        break;\n\n       case \"DOMNodeRemoved\":\n        this.addTransientObserver(e.target);\n\n       case \"DOMNodeInserted\":\n        var target = e.relatedNode;\n        var changedNode = e.target;\n        var addedNodes, removedNodes;\n        if (e.type === \"DOMNodeInserted\") {\n          addedNodes = [ changedNode ];\n          removedNodes = [];\n        } else {\n          addedNodes = [];\n          removedNodes = [ changedNode ];\n        }\n        var previousSibling = changedNode.previousSibling;\n        var nextSibling = changedNode.nextSibling;\n        var record = getRecord(\"childList\", target);\n        record.addedNodes = addedNodes;\n        record.removedNodes = removedNodes;\n        record.previousSibling = previousSibling;\n        record.nextSibling = nextSibling;\n        forEachAncestorAndObserverEnqueueRecord(target, function(options) {\n          if (!options.childList) return;\n          return record;\n        });\n      }\n      clearRecords();\n    }\n  };\n  global.JsMutationObserver = JsMutationObserver;\n  if (!global.MutationObserver) global.MutationObserver = JsMutationObserver;\n})(this);\n\nwindow.HTMLImports = window.HTMLImports || {\n  flags: {}\n};\n\n(function(scope) {\n  var IMPORT_LINK_TYPE = \"import\";\n  var useNative = Boolean(IMPORT_LINK_TYPE in document.createElement(\"link\"));\n  var hasShadowDOMPolyfill = Boolean(window.ShadowDOMPolyfill);\n  var wrap = function(node) {\n    return hasShadowDOMPolyfill ? ShadowDOMPolyfill.wrapIfNeeded(node) : node;\n  };\n  var rootDocument = wrap(document);\n  var currentScriptDescriptor = {\n    get: function() {\n      var script = HTMLImports.currentScript || document.currentScript || (document.readyState !== \"complete\" ? document.scripts[document.scripts.length - 1] : null);\n      return wrap(script);\n    },\n    configurable: true\n  };\n  Object.defineProperty(document, \"_currentScript\", currentScriptDescriptor);\n  Object.defineProperty(rootDocument, \"_currentScript\", currentScriptDescriptor);\n  var isIE = /Trident|Edge/.test(navigator.userAgent);\n  function whenReady(callback, doc) {\n    doc = doc || rootDocument;\n    whenDocumentReady(function() {\n      watchImportsLoad(callback, doc);\n    }, doc);\n  }\n  var requiredReadyState = isIE ? \"complete\" : \"interactive\";\n  var READY_EVENT = \"readystatechange\";\n  function isDocumentReady(doc) {\n    return doc.readyState === \"complete\" || doc.readyState === requiredReadyState;\n  }\n  function whenDocumentReady(callback, doc) {\n    if (!isDocumentReady(doc)) {\n      var checkReady = function() {\n        if (doc.readyState === \"complete\" || doc.readyState === requiredReadyState) {\n          doc.removeEventListener(READY_EVENT, checkReady);\n          whenDocumentReady(callback, doc);\n        }\n      };\n      doc.addEventListener(READY_EVENT, checkReady);\n    } else if (callback) {\n      callback();\n    }\n  }\n  function markTargetLoaded(event) {\n    event.target.__loaded = true;\n  }\n  function watchImportsLoad(callback, doc) {\n    var imports = doc.querySelectorAll(\"link[rel=import]\");\n    var loaded = 0, l = imports.length;\n    function checkDone(d) {\n      if (loaded == l && callback) {\n        callback();\n      }\n    }\n    function loadedImport(e) {\n      markTargetLoaded(e);\n      loaded++;\n      checkDone();\n    }\n    if (l) {\n      for (var i = 0, imp; i < l && (imp = imports[i]); i++) {\n        if (isImportLoaded(imp)) {\n          loadedImport.call(imp, {\n            target: imp\n          });\n        } else {\n          imp.addEventListener(\"load\", loadedImport);\n          imp.addEventListener(\"error\", loadedImport);\n        }\n      }\n    } else {\n      checkDone();\n    }\n  }\n  function isImportLoaded(link) {\n    return useNative ? link.__loaded || link.import && link.import.readyState !== \"loading\" : link.__importParsed;\n  }\n  if (useNative) {\n    new MutationObserver(function(mxns) {\n      for (var i = 0, l = mxns.length, m; i < l && (m = mxns[i]); i++) {\n        if (m.addedNodes) {\n          handleImports(m.addedNodes);\n        }\n      }\n    }).observe(document.head, {\n      childList: true\n    });\n    function handleImports(nodes) {\n      for (var i = 0, l = nodes.length, n; i < l && (n = nodes[i]); i++) {\n        if (isImport(n)) {\n          handleImport(n);\n        }\n      }\n    }\n    function isImport(element) {\n      return element.localName === \"link\" && element.rel === \"import\";\n    }\n    function handleImport(element) {\n      var loaded = element.import;\n      if (loaded) {\n        markTargetLoaded({\n          target: element\n        });\n      } else {\n        element.addEventListener(\"load\", markTargetLoaded);\n        element.addEventListener(\"error\", markTargetLoaded);\n      }\n    }\n    (function() {\n      if (document.readyState === \"loading\") {\n        var imports = document.querySelectorAll(\"link[rel=import]\");\n        for (var i = 0, l = imports.length, imp; i < l && (imp = imports[i]); i++) {\n          handleImport(imp);\n        }\n      }\n    })();\n  }\n  whenReady(function() {\n    HTMLImports.ready = true;\n    HTMLImports.readyTime = new Date().getTime();\n    var evt = rootDocument.createEvent(\"CustomEvent\");\n    evt.initCustomEvent(\"HTMLImportsLoaded\", true, true, {});\n    rootDocument.dispatchEvent(evt);\n  });\n  scope.IMPORT_LINK_TYPE = IMPORT_LINK_TYPE;\n  scope.useNative = useNative;\n  scope.rootDocument = rootDocument;\n  scope.whenReady = whenReady;\n  scope.isIE = isIE;\n})(HTMLImports);\n\n(function(scope) {\n  var modules = [];\n  var addModule = function(module) {\n    modules.push(module);\n  };\n  var initializeModules = function() {\n    modules.forEach(function(module) {\n      module(scope);\n    });\n  };\n  scope.addModule = addModule;\n  scope.initializeModules = initializeModules;\n})(HTMLImports);\n\nHTMLImports.addModule(function(scope) {\n  var CSS_URL_REGEXP = /(url\\()([^)]*)(\\))/g;\n  var CSS_IMPORT_REGEXP = /(@import[\\s]+(?!url\\())([^;]*)(;)/g;\n  var path = {\n    resolveUrlsInStyle: function(style) {\n      var doc = style.ownerDocument;\n      var resolver = doc.createElement(\"a\");\n      style.textContent = this.resolveUrlsInCssText(style.textContent, resolver);\n      return style;\n    },\n    resolveUrlsInCssText: function(cssText, urlObj) {\n      var r = this.replaceUrls(cssText, urlObj, CSS_URL_REGEXP);\n      r = this.replaceUrls(r, urlObj, CSS_IMPORT_REGEXP);\n      return r;\n    },\n    replaceUrls: function(text, urlObj, regexp) {\n      return text.replace(regexp, function(m, pre, url, post) {\n        var urlPath = url.replace(/[\"']/g, \"\");\n        urlObj.href = urlPath;\n        urlPath = urlObj.href;\n        return pre + \"'\" + urlPath + \"'\" + post;\n      });\n    }\n  };\n  scope.path = path;\n});\n\nHTMLImports.addModule(function(scope) {\n  var xhr = {\n    async: true,\n    ok: function(request) {\n      return request.status >= 200 && request.status < 300 || request.status === 304 || request.status === 0;\n    },\n    load: function(url, next, nextContext) {\n      var request = new XMLHttpRequest();\n      if (scope.flags.debug || scope.flags.bust) {\n        url += \"?\" + Math.random();\n      }\n      request.open(\"GET\", url, xhr.async);\n      request.addEventListener(\"readystatechange\", function(e) {\n        if (request.readyState === 4) {\n          var locationHeader = request.getResponseHeader(\"Location\");\n          var redirectedUrl = null;\n          if (locationHeader) {\n            var redirectedUrl = locationHeader.substr(0, 1) === \"/\" ? location.origin + locationHeader : locationHeader;\n          }\n          next.call(nextContext, !xhr.ok(request) && request, request.response || request.responseText, redirectedUrl);\n        }\n      });\n      request.send();\n      return request;\n    },\n    loadDocument: function(url, next, nextContext) {\n      this.load(url, next, nextContext).responseType = \"document\";\n    }\n  };\n  scope.xhr = xhr;\n});\n\nHTMLImports.addModule(function(scope) {\n  var xhr = scope.xhr;\n  var flags = scope.flags;\n  var Loader = function(onLoad, onComplete) {\n    this.cache = {};\n    this.onload = onLoad;\n    this.oncomplete = onComplete;\n    this.inflight = 0;\n    this.pending = {};\n  };\n  Loader.prototype = {\n    addNodes: function(nodes) {\n      this.inflight += nodes.length;\n      for (var i = 0, l = nodes.length, n; i < l && (n = nodes[i]); i++) {\n        this.require(n);\n      }\n      this.checkDone();\n    },\n    addNode: function(node) {\n      this.inflight++;\n      this.require(node);\n      this.checkDone();\n    },\n    require: function(elt) {\n      var url = elt.src || elt.href;\n      elt.__nodeUrl = url;\n      if (!this.dedupe(url, elt)) {\n        this.fetch(url, elt);\n      }\n    },\n    dedupe: function(url, elt) {\n      if (this.pending[url]) {\n        this.pending[url].push(elt);\n        return true;\n      }\n      var resource;\n      if (this.cache[url]) {\n        this.onload(url, elt, this.cache[url]);\n        this.tail();\n        return true;\n      }\n      this.pending[url] = [ elt ];\n      return false;\n    },\n    fetch: function(url, elt) {\n      flags.load && console.log(\"fetch\", url, elt);\n      if (!url) {\n        setTimeout(function() {\n          this.receive(url, elt, {\n            error: \"href must be specified\"\n          }, null);\n        }.bind(this), 0);\n      } else if (url.match(/^data:/)) {\n        var pieces = url.split(\",\");\n        var header = pieces[0];\n        var body = pieces[1];\n        if (header.indexOf(\";base64\") > -1) {\n          body = atob(body);\n        } else {\n          body = decodeURIComponent(body);\n        }\n        setTimeout(function() {\n          this.receive(url, elt, null, body);\n        }.bind(this), 0);\n      } else {\n        var receiveXhr = function(err, resource, redirectedUrl) {\n          this.receive(url, elt, err, resource, redirectedUrl);\n        }.bind(this);\n        xhr.load(url, receiveXhr);\n      }\n    },\n    receive: function(url, elt, err, resource, redirectedUrl) {\n      this.cache[url] = resource;\n      var $p = this.pending[url];\n      for (var i = 0, l = $p.length, p; i < l && (p = $p[i]); i++) {\n        this.onload(url, p, resource, err, redirectedUrl);\n        this.tail();\n      }\n      this.pending[url] = null;\n    },\n    tail: function() {\n      --this.inflight;\n      this.checkDone();\n    },\n    checkDone: function() {\n      if (!this.inflight) {\n        this.oncomplete();\n      }\n    }\n  };\n  scope.Loader = Loader;\n});\n\nHTMLImports.addModule(function(scope) {\n  var Observer = function(addCallback) {\n    this.addCallback = addCallback;\n    this.mo = new MutationObserver(this.handler.bind(this));\n  };\n  Observer.prototype = {\n    handler: function(mutations) {\n      for (var i = 0, l = mutations.length, m; i < l && (m = mutations[i]); i++) {\n        if (m.type === \"childList\" && m.addedNodes.length) {\n          this.addedNodes(m.addedNodes);\n        }\n      }\n    },\n    addedNodes: function(nodes) {\n      if (this.addCallback) {\n        this.addCallback(nodes);\n      }\n      for (var i = 0, l = nodes.length, n, loading; i < l && (n = nodes[i]); i++) {\n        if (n.children && n.children.length) {\n          this.addedNodes(n.children);\n        }\n      }\n    },\n    observe: function(root) {\n      this.mo.observe(root, {\n        childList: true,\n        subtree: true\n      });\n    }\n  };\n  scope.Observer = Observer;\n});\n\nHTMLImports.addModule(function(scope) {\n  var path = scope.path;\n  var rootDocument = scope.rootDocument;\n  var flags = scope.flags;\n  var isIE = scope.isIE;\n  var IMPORT_LINK_TYPE = scope.IMPORT_LINK_TYPE;\n  var IMPORT_SELECTOR = \"link[rel=\" + IMPORT_LINK_TYPE + \"]\";\n  var importParser = {\n    documentSelectors: IMPORT_SELECTOR,\n    importsSelectors: [ IMPORT_SELECTOR, \"link[rel=stylesheet]\", \"style\", \"script:not([type])\", 'script[type=\"text/javascript\"]' ].join(\",\"),\n    map: {\n      link: \"parseLink\",\n      script: \"parseScript\",\n      style: \"parseStyle\"\n    },\n    dynamicElements: [],\n    parseNext: function() {\n      var next = this.nextToParse();\n      if (next) {\n        this.parse(next);\n      }\n    },\n    parse: function(elt) {\n      if (this.isParsed(elt)) {\n        flags.parse && console.log(\"[%s] is already parsed\", elt.localName);\n        return;\n      }\n      var fn = this[this.map[elt.localName]];\n      if (fn) {\n        this.markParsing(elt);\n        fn.call(this, elt);\n      }\n    },\n    parseDynamic: function(elt, quiet) {\n      this.dynamicElements.push(elt);\n      if (!quiet) {\n        this.parseNext();\n      }\n    },\n    markParsing: function(elt) {\n      flags.parse && console.log(\"parsing\", elt);\n      this.parsingElement = elt;\n    },\n    markParsingComplete: function(elt) {\n      elt.__importParsed = true;\n      this.markDynamicParsingComplete(elt);\n      if (elt.__importElement) {\n        elt.__importElement.__importParsed = true;\n        this.markDynamicParsingComplete(elt.__importElement);\n      }\n      this.parsingElement = null;\n      flags.parse && console.log(\"completed\", elt);\n    },\n    markDynamicParsingComplete: function(elt) {\n      var i = this.dynamicElements.indexOf(elt);\n      if (i >= 0) {\n        this.dynamicElements.splice(i, 1);\n      }\n    },\n    parseImport: function(elt) {\n      if (HTMLImports.__importsParsingHook) {\n        HTMLImports.__importsParsingHook(elt);\n      }\n      if (elt.import) {\n        elt.import.__importParsed = true;\n      }\n      this.markParsingComplete(elt);\n      if (elt.__resource && !elt.__error) {\n        elt.dispatchEvent(new CustomEvent(\"load\", {\n          bubbles: false\n        }));\n      } else {\n        elt.dispatchEvent(new CustomEvent(\"error\", {\n          bubbles: false\n        }));\n      }\n      if (elt.__pending) {\n        var fn;\n        while (elt.__pending.length) {\n          fn = elt.__pending.shift();\n          if (fn) {\n            fn({\n              target: elt\n            });\n          }\n        }\n      }\n      this.parseNext();\n    },\n    parseLink: function(linkElt) {\n      if (nodeIsImport(linkElt)) {\n        this.parseImport(linkElt);\n      } else {\n        linkElt.href = linkElt.href;\n        this.parseGeneric(linkElt);\n      }\n    },\n    parseStyle: function(elt) {\n      var src = elt;\n      elt = cloneStyle(elt);\n      elt.__importElement = src;\n      this.parseGeneric(elt);\n    },\n    parseGeneric: function(elt) {\n      this.trackElement(elt);\n      this.addElementToDocument(elt);\n    },\n    rootImportForElement: function(elt) {\n      var n = elt;\n      while (n.ownerDocument.__importLink) {\n        n = n.ownerDocument.__importLink;\n      }\n      return n;\n    },\n    addElementToDocument: function(elt) {\n      var port = this.rootImportForElement(elt.__importElement || elt);\n      port.parentNode.insertBefore(elt, port);\n    },\n    trackElement: function(elt, callback) {\n      var self = this;\n      var done = function(e) {\n        if (callback) {\n          callback(e);\n        }\n        self.markParsingComplete(elt);\n        self.parseNext();\n      };\n      elt.addEventListener(\"load\", done);\n      elt.addEventListener(\"error\", done);\n      if (isIE && elt.localName === \"style\") {\n        var fakeLoad = false;\n        if (elt.textContent.indexOf(\"@import\") == -1) {\n          fakeLoad = true;\n        } else if (elt.sheet) {\n          fakeLoad = true;\n          var csr = elt.sheet.cssRules;\n          var len = csr ? csr.length : 0;\n          for (var i = 0, r; i < len && (r = csr[i]); i++) {\n            if (r.type === CSSRule.IMPORT_RULE) {\n              fakeLoad = fakeLoad && Boolean(r.styleSheet);\n            }\n          }\n        }\n        if (fakeLoad) {\n          elt.dispatchEvent(new CustomEvent(\"load\", {\n            bubbles: false\n          }));\n        }\n      }\n    },\n    parseScript: function(scriptElt) {\n      var script = document.createElement(\"script\");\n      script.__importElement = scriptElt;\n      script.src = scriptElt.src ? scriptElt.src : generateScriptDataUrl(scriptElt);\n      scope.currentScript = scriptElt;\n      this.trackElement(script, function(e) {\n        script.parentNode.removeChild(script);\n        scope.currentScript = null;\n      });\n      this.addElementToDocument(script);\n    },\n    nextToParse: function() {\n      this._mayParse = [];\n      return !this.parsingElement && (this.nextToParseInDoc(rootDocument) || this.nextToParseDynamic());\n    },\n    nextToParseInDoc: function(doc, link) {\n      if (doc && this._mayParse.indexOf(doc) < 0) {\n        this._mayParse.push(doc);\n        var nodes = doc.querySelectorAll(this.parseSelectorsForNode(doc));\n        for (var i = 0, l = nodes.length, p = 0, n; i < l && (n = nodes[i]); i++) {\n          if (!this.isParsed(n)) {\n            if (this.hasResource(n)) {\n              return nodeIsImport(n) ? this.nextToParseInDoc(n.import, n) : n;\n            } else {\n              return;\n            }\n          }\n        }\n      }\n      return link;\n    },\n    nextToParseDynamic: function() {\n      return this.dynamicElements[0];\n    },\n    parseSelectorsForNode: function(node) {\n      var doc = node.ownerDocument || node;\n      return doc === rootDocument ? this.documentSelectors : this.importsSelectors;\n    },\n    isParsed: function(node) {\n      return node.__importParsed;\n    },\n    needsDynamicParsing: function(elt) {\n      return this.dynamicElements.indexOf(elt) >= 0;\n    },\n    hasResource: function(node) {\n      if (nodeIsImport(node) && node.import === undefined) {\n        return false;\n      }\n      return true;\n    }\n  };\n  function nodeIsImport(elt) {\n    return elt.localName === \"link\" && elt.rel === IMPORT_LINK_TYPE;\n  }\n  function generateScriptDataUrl(script) {\n    var scriptContent = generateScriptContent(script);\n    return \"data:text/javascript;charset=utf-8,\" + encodeURIComponent(scriptContent);\n  }\n  function generateScriptContent(script) {\n    return script.textContent + generateSourceMapHint(script);\n  }\n  function generateSourceMapHint(script) {\n    var owner = script.ownerDocument;\n    owner.__importedScripts = owner.__importedScripts || 0;\n    var moniker = script.ownerDocument.baseURI;\n    var num = owner.__importedScripts ? \"-\" + owner.__importedScripts : \"\";\n    owner.__importedScripts++;\n    return \"\\n//# sourceURL=\" + moniker + num + \".js\\n\";\n  }\n  function cloneStyle(style) {\n    var clone = style.ownerDocument.createElement(\"style\");\n    clone.textContent = style.textContent;\n    path.resolveUrlsInStyle(clone);\n    return clone;\n  }\n  scope.parser = importParser;\n  scope.IMPORT_SELECTOR = IMPORT_SELECTOR;\n});\n\nHTMLImports.addModule(function(scope) {\n  var flags = scope.flags;\n  var IMPORT_LINK_TYPE = scope.IMPORT_LINK_TYPE;\n  var IMPORT_SELECTOR = scope.IMPORT_SELECTOR;\n  var rootDocument = scope.rootDocument;\n  var Loader = scope.Loader;\n  var Observer = scope.Observer;\n  var parser = scope.parser;\n  var importer = {\n    documents: {},\n    documentPreloadSelectors: IMPORT_SELECTOR,\n    importsPreloadSelectors: [ IMPORT_SELECTOR ].join(\",\"),\n    loadNode: function(node) {\n      importLoader.addNode(node);\n    },\n    loadSubtree: function(parent) {\n      var nodes = this.marshalNodes(parent);\n      importLoader.addNodes(nodes);\n    },\n    marshalNodes: function(parent) {\n      return parent.querySelectorAll(this.loadSelectorsForNode(parent));\n    },\n    loadSelectorsForNode: function(node) {\n      var doc = node.ownerDocument || node;\n      return doc === rootDocument ? this.documentPreloadSelectors : this.importsPreloadSelectors;\n    },\n    loaded: function(url, elt, resource, err, redirectedUrl) {\n      flags.load && console.log(\"loaded\", url, elt);\n      elt.__resource = resource;\n      elt.__error = err;\n      if (isImportLink(elt)) {\n        var doc = this.documents[url];\n        if (doc === undefined) {\n          doc = err ? null : makeDocument(resource, redirectedUrl || url);\n          if (doc) {\n            doc.__importLink = elt;\n            this.bootDocument(doc);\n          }\n          this.documents[url] = doc;\n        }\n        elt.import = doc;\n      }\n      parser.parseNext();\n    },\n    bootDocument: function(doc) {\n      this.loadSubtree(doc);\n      this.observer.observe(doc);\n      parser.parseNext();\n    },\n    loadedAll: function() {\n      parser.parseNext();\n    }\n  };\n  var importLoader = new Loader(importer.loaded.bind(importer), importer.loadedAll.bind(importer));\n  importer.observer = new Observer();\n  function isImportLink(elt) {\n    return isLinkRel(elt, IMPORT_LINK_TYPE);\n  }\n  function isLinkRel(elt, rel) {\n    return elt.localName === \"link\" && elt.getAttribute(\"rel\") === rel;\n  }\n  function makeDocument(resource, url) {\n    var doc = document.implementation.createHTMLDocument(IMPORT_LINK_TYPE);\n    doc._URL = url;\n    var base = doc.createElement(\"base\");\n    base.setAttribute(\"href\", url);\n    if (!doc.baseURI) {\n      Object.defineProperty(doc, \"baseURI\", {\n        value: url\n      });\n    }\n    var meta = doc.createElement(\"meta\");\n    meta.setAttribute(\"charset\", \"utf-8\");\n    doc.head.appendChild(meta);\n    doc.head.appendChild(base);\n    doc.body.innerHTML = resource;\n    if (window.HTMLTemplateElement && HTMLTemplateElement.bootstrap) {\n      HTMLTemplateElement.bootstrap(doc);\n    }\n    return doc;\n  }\n  if (!document.baseURI) {\n    var baseURIDescriptor = {\n      get: function() {\n        var base = document.querySelector(\"base\");\n        return base ? base.href : window.location.href;\n      },\n      configurable: true\n    };\n    Object.defineProperty(document, \"baseURI\", baseURIDescriptor);\n    Object.defineProperty(rootDocument, \"baseURI\", baseURIDescriptor);\n  }\n  scope.importer = importer;\n  scope.importLoader = importLoader;\n});\n\nHTMLImports.addModule(function(scope) {\n  var parser = scope.parser;\n  var importer = scope.importer;\n  var dynamic = {\n    added: function(nodes) {\n      var owner, parsed, loading;\n      for (var i = 0, l = nodes.length, n; i < l && (n = nodes[i]); i++) {\n        if (!owner) {\n          owner = n.ownerDocument;\n          parsed = parser.isParsed(owner);\n        }\n        loading = this.shouldLoadNode(n);\n        if (loading) {\n          importer.loadNode(n);\n        }\n        if (this.shouldParseNode(n) && parsed) {\n          parser.parseDynamic(n, loading);\n        }\n      }\n    },\n    shouldLoadNode: function(node) {\n      return node.nodeType === 1 && matches.call(node, importer.loadSelectorsForNode(node));\n    },\n    shouldParseNode: function(node) {\n      return node.nodeType === 1 && matches.call(node, parser.parseSelectorsForNode(node));\n    }\n  };\n  importer.observer.addCallback = dynamic.added.bind(dynamic);\n  var matches = HTMLElement.prototype.matches || HTMLElement.prototype.matchesSelector || HTMLElement.prototype.webkitMatchesSelector || HTMLElement.prototype.mozMatchesSelector || HTMLElement.prototype.msMatchesSelector;\n});\n\n(function(scope) {\n  var initializeModules = scope.initializeModules;\n  var isIE = scope.isIE;\n  if (scope.useNative) {\n    return;\n  }\n  if (isIE && typeof window.CustomEvent !== \"function\") {\n    window.CustomEvent = function(inType, params) {\n      params = params || {};\n      var e = document.createEvent(\"CustomEvent\");\n      e.initCustomEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable), params.detail);\n      return e;\n    };\n    window.CustomEvent.prototype = window.Event.prototype;\n  }\n  initializeModules();\n  var rootDocument = scope.rootDocument;\n  function bootstrap() {\n    HTMLImports.importer.bootDocument(rootDocument);\n  }\n  if (document.readyState === \"complete\" || document.readyState === \"interactive\" && !window.attachEvent) {\n    bootstrap();\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", bootstrap);\n  }\n})(HTMLImports);\n\nwindow.CustomElements = window.CustomElements || {\n  flags: {}\n};\n\n(function(scope) {\n  var flags = scope.flags;\n  var modules = [];\n  var addModule = function(module) {\n    modules.push(module);\n  };\n  var initializeModules = function() {\n    modules.forEach(function(module) {\n      module(scope);\n    });\n  };\n  scope.addModule = addModule;\n  scope.initializeModules = initializeModules;\n  scope.hasNative = Boolean(document.registerElement);\n  scope.useNative = !flags.register && scope.hasNative && !window.ShadowDOMPolyfill && (!window.HTMLImports || HTMLImports.useNative);\n})(CustomElements);\n\nCustomElements.addModule(function(scope) {\n  var IMPORT_LINK_TYPE = window.HTMLImports ? HTMLImports.IMPORT_LINK_TYPE : \"none\";\n  function forSubtree(node, cb) {\n    findAllElements(node, function(e) {\n      if (cb(e)) {\n        return true;\n      }\n      forRoots(e, cb);\n    });\n    forRoots(node, cb);\n  }\n  function findAllElements(node, find, data) {\n    var e = node.firstElementChild;\n    if (!e) {\n      e = node.firstChild;\n      while (e && e.nodeType !== Node.ELEMENT_NODE) {\n        e = e.nextSibling;\n      }\n    }\n    while (e) {\n      if (find(e, data) !== true) {\n        findAllElements(e, find, data);\n      }\n      e = e.nextElementSibling;\n    }\n    return null;\n  }\n  function forRoots(node, cb) {\n    var root = node.shadowRoot;\n    while (root) {\n      forSubtree(root, cb);\n      root = root.olderShadowRoot;\n    }\n  }\n  var processingDocuments;\n  function forDocumentTree(doc, cb) {\n    processingDocuments = [];\n    _forDocumentTree(doc, cb);\n    processingDocuments = null;\n  }\n  function _forDocumentTree(doc, cb) {\n    doc = wrap(doc);\n    if (processingDocuments.indexOf(doc) >= 0) {\n      return;\n    }\n    processingDocuments.push(doc);\n    var imports = doc.querySelectorAll(\"link[rel=\" + IMPORT_LINK_TYPE + \"]\");\n    for (var i = 0, l = imports.length, n; i < l && (n = imports[i]); i++) {\n      if (n.import) {\n        _forDocumentTree(n.import, cb);\n      }\n    }\n    cb(doc);\n  }\n  scope.forDocumentTree = forDocumentTree;\n  scope.forSubtree = forSubtree;\n});\n\nCustomElements.addModule(function(scope) {\n  var flags = scope.flags;\n  var forSubtree = scope.forSubtree;\n  var forDocumentTree = scope.forDocumentTree;\n  function addedNode(node) {\n    return added(node) || addedSubtree(node);\n  }\n  function added(node) {\n    if (scope.upgrade(node)) {\n      return true;\n    }\n    attached(node);\n  }\n  function addedSubtree(node) {\n    forSubtree(node, function(e) {\n      if (added(e)) {\n        return true;\n      }\n    });\n  }\n  function attachedNode(node) {\n    attached(node);\n    if (inDocument(node)) {\n      forSubtree(node, function(e) {\n        attached(e);\n      });\n    }\n  }\n  var hasPolyfillMutations = !window.MutationObserver || window.MutationObserver === window.JsMutationObserver;\n  scope.hasPolyfillMutations = hasPolyfillMutations;\n  var isPendingMutations = false;\n  var pendingMutations = [];\n  function deferMutation(fn) {\n    pendingMutations.push(fn);\n    if (!isPendingMutations) {\n      isPendingMutations = true;\n      setTimeout(takeMutations);\n    }\n  }\n  function takeMutations() {\n    isPendingMutations = false;\n    var $p = pendingMutations;\n    for (var i = 0, l = $p.length, p; i < l && (p = $p[i]); i++) {\n      p();\n    }\n    pendingMutations = [];\n  }\n  function attached(element) {\n    if (hasPolyfillMutations) {\n      deferMutation(function() {\n        _attached(element);\n      });\n    } else {\n      _attached(element);\n    }\n  }\n  function _attached(element) {\n    if (element.__upgraded__ && (element.attachedCallback || element.detachedCallback)) {\n      if (!element.__attached && inDocument(element)) {\n        element.__attached = true;\n        if (element.attachedCallback) {\n          element.attachedCallback();\n        }\n      }\n    }\n  }\n  function detachedNode(node) {\n    detached(node);\n    forSubtree(node, function(e) {\n      detached(e);\n    });\n  }\n  function detached(element) {\n    if (hasPolyfillMutations) {\n      deferMutation(function() {\n        _detached(element);\n      });\n    } else {\n      _detached(element);\n    }\n  }\n  function _detached(element) {\n    if (element.__upgraded__ && (element.attachedCallback || element.detachedCallback)) {\n      if (element.__attached && !inDocument(element)) {\n        element.__attached = false;\n        if (element.detachedCallback) {\n          element.detachedCallback();\n        }\n      }\n    }\n  }\n  function inDocument(element) {\n    var p = element;\n    var doc = wrap(document);\n    while (p) {\n      if (p == doc) {\n        return true;\n      }\n      p = p.parentNode || p.host;\n    }\n  }\n  function watchShadow(node) {\n    if (node.shadowRoot && !node.shadowRoot.__watched) {\n      flags.dom && console.log(\"watching shadow-root for: \", node.localName);\n      var root = node.shadowRoot;\n      while (root) {\n        observe(root);\n        root = root.olderShadowRoot;\n      }\n    }\n  }\n  function handler(mutations) {\n    if (flags.dom) {\n      var mx = mutations[0];\n      if (mx && mx.type === \"childList\" && mx.addedNodes) {\n        if (mx.addedNodes) {\n          var d = mx.addedNodes[0];\n          while (d && d !== document && !d.host) {\n            d = d.parentNode;\n          }\n          var u = d && (d.URL || d._URL || d.host && d.host.localName) || \"\";\n          u = u.split(\"/?\").shift().split(\"/\").pop();\n        }\n      }\n      console.group(\"mutations (%d) [%s]\", mutations.length, u || \"\");\n    }\n    mutations.forEach(function(mx) {\n      if (mx.type === \"childList\") {\n        forEach(mx.addedNodes, function(n) {\n          if (!n.localName) {\n            return;\n          }\n          addedNode(n);\n        });\n        forEach(mx.removedNodes, function(n) {\n          if (!n.localName) {\n            return;\n          }\n          detachedNode(n);\n        });\n      }\n    });\n    flags.dom && console.groupEnd();\n  }\n  function takeRecords(node) {\n    node = wrap(node);\n    if (!node) {\n      node = wrap(document);\n    }\n    while (node.parentNode) {\n      node = node.parentNode;\n    }\n    var observer = node.__observer;\n    if (observer) {\n      handler(observer.takeRecords());\n      takeMutations();\n    }\n  }\n  var forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);\n  function observe(inRoot) {\n    if (inRoot.__observer) {\n      return;\n    }\n    var observer = new MutationObserver(handler);\n    observer.observe(inRoot, {\n      childList: true,\n      subtree: true\n    });\n    inRoot.__observer = observer;\n  }\n  function upgradeDocument(doc) {\n    doc = wrap(doc);\n    flags.dom && console.group(\"upgradeDocument: \", doc.baseURI.split(\"/\").pop());\n    addedNode(doc);\n    observe(doc);\n    flags.dom && console.groupEnd();\n  }\n  function upgradeDocumentTree(doc) {\n    forDocumentTree(doc, upgradeDocument);\n  }\n  var originalCreateShadowRoot = Element.prototype.createShadowRoot;\n  Element.prototype.createShadowRoot = function() {\n    var root = originalCreateShadowRoot.call(this);\n    CustomElements.watchShadow(this);\n    return root;\n  };\n  scope.watchShadow = watchShadow;\n  scope.upgradeDocumentTree = upgradeDocumentTree;\n  scope.upgradeSubtree = addedSubtree;\n  scope.upgradeAll = addedNode;\n  scope.attachedNode = attachedNode;\n  scope.takeRecords = takeRecords;\n});\n\nCustomElements.addModule(function(scope) {\n  var flags = scope.flags;\n  function upgrade(node) {\n    if (!node.__upgraded__ && node.nodeType === Node.ELEMENT_NODE) {\n      var is = node.getAttribute(\"is\");\n      var definition = scope.getRegisteredDefinition(is || node.localName);\n      if (definition) {\n        if (is && definition.tag == node.localName) {\n          return upgradeWithDefinition(node, definition);\n        } else if (!is && !definition.extends) {\n          return upgradeWithDefinition(node, definition);\n        }\n      }\n    }\n  }\n  function upgradeWithDefinition(element, definition) {\n    flags.upgrade && console.group(\"upgrade:\", element.localName);\n    if (definition.is) {\n      element.setAttribute(\"is\", definition.is);\n    }\n    implementPrototype(element, definition);\n    element.__upgraded__ = true;\n    created(element);\n    scope.attachedNode(element);\n    scope.upgradeSubtree(element);\n    flags.upgrade && console.groupEnd();\n    return element;\n  }\n  function implementPrototype(element, definition) {\n    if (Object.__proto__) {\n      element.__proto__ = definition.prototype;\n    } else {\n      customMixin(element, definition.prototype, definition.native);\n      element.__proto__ = definition.prototype;\n    }\n  }\n  function customMixin(inTarget, inSrc, inNative) {\n    var used = {};\n    var p = inSrc;\n    while (p !== inNative && p !== HTMLElement.prototype) {\n      var keys = Object.getOwnPropertyNames(p);\n      for (var i = 0, k; k = keys[i]; i++) {\n        if (!used[k]) {\n          Object.defineProperty(inTarget, k, Object.getOwnPropertyDescriptor(p, k));\n          used[k] = 1;\n        }\n      }\n      p = Object.getPrototypeOf(p);\n    }\n  }\n  function created(element) {\n    if (element.createdCallback) {\n      element.createdCallback();\n    }\n  }\n  scope.upgrade = upgrade;\n  scope.upgradeWithDefinition = upgradeWithDefinition;\n  scope.implementPrototype = implementPrototype;\n});\n\nCustomElements.addModule(function(scope) {\n  var upgradeDocumentTree = scope.upgradeDocumentTree;\n  var upgrade = scope.upgrade;\n  var upgradeWithDefinition = scope.upgradeWithDefinition;\n  var implementPrototype = scope.implementPrototype;\n  var useNative = scope.useNative;\n  function register(name, options) {\n    var definition = options || {};\n    if (!name) {\n      throw new Error(\"document.registerElement: first argument `name` must not be empty\");\n    }\n    if (name.indexOf(\"-\") < 0) {\n      throw new Error(\"document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '\" + String(name) + \"'.\");\n    }\n    if (isReservedTag(name)) {\n      throw new Error(\"Failed to execute 'registerElement' on 'Document': Registration failed for type '\" + String(name) + \"'. The type name is invalid.\");\n    }\n    if (getRegisteredDefinition(name)) {\n      throw new Error(\"DuplicateDefinitionError: a type with name '\" + String(name) + \"' is already registered\");\n    }\n    if (!definition.prototype) {\n      definition.prototype = Object.create(HTMLElement.prototype);\n    }\n    definition.__name = name.toLowerCase();\n    definition.lifecycle = definition.lifecycle || {};\n    definition.ancestry = ancestry(definition.extends);\n    resolveTagName(definition);\n    resolvePrototypeChain(definition);\n    overrideAttributeApi(definition.prototype);\n    registerDefinition(definition.__name, definition);\n    definition.ctor = generateConstructor(definition);\n    definition.ctor.prototype = definition.prototype;\n    definition.prototype.constructor = definition.ctor;\n    if (scope.ready) {\n      upgradeDocumentTree(document);\n    }\n    return definition.ctor;\n  }\n  function overrideAttributeApi(prototype) {\n    if (prototype.setAttribute._polyfilled) {\n      return;\n    }\n    var setAttribute = prototype.setAttribute;\n    prototype.setAttribute = function(name, value) {\n      changeAttribute.call(this, name, value, setAttribute);\n    };\n    var removeAttribute = prototype.removeAttribute;\n    prototype.removeAttribute = function(name) {\n      changeAttribute.call(this, name, null, removeAttribute);\n    };\n    prototype.setAttribute._polyfilled = true;\n  }\n  function changeAttribute(name, value, operation) {\n    name = name.toLowerCase();\n    var oldValue = this.getAttribute(name);\n    operation.apply(this, arguments);\n    var newValue = this.getAttribute(name);\n    if (this.attributeChangedCallback && newValue !== oldValue) {\n      this.attributeChangedCallback(name, oldValue, newValue);\n    }\n  }\n  function isReservedTag(name) {\n    for (var i = 0; i < reservedTagList.length; i++) {\n      if (name === reservedTagList[i]) {\n        return true;\n      }\n    }\n  }\n  var reservedTagList = [ \"annotation-xml\", \"color-profile\", \"font-face\", \"font-face-src\", \"font-face-uri\", \"font-face-format\", \"font-face-name\", \"missing-glyph\" ];\n  function ancestry(extnds) {\n    var extendee = getRegisteredDefinition(extnds);\n    if (extendee) {\n      return ancestry(extendee.extends).concat([ extendee ]);\n    }\n    return [];\n  }\n  function resolveTagName(definition) {\n    var baseTag = definition.extends;\n    for (var i = 0, a; a = definition.ancestry[i]; i++) {\n      baseTag = a.is && a.tag;\n    }\n    definition.tag = baseTag || definition.__name;\n    if (baseTag) {\n      definition.is = definition.__name;\n    }\n  }\n  function resolvePrototypeChain(definition) {\n    if (!Object.__proto__) {\n      var nativePrototype = HTMLElement.prototype;\n      if (definition.is) {\n        var inst = document.createElement(definition.tag);\n        var expectedPrototype = Object.getPrototypeOf(inst);\n        if (expectedPrototype === definition.prototype) {\n          nativePrototype = expectedPrototype;\n        }\n      }\n      var proto = definition.prototype, ancestor;\n      while (proto && proto !== nativePrototype) {\n        ancestor = Object.getPrototypeOf(proto);\n        proto.__proto__ = ancestor;\n        proto = ancestor;\n      }\n      definition.native = nativePrototype;\n    }\n  }\n  function instantiate(definition) {\n    return upgradeWithDefinition(domCreateElement(definition.tag), definition);\n  }\n  var registry = {};\n  function getRegisteredDefinition(name) {\n    if (name) {\n      return registry[name.toLowerCase()];\n    }\n  }\n  function registerDefinition(name, definition) {\n    registry[name] = definition;\n  }\n  function generateConstructor(definition) {\n    return function() {\n      return instantiate(definition);\n    };\n  }\n  var HTML_NAMESPACE = \"http://www.w3.org/1999/xhtml\";\n  function createElementNS(namespace, tag, typeExtension) {\n    if (namespace === HTML_NAMESPACE) {\n      return createElement(tag, typeExtension);\n    } else {\n      return domCreateElementNS(namespace, tag);\n    }\n  }\n  function createElement(tag, typeExtension) {\n    var definition = getRegisteredDefinition(typeExtension || tag);\n    if (definition) {\n      if (tag == definition.tag && typeExtension == definition.is) {\n        return new definition.ctor();\n      }\n      if (!typeExtension && !definition.is) {\n        return new definition.ctor();\n      }\n    }\n    var element;\n    if (typeExtension) {\n      element = createElement(tag);\n      element.setAttribute(\"is\", typeExtension);\n      return element;\n    }\n    element = domCreateElement(tag);\n    if (tag.indexOf(\"-\") >= 0) {\n      implementPrototype(element, HTMLElement);\n    }\n    return element;\n  }\n  function cloneNode(deep) {\n    var n = domCloneNode.call(this, deep);\n    upgrade(n);\n    return n;\n  }\n  var domCreateElement = document.createElement.bind(document);\n  var domCreateElementNS = document.createElementNS.bind(document);\n  var domCloneNode = Node.prototype.cloneNode;\n  var isInstance;\n  if (!Object.__proto__ && !useNative) {\n    isInstance = function(obj, ctor) {\n      var p = obj;\n      while (p) {\n        if (p === ctor.prototype) {\n          return true;\n        }\n        p = p.__proto__;\n      }\n      return false;\n    };\n  } else {\n    isInstance = function(obj, base) {\n      return obj instanceof base;\n    };\n  }\n  document.registerElement = register;\n  document.createElement = createElement;\n  document.createElementNS = createElementNS;\n  Node.prototype.cloneNode = cloneNode;\n  scope.registry = registry;\n  scope.instanceof = isInstance;\n  scope.reservedTagList = reservedTagList;\n  scope.getRegisteredDefinition = getRegisteredDefinition;\n  document.register = document.registerElement;\n});\n\n(function(scope) {\n  var useNative = scope.useNative;\n  var initializeModules = scope.initializeModules;\n  var isIE11OrOlder = /Trident/.test(navigator.userAgent);\n  if (useNative) {\n    var nop = function() {};\n    scope.watchShadow = nop;\n    scope.upgrade = nop;\n    scope.upgradeAll = nop;\n    scope.upgradeDocumentTree = nop;\n    scope.upgradeSubtree = nop;\n    scope.takeRecords = nop;\n    scope.instanceof = function(obj, base) {\n      return obj instanceof base;\n    };\n  } else {\n    initializeModules();\n  }\n  var upgradeDocumentTree = scope.upgradeDocumentTree;\n  if (!window.wrap) {\n    if (window.ShadowDOMPolyfill) {\n      window.wrap = ShadowDOMPolyfill.wrapIfNeeded;\n      window.unwrap = ShadowDOMPolyfill.unwrapIfNeeded;\n    } else {\n      window.wrap = window.unwrap = function(node) {\n        return node;\n      };\n    }\n  }\n  function bootstrap() {\n    upgradeDocumentTree(wrap(document));\n    if (window.HTMLImports) {\n      HTMLImports.__importsParsingHook = function(elt) {\n        upgradeDocumentTree(wrap(elt.import));\n      };\n    }\n    CustomElements.ready = true;\n    setTimeout(function() {\n      CustomElements.readyTime = Date.now();\n      if (window.HTMLImports) {\n        CustomElements.elapsed = CustomElements.readyTime - HTMLImports.readyTime;\n      }\n      document.dispatchEvent(new CustomEvent(\"WebComponentsReady\", {\n        bubbles: true\n      }));\n    });\n  }\n  if (isIE11OrOlder && typeof window.CustomEvent !== \"function\") {\n    window.CustomEvent = function(inType, params) {\n      params = params || {};\n      var e = document.createEvent(\"CustomEvent\");\n      e.initCustomEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable), params.detail);\n      return e;\n    };\n    window.CustomEvent.prototype = window.Event.prototype;\n  }\n  if (document.readyState === \"complete\" || scope.flags.eager) {\n    bootstrap();\n  } else if (document.readyState === \"interactive\" && !window.attachEvent && (!window.HTMLImports || window.HTMLImports.ready)) {\n    bootstrap();\n  } else {\n    var loadEvent = window.HTMLImports && !HTMLImports.ready ? \"HTMLImportsLoaded\" : \"DOMContentLoaded\";\n    window.addEventListener(loadEvent, bootstrap);\n  }\n})(window.CustomElements);\n\nif (typeof HTMLTemplateElement === \"undefined\") {\n  (function() {\n    var TEMPLATE_TAG = \"template\";\n    HTMLTemplateElement = function() {};\n    HTMLTemplateElement.prototype = Object.create(HTMLElement.prototype);\n    HTMLTemplateElement.decorate = function(template) {\n      if (!template.content) {\n        template.content = template.ownerDocument.createDocumentFragment();\n        var child;\n        while (child = template.firstChild) {\n          template.content.appendChild(child);\n        }\n      }\n    };\n    HTMLTemplateElement.bootstrap = function(doc) {\n      var templates = doc.querySelectorAll(TEMPLATE_TAG);\n      for (var i = 0, l = templates.length, t; i < l && (t = templates[i]); i++) {\n        HTMLTemplateElement.decorate(t);\n      }\n    };\n    addEventListener(\"DOMContentLoaded\", function() {\n      HTMLTemplateElement.bootstrap(document);\n    });\n  })();\n}\n\n(function(scope) {\n  var style = document.createElement(\"style\");\n  style.textContent = \"\" + \"body {\" + \"transition: opacity ease-in 0.2s;\" + \" } \\n\" + \"body[unresolved] {\" + \"opacity: 0; display: block; overflow: hidden; position: relative;\" + \" } \\n\";\n  var head = document.querySelector(\"head\");\n  head.insertBefore(style, head.firstChild);\n})(window.WebComponents);","(function (g, factory) {\n    'use strict';\n\n    // Export the **ceb** function according the detected loader.\n\n    /* istanbul ignore next */\n    if (typeof exports === 'object') {\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        define('ceb', [], factory);\n    } else {\n        g.ceb = factory();\n    }\n\n}(this, function () {\n    'use strict';\n\n    // ## Polyfill\n\n    /* istanbul ignore next */\n    if (!('assign' in Object)) {\n        /* https://github.com/paulmillr/es6-shim/blob/master/es6-shim.js */\n        Object.defineProperty(Object, 'assign', {\n            configurable: true,\n            enumerable: false,\n            writable: true,\n            value: function polyfillAssign() {\n                return Array.prototype.reduce.call(arguments, function (target, source) {\n                    return Object.keys(Object(source)).reduce(function (target, key) {\n                        target[key] = source[key];\n                        return target;\n                    }, target);\n                });\n            }\n        });\n    }\n\n    // ## Tools\n\n    // Return a new empty function.\n    function emptyFn() {\n        return function () {};\n    }\n\n    // List the values of an object.\n    function listValues(o) {\n        return Object.keys(o).map(function (propName) {\n            return o[propName];\n        });\n    }\n\n    // Transform property notation to attribute notation.\n    function fromCamelCaseToHyphenCase(value) {\n        return value.split(/(?=[A-Z])/).map(function (part) {\n            return part.charAt(0).toLowerCase() + part.slice(1);\n        }).join('-');\n    }\n\n    // Compare object according to their levels.\n    function compareLevels(a, b) {\n        return a.level - b.level;\n    }\n\n    // Apply an attribute value to an element.\n    function applyAttributeValue(el, attName, value, isBoolean) {\n        if (isBoolean) {\n            // Handle boolean value\n            if (value && !el.hasAttribute(attName)) {\n                // Set attribute only if the attribute is not preset\n                el.setAttribute(attName, '');\n            } else if (!value && el.hasAttribute(attName)) {\n                // The value is false so the attribute must be removed\n                el.removeAttribute(attName);\n            }\n        } else {\n            // Handle none boolean value\n            if ((value === null || value === undefined) && el.hasAttribute(attName)) {\n                // There is no value, so the attribute must be removed\n                el.removeAttribute(attName);\n            } else if ((value !== null && value !== undefined) && el.getAttribute(attName) !== value) {\n                // Sync the attribute value with value\n                el.setAttribute(attName, value);\n            }\n        }\n    }\n\n    // Create an accessor function in order to wrap the original accessor with its accessors.\n    function accessorFactory(wrappers, wrapped, propName) {\n        // Order the stack of wrappers\n        var stack = wrappers.sort(compareLevels);\n        return function accessor() {\n            var el = this;\n            // The first function of the stack is called,\n            // calling the next function when its argument function next is called.\n            // The original accessor is the last call.\n            return stack.reduce(function (previous, current) {\n                return current.bind(el, previous, el, propName);\n            }, wrapped.bind(el, el, propName)).apply(el, arguments);\n        };\n    }\n\n    // Create the accessor set for a property linked to an attribute\n    function attributeAccessorSetFactory(attName, setter, isBoolean) {\n        return function attributeAccessorSet(el, propName, value) {\n            // By default, the attribute value is the set value.\n            var attValue = value;\n            if (setter) {\n                // The default value can be overridden by a given setter.\n                attValue = setter.call(el, el, propName, value);\n            }\n            // Finally apply the attribute to the linked attribute.\n            applyAttributeValue(el, attName, attValue, isBoolean);\n        };\n    }\n\n    // Create the accessor get for a property linked to an attribute\n    function attributeAccessorGetFactory(attName, getter, isBoolean) {\n        return function attributeAccessorGet(el, propName) {\n            // By default, the returned value is the attribute value.\n            var value = isBoolean ? el.hasAttribute(attName) : el.getAttribute(attName);\n            if (getter) {\n                // The returned value can be overridden by a given getter.\n                value = getter.call(el, el, propName, value);\n            }\n            // Finally the value is returned\n            return value;\n        };\n    }\n\n    // Create an element's method\n    function methodFactory(wrappers, wrapped) {\n        // Order the stack of wrappers\n        var stack = wrappers.sort(compareLevels);\n        return function () {\n            var el = this;\n            // The first function of the stack is called, calling the next function when its argument function next is called.\n            // The original method is the last call.\n            return stack.reduce(function (previous, current) {\n                return current.bind(el, function next(args) {\n                    return previous.apply(el, Array.prototype.slice.call(args).slice(2, args.length));\n                }, el);\n            }, wrapped.bind(el, el)).apply(el, arguments);\n        };\n    }\n\n    // ## Life cycle\n\n    // Sanitize a structure to avoid the errors `?? not defined`\n    function sanitizeStructure(struct) {\n        struct.prototype = struct.prototype || Object.create(HTMLElement.prototype);\n        struct.features = struct.features || [];\n        struct.interceptors = struct.interceptors || [];\n        struct.wrappers = struct.wrappers || [];\n        struct.listeners = struct.listeners || [];\n        struct.properties = struct.properties || {};\n        struct.methods = Object.assign({\n            createdCallback: emptyFn(),\n            attachedCallback: emptyFn(),\n            detachedCallback: emptyFn(),\n            attributeChangedCallback: emptyFn()\n        }, struct.methods);\n        return struct;\n    }\n\n    // Call the setup's method of features.\n    function setupFeatures(struct) {\n        // Create a builder from the current structure.\n        var b = builder(struct.tagName, {\n            struct: struct,\n            registered: true\n        });\n        // Call setup functions according their features's levels.\n        struct.features.sort(compareLevels).forEach(function (feature) {\n            if (feature.fn && feature.fn.setup) {\n                feature.fn.setup(struct, b, feature.options);\n            }\n        });\n    }\n\n    // Create an hash of attributes from the structure's properties.\n    // The hash of attributes is used to keep in sync properties' values and attributes' values.\n    function createAttributesHash(struct) {\n        return listValues(struct.properties).filter(function (property) {\n            return property.attName;\n        }).reduce(function (previous, current) {\n            previous[current.attName] = current;\n            return previous;\n        }, {});\n    }\n\n    // Create an hash of defined properties from the structure's properties.\n    // The defined properties are the input of Object.defineProperties().\n    function createDefinedPropertiesHash(struct) {\n        return listValues(struct.properties).map(function (property) {\n            // By default properties should not be configurable but enumerable.\n            var definedProperty = {\n                configurable: false,\n                enumerable: true\n            };\n\n            if (property.attribute) {\n                // Create attribute accessors.\n                property.set = attributeAccessorSetFactory(property.attName, property.setter, !!property.attribute.boolean);\n                property.get = attributeAccessorGetFactory(property.attName, property.getter, !!property.attribute.boolean);\n            } else if (property.hasOwnProperty('value') && property.hasOwnProperty('writable') && !property.writable) {\n                // A constant has a value which is not writable.\n                definedProperty.value = property.value;\n                definedProperty.writable = false;\n                if (property.hasOwnProperty('enumerable')) {\n                    definedProperty.enumerable = property.enumerable;\n                }\n            } else if (!property.set && !property.get) {\n                // A none constant property without accessor must be writable.\n                definedProperty.writable = true;\n            }\n\n            if (!definedProperty.hasOwnProperty('writable')) {\n                // Create the property's function set and get according to their interceptors.\n                var interceptors = struct.interceptors[property.propName] || {};\n                if (property.set) {\n                    var setStack = interceptors.set || [];\n                    definedProperty.set = accessorFactory(setStack, property.set, property.propName);\n                }\n                if (property.get) {\n                    var getStack = interceptors.get || [];\n                    definedProperty.get = accessorFactory(getStack, property.get, property.propName);\n                }\n            }\n\n            // Finally add the defined property to the current property.\n            return Object.assign(property, {\n                definedProperty: definedProperty\n            });\n        }).reduce(function (previous, current) {\n            previous[current.propName] = current.definedProperty;\n            return previous;\n        }, {});\n    }\n\n    // Create an hash of methods from the structure's methods.\n    function createMethodsHash(struct) {\n        // Iterate over methods in order to wrap them with their wrappers.\n        return Object.keys(struct.methods).map(function (methName) {\n            var stack = struct.wrappers[methName] || [];\n            var fn = struct.methods[methName];\n            return {\n                methName: methName,\n                fn: methodFactory(stack, fn)\n            };\n        }).reduce(function (previous, current) {\n            previous[current.methName] = current.fn;\n            return previous;\n        }, {});\n    }\n\n    // ## Build\n\n    // Work with the structure in order to register the corresponding custom element.\n    function build(struct) {\n        // Clean the structure to avoid potential errors.\n        sanitizeStructure(struct);\n\n        // Let's feature enhanced the structure.\n        setupFeatures(struct);\n\n        // Build an hash of attribute for sync attributes' and properties' values.\n        struct.attributes = createAttributesHash(struct);\n\n        // Create the public properties definition of the custom element.\n        var definedProperties = createDefinedPropertiesHash(struct);\n        // Apply the public properties definition to the custom element prototype.\n        Object.defineProperties(struct.prototype, definedProperties);\n\n        // Override the originals methods to create the wrapped ones.\n        var wrappedMethods = createMethodsHash(struct);\n\n        // Apply the wrapped methods to the custom element prototype.\n        Object.assign(struct.prototype, wrappedMethods);\n\n        // Register the custom element according to its structure.\n        return document.registerElement(struct.tagName, struct);\n    }\n\n    // ## Built-in feature\n\n    // **ceb** defines an internal feature in order to add runtime functionalities:\n    // - initialize properties' values\n    // - add and remove event listeners\n    // - sync properties' values when theirs linked attributes change\n    // - handle delegation of property access to a child element\n\n    // ### Interceptors\n\n    // Intercept write accesses of delegable properties.\n    function delegableSetAccessorInterceptor(property, next, el, propName, value) {\n        next(value);\n        // Logic should be done after the effective write.\n        var target = el.querySelector(property.delegate.target);\n        /* istanbul ignore else  */\n        if (target) {\n            // Resolve the eventual targeted property's name or attribute's name.\n            var targetPropName = property.delegate.property;\n            var targetAttName = property.delegate.attribute;\n            if (!targetPropName && !targetAttName) {\n                targetPropName = property.propName;\n                targetAttName = property.attName;\n            }\n            // Check the boolean nature of the value.\n            var isBoolean = property.attribute && !!property.attribute.boolean;\n            if (property.delegate.hasOwnProperty('boolean')) {\n                isBoolean = property.delegate.boolean;\n            }\n            // Apply change to the child.\n            if (targetAttName) {\n                // Update the child's attribute value.\n                applyAttributeValue(target, targetAttName, value, isBoolean);\n            } else {\n                // Update the child's property value.\n                target[targetPropName] = value;\n            }\n        }\n    }\n\n    // Intercept read accesses of delegable properties.\n    function delegableGetAccessorInterceptor(property, next, el, propName, value) {\n        var result = next(value);\n        // Logic should be done after the effective write.\n        var target = el.querySelector(property.delegate.target);\n        /* istanbul ignore else  */\n        if (target) {\n            // Resolve the eventual targeted property's name or attribute's name.\n            var targetPropName = property.delegate.property;\n            var targetAttName = property.delegate.attribute;\n            if (!targetPropName && !targetAttName) {\n                targetPropName = property.propName;\n                targetAttName = property.attName;\n            }\n            // Check the boolean nature of the value.\n            var isBoolean = property.attribute && !!property.attribute.boolean;\n            if (property.delegate.hasOwnProperty('boolean')) {\n                isBoolean = property.delegate.boolean;\n            }\n            // Get value from the child.\n            if (targetAttName) {\n                // Get the child's attribute value.\n                result = isBoolean ? target.hasAttribute(targetAttName) : target.getAttribute(targetAttName);\n            } else {\n                // Get the child's property value.\n                result = target[targetPropName];\n            }\n        }\n        return result;\n    }\n\n    // ### Listeners\n\n    // DOM event listener calling the structure's event listener.\n    function eventListener(el, fn, evt) {\n        fn(el, evt);\n    }\n\n    // ### Feature's functions\n\n    // Initialize the builtInFeature;\n    var builtInFeature = emptyFn();\n    // The setup function of the built-in feature\n    builtInFeature.setup = function (struct, builder) {\n        // Iterate over structure's properties in order to detect delegable properties.\n        listValues(struct.properties).filter(function (property) {\n            return property.delegate;\n        }).forEach(function (property) {\n            if (!property.attName) {\n                // Force the existence of getter and setter to handle interception.\n                property.set = property.set || emptyFn();\n                property.get = property.get || emptyFn();\n            }\n            // Create interceptor for the delegable property.\n            builder.intercept(\n                property.propName,\n                delegableSetAccessorInterceptor.bind(this, property),\n                delegableGetAccessorInterceptor.bind(this, property)\n            );\n        });\n        // Apply initial values to properties.\n        builder.wrap('createdCallback', function (next, el) {\n            next(arguments);\n            listValues(struct.properties).filter(function (property) {\n                // Skip only properties having an attribute's value set.\n                return !el.hasAttribute(property.attName);\n            }).forEach(function (property) {\n                if (property.hasOwnProperty('value') && property.writable) {\n                    el[property.propName] = property.value;\n                } else if (property.valueFactory) {\n                    el[property.propName] = property.valueFactory(el);\n                }\n            });\n        });\n        // Apply attributes' values to properties.\n        builder.wrap('createdCallback', function (next, el) {\n            next(arguments);\n            // Initialize the attributes' value after the call of the createdCallback method.\n            listValues(struct.properties).filter(function (property) {\n                // Keep only properties having an attribute's value set.\n                return el.hasAttribute(property.attName);\n            }).forEach(function (property) {\n                el[property.propName] = property.attribute.boolean ? true : el.getAttribute(property.attName);\n            });\n        }, Number.MAX_VALUE);\n        // Wrap the method attachedCallback.\n        builder.wrap('attachedCallback', function (next, el) {\n            next(arguments);\n            // Add the event listeners after the call of the attachedCallback method.\n            el.__eventHandlers = struct.listeners.map(function (listener) {\n                var target = listener.target ? el.querySelector(listener.target) : el;\n                var callback = eventListener.bind(el, el, listener.fn);\n                target.addEventListener(listener.event, callback, true);\n                return {\n                    event: listener.event,\n                    target: target,\n                    callback: callback\n                };\n            });\n        });\n        // Wrap the method detachedCallback.\n        builder.wrap('detachedCallback', function (next, el) {\n            // Remove the event listeners before the call of the detachedCallback method.\n            (el.__eventHandlers || []).forEach(function (handler) {\n                handler.target.removeEventListener(handler.event, handler.callback, true);\n            });\n            el.__eventHandlers = null;\n            next(arguments);\n        });\n        // Wrap the method attributeChangedCallback.\n        builder.wrap('attributeChangedCallback', function (next, el, attName, oldVal, newVal) {\n            // Synchronize the attributes' values with their properties\n            var property = struct.attributes[attName];\n            if (property) {\n                var value = newVal;\n                if (property.attribute.boolean) {\n                    value = typeof newVal === 'string' ? true : false;\n                }\n                if (el[property.propName] !== value) {\n                    el[property.propName] = value;\n                }\n            }\n            next(arguments);\n        });\n    };\n\n    // ## ceb\n\n    // Create a base and valid structure;\n    function baseStructFactory() {\n        return {\n            properties: {},\n            methods: {},\n            wrappers: [],\n            interceptors: [],\n            listeners: [],\n            features: [{\n                fn: builtInFeature\n            }]\n        };\n    }\n\n    // Sanitize the properties on the fly\n    function sanitizeProperty(property) {\n        if (property.attribute) {\n            // A property linked to an attribute must have a valid attribute name\n            property.attName = fromCamelCaseToHyphenCase(property.attribute.name || property.propName);\n        }\n        // By default a property is writable\n        property.writable = property.hasOwnProperty('writable') ? property.writable : true;\n        return property;\n    }\n\n    // Provides the sugar API of **ceb**.\n    function builder(tagName, params) {\n        // The structure of the builder can be given from the parameters.\n        var struct = params && params.struct ? sanitizeStructure(params.struct) : baseStructFactory();\n        // A structure must have a tag name.\n        struct.tagName = tagName;\n        // A strucuture which is already registered will not register the custom element twice.\n        var registered = params && params.hasOwnProperty('registered') ? params.registered : false;\n        var api = {};\n        // Add a wrapper to the structure.\n        api.wrap = function (methName, fn, level) {\n            if (!struct.wrappers[methName]) {\n                struct.wrappers[methName] = [];\n            }\n            fn.level = isNaN(level) ? 0 : level;\n            struct.wrappers[methName].push(fn);\n            return api;\n        };\n        // Add an interceptor to the structure.\n        api.intercept = function (propName, setFn, getFn, level) {\n            if (!struct.interceptors[propName]) {\n                struct.interceptors[propName] = {\n                    set: [],\n                    get: []\n                };\n            }\n            if (setFn) {\n                setFn.level = isNaN(level) ? 0 : level;\n                struct.interceptors[propName].set.push(setFn);\n            }\n            if (getFn) {\n                getFn.level = isNaN(level) ? 0 : level;\n                struct.interceptors[propName].get.push(getFn);\n            }\n            return api;\n        };\n        // Set the extends value\n        api['extends'] = function (anExtend) {\n            struct['extends'] = anExtend;\n            return api;\n        };\n        // Set the herited prototype\n        api.prototype = function (aProto) {\n            struct.prototype = aProto;\n            return api;\n        };\n        // Add properties to the structure.\n        api.properties = function (someProperties) {\n            var sanitizedProperties = Object.keys(someProperties).map(function (propName) {\n                return Object.assign(someProperties[propName], {\n                    propName: propName\n                });\n            }).map(sanitizeProperty).reduce(function (previous, current) {\n                previous[current.propName] = current;\n                return previous;\n            }, {});\n\n            Object.assign(struct.properties, sanitizedProperties);\n\n            return api;\n        };\n        // Add methods to the structure.\n        api.methods = function (someMethods) {\n            Object.assign(struct.methods, someMethods);\n            return api;\n        };\n        // Add a listener to the structure.\n        api.listen = function (queries, fn) {\n            queries.trim().split(',').map(function (query) {\n                var parts = query.trim().split(' ');\n                return {\n                    event: parts[0].trim(),\n                    target: (parts[1] || '').trim(),\n                    fn: fn\n                };\n            }).forEach(function (listener) {\n                struct.listeners.push(listener);\n            });\n            return api;\n        };\n        // Add a feature to the structure.\n        api.feature = function (fn, options, level) {\n            struct.features.push({\n                fn: fn,\n                options: options || {},\n                level: isNaN(level) ? 0 : level\n            });\n            return api;\n        };\n        // Register the custom element if not already done.\n        api.register = function () {\n            if (!registered) {\n                registered = true;\n                return build(struct);\n            }\n        };\n        // Get the current structure.\n        api.get = function () {\n            return struct;\n        };\n        return api;\n    }\n\n    // The `ced()` function.\n    function ceb(params) {\n        var api = {};\n        // A builder is given when a name is known.\n        api.name = function (tagName) {\n            return builder(tagName, params);\n        };\n        return api;\n    }\n\n    return ceb;\n}));\n"]}