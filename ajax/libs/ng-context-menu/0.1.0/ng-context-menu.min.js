angular.module("ng-context-menu",[]).directive("contextMenu",["$window","$parse",function(n,e){return{restrict:"A",link:function(t,a,o){function u(n,e){e.addClass("open"),e.css("top",Math.max(n.pageY,0)+"px"),e.css("left",Math.max(n.pageX,0)+"px"),p=!0}function c(n){p=!1,n.removeClass("open")}function i(n){r||!p||2===n.button&&n.target===l||t.$apply(function(){c(f)})}var l,p=!1,r=t.$eval(o.contextMenuDisabled),d=angular.element(n),f=null,s=e(o.contextMenu);a.bind("contextmenu",function(n){r||(null===f&&(f=angular.element(document.getElementById(o.target))),l=n.target,n.preventDefault(),n.stopPropagation(),t.$apply(function(){s(t,{$event:n}),u(n,f)}))}),d.bind("keyup",function(n){!r&&p&&27===n.keyCode&&t.$apply(function(){c(f)})}),d.bind("click",i),d.bind("contextmenu",i)}}}]);