angular.module("ng-context-menu",[]).factory("ContextMenuService",function(){return{menuElement:null}}).directive("contextMenu",["$document","$parse","ContextMenuService",function(e,n,t){return{restrict:"A",link:function(u,o,c){function a(e,n){n.addClass("open"),n.css("top",Math.max(e.pageY,0)+"px"),n.css("left",Math.max(e.pageX,0)+"px"),r=!0}function l(e){e.removeClass("open"),r=!1}function m(e){p||!r||2===e.button&&e.target===i||u.$apply(function(){l(t.menuElement)})}var i,r=!1,p=u.$eval(c.contextMenuDisabled),f=n(c.contextMenu);o.bind("contextmenu",function(e){p||(null!==t.menuElement&&l(t.menuElement),t.menuElement=angular.element(document.getElementById(c.target)),i=e.target,e.preventDefault(),e.stopPropagation(),u.$apply(function(){f(u,{$event:e}),a(e,t.menuElement)}))}),e.bind("keyup",function(e){!p&&r&&27===e.keyCode&&u.$apply(function(){l(t.menuElement)})}),e.bind("click",m),e.bind("contextmenu",m)}}}]);