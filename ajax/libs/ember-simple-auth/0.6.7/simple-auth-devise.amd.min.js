!function(e){var t=e.define,i=e.require,s=e.Ember;"undefined"==typeof s&&"undefined"!=typeof i&&(s=i("ember")),s.libraries.register("Ember Simple Auth Devise","0.6.7"),t("simple-auth-devise/authenticators/devise",["simple-auth/authenticators/base","simple-auth/utils/is-secure-url","./../configuration","exports"],function(e,t,i,n){"use strict";var r=e["default"],u=t["default"],a=i["default"];n["default"]=r.extend({serverTokenEndpoint:"/users/sign_in",resourceName:"user",init:function(){this.serverTokenEndpoint=a.serverTokenEndpoint,this.resourceName=a.resourceName},restore:function(e){return new s.RSVP.Promise(function(t,i){s.isEmpty(e.user_token)||s.isEmpty(e.user_email)?i():t(e)})},authenticate:function(e){var t=this;return new s.RSVP.Promise(function(i,n){var r={};r[t.resourceName]={email:e.identification,password:e.password},t.makeRequest(r).then(function(e){s.run(function(){i(e)})},function(e){s.run(function(){n(e.responseJSON||e.responseText)})})})},invalidate:function(){return s.RSVP.resolve()},makeRequest:function(e){return u(this.serverTokenEndpoint)||s.Logger.warn("Credentials are transmitted via an insecure connection - use HTTPS to keep them secure."),s.$.ajax({url:this.serverTokenEndpoint,type:"POST",data:e,dataType:"json",beforeSend:function(e,t){e.setRequestHeader("Accept",t.accepts.json)}})}})}),t("simple-auth-devise/authorizers/devise",["simple-auth/authorizers/base","simple-auth/utils/is-secure-url","exports"],function(e,t,i){"use strict";var n=e["default"],r=t["default"];i["default"]=n.extend({authorize:function(e,t){var i=this.get("session.user_token"),n=this.get("session.user_email");if(this.get("session.isAuthenticated")&&!s.isEmpty(i)&&!s.isEmpty(n)){r(t.url)||s.Logger.warn("Credentials are transmitted via an insecure connection - use HTTPS to keep them secure.");var u='token="'+i+'", user_email="'+n+'"';e.setRequestHeader("Authorization","Token "+u)}}})}),t("simple-auth-devise/configuration",["simple-auth/utils/load-config","exports"],function(e,t){"use strict";var i=e["default"],s={serverTokenEndpoint:"/users/sign_in",resourceName:"user"};t["default"]={serverTokenEndpoint:s.serverTokenEndpoint,resourceName:s.resourceName,load:i(s)}}),t("simple-auth-devise/ember",["./initializer"],function(e){"use strict";var t=e["default"];s.onLoad("Ember.Application",function(e){e.initializer(t)})}),t("simple-auth-devise/initializer",["./configuration","simple-auth/utils/get-global-config","simple-auth-devise/authenticators/devise","simple-auth-devise/authorizers/devise","exports"],function(e,t,i,s,n){"use strict";var r=e["default"],u=t["default"],a=i["default"],o=s["default"];n["default"]={name:"simple-auth-devise",before:"simple-auth",initialize:function(e){var t=u("simple-auth-devise");r.load(e,t),e.register("simple-auth-authorizer:devise",o),e.register("simple-auth-authenticator:devise",a)}}})}("undefined"!=typeof global?global:window);