!function(b){function c(d){this.$el=b(d);this.targets=[];this.on="";this.className="";this.self=false;if(this.$el.length){Gumby.debug("Initializing Toggle",d);this.init()}}function a(d){this.$el=b(d);this.targets=[];this.on="";this.className="";this.self=false;if(this.$el.length){Gumby.debug("Initializing Switch",d);this.init()}}c.prototype.init=function(){var d=this;this.setup();this.$el.on(this.on,function(f){f.preventDefault();d.trigger(d.triggered)}).on("gumby.trigger",function(){Gumby.debug("Trigger event triggered",d.$el);d.trigger(d.triggered)}).on("gumby.initialize",function(){Gumby.debug("Re-initializing "+d.constructor,$el);d.setup()})};c.prototype.setup=function(){this.targets=this.parseTargets();this.on=Gumby.selectAttr.apply(this.$el,["on"])||Gumby.click;this.className=Gumby.selectAttr.apply(this.$el,["classname"])||"active";this.self=Gumby.selectAttr.apply(this.$el,["self"])==="false"};c.prototype.parseTargets=function(){var f=Gumby.selectAttr.apply(this.$el,["trigger"]),e=0,d=[];if(!f){return false}e=f.indexOf("|");if(e===-1){if(!this.checkTargets([f])){return false}return[b(f)]}d=f.split("|");if(!this.checkTargets(d)){return false}return d.length>1?[b(d[0]),b(d[1])]:[b(d[0])]};c.prototype.checkTargets=function(d){var e=0;for(e;e<d.length;e++){if(d[e]&&!b(d[e]).length){Gumby.error("Cannot find "+this.constructor.name+" target: "+d[e]);return false}}return true};c.prototype.triggered=function(){Gumby.debug("Triggering onTrigger event",this.$el);this.$el.trigger("gumby.onTrigger",[this.$el.hasClass(this.className)])};a.prototype=new c();a.prototype.constructor=a;c.prototype.trigger=function(e){Gumby.debug("Triggering Toggle",this.$el);var d;if(!this.targets){this.$el.toggleClass(this.className)}else{if(this.targets.length==1){this.$el.add(this.targets[0]).toggleClass(this.className)}else{if(this.targets.length>1){if(this.targets[0].hasClass(this.className)){d=this.targets[0];if(!this.self){d=d.add(this.$el)}d.removeClass(this.className);this.targets[1].addClass(this.className)}else{d=this.targets[0];if(!this.self){d=d.add(this.$el)}d.addClass(this.className);this.targets[1].removeClass(this.className)}}}}if(e&&typeof e==="function"){e.apply(this)}};a.prototype.trigger=function(e){Gumby.debug("Triggering Switch",this.$el);var d;if(!this.targets){this.$el.addClass(this.className)}else{if(this.targets.length==1){d=this.targets[0];if(!this.self){d=d.add(this.$el)}d.addClass(this.className)}else{if(this.targets.length>1){d=this.targets[0];if(!this.self){d=d.add(this.$el)}d.addClass(this.className);this.targets[1].removeClass(this.className)}}}if(e&&typeof e==="function"){e.apply(this)}};Gumby.addInitalisation("toggles",function(d){b(".toggle").each(function(){var e=b(this);if(e.data("isToggle")&&!d){return true}else{if(e.data("isToggle")&&d){e.trigger("gumby.initialize")}}e.data("isToggle",true);new c(e)})});Gumby.addInitalisation("switches",function(d){b(".switch").each(function(){var e=b(this);if(e.data("isSwitch")&&!d){return true}else{if(e.data("isSwitch")&&d){e.trigger("gumby.initialize");return true}}e.data("isSwitch",true);new a(e)})});Gumby.UIModule({module:"toggleswitch",events:["initialize","trigger","onTrigger"],init:function(){Gumby.initialize("switches");Gumby.initialize("toggles")}})}(jQuery);