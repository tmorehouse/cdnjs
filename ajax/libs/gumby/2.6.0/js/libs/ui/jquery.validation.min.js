!function(a){function b(e,d){if(Gumby){Gumby.debug("Initializing Validation",e)}this.$this=e;this.$field=this.$this.parents(".field");this.req=d||function(){return !!this.$this.val().length};var c=this;if(this.$this.is("[type=checkbox], [type=radio]")){this.$field=this.$this.parent("label");this.$field.on("gumby.onChange",function(){c.validate()})}else{if(this.$this.is("select")){this.$field=this.$this.parents(".picker");this.$field.on("change",function(){c.validate()})}else{this.$this.on("blur",function(f){if(f.which!==9){c.validate()}})}}}b.prototype.validate=function(){var c=this.req(this.$this);if(!c){this.$field.removeClass("success").addClass("danger")}else{this.$field.removeClass("danger").addClass("success")}return c};a.fn.validation=function(c){var e=a.extend({submit:false,fail:false,required:[]},c),d=[];return this.each(function(){if(!e.required.length){return false}var g=a(this),h=e.required.length,f;for(f=0;f<h;f++){d.push(new b(g.find('[name="'+e.required[f].name+'"]'),e.required[f].validate||false))}g.on("submit",function(l){var j=false;if(!g.data("passed")){l.preventDefault();var m=d.length,k;for(k=0;k<m;k++){if(!d[k].validate()){j=true}}if(!j){if(e.submit&&typeof e.submit==="function"){e.submit(g.serializeArray());return}g.data("passed",true).submit()}else{if(e.fail&&typeof e.fail==="function"){e.fail();return}}}})})}}(jQuery);