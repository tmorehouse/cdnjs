Ink.createModule("Ink.UI.Tabs","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,i,n,s,a){"use strict";var o=function(i,s){this._element=e.elOrSelector(i,"Ink.UI.Tabs tab container"),this._options=Ink.extendObj({preventUrlChange:!1,active:void 0,disabled:[],onBeforeChange:void 0,onChange:void 0,triggerEventsOnLoad:!0},s||{},n.data(this._element)),this._handlers={tabClicked:Ink.bindEvent(this._onTabClicked,this),disabledTabClicked:Ink.bindEvent(this._onDisabledTabClicked,this),resize:Ink.bindEvent(t.throttle(this._onResize,100),this)},this._init()};return o.prototype={_init:function(){this._menu=s.select(".tabs-nav",this._element)[0],this._menuTabs=this._menu.children,this._contentTabs=s.select(".tabs-content",this._element),this._initializeDom(),this._observe(),this._setFirstActive(),this._handlers.resize(),e.registerInstance(this,this._element,"tabs")},_initializeDom:function(){for(var e=0;e<this._contentTabs.length;e++)i.addClassName(this._contentTabs[e],"hide-all")},_observe:function(){a.each(this._menuTabs,Ink.bind(function(e){var t=s.select("a",e)[0];a.inArray(t.getAttribute("href"),this._options.disabled)?this.disable(t):this.enable(t)},this)),t.observe(window,"resize",this._handlers.resize)},_setFirstActive:function(){var e=window.location.hash,t=this._findLinkByHref(e)||this._options.active&&this._findLinkByHref(this._options.active)||s.select("a",this._menu)[0];this._changeTab(t,this._options.triggerEventsOnLoad)},_changeTab:function(e,t){t&&"undefined"!=typeof this._options.onBeforeChange&&this._options.onBeforeChange(this);var n=e.getAttribute("href");return this._activeMenuTab&&(i.removeClassName(this._activeMenuTab,"active"),i.removeClassName(this._activeContentTab,"active"),i.addClassName(this._activeContentTab,"hide-all")),this._activeMenuLink=e,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeContentTab=s.select(n.substr(n.indexOf("#")),this._element)[0],this._activeContentTab?(i.addClassName(this._activeMenuTab,"active"),i.addClassName(this._activeContentTab,"active"),i.removeClassName(this._activeContentTab,"hide-all"),void(t&&"undefined"!=typeof this._options.onChange&&this._options.onChange(this))):void(this._activeMenuLink=this._activeMenuTab=this._activeContentTab=null)},_onTabClicked:function(e){t.stop(e);var i=t.findElement(e,"A");if(i&&"a"===i.nodeName.toLowerCase()){var n=i.getAttribute("href").substr(i.getAttribute("href").indexOf("#"));n&&null!==Ink.i(n.replace(/^#/,""))&&("true"!==this._options.preventUrlChange.toString()&&(window.location.hash=n),i!==this._activeMenuLink&&this.changeTab(i))}},_onDisabledTabClicked:function(e){t.stop(e)},_onResize:function(){var t=e.currentLayout();if(t!==this._lastLayout){var n=t===e.Layouts.TINY||t===e.Layouts.SMALL||t===e.Layouts.MEDIUM;n?(i.removeClassName(this._menu,"menu"),i.removeClassName(this._menu,"horizontal")):(i.addClassName(this._menu,"menu"),i.addClassName(this._menu,"horizontal")),this._lastLayout=t}},_hashify:function(e){return e?0===e.indexOf("#")?e:"#"+e:""},_findLinkByHref:function(e){return e=this._hashify(e),s.select('a[href$="'+e+'"]',this._menu)[0]},changeTab:function(e){var t=1===e.nodeType?e:this._findLinkByHref(this._hashify(e));t&&!i.hasClassName(t,"ink-disabled")&&this._changeTab(t,!0)},disable:function(e){var n=1===e.nodeType?e:this._findLinkByHref(this._hashify(e));n&&(t.stopObserving(n,"click",this._handlers.tabClicked),t.observe(n,"click",this._handlers.disabledTabClicked),i.addClassName(n,"ink-disabled"))},enable:function(e){var n=1===e.nodeType?e:this._findLinkByHref(this._hashify(e));n&&(t.stopObserving(n,"click",this._handlers.disabledTabClicked),t.observe(n,"click",this._handlers.tabClicked),i.removeClassName(n,"ink-disabled"))},activeTab:function(){return this._activeContentTab.getAttribute("id")},activeMenuTab:function(){return Ink.warn("Ink.UI.Tabs.activeMenuTab() is deprecated"),this._activeMenuTab},activeMenuLink:function(){return this._activeMenuLink},activeContentTab:function(){return this._activeContentTab},destroy:e.destroyComponent},o});