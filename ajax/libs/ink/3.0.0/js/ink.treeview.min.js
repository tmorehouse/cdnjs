Ink.createModule("Ink.UI.TreeView","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(t,e,n,s,i,o){"use strict";var l=function(e,n){this._element=t.elOrSelector(e,"[Ink.UI.TreeView_1]"),this._options=t.options("Treeview",{node:["String","li"],child:["String",null],children:["String","ul"],parentClass:["String","parent"],openNodeClass:["String","open"],openClass:["String","fa fa-minus-circle"],closedClass:["String","fa fa-plus-circle"],hideClass:["String","hide-all"],iconTag:["String","i"],stopDefault:["Boolean",!0]},n||{},this._element),this._options.child&&(Ink.warn("Ink.UI.TreeView: options.child is being renamed to options.children."),this._options.children=this._options.child),this._init()};return l.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)},e.on(this._element,"click",this._options.node,this._handlers.click),o.each(Ink.ss(this._options.node,this._element),Ink.bind(function(t){if(this.isParent(t)){n.addClassName(t,this._options.parentClass);var e=this.isOpen(t);this._getIcon(t)||s.create(this._options.iconTag,{insertTop:t}),this._setNodeOpen(t,e)}},this))},_getIcon:function(t){return Ink.s("> "+this._options.iconTag,t)},isOpen:function(t){if(!this._getChild(t))throw new Error("not a node!");return"true"===s.data(t).open||n.hasClassName(t,this._options.openNodeClass)},isParent:function(t){return n.hasClassName(t,this._options.parentClass)||null!=this._getChild(t)},_setNodeOpen:function(t,e){var s=this._getChild(t);if(s){n.setClassName(s,this._options.hideClass,!e);var i=this._getIcon(t);t.setAttribute("data-open",e);var o=e?this._options.openClass:this._options.closedClass,l=e?this._options.closedClass:this._options.openClass;n.removeClassName(i,l),n.addClassName(i,o),n.setClassName(t,this._options.openNodeClass,e)}else Ink.error("Ink.UI.TreeView: node",t,"is not a node!")},open:function(t){this._setNodeOpen(t,!0)},close:function(t){this._setNodeOpen(t,!1)},toggle:function(t){this.isOpen(t)?this.close(t):this.open(t)},_getChild:function(t){return i.select(this._options.children,t)[0]||null},_onClick:function(t){!this.isParent(t.currentTarget)||i.matchesSelector(t.target,this._options.node)||i.matchesSelector(t.target,this._options.children)||(this._options.stopDefault&&t.preventDefault(),this.toggle(t.currentTarget))}},l});