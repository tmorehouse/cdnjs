Ink.createModule("Ink.UI.Spy","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,e,n,o,i){"use strict";function r(t){for(var e=0,n=h.length;n>e;e++)if(h[e][0]===t)return e;return null}function l(t,e){var n=r(e);null===n?h.push([e,[t]]):h[n][1].push(t)}function s(){f||(f=!0,e.observe(document,"scroll",e.throttle(a,300)))}function a(){for(var t=0,e=h.length;e>t;t++)c(h[t][0],h[t][1])}function c(t,e){for(var r=u(e),l=i.select("li.active",t),s=0,a=l.length;a>s;s++)n.removeClassName(l[s],"active");if(null!==r){var c='a[href$="#'+(r.name||r.id)+'"]',h=i.select(c,t);for(s=0,a=h.length;a>s;s++)n.addClassName(o.findUpwardsByTag(h[s],"li"),"active")}}function u(t){for(var e,n,o=-1/0,i=0,r=t.length;r>i;i++)n=t[i].getBoundingClientRect(),n.top<=0&&n.top>o&&(o=n.top,e=i);return void 0===e?null:t[e]}var h=[],f=!1,_=function(e,n){this._element=t.elOrSelector(e,"Ink.UI.Spy_1: Section element"),this._options=Ink.extendObj({target:void 0,activeClass:"active"},o.data(this._element)),this._options=Ink.extendObj(this._options,n||{}),this._options.target=t.elOrSelector(this._options.target,"Ink.UI.Spy_1: Target element"),this._init()};return _.prototype={_init:function(){l(this._element,this._options.target),s(),a()}},_});