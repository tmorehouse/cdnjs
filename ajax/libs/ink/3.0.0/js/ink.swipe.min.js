Ink.createModule("Ink.UI.Swipe","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.UI.Common_1"],function(t,e,n){"use strict";function i(t,i){t=n.elOrSelector(t,"Swipe target"),this._options=Ink.extendObj({onEnd:void 0,onStart:void 0,onMove:void 0,minDist:void 0,maxDist:void 0,minDuration:void 0,maxDuration:void 0,axis:void 0,storeGesture:!1,stopEvents:!0},e.data(t),i||{}),"function"==typeof i&&(this._options.onEnd=i),this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)},this._element=t,this._init()}return i.prototype={version:"0.1",_supported:"ontouchstart"in document.documentElement,_init:function(){var e=document.body;t.observe(e,"touchstart",this._handlers.down),(this._options.storeGesture||this._options.onMove)&&t.observe(e,"touchmove",this._handlers.move),t.observe(e,"touchend",this._handlers.up),this._isOn=!1},_isMeOrParent:function(t,e){if(t){do{if(t===e)return!0;t=t.parentNode}while(t);return!1}},_pushGesture:function(t,e){this._options.storeGesture&&(this._gesture.push(t),this._time.push(e))},_onDown:function(e){1===e.changedTouches.length&&this._isMeOrParent(e.target,this._element)&&(this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!0,this._target=e.target,this._t0=+new Date,this._p0=[e.pageX,e.pageY],this._options.storeGesture&&(this._gesture=[],this._time=[]),this._pushGesture(this._p0,0),this._options.onStart&&this._options.onStart({event:e,element:this._element,instance:this,position:this._p0,dt:0}))},_onMove:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0];var n=+new Date,i=n-this._t0,s=[e.pageX,e.pageY];this._pushGesture(s,i),this._options.onMove&&this._options.onMove({event:e,element:this._element,instance:this,position:s,dt:i})}},_onUp:function(e){if(this._isOn&&1===e.changedTouches.length){this._options.stopEvents===!0&&t.stop(e),e=e.changedTouches[0],this._isOn=!1;var n=+new Date,i=[e.pageX,e.pageY],s=n-this._t0,o=[i[0]-this._p0[0],i[1]-this._p0[1]],h=Math.sqrt(o[0]*o[0]+o[1]*o[1]),a=Math.abs(o[0])>Math.abs(o[1])?"x":"y",_=this._options;_.minDist&&h<_.minDist||_.maxDist&&h>_.maxDist||_.minDuration&&s<_.minDuration||_.maxDuration&&s>_.maxDuration||_.axis&&a!==_.axis||this._options.onEnd&&this._options.onEnd({event:e,element:this._element,instance:this,gesture:this._gesture,time:this._time,axis:a,overallMovement:o,overallTime:s})}}},i});