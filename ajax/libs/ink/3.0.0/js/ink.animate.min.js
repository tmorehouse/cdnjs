Ink.createModule("Ink.UI.Animate",1,["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(n,t,i){"use strict";function o(i,o){this._element=n.elOrSelector(i),this._options=n.options({trigger:["Element",null],duration:["String","slow"],animation:["String"],removeClass:["Boolean",!0],onEnd:["Function",function(){}]},o||{},this._element),isNaN(parseInt(this._options.duration,10))||(this._options.duration=parseInt(this._options.duration,10)),this._options.trigger?t.observe(this._options.trigger,"click",Ink.bind(function(){this.animate()},this)):this.animate()}var e=function(n){return"animationName"in n.style?"animation":"oAnimationName"in n.style?"oAnimation":"msAnimationName"in n.style?"msAnimation":"webkitAnimationName"in n.style?"webkitAnimation":null}(document.createElement("div")),a={animation:"animationend",oAnimation:"oanimationend",msAnimation:"MSAnimationEnd",webkitAnimation:"webkitAnimationEnd"}[e];return o.prototype.animate=function(){o.animate(this._element,this._options.animation,this._options)},Ink.extendObj(o,{_animationPrefix:e,animationSupported:!!e,animationEndEventName:a,animate:function(t,m,s){function r(n){n.target===t&&n.animationName===m&&(s.onEnd&&s.onEnd(n),s.removeClass&&i.removeClassName(t,m),"string"==typeof s.duration&&i.removeClassName(t,s.duration),t.removeEventListener(a,r,!1))}return t=n.elOrSelector(t),("number"==typeof s||"string"==typeof s)&&(s={duration:s}),"function"==typeof arguments[3]&&(s.onEnd=arguments[3]),"number"!=typeof s.duration&&"string"!=typeof s.duration&&(s.duration=400),o.animationSupported?("number"==typeof s.duration?t.style[e+"Duration"]=s.duration+"ms":"string"==typeof s.duration&&i.addClassName(t,s.duration),i.addClassName(t,["animated",m]),void t.addEventListener(a,r,!1)):void(s.onEnd&&setTimeout(function(){s.onEnd(null)},0))}}),o});