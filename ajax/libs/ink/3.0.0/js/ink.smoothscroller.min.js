Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Dom.Loaded_1"],function(e,n,o,t){"use strict";var a=window.requestAnimationFrame||function(e){return setTimeout(e,10)},r=window.cancelAnimationFrame||function(e){clearTimeout(e)},l={speed:10,getTop:function(e){return Math.round(l.scrollTop()+e.getBoundingClientRect().top)},scrollTop:function(){var e=document.body,n=document.documentElement;return e&&e.scrollTop?e.scrollTop:n&&n.scrollTop?n.scrollTop:window.pageYOffset?window.pageYOffset:0},add:function(n,o,t){e.observe(n,o,t)},end:function(n){e.stopDefault(n)},scroll:function(e,n){var o=l.scrollTop(),t=n.margin||0,i=e-t;o+=i>o?Math.ceil((i-o)/l.speed):(i-o)/l.speed,r(l.interval),o!==i&&l.offsetTop!==o?l.interval=a(Ink.bindMethod(l,"scroll",e,n),document.body):l.onDone(),window.scrollTo(0,o),l.offsetTop=o},init:function(e){t.run(Ink.bindMethod(l,"render",e))},render:function(n){for(var t=o.select(n||"a.scrollableLink,a.ink-smooth-scroll"),a=0;a<t.length;a++){var r=t[a];!r.href||-1===r.href.indexOf("#")||r.pathname!==location.pathname&&"/"+r.pathname!==location.pathname||e.observe(r,"click",Ink.bindEvent(l.onClick,this,r))}},onClick:function(e,t){if(l.end(e),null!=t&&null!==t.getAttribute("href")){var a=t.href.indexOf("#");if(-1===a)return;var r=n.data(t),i=t.href.substr(a+1),c="ul > li.active > "+s,s='a[name="'+i+'"],#'+i,d=o.select(s)[0],u=o.select(c)[0];if(u=u&&u.parentNode,"undefined"!=typeof d){-1===t.parentNode.className.indexOf("active")&&(u&&(u.className=u.className.replace(/(^|\s+)active($|\s+)/g,"")),t.parentNode.className+=" active"),l.hash=i;var f={};parseFloat(r.margin)&&(f.margin=parseFloat(r.margin)),l.scroll(l.getTop(d),f)}}},onDone:function(){window.location.hash=l.hash}};return l});