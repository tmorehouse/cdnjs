Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Common_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(t,s,e,i,n){"use strict";var a=function(t,s,e){var i=document.createElement("a");if(i.setAttribute("href","#"),"number"==typeof s&&i.setAttribute("data-index",s),e&&e.wrapText){var n=document.createElement("span");i.appendChild(n),n.innerHTML=t}else i.innerHTML=t;return i},o=function(s,e){this._element=t.elOrSelector(s,"Ink.UI.Pagination element"),this._options=t.options("Ink.UI.Pagination_1",{size:["Integer",null],totalItemCount:["Integer",null],itemsPerPage:["Integer",null],maxSize:["Integer",null],start:["Integer",1],sideButtons:["Boolean",1],firstLabel:["String","First"],lastLabel:["String","Last"],previousLabel:["String","Previous"],nextLabel:["String","Next"],previousPageLabel:["String",null],nextPageLabel:["String",null],onChange:["Function",void 0],hashParameter:["String","page"],parentTag:["String","ul"],childTag:["String","li"],wrapperClass:["String","ink-navigation"],paginationClass:["String","pagination"],activeClass:["String","active"],disabledClass:["String","disabled"],hideClass:["String","hide-all"],previousClass:["String","previous"],previousPageClass:["String","previousPage"],nextClass:["String","next"],nextPageClass:["String","nextPage"],numberFormatter:["Function",function(t){return t+1}]},e||{},this._element),this._options.previousPageLabel||(this._options.previousPageLabel=this._options.previousLabel+" "+this._options.maxSize),this._options.nextPageLabel||(this._options.nextPageLabel=this._options.nextLabel+" "+this._options.maxSize),this._handlers={click:Ink.bindEvent(this._onClick,this)},t.isInteger(this._options.totalItemCount)&&t.isInteger(this._options.itemsPerPage)?this._size=this._calculateSize(this._options.totalItemCount,this._options.itemsPerPage):t.isInteger(this._options.size)?this._size=this._options.size:(Ink.error("Ink.UI.Pagination: Please supply a size option or totalItemCount and itemsPerPage options."),this._size=0),this.setOnChange(this._options.onChange),this._current=this._options.start-1,this._itemLiEls=[],this._init()};return o.prototype={_init:function(){this._generateMarkup(this._element),this._updateItems(),this._observe(),t.registerInstance(this,this._element,"pagination")},_observe:function(){s.observeDelegated(this._element,"click","."+this._options.paginationClass+" > "+this._options.childTag,this._handlers.click)},_calculateSize:function(t,s){return Math.ceil(t/s)},_updateItems:function(){var t,s,i,n=this._itemLiEls,o=this._size===n.length;if(o)for(t=0,s=this._size;s>t;++t)e.setClassName(n[t],this._options.activeClass,t===this._current);else{for(t=n.length-1;t>=0;--t)this._ulEl.removeChild(n[t]);for(n=[],t=0,s=this._size;s>t;++t)i=document.createElement(this._options.childTag),i.appendChild(a(this._options.numberFormatter(t),t)),e.setClassName(i,this._options.activeClass,t===this._current),this._ulEl.insertBefore(i,this._nextEl),n.push(i);this._itemLiEls=n}if(this._options.maxSize){var r=Math.floor(this._current/this._options.maxSize),h=this._options.maxSize*r,l=h+this._options.maxSize-1;for(t=0,s=this._size;s>t;++t)i=n[t],e.setClassName(i,this._options.hideClass,h>t||t>l);this._pageStart=h,this._pageEnd=l,this._page=r,e.setClassName(this._prevPageEl,this._options.disabledClass,!this.hasPreviousPage()),e.setClassName(this._nextPageEl,this._options.disabledClass,!this.hasNextPage()),e.setClassName(this._firstEl,this._options.disabledClass,this.isFirst()),e.setClassName(this._lastEl,this._options.disabledClass,this.isLast())}this._prevEl&&e.setClassName(this._prevEl,this._options.disabledClass,!this.hasPrevious()),this._nextEl&&e.setClassName(this._nextEl,this._options.disabledClass,!this.hasNext())},_generateMarkup:function(t){e.addClassName(t,"ink-navigation");var s=Ink.s("."+this._options.paginationClass,t),i=!1;s?i=!0:(s=document.createElement(this._options.parentTag),e.addClassName(s,this._options.paginationClass));var n=e.hasClassName(s,"chevron"),o=e.hasClassName(s,"dotted"),r=Ink.bind(function(t,i){var n=document.createElement(this._options.childTag),o=a(this._options[t+"Label"],void 0,{wrapText:i&&i.wrapText});return e.addClassName(n,this._options[t+"Class"]),n.appendChild(o),s.appendChild(n),n},this);!o&&this._options.maxSize&&(this._firstEl=r("first"),this._prevPageEl=r("previousPage")),(o&&this._options.sideButtons===!0||!o&&this._options.sideButtons)&&(this._prevEl=r("previous",{wrapText:n}),this._nextEl=r("next",{wrapText:n})),!o&&this._options.maxSize&&(this._nextPageEl=r("nextPage"),this._lastEl=r("last")),i||t.appendChild(s),this._ulEl=s},_onClick:function(t){s.stop(t);var i=s.element(t);if(!e.hasClassName(i,this._options.activeClass)&&!e.hasClassName(i,this._options.disabledClass)){var a=e.hasClassName(i,this._options.previousClass),o=e.hasClassName(i,this._options.nextClass),r=e.hasClassName(i,this._options.previousPageClass),h=e.hasClassName(i,this._options.nextPageClass),l=e.hasClassName(i,this._options.firstClass),_=e.hasClassName(i,this._options.lastClass);if(l)this.setCurrent(0);else if(_)this.setCurrent(this._size-1);else if(r||h)this.setCurrent((r?-1:1)*this._options.maxSize,!0);else if(a||o)this.setCurrent(a?-1:1,!0);else{var p=n.select("[data-index]",i)[0],u=p&&parseInt(p.getAttribute("data-index"),10);this.setCurrent(u)}}},setOnChange:function(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("onChange option must be a function!");this._onChange=t},setSize:function(s){if(!t.isInteger(s))throw new TypeError("1st argument must be an integer number!");this._size=s,this._updateItems(),this._current=0},setSizeInItems:function(t,s){var e=Math.ceil(t/s);this.setSize(e)},setCurrent:function(s,e){if(!t.isInteger(s))throw new TypeError("1st argument must be an integer number!");e&&(s+=this._current),s>this._size-1&&(s=this._size-1),0>s&&(s=0),this._current=s,this._updateItems(),this._onChange&&this._onChange(this,s)},getSize:function(){return this._size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize-1},hasNextPage:function(){return this._options.maxSize&&this._size-this._current>=this._options.maxSize+1},destroy:t.destroyComponent},o});