(function(){var n,r,e,t,u,i,c,o,l,s,a,f,p=[].slice;c=require("querystring"),l=require("url").resolve,f=require("fairmont"),u=f.include,t=f.clone,a=f.type,e=f.base64,i=require("typely").overload,r=require("evie"),o=require("./request").request,n={basic:function(n){var r,t;return t=n.username,r=n.password,"Basic "+e(""+t+":"+r)}},s=i(function(e){return e("string",function(n){return s({url:n})}),e("string","object",function(n,r){return s({url:n,description:r})}),e("object",function(e){var c,f,v,g,d,m,b,q,y,h;q=e.url,v=e.events,f=e.description,d=function(n,r){return null==r&&(r=f),s({url:l(q,n),events:v.source(),description:r})},g=function(){var n;return n=require("url-template").parse(q),function(r,e){return null==e&&(e=f),s({url:n.expand(r),events:v.source(),description:e})}}(),m=function(r){var e;return null==r.events&&(r.events=v),null==r.url&&(r.url=q),null==r.headers&&(r.headers={}),e=function(){return o.apply(null,[r].concat(p.call(arguments)))},e.invoke=function(){return e.apply(null,arguments)},u(e,{authorize:function(e){var u,i,c,o;return i=Object.keys(e)[0],c=n[i],u=c(e[i]),o=t(r),o.headers.authorization=u,m(o)}}),e},null==v&&(v=new r),h=i(function(n){return n("string",function(n){return d(n)}),n("string","object",function(n,r){return d(n,r)}),n("object",function(n){return g(n)}),n("object","object",function(n,r){return g(n,r)})}),h.on=function(){var n;return n=1<=arguments.length?p.call(arguments,0):[],v.on.apply(v,n),h},y=function(n,r){return h[n]=function(){switch(a(r)){case"object":return m(t(r));case"function":return r(function(){return 1===arguments.length?h.apply(null,p.call(arguments).concat([{}])):h.apply(null,arguments)})}}()};for(b in f)c=f[b],y(b,c);return h})}),module.exports={resource:s}}).call(this);