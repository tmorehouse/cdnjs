!function(s){function n(s){function n(s,n){for(var t=null,i=0;i<n.length&&s!=n[i];++i)n[i].stack==s.stack&&(t=n[i]);return t}function t(s,t,i){if(null!=t.stack){var l=n(t,s.getData());if(l){for(var o,e,u,p,a,f,r,h=i.pointsize,c=i.points,g=l.datapoints.pointsize,k=l.datapoints.points,v=[],b=t.lines.show,d=t.bars.show,w=b&&t.lines.steps,z=0,D=0;;){if(z>=c.length)break;if(r=v.length,D>=k.length||null==k[D]||null==c[z]){for(m=0;h>m;++m)v.push(c[z+m]);z+=h}else{if(o=c[z],e=c[z+1],p=k[D],a=k[D+1],f=0,o==p){for(m=0;h>m;++m)v.push(c[z+m]);v[r+1]+=a,f=a,z+=h,D+=g}else if(o>p){if(b&&z>0&&null!=c[z-h]){for(u=e+(c[z-h+1]-e)*(p-o)/(c[z-h]-o),v.push(p),v.push(u+a),m=2;h>m;++m)v.push(c[z+m]);f=a}D+=g}else{for(m=0;h>m;++m)v.push(c[z+m]);b&&D>0&&null!=k[D-h]&&(f=a+(k[D-h+1]-a)*(o-p)/(k[D-h]-p)),v[r+1]+=f,z+=h}r!=v.length&&d&&(v[r+2]+=f)}if(w&&r!=v.length&&r>0&&null!=v[r]&&v[r]!=v[r-h]&&v[r+1]!=v[r-h+1]){for(m=0;h>m;++m)v[r+h+m]=v[r+m];v[r+1]=v[r-h+1]}}i.points=v}}}s.hooks.processDatapoints.push(t)}var t={series:{stack:null}};s.plot.plugins.push({init:n,options:t,name:"stack",version:"1.0"})}(jQuery);