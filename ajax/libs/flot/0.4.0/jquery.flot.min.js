!function(t){function e(e,r,s){function c(t){J=m(t),d(),h()}function m(t){for(var e=[],n=0;n<t.length;++n){var i;if(t[n].data){i={};for(var a in t[n])i[a]=t[n][a]}else i={data:t[n]};e.push(i)}return e}function u(e){t.extend(!0,R,e),R.xaxis.noTicks&&null==R.xaxis.ticks&&(R.xaxis.ticks=R.xaxis.noTicks),R.yaxis.noTicks&&null==R.yaxis.ticks&&(R.yaxis.ticks=R.yaxis.noTicks)}function d(){var e,n=J.length,i=[],l=[];for(e=0;e<J.length;++e){var r=J[e].color;null!=r&&(--n,"number"==typeof r?l.push(r):i.push(o(J[e].color)))}for(e=0;e<l.length;++e)n=Math.max(n,l[e]+1);var s=[],c=0;for(e=0;s.length<n;){var m;m=R.colors.length==e?new a(100,100,100):o(R.colors[e]);var u=c%2==1?-1:1,d=1+u*Math.ceil(c/2)*.2;m.scale(d,d,d),s.push(m),++e,e>=R.colors.length&&(e=0,++c)}var h,f=0;for(e=0;e<J.length;++e)h=J[e],null==h.color?(h.color=s[f].toString(),++f):"number"==typeof h.color&&(h.color=s[h.color].toString()),h.lines=t.extend(!0,{},R.lines,h.lines),h.points=t.extend(!0,{},R.points,h.points),h.bars=t.extend(!0,{},R.bars,h.bars),null==h.shadowSize&&(h.shadowSize=R.shadowSize)}function h(){Q.datamin=K.datamin=Number.MAX_VALUE,Q.datamax=K.datamax=Number.MIN_VALUE;for(var t=0;t<J.length;++t)for(var e=J[t].data,n=0;n<e.length;++n)if(null!=e[n]){var i=e[n][0],a=e[n][1];null==i||null==a||isNaN(i=+i)||isNaN(a=+a)?e[n]=null:(i<Q.datamin&&(Q.datamin=i),i>Q.datamax&&(Q.datamax=i),a<K.datamin&&(K.datamin=a),a>K.datamax&&(K.datamax=a))}Q.datamin==Number.MAX_VALUE&&(Q.datamin=0),K.datamin==Number.MAX_VALUE&&(K.datamin=0),Q.datamax==Number.MIN_VALUE&&(Q.datamax=1),K.datamax==Number.MIN_VALUE&&(K.datamax=1)}function f(){if(ne=q.width(),ie=q.height(),q.html(""),q.css("position","relative"),0>=ne||0>=ie)throw"Invalid dimensions for plot, width = "+ne+", height = "+ie;G=t('<canvas width="'+ne+'" height="'+ie+'"></canvas>').appendTo(q).get(0),t.browser.msie&&(G=window.G_vmlCanvasManager.initElement(G)),B=G.getContext("2d"),U=t('<canvas style="position:absolute;left:0px;top:0px;" width="'+ne+'" height="'+ie+'"></canvas>').appendTo(q).get(0),t.browser.msie&&(U=window.G_vmlCanvasManager.initElement(U)),O=U.getContext("2d"),V=t([U,G]),null!=R.selection.mode&&(V.mousedown(N),V.each(function(){this.onmousemove=I})),R.grid.clickable&&V.click(L)}function x(){g(Q,R.xaxis),p(Q,R.xaxis),b(Q,R.xaxis),v(),g(K,R.yaxis),p(K,R.yaxis),b(K,R.yaxis),y(),T(),A()}function g(t,e){var n=null!=e.min?e.min:t.datamin,i=null!=e.max?e.max:t.datamax;if(i-n==0){var a;a=0==i?1:.01,n-=a,i+=a}else{var l=e.autoscaleMargin;null!=l&&(null==e.min&&(n-=(i-n)*l,0>n&&t.datamin>=0&&(n=0)),null==e.max&&(i+=(i-n)*l,i>0&&t.datamax<=0&&(i=0)))}t.min=n,t.max=i}function p(e,i){function a(t,e,n){var i=function(t){return t=""+t,1==t.length?"0"+t:t},a=[],l=!1;null==n&&(n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);for(var o=0;o<e.length;++o){var r=e.charAt(o);if(l){switch(r){case"h":r=""+t.getHours();break;case"H":r=i(t.getHours());break;case"M":r=i(t.getMinutes());break;case"S":r=i(t.getSeconds());break;case"d":r=""+t.getDate();break;case"m":r=""+(t.getMonth()+1);break;case"y":r=""+t.getFullYear();break;case"b":r=""+n[t.getMonth()]}a.push(r),l=!1}else"%"==r?l=!0:a.push(r)}return a.join("")}var l;l="number"==typeof i.ticks&&i.ticks>0?i.ticks:e==Q?ne/100:ie/60;var o,r,s,c,m,u,d,h=(e.max-e.min)/l;if("time"==i.mode){var f={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:525949.2*60*1e3},x=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],g=0;for(null!=i.minTickSize&&(g="number"==typeof i.tickSize?i.tickSize:i.minTickSize[0]*f[i.minTickSize[1]]),m=0;m<x.length-1&&!(h<(x[m][0]*f[x[m][1]]+x[m+1][0]*f[x[m+1][1]])/2&&x[m][0]*f[x[m][1]]>=g);++m);o=x[m][0],s=x[m][1],"year"==s&&(u=Math.pow(10,Math.floor(Math.log(h/f.year)/Math.LN10)),d=h/f.year/u,o=1.5>d?1:3>d?2:7.5>d?5:10,o*=u),i.tickSize&&(o=i.tickSize[0],s=i.tickSize[1]),r=function(t){var e=[],i=t.tickSize[0],a=t.tickSize[1],l=new Date(t.min),o=i*f[a];"second"==a&&l.setSeconds(n(l.getSeconds(),i)),"minute"==a&&l.setMinutes(n(l.getMinutes(),i)),"hour"==a&&l.setHours(n(l.getHours(),i)),"month"==a&&l.setMonth(n(l.getMonth(),i)),"year"==a&&l.setFullYear(n(l.getFullYear(),i)),l.setMilliseconds(0),o>=f.minute&&l.setSeconds(0),o>=f.hour&&l.setMinutes(0),o>=f.day&&l.setHours(0),o>=4*f.day&&l.setDate(1),o>=f.year&&l.setMonth(0);var r,s=0;do if(r=l.getTime(),e.push({v:r,label:t.tickFormatter(r,t)}),"month"==a)if(1>i){l.setDate(1);var c=l.getTime();l.setMonth(l.getMonth()+1);var m=l.getTime();l.setTime(r+s*f.hour+(m-c)*i),s=l.getHours(),l.setHours(0)}else l.setMonth(l.getMonth()+i);else"year"==a?l.setFullYear(l.getFullYear()+i):l.setTime(r+o);while(r<t.max);return e},c=function(t,e){var n=new Date(t);if(null!=i.timeformat)return a(n,i.timeformat,i.monthNames);var l=e.tickSize[0]*f[e.tickSize[1]],o=e.max-e.min;return fmt=l<f.minute?"%h:%M:%S":l<f.day?o<2*f.day?"%h:%M":"%b %d %h:%M":l<f.month?"%b %d":l<f.year?o<f.year?"%b":"%b %y":"%y",a(n,fmt,i.monthNames)}}else{var p=i.tickDecimals,v=-Math.floor(Math.log(h)/Math.LN10);null!=p&&v>p&&(v=p),u=Math.pow(10,-v),d=h/u,1.5>d?o=1:3>d?(o=2,d>2.25&&(null==p||p>=v+1)&&(o=2.5,++v)):o=7.5>d?5:10,o*=u,null!=i.minTickSize&&o<i.minTickSize&&(o=i.minTickSize),null!=i.tickSize&&(o=i.tickSize),e.tickDecimals=Math.max(0,null!=p?p:v),r=function(t){var e,i=[],a=n(t.min,t.tickSize),l=0;do e=a+l*t.tickSize,i.push({v:e,label:t.tickFormatter(e,t)}),++l;while(e<t.max);return i},c=function(t,e){return t.toFixed(e.tickDecimals)}}e.tickSize=s?[o,s]:o,e.tickGenerator=r,e.tickFormatter=t.isFunction(i.tickFormatter)?function(t,e){return""+i.tickFormatter(t,e)}:c}function v(){if(null==R.xaxis.max){for(var t=Q.max,e=0;e<J.length;++e)J[e].bars.show&&J[e].bars.barWidth+Q.datamax>t&&(t=Q.datamax+J[e].bars.barWidth);Q.max=t}}function b(e,n){if(e.ticks=[],null==n.ticks)e.ticks=e.tickGenerator(e);else if("number"==typeof n.ticks)n.ticks>0&&(e.ticks=e.tickGenerator(e));else if(n.ticks){var i=n.ticks;t.isFunction(i)&&(i=i({min:e.min,max:e.max}));var a,l;for(a=0;a<i.length;++a){var o=null,r=i[a];"object"==typeof r?(l=r[0],r.length>1&&(o=r[1])):l=r,null==o&&(o=e.tickFormatter(l,e)),e.ticks[a]={v:l,label:o}}}null!=n.autoscaleMargin&&e.ticks.length>0&&(null==n.min&&(e.min=Math.min(e.min,e.ticks[0].v)),null==n.max&&e.ticks.length>1&&(e.max=Math.min(e.max,e.ticks[e.ticks.length-1].v)))}function y(){var e,n,i=[];for(e=0;e<K.ticks.length;++e)n=K.ticks[e].label,n&&i.push('<div class="tickLabel">'+n+"</div>");if(i.length>0){var a=t('<div style="position:absolute;top:-10000px;font-size:smaller">'+i.join("")+"</div>").appendTo(q);$=a.width(),te=a.find("div").height(),a.remove()}var l=R.grid.borderWidth;for(R.points.show&&(l=Math.max(l,R.points.radius+R.points.lineWidth/2)),e=0;e<J.length;++e)J[e].points.show&&(l=Math.max(l,J[e].points.radius+J[e].points.lineWidth/2));for(Z.left=Z.right=Z.top=Z.bottom=l,Z.left+=$+R.grid.labelMargin,ae=ne-Z.left-Z.right,ee=ae/6,i=[],e=0;e<Q.ticks.length;++e)n=Q.ticks[e].label,n&&i.push('<span class="tickLabel" width="'+ee+'">'+n+"</span>");var o=0;if(i.length>0){var a=t('<div style="position:absolute;top:-10000px;font-size:smaller">'+i.join("")+"</div>").appendTo(q);o=a.height(),a.remove()}Z.bottom+=o+R.grid.labelMargin,le=ie-Z.bottom-Z.top,oe=ae/(Q.max-Q.min),re=le/(K.max-K.min)}function k(){S();for(var t=0;t<J.length;t++)W(J[t])}function M(t){return(t-Q.min)*oe}function w(t){return le-(t-K.min)*re}function S(){var e;if(B.save(),B.clearRect(0,0,ne,ie),B.translate(Z.left,Z.top),null!=R.grid.backgroundColor&&(B.fillStyle=R.grid.backgroundColor,B.fillRect(0,0,ae,le)),R.grid.coloredAreas){var n=R.grid.coloredAreas;for(t.isFunction(n)&&(n=n({xmin:Q.min,xmax:Q.max,ymin:K.min,ymax:K.max})),e=0;e<n.length;++e){var i=n[e];(null==i.x1||i.x1<Q.min)&&(i.x1=Q.min),(null==i.x2||i.x2>Q.max)&&(i.x2=Q.max),(null==i.y1||i.y1<K.min)&&(i.y1=K.min),(null==i.y2||i.y2>K.max)&&(i.y2=K.max);var a;i.x1>i.x2&&(a=i.x1,i.x1=i.x2,i.x2=a),i.y1>i.y2&&(a=i.y1,i.y1=i.y2,i.y2=a),i.x1>=Q.max||i.x2<=Q.min||i.x1==i.x2||i.y1>=K.max||i.y2<=K.min||i.y1==i.y2||(B.fillStyle=i.color||R.grid.coloredAreasColor,B.fillRect(Math.floor(M(i.x1)),Math.floor(w(i.y2)),Math.floor(M(i.x2)-M(i.x1)),Math.floor(w(i.y1)-w(i.y2))))}}B.lineWidth=1,B.strokeStyle=R.grid.tickColor,B.beginPath();var l;for(e=0;e<Q.ticks.length;++e)l=Q.ticks[e].v,l<=Q.min||l>=Q.max||(B.moveTo(Math.floor(M(l))+B.lineWidth/2,0),B.lineTo(Math.floor(M(l))+B.lineWidth/2,le));for(e=0;e<K.ticks.length;++e)l=K.ticks[e].v,l<=K.min||l>=K.max||(B.moveTo(0,Math.floor(w(l))+B.lineWidth/2),B.lineTo(ae,Math.floor(w(l))+B.lineWidth/2));B.stroke(),R.grid.borderWidth&&(B.lineWidth=R.grid.borderWidth,B.strokeStyle=R.grid.color,B.lineJoin="round",B.strokeRect(0,0,ae,le),B.restore())}function T(){q.find(".tickLabels").remove();var t,e,n='<div class="tickLabels" style="font-size:smaller;color:'+R.grid.color+'">';for(t=0;t<Q.ticks.length;++t)e=Q.ticks[t],!e.label||e.v<Q.min||e.v>Q.max||(n+='<div style="position:absolute;top:'+(Z.top+le+R.grid.labelMargin)+"px;left:"+(Z.left+M(e.v)-ee/2)+"px;width:"+ee+'px;text-align:center" class="tickLabel">'+e.label+"</div>");for(t=0;t<K.ticks.length;++t)e=K.ticks[t],!e.label||e.v<K.min||e.v>K.max||(n+='<div style="position:absolute;top:'+(Z.top+w(e.v)-te/2)+"px;left:0;width:"+$+'px;text-align:right" class="tickLabel">'+e.label+"</div>");n+="</div>",q.append(n)}function W(t){(t.lines.show||!t.bars.show&&!t.points.show)&&z(t),t.bars.show&&C(t),t.points.show&&F(t)}function z(t){function e(t,e){var n,i=null,a=null,l=null;B.beginPath();for(var o=0;o<t.length;++o)if(n=i,i=t[o],null!=n&&null!=i){var r=n[0],s=n[1],c=i[0],m=i[1];if(m>=s&&s<K.min){if(m<K.min)continue;r=(K.min-s)/(m-s)*(c-r)+r,s=K.min}else if(s>=m&&m<K.min){if(s<K.min)continue;c=(K.min-s)/(m-s)*(c-r)+r,m=K.min}if(s>=m&&s>K.max){if(m>K.max)continue;r=(K.max-s)/(m-s)*(c-r)+r,s=K.max}else if(m>=s&&m>K.max){if(s>K.max)continue;c=(K.max-s)/(m-s)*(c-r)+r,m=K.max}if(c>=r&&r<Q.min){if(c<Q.min)continue;s=(Q.min-r)/(c-r)*(m-s)+s,r=Q.min}else if(r>=c&&c<Q.min){if(r<Q.min)continue;m=(Q.min-r)/(c-r)*(m-s)+s,c=Q.min}if(r>=c&&r>Q.max){if(c>Q.max)continue;s=(Q.max-r)/(c-r)*(m-s)+s,r=Q.max}else if(c>=r&&c>Q.max){if(r>Q.max)continue;m=(Q.max-r)/(c-r)*(m-s)+s,c=Q.max}(a!=M(r)||l!=w(s)+e)&&B.moveTo(M(r),w(s)+e),a=M(c),l=w(m)+e,B.lineTo(a,l)}B.stroke()}function n(t){for(var e,n,i=null,a=Math.min(Math.max(0,K.min),K.max),l=0,o=!1,r=0;r<t.length;++r)if(e=i,i=t[r],o&&null!=e&&null==i)B.lineTo(M(l),w(a)),B.fill(),o=!1;else if(null!=e&&null!=i){var s=e[0],c=e[1],m=i[0],u=i[1];if(m>=s&&s<Q.min){if(m<Q.min)continue;c=(Q.min-s)/(m-s)*(u-c)+c,s=Q.min}else if(s>=m&&m<Q.min){if(s<Q.min)continue;u=(Q.min-s)/(m-s)*(u-c)+c,m=Q.min}if(s>=m&&s>Q.max){if(m>Q.max)continue;c=(Q.max-s)/(m-s)*(u-c)+c,s=Q.max}else if(m>=s&&m>Q.max){if(s>Q.max)continue;u=(Q.max-s)/(m-s)*(u-c)+c,m=Q.max}if(o||(B.beginPath(),B.moveTo(M(s),w(a)),o=!0),c>=K.max&&u>=K.max)B.lineTo(M(s),w(K.max)),B.lineTo(M(m),w(K.max));else if(c<=K.min&&u<=K.min)B.lineTo(M(s),w(K.min)),B.lineTo(M(m),w(K.min));else{var d=s,h=m;u>=c&&c<K.min&&u>=K.min?(s=(K.min-c)/(u-c)*(m-s)+s,c=K.min):c>=u&&u<K.min&&c>=K.min&&(m=(K.min-c)/(u-c)*(m-s)+s,u=K.min),c>=u&&c>K.max&&u<=K.max?(s=(K.max-c)/(u-c)*(m-s)+s,c=K.max):u>=c&&u>K.max&&c<=K.max&&(m=(K.max-c)/(u-c)*(m-s)+s,u=K.max),s!=d&&(n=c<=K.min?K.min:K.max,B.lineTo(M(d),w(n)),B.lineTo(M(s),w(n))),B.lineTo(M(s),w(c)),B.lineTo(M(m),w(u)),m!=h&&(n=u<=K.min?K.min:K.max,B.lineTo(M(h),w(n)),B.lineTo(M(m),w(n))),l=Math.max(m,h)}}o&&(B.lineTo(M(l),w(a)),B.fill())}B.save(),B.translate(Z.left,Z.top),B.lineJoin="round";var i=t.lines.lineWidth,a=t.shadowSize;a>0&&(B.lineWidth=a/2,B.strokeStyle="rgba(0,0,0,0.1)",e(t.data,i/2+a/2+B.lineWidth/2),B.lineWidth=a/2,B.strokeStyle="rgba(0,0,0,0.2)",e(t.data,i/2+B.lineWidth/2)),B.lineWidth=i,B.strokeStyle=t.color,t.lines.fill&&(B.fillStyle=null!=t.lines.fillColor?t.lines.fillColor:o(t.color).scale(null,null,null,.4).toString(),n(t.data,0)),e(t.data,0),B.restore()}function F(t){function e(t,e,n){for(var i=0;i<t.length;++i)if(null!=t[i]){var a=t[i][0],l=t[i][1];a<Q.min||a>Q.max||l<K.min||l>K.max||(B.beginPath(),B.arc(M(a),w(l),e,0,2*Math.PI,!0),n&&B.fill(),B.stroke())}}function n(t,e,n){for(var i=0;i<t.length;++i)if(null!=t[i]){var a=t[i][0],l=t[i][1];a<Q.min||a>Q.max||l<K.min||l>K.max||(B.beginPath(),B.arc(M(a),w(l)+e,n,0,Math.PI,!1),B.stroke())}}B.save(),B.translate(Z.left,Z.top);var i=(t.lines.lineWidth,t.shadowSize);i>0&&(B.lineWidth=i/2,B.strokeStyle="rgba(0,0,0,0.1)",n(t.data,i/2+B.lineWidth/2,t.points.radius),B.lineWidth=i/2,B.strokeStyle="rgba(0,0,0,0.2)",n(t.data,B.lineWidth/2,t.points.radius)),B.lineWidth=t.points.lineWidth,B.strokeStyle=t.color,B.fillStyle=null!=t.points.fillColor?t.points.fillColor:t.color,e(t.data,t.points.radius,t.points.fill),B.restore()}function C(t){function e(t,e,n,i){for(var a=0;a<t.length;a++)if(null!=t[a]){var l=t[a][0],o=t[a][1],r=!0,s=!0,c=!0,m=l,u=l+e,d=0,h=o;u<Q.min||m>Q.max||h<K.min||d>K.max||(m<Q.min&&(m=Q.min,r=!1),u>Q.max&&(u=Q.max,c=!1),d<K.min&&(d=K.min),h>K.max&&(h=K.max,s=!1),i&&(B.beginPath(),B.moveTo(M(m),w(d)+n),B.lineTo(M(m),w(h)+n),B.lineTo(M(u),w(h)+n),B.lineTo(M(u),w(d)+n),B.fill()),(r||c||s)&&(B.beginPath(),B.moveTo(M(m),w(d)+n),r?B.lineTo(M(m),w(h)+n):B.moveTo(M(m),w(h)+n),s?B.lineTo(M(u),w(h)+n):B.moveTo(M(u),w(h)+n),c?B.lineTo(M(u),w(d)+n):B.moveTo(M(u),w(d)+n),B.stroke()))}}B.save(),B.translate(Z.left,Z.top),B.lineJoin="round";var n=t.bars.barWidth,i=Math.min(t.bars.lineWidth,n);B.lineWidth=i,B.strokeStyle=t.color,t.bars.fill&&(B.fillStyle=null!=t.bars.fillColor?t.bars.fillColor:o(t.color).scale(null,null,null,.4).toString()),e(t.data,n,0,t.bars.fill),B.restore()}function A(){if(q.find(".legend").remove(),R.legend.show){var e=[],n=!1;for(i=0;i<J.length;++i)if(J[i].label){i%R.legend.noColumns==0&&(n&&e.push("</tr>"),e.push("<tr>"),n=!0);var a=J[i].label;null!=R.legend.labelFormatter&&(a=R.legend.labelFormatter(a)),e.push('<td class="legendColorBox"><div style="border:1px solid '+R.legend.labelBoxBorderColor+';padding:1px"><div style="width:14px;height:10px;background-color:'+J[i].color+';overflow:hidden"></div></div></td><td class="legendLabel">'+a+"</td>")}if(n&&e.push("</tr>"),e.length>0){var r='<table style="font-size:smaller;color:'+R.grid.color+'">'+e.join("")+"</table>";if(null!=R.legend.container)R.legend.container.append(r);else{var s="",c=R.legend.position,m=R.legend.margin;"n"==c.charAt(0)?s+="top:"+(m+Z.top)+"px;":"s"==c.charAt(0)&&(s+="bottom:"+(m+Z.bottom)+"px;"),"e"==c.charAt(1)?s+="right:"+(m+Z.right)+"px;":"w"==c.charAt(1)&&(s+="left:"+(m+Z.bottom)+"px;");var u=t('<div class="legend">'+r.replace('style="','style="position:absolute;'+s+";")+"</div>").appendTo(q);if(0!=R.legend.backgroundOpacity){var d=R.legend.backgroundColor;if(null==d){var h;h=null!=R.grid.backgroundColor?R.grid.backgroundColor:l(u),d=o(h).adjust(null,null,null,1).toString()}var f=u.children();t('<div style="position:absolute;width:'+f.width()+"px;height:"+f.height()+"px;"+s+"background-color:"+d+';"> </div>').prependTo(u).css("opacity",R.legend.backgroundOpacity)}}}}}function I(t){var e=t||window.event;if(null==e.pageX&&null!=e.clientX){var n=document.documentElement,i=document.body;ce.pageX=e.clientX+(n&&n.scrollLeft||i.scrollLeft||0),ce.pageY=e.clientY+(n&&n.scrollTop||i.scrollTop||0)}else ce.pageX=e.pageX,ce.pageY=e.pageY}function N(e){1==e.which&&(document.body.focus(),void 0!==document.onselectstart&&null==se.onselectstart&&(se.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==se.ondrag&&(se.ondrag=document.ondrag,document.ondrag=function(){return!1}),Y(me.first,e),null!=de&&clearInterval(de),ce.pageX=null,de=setInterval(j,200),t(document).one("mouseup",D))}function L(t){if(he)return void(he=!1);var e=V.offset(),n={};n.x=t.pageX-e.left-Z.left,n.x=Q.min+n.x/oe,n.y=t.pageY-e.top-Z.top,n.y=K.max-n.y/re,q.trigger("plotclick",[n])}function X(){var t,e,n,i;me.first.x<=me.second.x?(t=me.first.x,e=me.second.x):(t=me.second.x,e=me.first.x),me.first.y>=me.second.y?(n=me.first.y,i=me.second.y):(n=me.second.y,i=me.first.y),t=Q.min+t/oe,e=Q.min+e/oe,n=K.max-n/re,i=K.max-i/re,q.trigger("selected",[{x1:t,y1:n,x2:e,y2:i}])}function D(t){return void 0!==document.onselectstart&&(document.onselectstart=se.onselectstart),void 0!==document.ondrag&&(document.ondrag=se.ondrag),null!=de&&(clearInterval(de),de=null),Y(me.second,t),P(),_()&&1==t.which?(H(),X(),he=!0,!1):!1}function Y(e,n){var i=t(U).offset();"y"==R.selection.mode?e.x=e==me.first?0:ae:(e.x=n.pageX-i.left-Z.left,e.x=Math.min(Math.max(0,e.x),ae)),"x"==R.selection.mode?e.y=e==me.first?0:le:(e.y=n.pageY-i.top-Z.top,e.y=Math.min(Math.max(0,e.y),le))}function j(){null!=ce.pageX&&(Y(me.second,ce),P(),_()&&H())}function P(){if(null!=ue){var t=Math.min(ue.first.x,ue.second.x),e=Math.min(ue.first.y,ue.second.y),n=Math.abs(ue.second.x-ue.first.x),i=Math.abs(ue.second.y-ue.first.y);O.clearRect(t+Z.left-O.lineWidth,e+Z.top-O.lineWidth,n+2*O.lineWidth,i+2*O.lineWidth),ue=null}}function E(t){P(),"x"==R.selection.mode?(me.first.y=0,me.second.y=le):(me.first.y=(K.max-t.y1)*re,me.second.y=(K.max-t.y2)*re),"y"==R.selection.mode?(me.first.x=0,me.second.x=ae):(me.first.x=(t.x1-Q.min)*oe,me.second.x=(t.x2-Q.min)*oe),H(),X()}function H(){if(null==ue||me.first.x!=ue.first.x||me.first.y!=ue.first.y||me.second.x!=ue.second.x||me.second.y!=ue.second.y){O.strokeStyle=o(R.selection.color).scale(null,null,null,.8).toString(),O.lineWidth=1,B.lineJoin="round",O.fillStyle=o(R.selection.color).scale(null,null,null,.4).toString(),ue={first:{x:me.first.x,y:me.first.y},second:{x:me.second.x,y:me.second.y}};var t=Math.min(me.first.x,me.second.x),e=Math.min(me.first.y,me.second.y),n=Math.abs(me.second.x-me.first.x),i=Math.abs(me.second.y-me.first.y);O.fillRect(t+Z.left,e+Z.top,n,i),O.strokeRect(t+Z.left,e+Z.top,n,i)}}function _(){var t=5;return Math.abs(me.second.x-me.first.x)>=t&&Math.abs(me.second.y-me.first.y)>=t}var J=[],R={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{mode:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null},yaxis:{autoscaleMargin:.02},points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff"},lines:{show:!1,lineWidth:2,fill:!1,fillColor:null},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null},grid:{color:"#545454",backgroundColor:null,tickColor:"#dddddd",labelMargin:3,borderWidth:2,clickable:null,coloredAreas:null,coloredAreasColor:"#f4f4f4"},selection:{mode:null,color:"#e8cfac"},shadowSize:4},G=null,U=null,V=null,B=null,O=null,q=e,Q={},K={},Z={left:0,right:0,top:0,bottom:0},$=0,te=0,ee=0,ne=0,ie=0,ae=0,le=0,oe=0,re=0,se={};this.setData=c,this.setupGrid=x,this.draw=k,this.clearSelection=P,this.setSelection=E,this.getCanvas=function(){return G},this.getPlotOffset=function(){return Z},this.getData=function(){return J},this.getAxes=function(){return{xaxis:Q,yaxis:K}},u(s),c(r),f(),x(),k();var ce={pageX:null,pageY:null},me={first:{x:-1,y:-1},second:{x:-1,y:-1}},ue=null,de=null,he=!1}function n(t,e){return e*Math.floor(t/e)}function a(){for(var t=["r","g","b","a"],e=4;-1<--e;)this[t[e]]=arguments[e]||(3==e?1:0);this.toString=function(){return this.a>=1?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"},this.scale=function(){for(e=4;-1<--e;)null!=arguments[e]&&(this[t[e]]*=arguments[e]);return this.normalize()},this.adjust=function(){for(e=4;-1<--e;)null!=arguments[e]&&(this[t[e]]+=arguments[e]);return this.normalize()},this.clone=function(){return new a(this.r,this.b,this.g,this.a)};var n=function(t,e,n){return Math.max(Math.min(t,n),e)};this.normalize=function(){return this.r=n(parseInt(this.r),0,255),this.g=n(parseInt(this.g),0,255),this.b=n(parseInt(this.b),0,255),this.a=n(this.a,0,1),this},this.normalize()}function l(e){var n,i=e;do{if(n=i.css("background-color").toLowerCase(),""!=n&&"transparent"!=n)break;i=i.parent()}while(!t.nodeName(i.get(0),"body"));return"rgba(0, 0, 0, 0)"==n?"transparent":n}function o(e){var n;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return new a(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return new a(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return new a(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return new a(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return new a(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return new a(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var i=t.trim(e).toLowerCase();return"transparent"==i?new a(255,255,255,0):(n=r[i],new a(n[0],n[1],n[2]))}t.plot=function(t,n,i){var a=new e(t,n,i);return a};var r={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery);