(function(){var k,aa=this;function n(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function q(a,b){function c(){}c.prototype=b.prototype;a.Oc=b.prototype;a.prototype=new c;a.Lc=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function ba(a,b){this.id=a;this.lang=b||"unknown";this.enabled=this.active=!1}n("shaka.player.TextTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:0});function ca(a,b,c){this.id=a;this.bandwidth=b||0;this.lang=c||"unknown";this.active=!1}n("shaka.player.AudioTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0});function da(a,b,c,d){this.id=a;this.bandwidth=b||0;this.width=c||0;this.height=d||0;this.active=!1}function ea(a,b){var c=a.width*a.height,d=b.width*b.height;return c<d?-1:c>d?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}n("shaka.player.VideoTrack.compare",ea);function t(){var a,b,c=new Promise(function(c,e){a=c;b=e});c.resolve=a;c.reject=b;return c};function fa(a){var b=new CustomEvent(a.type,{detail:a.detail,bubbles:!!a.bubbles}),c;for(c in a)b[c]=a[c];return b}function w(a){return new CustomEvent("error",{detail:a,bubbles:!0})};function ga(a,b){for(var c={},d=0;d<a.length;++d){var e=b?b(a[d]):a[d].toString();c[e]=a[d]}var d=[],f;for(f in c)d.push(c[f]);return d};function x(){this.Y={}}k=x.prototype;k.push=function(a,b){this.Y.hasOwnProperty(a)?this.Y[a].push(b):this.Y[a]=[b]};k.get=function(a){return(a=this.Y[a])?a.slice():null};function ha(a){var b=[],c;for(c in a.Y)b.push.apply(b,a.Y[c]);return b}k.remove=function(a,b){var c=this.Y[a];if(c)for(var d=0;d<c.length;++d)c[d]==b&&(c.splice(d,1),--d)};k.keys=function(){var a=[],b;for(b in this.Y)a.push(b);return a};k.clear=function(){this.Y={}};function y(a){this.h=a;this.pa=new ia(a,ja)}var ka=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];y.prototype.ja=function(){return this.pa.ja()};
function z(a){var b;b=la(a);if(7<b.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=la(a);a:{for(d=0;d<ka.length;d++)if(ma(c,ka[d])){d=!0;break a}d=!1}if(d)throw new RangeError("EbmlParser: Element cannot contain dynamically sized data.");if(8==c.length&&c[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var d=c[0]&(1<<8-c.length)-1,e=1;e<c.length;e++)d=256*d+c[e];c=d;c=
a.pa.i+c<=a.h.byteLength?c:a.h.byteLength-a.pa.i;d=new DataView(a.h.buffer,a.h.byteOffset+a.pa.i,c);A(a.pa,c);return new na(b,d)}function la(a){var b=oa(a.pa),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=oa(a.pa);return d}function na(a,b){this.id=a;this.h=b}
function pa(a){if(8<a.h.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==a.h.byteLength&&a.h.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var b=0,c=0;c<a.h.byteLength;c++)var d=a.h.getUint8(c),b=256*b+d;return b};function D(a,b){return b.bind(a)};function E(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b}n("shaka.util.StringUtils.toUint8Array",E);function sa(a){return String.fromCharCode.apply(null,a)}n("shaka.util.StringUtils.fromUint8Array",sa);n("shaka.util.StringUtils.toBase64",function(a,b){var c=window.btoa(a);return void 0==b||b?c:c.replace(/=*$/,"")});function ta(a){return window.atob(a)}n("shaka.util.StringUtils.fromBase64",ta);
n("shaka.util.StringUtils.fromHex",function(a){for(var b=[],c=0;c<a.length;c+=2)b.push(window.parseInt(a.substr(c,2),16));return String.fromCharCode.apply(null,b)});function ma(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}n("shaka.util.StringUtils.uint8ArrayEqual",ma);function ua(a){for(var b=[],c=0;c<a.length;++c)b.push(a[c]);return b.join(",")}n("shaka.util.StringUtils.uint8ArrayKey",ua);function G(a,b,c,d,e,f){this.keySystem=a;this.Yb=b;this.Jb=c;this.withCredentials=d;this.ya=[];this.Ib=f;e&&this.ya.push(e)}n("shaka.player.DrmSchemeInfo",G);function va(){this.maxWidth=this.maxHeight=null}function wa(){return new G("",!1,"",!1,null,null)}G.createUnencrypted=wa;function xa(a,b){var c=new G(a.keySystem,a.Yb,a.Jb,a.withCredentials,null,a.Ib);c.ya=ga(a.ya.concat(b.ya),function(a){return ua(a.initData)});return c}G.combine=xa;G.prototype.key=function(){return JSON.stringify(this)};function ya(a,b,c){za(b);za(c);return c==b||a>=Aa&&c==b.split("-")[0]||a>=Da&&c.split("-")[0]==b.split("-")[0]?!0:!1}var Aa=1,Da=2;function za(a){a=a.toLowerCase().split("-");var b=Ea[a[0]];b&&(a[0]=b);return a.join("-")}
var Ea={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",
fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",
lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",
srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function ia(a,b){this.h=a;this.nb=b==Fa;this.i=0}var ja=0,Fa=1;ia.prototype.ja=function(){return this.i<this.h.byteLength};function oa(a){var b=a.h.getUint8(a.i);a.i+=1;return b}function H(a){var b=a.h.getUint32(a.i,a.nb);a.i+=4;return b}function Ga(a){var b,c;a.nb?(b=a.h.getUint32(a.i,!0),c=a.h.getUint32(a.i+4,!0)):(c=a.h.getUint32(a.i,!1),b=a.h.getUint32(a.i+4,!1));if(2097151<c)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");a.i+=8;return c*Math.pow(2,32)+b}
function A(a,b){if(a.i+b>a.h.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");a.i+=b};function Ha(a){this.systemIds=[];for(a=new ia(new DataView(a.buffer),ja);a.ja();){var b=8,c=H(a),d=H(a);1==c&&(c=Ga(a),b+=8);if(1886614376!=d)A(a,c-b);else{H(a);b=a;if(b.i+16>b.h.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");c=new Uint8Array(b.h.buffer,b.i,16);b.i+=16;b=sa(c);c=H(a);A(a,c);this.systemIds.push(b)}}};function I(a){this.mb=new x;this.parent=a}I.prototype.addEventListener=function(a,b,c){c||this.mb.push(a,b)};I.prototype.removeEventListener=function(a,b,c){c||this.mb.remove(a,b)};I.prototype.dispatchEvent=function(a){delete a.currentTarget;delete a.srcElement;delete a.target;a.srcElement=null;a.target=this;return Ia(this,a)};
function Ia(a,b){b.currentTarget=a;for(var c=a.mb.get(b.type)||[],d=0;d<c.length;++d){var e=c[d];e.handleEvent?e.handleEvent(b):e.call(a,b)}a.parent&&b.bubbles&&Ia(a.parent,b);return b.defaultPrevented};function J(){this.ua=new x}J.prototype.t=function(){Ja(this);this.ua=null};function K(a,b,c,d){b=new Ka(b,c,d);a.ua.push(c,b)}J.prototype.Ja=function(a,b){for(var c=this.ua.get(b)||[],d=0;d<c.length;++d){var e=c[d];e.target==a&&(e.Ja(),this.ua.remove(b,e))}};function Ja(a){for(var b=ha(a.ua),c=0;c<b.length;++c)b[c].Ja();a.ua.clear()}function Ka(a,b,c){this.target=a;this.type=b;this.Kb=c;this.target.addEventListener(b,c,!1)}
Ka.prototype.Ja=function(){this.target&&(this.target.removeEventListener(this.type,this.Kb,!1),this.Kb=this.target=null)};function La(a){this.zb=Math.exp(Math.log(.5)/a);this.bb=this.gb=0}La.prototype.Wa=function(a,b){var c=Math.pow(this.zb,a);this.gb=b*(1-c)+c*this.gb;this.bb+=a};function Ma(a){return a.gb/(1-Math.pow(a.zb,a.bb))};function Na(){I.call(this,null);this.hb=new La(3);this.Vb=new La(10);this.jc=50;this.cc=5E5;this.kc=.5;this.ic=65536}q(Na,I);Na.prototype.Wa=function(a,b){if(!(b<this.ic)){a=Math.max(a,this.jc);var c=8E3*b/a,d=a/1E3;this.hb.Wa(d,c);this.Vb.Wa(d,c);this.dispatchEvent(fa({type:"bandwidth"}))}};function Oa(a){return a.hb.bb<a.kc?a.cc:Math.min(Ma(a.hb),Ma(a.Vb))};function L(a){Pa[a]={ta:Qa(),end:NaN}}function M(a){if(a=Pa[a])a.end=Qa()}function Ra(a){return(a=Pa[a])&&a.end?a.end-a.ta:NaN}var Qa=window.performance?window.performance.now.bind(window.performance):Date.now,Pa={};n("shaka.polyfill.VideoPlaybackQuality.install",function(){var a=HTMLVideoElement.prototype;a.getVideoPlaybackQuality||(a.getVideoPlaybackQuality=function(){return"webkitDroppedFrameCount"in this?{corruptedVideoFrames:0,droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,creationTime:null,totalFrameDelay:null}:null})});function Sa(a,b){if(-1==navigator.userAgent.indexOf("Chrome/")||"com.widevine.alpha"!=a&&"org.w3.clearkey"!=a)return!1;if(void 0==b)return!0;var c=b.split(";")[0];return"video/mp4"!=c&&"video/webm"!=c&&"audio/mp4"!=c&&"audio/webm"!=c?!1:b.split(";")[1]?MediaSource.isTypeSupported(b):!0};n("shaka.polyfill.Fullscreen.install",function(){var a=HTMLMediaElement.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullscreen||a.msRequestFullscreen||a.webkitRequestFullscreen});function Ta(a){try{var b=new Ua(a);return Promise.resolve(b)}catch(c){return Promise.reject(c)}}function Va(a){var b=this.mediaKeys;b&&b!=a&&Wa(b,null);delete this.mediaKeys;(this.mediaKeys=a)&&Wa(a,this);return Promise.resolve()}function Xa(){var a=document.getElementsByTagName("video");return a.length?a[0]:document.createElement("video")}
function Ua(a){this.lb=this.keySystem=a;"org.w3.clearkey"==a&&(this.lb="webkit-org.w3.clearkey");a=Xa();for(var b=["video/mp4","video/webm"],c=0;c<b.length;++c)if(a.canPlayType(b[c],this.lb))return;throw Error("The key system specified is not supported.");}Ua.prototype.createMediaKeys=function(){var a=new Ya(this.lb);return Promise.resolve(a)};function Ya(a){this.za=a;this.ma=null;this.d=new J;this.Nb=[];this.Sb={}}
function Za(a,b){var c=Xa();"org.w3.clearkey"==a&&(a="webkit-org.w3.clearkey");return b?!!c.canPlayType(b,a):!!c.canPlayType("video/mp4",a)||!!c.canPlayType("video/webm",a)}function Wa(a,b){a.ma=b;Ja(a.d);b&&(K(a.d,b,"webkitneedkey",a.zc.bind(a)),K(a.d,b,"webkitkeymessage",a.yc.bind(a)),K(a.d,b,"webkitkeyadded",a.wc.bind(a)),K(a.d,b,"webkitkeyerror",a.xc.bind(a)))}k=Ya.prototype;
k.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");a=new $a(this.ma,this.za,b);this.Nb.push(a);return a};k.zc=function(a){a=fa({type:"encrypted",initDataType:"cenc",initData:a.initData});this.ma.dispatchEvent(a)};
k.yc=function(a){var b=ab(this,a.sessionId);b&&(a=fa({type:"message",messageType:isNaN(b.expiration)?"licenserequest":"licenserenewal",message:a.message}),b.N&&(b.N.resolve(),b.N=null),b.dispatchEvent(a))};k.wc=function(a){(a=ab(this,a.sessionId))&&a.ready()};k.xc=function(a){var b=ab(this,a.sessionId);b&&b.handleError(a)};function ab(a,b){var c=a.Sb[b];return c?c:(c=a.Nb.shift())?(c.sessionId=b,a.Sb[b]=c):null}
function $a(a,b,c){I.call(this,null);this.ma=a;this.I=this.N=null;this.za=b;this.ra=c;this.sessionId="";this.expiration=NaN;this.closed=new t;this.keyStatuses={}}q($a,I);k=$a.prototype;k.ready=function(){this.expiration=Number.POSITIVE_INFINITY;this.I&&this.I.resolve();this.I=null};
k.handleError=function(a){var b=Error("EME v0.1b key error");b.errorCode=a.errorCode;b.errorCode.systemCode=a.systemCode;!a.sessionId&&this.N?(b.method="generateRequest",this.N.reject(b),this.N=null):a.sessionId&&this.I&&(b.method="update",this.I.reject(b),this.I=null)};
k.Pa=function(a,b,c){if(this.N)this.N.then(this.Pa.bind(this,a,b,c)).catch(this.Pa.bind(this,a,b,c));else{this.N=a;try{var d;if("persistent"==this.ra)if(c)d=E("LOAD_SESSION|"+c);else{var e=new Uint8Array(b);d=E("PERSISTENT|"+sa(e))}else d=new Uint8Array(b);this.ma.webkitGenerateKeyRequest(this.za,d)}catch(f){this.N.reject(f),this.N=null}}};
k.xb=function(a,b){if(this.I)this.I.then(this.xb.bind(this,a,b)).catch(this.xb.bind(this,a,b));else{this.I=a;var c,d;if("webkit-org.w3.clearkey"==this.za){c=sa(new Uint8Array(b));d=JSON.parse(c);c=d.keys[0].kty;if("A128KW"!=d.keys[0].alg||"oct"!=c)this.I.reject(Error("Response is not a valid JSON Web Key Set.")),this.I=null;c=E(ta(d.keys[0].k));d=E(ta(d.keys[0].kid))}else c=new Uint8Array(b),d=null;try{this.ma.webkitAddKey(this.za,c,d,this.sessionId)}catch(e){this.I.reject(e),this.I=null}}};
k.generateRequest=function(a,b){var c=new t;this.Pa(c,b,null);return c};k.load=function(a){if("persistent"==this.ra){var b=new t;this.Pa(b,null,a);return b}return Promise.reject(Error('The session type is not "persistent".'))};k.update=function(a){var b=new t;this.xb(b,a);return b};
k.close=function(){if("persistent"!=this.ra){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.ma.webkitCancelKeyRequest(this.za,this.sessionId)}this.closed.resolve();return this.closed};k.remove=function(){return"persistent"!=this.ra?Promise.reject(Error("Not a persistent session.")):this.close()};function bb(){return Promise.reject(Error("The key system specified is not supported."))}function cb(a){return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function db(){throw new TypeError("Illegal constructor.");}db.isTypeSupported=function(){return!1};n("shaka.polyfill.MediaKeys.install",function(){HTMLMediaElement.prototype.webkitGenerateKeyRequest?(Navigator.prototype.requestMediaKeySystemAccess=Ta,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.waitingFor="",HTMLMediaElement.prototype.setMediaKeys=Va,window.MediaKeys=Ya,window.MediaKeys.isTypeSupported=Za):Navigator.prototype.requestMediaKeySystemAccess?MediaKeys.isTypeSupported||(MediaKeys.isTypeSupported=Sa):(Navigator.prototype.requestMediaKeySystemAccess=bb,HTMLMediaElement.prototype.mediaKeys=
null,HTMLMediaElement.prototype.waitingFor="",HTMLMediaElement.prototype.setMediaKeys=cb,window.MediaKeys=db,window.MediaKeys.isTypeSupported=db.isTypeSupported)});var eb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function N(a){var b;a instanceof N?(fb(this,a.ea),this.sa=a.sa,this.W=a.W,gb(this,a.Ca),this.R=a.R,hb(this,a.oa.clone()),this.ia=a.ia):a&&(b=String(a).match(eb))?(fb(this,b[1]||"",!0),this.sa=O(b[2]||""),this.W=O(b[3]||"",!0),gb(this,b[4]),this.R=O(b[5]||"",!0),hb(this,b[6]||"",!0),this.ia=O(b[7]||"")):this.oa=new ib(null)}k=N.prototype;k.ea="";k.sa="";k.W="";k.Ca=null;k.R="";k.ia="";
k.toString=function(){var a=[],b=this.ea;b&&a.push(jb(b,kb,!0),":");if(b=this.W){a.push("//");var c=this.sa;c&&a.push(jb(c,kb,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.Ca;null!=b&&a.push(":",String(b))}if(b=this.R)this.W&&"/"!=b.charAt(0)&&a.push("/"),a.push(jb(b,"/"==b.charAt(0)?lb:mb,!0));(b=this.oa.toString())&&a.push("?",b);(b=this.ia)&&a.push("#",jb(b,nb));return a.join("")};
k.resolve=function(a){var b=this.clone(),c=!!a.ea;c?fb(b,a.ea):c=!!a.sa;c?b.sa=a.sa:c=!!a.W;c?b.W=a.W:c=null!=a.Ca;var d=a.R;if(c)gb(b,a.Ca);else if(c=!!a.R){if("/"!=d.charAt(0))if(this.W&&!this.R)d="/"+d;else{var e=b.R.lastIndexOf("/");-1!=e&&(d=b.R.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=0==d.lastIndexOf("/",0),d=d.split("/"),f=[],g=0;g<d.length;){var h=d[g++];"."==h?e&&g==d.length&&f.push(""):".."==h?((1<f.length||1==f.length&&""!=f[0])&&
f.pop(),e&&g==d.length&&f.push("")):(f.push(h),e=!0)}d=f.join("/")}}c?b.R=d:c=""!==a.oa.toString();c?hb(b,O(a.oa.toString())):c=!!a.ia;c&&(b.ia=a.ia);return b};k.clone=function(){return new N(this)};function fb(a,b,c){a.ea=c?O(b,!0):b;a.ea&&(a.ea=a.ea.replace(/:$/,""))}function gb(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.Ca=b}else a.Ca=null}function hb(a,b,c){b instanceof ib?a.oa=b:(c||(b=jb(b,ob)),a.oa=new ib(b))}
function O(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function jb(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,pb),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function pb(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var kb=/[#\/\?@]/g,mb=/[\#\?:]/g,lb=/[\#\?]/g,ob=/[\#\?@]/g,nb=/#/g;function ib(a){this.ba=a||null}k=ib.prototype;k.J=null;k.Na=null;
k.add=function(a,b){if(!this.J&&(this.J={},this.Na=0,this.ba))for(var c=this.ba.split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("="),f=null,g=null;0<=e?(f=c[d].substring(0,e),g=c[d].substring(e+1)):f=c[d];f=decodeURIComponent(f.replace(/\+/g," "));g=g||"";this.add(f,decodeURIComponent(g.replace(/\+/g," ")))}this.ba=null;(c=this.J.hasOwnProperty(a)&&this.J[a])||(this.J[a]=c=[]);c.push(b);this.Na++;return this};
k.toString=function(){if(this.ba)return this.ba;if(!this.J)return"";var a=[],b;for(b in this.J)for(var c=encodeURIComponent(b),d=this.J[b],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e]));a.push(f)}return this.ba=a.join("&")};k.clone=function(){var a=new ib;a.ba=this.ba;if(this.J){var b={},c;for(c in this.J)b[c]=this.J[c].concat();a.J=b;a.Na=this.Na}return a};function P(a){this.url=a;this.q=new qb;this.Ha=this.Xb=this.Bb=0;this.l=null;this.r=new t;this.ha=null}function qb(){this.body=null;this.Lb=1;this.bc=1E3;this.Dc=2;this.Ec=.5;this.Cc=0;this.method="GET";this.responseType="arraybuffer";this.tb={};this.withCredentials=!1}function rb(a){sb(a);a.q.body=null;a.r=null;a.ha=null}function sb(a){a.l&&(a.l.onload=null,a.l.onerror=null);a.l=null}
P.prototype.Za=function(){if(this.l)return this.r;if(0==this.url.lastIndexOf("data:",0)){var a=this.url.split(":")[1].split(";").pop().split(","),b=a.pop(),b="base64"==a.pop()?ta(b):window.decodeURIComponent(b);"arraybuffer"==this.q.responseType&&(b=E(b).buffer);a=JSON.parse(JSON.stringify(new XMLHttpRequest));a.response=b;a.responseText=b.toString();b=this.r;b.resolve(a);rb(this);return b}this.Bb++;this.Xb=Date.now();this.Ha||(this.Ha=this.q.bc);this.l=new XMLHttpRequest;a=this.url;this.ha&&(a=new N(a),
a.oa.add("_",Date.now()),a=a.toString());this.l.open(this.q.method,a,!0);this.l.responseType=this.q.responseType;this.l.timeout=this.q.Cc;this.l.withCredentials=this.q.withCredentials;this.l.onload=this.oc.bind(this);this.l.onerror=this.mc.bind(this);for(b in this.q.tb)this.l.setRequestHeader(b,this.q.tb[b]);this.l.send(this.q.body);return this.r};
P.prototype.abort=function(){if(this.l&&this.l.readyState!=XMLHttpRequest.DONE){this.l.abort();var a=Error("Request aborted.");a.type="aborted";a.status=null;a.ac=this.l;this.r.reject(a);rb(this)}};
P.prototype.oc=function(a){this.ha&&this.ha.Wa(Date.now()-this.Xb,a.loaded);200<=this.l.status&&299>=this.l.status?(this.r.resolve(this.l),rb(this)):this.Bb<this.q.Lb?(sb(this),window.setTimeout(this.Za.bind(this),this.Ha*(1+(2*Math.random()-1)*this.q.Ec)),this.Ha*=this.q.Dc):(a=Error("Network failure."),a.type="net",a.status=this.l.status,a.ac=this.l,this.r.reject(a),rb(this))};
P.prototype.mc=function(){var a=Error("Network failure.");a.type="net";a.status=this.l.status;a.ac=this.l;this.r.reject(a);rb(this)};function tb(a,b,c){P.call(this,a);this.q.body=b;this.q.method="POST";this.q.Lb=3;this.q.withCredentials=c}q(tb,P);tb.prototype.send=function(){return this.Za().then(function(a){return Promise.resolve(new Uint8Array(a.response))})};function ub(a,b,c){P.call(this,a);if(b||c)this.q.tb.Range="bytes="+(b+"-"+(null!=c?c:""))}q(ub,P);ub.prototype.send=function(){return this.Za().then(function(a){return Promise.resolve(a.response)})};var vb=0;function wb(){this.duration=this.c=this.type=this.id=null;this.A=5;this.g=[]}function xb(){this.id=null;this.A=5;this.u=this.n=this.m=this.c=this.duration=this.start=null;this.p=[]}function yb(){this.id=null;this.A=5;this.u=this.n=this.m=this.c=this.wa=this.o=this.height=this.width=this.contentType=this.lang=null;this.V=[];this.L=null;this.b=[]}function zb(){this.contentType=this.lang=this.id=null}
function Ab(){this.lang=this.id=null;this.A=5;this.u=this.n=this.m=this.c=this.wa=this.o=this.height=this.width=this.bandwidth=null;this.V=[];this.L=null;this.fa=++vb}function Bb(){this.value=this.schemeIdUri=null;this.children=[];this.pssh=null}function Cb(){this.parsedPssh=this.psshBox=null}function Q(){this.url=null}function R(){this.ca=this.C=this.jb=this.Q=this.c=null}function Db(){this.Z=this.url=null}function Eb(){this.Z=this.url=null}
function S(){this.c=null;this.O=1;this.da=0;this.$=null;this.X=1;this.ca=null;this.F=[];this.L=null}function Fb(){this.duration=this.startTime=this.Ua=this.Q=null}function Gb(){this.O=1;this.da=0;this.$=null;this.X=1;this.vb=this.kb=this.Sa=this.la=null}function Hb(){this.$b=[]}function Ib(){this.repeat=this.duration=this.startTime=null}function Jb(a,b){this.ta=a;this.end=b}wb.TAG_NAME="MPD";xb.TAG_NAME="Period";yb.TAG_NAME="AdaptationSet";zb.TAG_NAME="ContentComponent";Ab.TAG_NAME="Representation";
Bb.TAG_NAME="ContentProtection";Cb.TAG_NAME="cenc:pssh";Q.TAG_NAME="BaseURL";R.TAG_NAME="SegmentBase";Db.TAG_NAME="RepresentationIndex";Eb.TAG_NAME="Initialization";S.TAG_NAME="SegmentList";Fb.TAG_NAME="SegmentURL";Gb.TAG_NAME="SegmentTemplate";Hb.TAG_NAME="SegmentTimeline";Ib.TAG_NAME="S";
wb.prototype.parse=function(a,b){this.id=T(b,"id",U);this.type=T(b,"type",U);this.duration=T(b,"mediaPresentationDuration",Kb);this.A=T(b,"minBufferTime",Kb)||5;var c=V(this,b,Q);this.c=W(a.c,c?c.url:null);this.g=X(this,b,xb)};xb.prototype.parse=function(a,b){this.id=T(b,"id",U);this.start=T(b,"start",Kb);this.duration=T(b,"duration",Kb);this.A=a.A;var c=V(this,b,Q);this.c=W(a.c,c?c.url:null);this.m=V(this,b,R);this.n=V(this,b,S);this.u=V(this,b,Gb);this.p=X(this,b,yb)};
yb.prototype.parse=function(a,b){var c=V(this,b,zb)||{};this.id=T(b,"id",U);this.lang=T(b,"lang",U)||c.lang;this.contentType=T(b,"contentType",U)||c.contentType;this.width=T(b,"width",Y);this.height=T(b,"height",Y);this.o=T(b,"mimeType",U);this.wa=T(b,"codecs",U);this.lang&&(this.lang=za(this.lang));this.A=a.A;c=V(this,b,Q);this.c=W(a.c,c?c.url:null);this.V=X(this,b,Bb);!this.contentType&&this.o&&(this.contentType=this.o.split("/")[0]);this.m=V(this,b,R)||a.m;this.n=V(this,b,S)||a.n;this.u=V(this,
b,Gb)||a.u;this.b=X(this,b,Ab);!this.o&&this.b.length&&(this.o=this.b[0].o,!this.contentType&&this.o&&(this.contentType=this.o.split("/")[0]))};zb.prototype.parse=function(a,b){this.id=T(b,"id",U);this.lang=T(b,"lang",U);this.contentType=T(b,"contentType",U);this.lang&&(this.lang=za(this.lang))};
Ab.prototype.parse=function(a,b){this.id=T(b,"id",U);this.bandwidth=T(b,"bandwidth",Y);this.width=T(b,"width",Y)||a.width;this.height=T(b,"height",Y)||a.height;this.o=T(b,"mimeType",U)||a.o;this.wa=T(b,"codecs",U)||a.wa;this.lang=a.lang;this.A=a.A;var c=V(this,b,Q);this.c=W(a.c,c?c.url:null);this.V=X(this,b,Bb);this.m=V(this,b,R)||a.m;this.n=V(this,b,S)||a.n;this.u=V(this,b,Gb)||a.u;0==this.V.length&&(this.V=a.V)};
Bb.prototype.parse=function(a,b){this.schemeIdUri=T(b,"schemeIdUri",U);this.value=T(b,"value",U);this.pssh=V(this,b,Cb);this.children=b.children};Cb.prototype.parse=function(a,b){var c=Lb(b);if(c){this.psshBox=E(ta(c));try{this.parsedPssh=new Ha(this.psshBox)}catch(d){if(!(d instanceof RangeError))throw d;}}};Q.prototype.parse=function(a,b){this.url=Lb(b)};
R.prototype.parse=function(a,b){this.Q=this.c=a.c;this.jb=T(b,"indexRange",Mb);this.C=V(this,b,Db);this.ca=V(this,b,Eb);this.C?this.C.Z||(this.C.Z=this.jb):(this.C=new Db,this.C.url=this.c,this.C.Z=this.jb)};Db.prototype.parse=function(a,b){var c=T(b,"sourceURL",U);this.url=W(a.c,c);this.Z=T(b,"range",Mb)};Eb.prototype.parse=function(a,b){var c=T(b,"sourceURL",U);this.url=W(a.c,c);this.Z=T(b,"range",Mb)};
S.prototype.parse=function(a,b){this.c=a.c;this.O=T(b,"timescale",Y)||1;this.da=T(b,"presentationTimeOffset",Z)||0;this.$=T(b,"duration",Z);this.X=T(b,"startNumber",Y)||1;this.ca=V(this,b,Eb);this.F=X(this,b,Fb)};Fb.prototype.parse=function(a,b){var c=T(b,"media",U);this.Q=W(a.c,c);this.Ua=T(b,"mediaRange",Mb)};
Gb.prototype.parse=function(a,b){this.O=T(b,"timescale",Y)||1;this.da=T(b,"presentationTimeOffset",Z)||0;this.$=T(b,"duration",Z);this.X=T(b,"startNumber",Y)||1;this.la=T(b,"media",U);this.Sa=T(b,"index",U);this.kb=T(b,"initialization",U);this.vb=V(this,b,Hb)};Hb.prototype.parse=function(a,b){this.$b=X(this,b,Ib)};Ib.prototype.parse=function(a,b){this.startTime=T(b,"t",Z);this.duration=T(b,"d",Z);this.repeat=T(b,"r",Z)};function W(a,b){var c=b?new N(b):null;return a?c?a.resolve(c):a:c}
function V(a,b,c){for(var d=null,e=0;e<b.children.length;e++)if(b.children[e].tagName==c.TAG_NAME){if(d)return null;d=b.children[e]}if(!d)return null;b=new c;b.parse.call(b,a,d);return b}function X(a,b,c){for(var d=[],e=0;e<b.children.length;e++)if(b.children[e].tagName==c.TAG_NAME){var f=new c;f.parse.call(f,a,b.children[e]);d.push(f)}return d}function Lb(a){a=a.firstChild;return a.nodeType!=Node.TEXT_NODE?null:a.nodeValue}function T(a,b,c){return c(a.getAttribute(b))}
function Kb(a){if(!a)return null;var b=/^P(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!b)return null;a=0;var c=Z(b[1]);c&&(a+=86400*c);(c=Z(b[2]))&&(a+=3600*c);(c=Z(b[3]))&&(a+=60*c);b=window.parseFloat(b[4]);(b=isNaN(b)?null:b)&&(a+=b);return a}function Mb(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=Z(b[1]);if(null==a)return null;b=Z(b[2]);return null==b?null:new Jb(a,b)}function Y(a){a=window.parseInt(a,10);return 0<a?a:null}
function Z(a){a=window.parseInt(a,10);return 0<=a?a:null}function U(a){return a};function Nb(){this.representation=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.representationHistory=[]}function Ob(a){a.playTime+=Ra("playing")/1E3}function Pb(a,b){a.representation=new Qb(b);a.representationHistory.push(new Rb(a.representation))}
function Qb(a){this.videoWidth=a.width;this.videoHeight=a.height;this.videoMimeType=a.o;this.videoBandwidth=a.bandwidth}function Rb(a){this.timestamp=Date.now()/1E3;this.value=a};function $(a){I.call(this,null);this.a=a;this.Ta=this.e=null;this.d=new J;this.sb={};this.xa=[];this.$a=[];this.ka="en";this.Ka=this.Va=null;this.Da=!1;this.H=new Nb;this.yb=!0}q($,I);n("shaka.player.Player",$);$.version="v1.1";$.isBrowserSupported=function(){return!!window.MediaSource&&!!window.MediaKeys&&!!window.navigator&&!!window.navigator.requestMediaKeySystemAccess&&!!window.Promise&&!!HTMLVideoElement.prototype.getVideoPlaybackQuality&&!!HTMLMediaElement.prototype.requestFullscreen&&!!document.body.children};
function Sb(a,b){var c;if(0<=b.indexOf("mp4a.40.5"))return!1;"text/vtt"==b?c=!!window.VTTCue:(c=MediaSource.isTypeSupported(b))&&a&&(c=MediaKeys.isTypeSupported(a,b.split(";")[0]));return c}$.isTypeSupported=Sb;$.prototype.t=function(){this.wb().catch(function(){});this.d.t();this.a=this.d=null};$.prototype.destroy=$.prototype.t;
$.prototype.wb=function(){this.a.pause();Ja(this.d);Tb(this);Ub(this);for(var a=0;a<this.$a.length;++a)this.$a[a].close().catch(function(){});this.$a=[];this.xa=[];this.Ta=null;this.a.src="";this.a.load();a=this.a.setMediaKeys(null);this.e&&(this.e.t(),this.e=null);this.Da=!1;this.sb={};this.H=new Nb;return a};$.prototype.unload=$.prototype.wb;
$.prototype.load=function(a){var b=this.e?this.wb():Promise.resolve();this.a.autoplay&&(L("load"),K(this.d,this.a,"timeupdate",this.nc.bind(this)));a.Ea(this.yb);return b.then(D(this,function(){return a.load(this.ka)})).then(D(this,function(){this.e=a;return Vb(this)})).then(D(this,function(){K(this.d,this.a,"play",this.rc.bind(this));K(this.d,this.a,"playing",this.sc.bind(this));K(this.d,this.a,"seeking",this.qb.bind(this));K(this.d,this.a,"pause",this.qc.bind(this));K(this.d,this.a,"ended",this.lc.bind(this));
return this.e.Ab(this,this.a)})).then(D(this,function(){for(var a=0;a<this.xa.length;++a)this.Ob(this.xa[a]);return Promise.resolve()})).catch(D(this,function(b){a.t();this.e=null;var d=w(b);this.dispatchEvent(d);return Promise.reject(b)}))};$.prototype.load=$.prototype.load;
function Vb(a){var b=a.e.Qa();return b?navigator.requestMediaKeySystemAccess(b.keySystem).then(D(a,function(a){return a.createMediaKeys()})).then(D(a,function(a){this.Ta=a;return this.a.setMediaKeys(this.Ta)})).then(D(a,function(){this.xa=[];for(var a=0;a<b.ya.length;++a){var d=b.ya[a];this.xa.push({type:"encrypted",initDataType:d.initDataType,initData:d.initData})}0==this.xa.length&&K(this.d,this.a,"encrypted",this.Ob.bind(this))})):Promise.resolve()}k=$.prototype;
k.Ob=function(a){var b=new Uint8Array(a.initData),c=ua(b);this.e.Qa().Yb&&(c="first");this.sb[c]||(b=this.Ta.createSession(),this.$a.push(b),K(this.d,b,"message",this.tc.bind(this)),b.generateRequest(a.initDataType,a.initData).then(D(this,function(){this.sb[c]=!0})).catch(D(this,function(a){a=w(a);this.dispatchEvent(a)})))};k.tc=function(a){var b=this.e.Qa();Wb(this,a.target,b.Jb,a.message,b.withCredentials,b.Ib)};
function Wb(a,b,c,d,e,f){(new tb(c,d,e)).send().then(D(a,function(a){if(f){var c=new va;a=f(a,c);this.e.Ub(c)}return b.update(a)})).then(function(){}).catch(D(a,function(a){a.Nc=b;a=w(a);this.dispatchEvent(a)}))}k.nc=function(){M("load");this.H.playbackLatency=Ra("load")/1E3;this.d.Ja(this.a,"timeupdate")};k.rc=function(){};k.sc=function(){L("playing");Tb(this);this.Ka=window.setTimeout(this.Qb.bind(this),100)};k.qb=function(){Tb(this);this.Da=!1};k.qc=function(){M("playing");Ob(this.H)};
k.lc=function(){this.getStats();Tb(this)};k.getStats=function(){this.a.paused||(M("playing"),Ob(this.H),L("playing"));var a=this.H,b=this.a.getVideoPlaybackQuality();b&&(a.decodedFrames=b.totalVideoFrames,a.droppedFrames=b.droppedVideoFrames);return this.H};$.prototype.getStats=$.prototype.getStats;$.prototype.dc=function(){var a=this.a.videoWidth,b=this.a.videoHeight;return a&&b?{width:a,height:b}:null};$.prototype.getCurrentResolution=$.prototype.dc;
$.prototype.getVideoTracks=function(){return this.e?this.e.getVideoTracks():[]};$.prototype.getVideoTracks=$.prototype.getVideoTracks;$.prototype.getAudioTracks=function(){return this.e?this.e.getAudioTracks():[]};$.prototype.getAudioTracks=$.prototype.getAudioTracks;$.prototype.Ra=function(){return this.e?this.e.Ra():[]};$.prototype.getTextTracks=$.prototype.Ra;$.prototype.Ia=function(a){return this.e?this.e.Ia(a,!0):!1};$.prototype.selectVideoTrack=$.prototype.Ia;
$.prototype.Xa=function(a){return this.e?this.e.Xa(a,!1):!1};$.prototype.selectAudioTrack=$.prototype.Xa;$.prototype.Ya=function(a){return this.e?this.e.Ya(a,!1):!1};$.prototype.selectTextTrack=$.prototype.Ya;$.prototype.Fa=function(a){this.e&&this.e.Fa(a)};$.prototype.enableTextTrack=$.prototype.Fa;$.prototype.Ea=function(a){this.yb=a;this.e&&this.e.Ea(a)};$.prototype.enableAdaptation=$.prototype.Ea;$.prototype.ec=function(){return this.a.currentTime};$.prototype.getCurrentTime=$.prototype.ec;
$.prototype.fc=function(){return this.a.duration};$.prototype.getDuration=$.prototype.fc;$.prototype.gc=function(){return this.a.muted};$.prototype.getMuted=$.prototype.gc;$.prototype.hc=function(){return this.a.volume};$.prototype.getVolume=$.prototype.hc;$.prototype.play=function(){this.Tb(1);this.a.play()};$.prototype.play=$.prototype.play;$.prototype.pause=function(){this.a.pause()};$.prototype.pause=$.prototype.pause;$.prototype.requestFullscreen=function(){this.a.requestFullscreen()};
$.prototype.requestFullscreen=$.prototype.requestFullscreen;$.prototype.seek=function(a){this.a.currentTime=a};$.prototype.seek=$.prototype.seek;$.prototype.Gc=function(a){this.a.muted=a};$.prototype.setMuted=$.prototype.Gc;$.prototype.Ic=function(a){this.a.volume=a};$.prototype.setVolume=$.prototype.Ic;$.prototype.Hc=function(a){this.ka=za(a)};$.prototype.setPreferredLanguage=$.prototype.Hc;$.prototype.Tb=function(a){0!=a&&(Ub(this),0<a?this.a.playbackRate=a:(this.a.playbackRate=0,this.Pb(a)))};
$.prototype.setPlaybackRate=$.prototype.Tb;function Ub(a){a.Va&&(window.clearTimeout(a.Va),a.Va=null)}function Tb(a){a.Ka&&(window.clearTimeout(a.Ka),a.Ka=null)}$.prototype.Pb=function(a){this.a.currentTime+=.1*a;this.Va=window.setTimeout(this.Pb.bind(this,a),100)};
$.prototype.Qb=function(){this.Ka=window.setTimeout(this.Qb.bind(this),100);var a=this.a.buffered,a=a.length?a.end(a.length-1):0,a=this.a.currentTime-a;this.Da?a<-this.e.Fb()&&(M("buffering"),a=this.H,a.bufferingTime+=Ra("buffering")/1E3,this.Da=!1,this.a.play()):.05<a&&(this.Da=!0,this.a.pause(),this.H.bufferingHistory.push(Date.now()/1E3),L("buffering"))};function Xb(a,b,c){I.call(this,null);this.Aa=a;this.Zb=b;this.Cb=c;this.U=null}q(Xb,I);n("shaka.player.HttpVideoSource",Xb);k=Xb.prototype;k.t=function(){this.U&&(this.U.parentElement.removeChild(this.U),this.U=null);this.parent=this.Cb=null};k.Ab=function(a,b){this.parent=a;var c=b.mediaKeys;b.src=this.Aa;c=b.setMediaKeys(c);this.Zb&&(this.U=document.createElement("track"),this.U.src=this.Zb,b.appendChild(this.U),this.U.track.mode="showing");return c};k.Qa=function(){return this.Cb};k.load=function(){return Promise.resolve()};
k.getVideoTracks=function(){return[]};k.getAudioTracks=function(){return[]};k.Ra=function(){return[]};k.Fb=function(){return 5};k.Ia=function(){return!1};k.Xa=function(){return!1};k.Ya=function(){return!1};k.Fa=function(a){this.U&&(this.U.track.mode=a?"showing":"disabled")};k.Ea=function(){};k.Ub=function(){};function Yb(a,b,c,d,e,f){this.index=a;this.startTime=b;this.endTime=c;this.Wb=d;this.Eb=e;this.url=f};function Zb(a){this.Ac=a};function $b(a,b,c){this.K=a;this.G=b;this.v=c;this.d=new J;this.va=[];this.f=ac;this.aa=this.r=null;this.j=[];this.S=null;this.qa=[];K(this.d,this.G,"updateend",this.uc.bind(this))}var ac=0;k=$b.prototype;k.t=function(){this.abort();this.r=this.aa=this.j=this.S=this.qa=this.f=null;this.d.t();this.K=this.G=this.va=this.d=null};
function bc(a,b,c){if(a.f!=ac)return a=Error("Cannot fetch: previous operation not complete."),a.type="dash",Promise.reject(a);a.f=1;a.r=new t;a.j=b.Ac;c&&a.qa.push(c);b=!0;c=a.j[0].url.toString();for(var d=1;d<a.j.length;++d)if(a.j[d].url.toString()!=c){b=!1;break}(b?cc(a):dc(a)).then(D(a,function(){Oa(this.v);this.G.appendBuffer(this.qa.shift());this.f=2;this.S=null})).catch(D(a,function(a){"aborted"!=a.type&&ec(this,a)}));return a.r}
function cc(a){a.S=new ub(a.j[0].url.toString(),a.j[0].Wb,a.j[a.j.length-1].Eb);a.S.ha=a.v;return a.S.send().then(a.eb.bind(a))}function dc(a){function b(a){this.S=new ub(a.url.toString(),a.Wb,a.Eb);this.S.ha=this.v;return this.S.send()}for(var c=b.bind(a)(a.j[0]),d=a.eb.bind(a),e=1;e<a.j.length;++e)var f=b.bind(a,a.j[e]),c=c.then(d).then(f);return c=c.then(a.eb.bind(a))}k.eb=function(a){this.qa.push(a);return Promise.resolve()};
k.clear=function(){if(this.f!=ac){var a=Error("Cannot clear: previous operation not complete.");a.type="dash";return Promise.reject(a)}if(0==this.G.buffered.length)return Promise.resolve();try{this.G.remove(0,Number.POSITIVE_INFINITY)}catch(b){return Promise.reject(b)}this.va=[];this.f=3;return this.r=new t};k.reset=function(){this.va=[]};
k.abort=function(){switch(this.f){case ac:return Promise.resolve();case 1:this.f=4;var a=this.aa=new t;this.S.abort();fc(this);return a;case 2:case 3:return this.f=4,this.aa=new t,"open"==this.K.readyState&&this.G.abort(),this.aa;case 4:return this.aa}};
k.uc=function(){switch(this.f){case 2:if(0<this.qa.length){try{this.G.appendBuffer(this.qa.shift())}catch(a){ec(this,a)}break}for(var b=0;b<this.j.length;++b){var c=this.j[b];this.va[c.index]=!0;this.va[c.index+1]=!1}this.j=[];case 3:this.f=ac;this.r.resolve();this.r=null;break;case 4:fc(this)}};function fc(a){a.aa.resolve();a.aa=null;var b=Error("Current operation aborted.");b.type="aborted";ec(a,b)}function ec(a,b){a.r.reject(b);a.f=ac;a.r=null;a.j=[];a.S=null;a.qa=[]};function gc(a){this.Aa=a}gc.prototype.parse=function(a,b){var c=null;try{c=this.rb(a,b)}catch(d){if(!(d instanceof RangeError))throw d;}return c};
gc.prototype.rb=function(a,b){var c;var d=new y(a);if(440786851!=z(d).id)c=null;else if(c=z(d),408125543!=c.id)c=null;else{d=c.h.byteOffset;c=new y(c.h);for(var e=null;c.ja();){var f=z(c);if(357149030==f.id){e=f;break}}if(e){c=new y(e.h);for(e=1E6;c.ja();)if(f=z(c),2807729==f.id){e=pa(f);break}c=e/1E9}else c=null;c=c?{Fc:d,Jc:c}:null}if(!c)return null;e=z(new y(b));if(475249515!=e.id)return null;d=c.Fc;c=c.Jc;for(var e=new y(e.h),f=[],g=-1,h=-1,m=0;e.ja();){var l=z(e);if(187==l.id){var p;p=new y(l.h);
l=z(p);if(179!=l.id)p=null;else if(l=pa(l),p=z(p),183!=p.id)p=null;else{p=new y(p.h);for(var s=0;p.ja();){var r=z(p);if(241==r.id){s=pa(r);break}}p={Kc:l,Bc:s}}p&&(l=c*p.Kc,p=d+p.Bc,0<=g&&(f.push(new Yb(m,g,l,h,p-1,this.Aa)),++m),g=l,h=p)}}0<=g&&f.push(new Yb(m,g,null,h,null,this.Aa));return f};function hc(a,b){I.call(this,a);this.a=b;this.P=this.D=null}q(hc,I);k=hc.prototype;k.t=function(){this.P&&this.a.removeChild(this.P);this.parent=this.a=this.D=this.P=null};k.Gb=function(){return!0};k.start=function(a){this.D=a;a=this.ib();this.P&&(this.ab(!1),this.a.removeChild(this.P));this.P=document.createElement("track");this.a.appendChild(this.P);this.P.src=this.D.c.toString();this.ab(a)};k.ub=function(a){this.start(a)};k.Rb=function(){};k.ab=function(a){this.P.track.mode=a?"showing":"disabled"};
k.ib=function(){return this.P?"showing"==this.P.track.mode:!1};function ic(a,b){this.v=a;this.e=b;this.d=new J;this.ob=Date.now()/1E3+4;this.Db=!0;K(this.d,this.v,"bandwidth",this.pb.bind(this))}ic.prototype.t=function(){this.d.t();this.e=this.v=this.d=null};ic.prototype.enable=function(a){this.Db=a};ic.prototype.pb=function(){if(this.Db){var a=Date.now()/1E3;if(!(a<this.ob)){var b=jc(this);if(b){if(b.active){this.ob=a+3;return}this.e.Ia(b.id,!1)}this.ob=a+8}}};
function jc(a){var b=a.e.getVideoTracks();if(0==b.length)return null;b.sort(ea);var c;a:{c=a.e.getAudioTracks();for(var d=0;d<c.length;++d)if(c[d].active){c=c[d];break a}c=null}c=c?c.bandwidth:0;a=Oa(a.v);for(var d=b[0],e=0;e<b.length;++e){var f=b[e],g=e+1<b.length?b[e+1]:{bandwidth:Number.POSITIVE_INFINITY};if(f.bandwidth&&(g=(g.bandwidth+c)/.85,a>=(f.bandwidth+c)/.95&&a<=g&&(d=f,d.active)))break}return d};function kc(a){this.Aa=a}kc.prototype.parse=function(a,b,c){a=null;try{a=this.rb(b,c)}catch(d){if(!(d instanceof RangeError))throw d;}return a};
kc.prototype.rb=function(a,b){var c=new ia(a,ja),d=[],e=H(c);if(1936286840!=H(c))return null;1==e&&(e=Ga(c));var f=oa(c);A(c,3);A(c,4);var g=H(c);if(0==g)return null;var h,m;0==f?(h=H(c),m=H(c)):(h=Ga(c),m=Ga(c));A(c,2);f=c.h.getUint16(c.i,c.nb);c.i+=2;e=b+e+m;for(m=0;m<f;m++){var l=H(c),p=(l&2147483648)>>>31,l=l&2147483647,s=H(c);H(c);if(1==p)return null;d.push(new Yb(m,h/g,(h+s)/g,e,e+l-1,this.Aa));h+=s;e+=l}return d};function lc(a){this.j=a}function mc(a,b){return 0>b||b>=a.j.length?null:a.j[b]}function nc(a,b,c){var d=oc(a,b);if(0>d)return null;for(var e=[];d<a.j.length;d++){e.push(a.j[d]);var f=a.j[d].endTime;if(!f||f>b+c)break}return new Zb(e)}function oc(a,b){for(var c=0;c<a.j.length;c++)if(a.j[c].startTime>b)return c?c-1:0;return a.j.length-1};function pc(a){this.Hb=a;this.M=[]}function qc(a){var b=a.o||"";a.wa&&(b+='; codecs="'+a.wa+'"');return b}function rc(a,b){var c=a.M[0];return c?b?c.ga.get(b)||[]:ha(c.ga):[]}function sc(a,b){if(a&&0<a.length)for(var c,d=0;2>=d;++d)if(c=a.filter(function(a){return ya(d,b,a.lang||"")}),c.length)return c;return[]}
function tc(a){if(a.g.length){"static"==a.type&&null==a.g[0].start&&(a.g[0].start=0);var b=function(a){return 0==a||!!a};1==a.g.length&&!b(a.g[0].duration)&&b(a.duration)&&(a.g[0].duration=a.duration);for(var c=0;c<a.g.length;++c){var d=a.g[c-1],e=a.g[c];uc(e);var f=a.g[c+1]||{start:a.duration};!b(e.start)&&d&&b(d.duration)&&(e.start=d.start+d.duration);!b(e.duration)&&b(f.start)&&(e.duration=f.start-e.start)}c=a.g[a.g.length-1];!b(a.duration)&&b(c.start)&&b(c.duration)&&(a.duration=c.start+c.duration)}}
function uc(a){if(!a.duration){for(var b=null,c=0;c<a.p.length;++c)for(var d=a.p[c],e=0;e<d.b.length;++e){var f=d.b[e];if(f.n){f=f.n;if(f.$)f=f.$/f.O*f.F.length;else{for(var g=0,h=0;h<f.F.length;++h)g+=f.F[h].duration;f=g/f.O}b=Math.max(b,f)}}a.duration=b}}function vc(a){var b=a.u;if(!b.kb)return null;var c=new Eb,b=wc(b.kb,a.id,null,a.bandwidth,null);if(!b)return null;c.url=a.c&&b?a.c.resolve(b):b;return c}
function wc(a,b,c,d,e){var f={RepresentationID:b,Number:c,Bandwidth:d,Time:e};a=a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(a,b,c){if("$$"==a)return"$";var d=f[b];if(null==d)return a;"RepresentationID"==b&&c&&(c=void 0);a=d.toString();c=window.parseInt(c,10)||1;c=Math.max(0,c-a.length);return Array(c+1).join("0")+a});try{return new N(a)}catch(g){if(g instanceof URIError)return null;throw g;}}
pc.prototype.Oa=function(a){for(var b=a.O,c=a.da,d=a.$,e=[],f=0;f<a.F.length;++f){var g=a.F[f],h=0,m=null,l=0,p=null;if(null!=g.startTime)0<f&&null!=a.F[f-1].startTime&&(h=a.F[f-1].startTime),h=(c+g.startTime)/b,m=h+g.duration/b;else{if(!d)return null;0==f?h=c/b:(h=e[f-1].startTime,h+=d/b);m=h+d/b;g.Ua&&(l=g.Ua.ta,p=g.Ua.end)}e.push(new Yb(f,h,m,l,p,g.Q))}return new lc(e)};function xc(a,b){var c=a.bandwidth||Number.MAX_VALUE,d=b.bandwidth||Number.MAX_VALUE;return c<d?-1:c>d?1:0}
function yc(a){for(var b=new x,c=new x,d=0;d<a.p.length;++d){var e=a.p[d],f=e.contentType||"";b.push(f,e);for(var f=e.L,g=0;g<f.length;++g)c.push(f[g].keySystem,e)}a=["audio","video","text"];e=null;c=c.keys();for(d=0;d<a.length;++d)if(f=a[d],f=b.get(f)){for(var g=c,h={},m=0;m<f.length;++m)for(var l=f[m].L,p=0;p<l.length;++p)h[l[p].keySystem]=null;if(!h.hasOwnProperty("")){f=h;g=[];h=void 0;for(h in f)g.push(h);g.sort()}f=g;if(e){h=g=0;for(m=[];g<e.length&&h<f.length;)if(e[g]<f[h])++g;else if(e[g]>
f[h])++h;else if(e[g]==f[h])m.push(e[g]),++g,++h;else throw new TypeError("Cannot intersect non-sortable values!");e=m}else e=f}if(!e)return null;d=e[0];0<=e.indexOf("")&&(d="");b=ha(b);a=new x;c=null;for(e=0;e<b.length;++e)for(f=b[e],g=f.L,h=0;h<g.length;++h)if(m=g[h],m.keySystem==d||""==m.keySystem)a.push(f.contentType,f),c&&c.keySystem?m.keySystem&&(c=xa(c,m)):c=m;b={ga:a,fb:c};a=b.ga;d=new x;(c=a.get("video"))&&d.push("video",c[0]);if(e=a.get("audio"))for(c=0;c<e.length;++c)e[c].o==e[0].o&&d.push("audio",
e[c]);if(a=a.get("text"))for(c=0;c<a.length;++c)d.push("text",a[c]);b.ga=d;return b};function zc(a,b,c,d,e){I.call(this,a);this.a=b;this.G=d;this.T=new $b(c,d,e);this.v=e;this.cb=this.Ga=this.B=this.D=null;this.f=Ac;this.ra=""}q(zc,I);var Ac=0;k=zc.prototype;k.t=function(){this.f=null;Bc(this);this.v=this.D=this.B=this.Ga=null;this.T.t();this.parent=this.a=this.G=this.T=null};k.Gb=function(){return 5==this.f};
k.start=function(a){if(Cc(this,a)&&this.f==Ac){this.D=a;this.ra=a.o.split("/")[0];this.B=null;this.f=1;var b=Dc(this,a);Promise.all(b).then(D(this,function(b){var d=b[0];b=b[1];if(a.m){if(this.B=this.Oa(a,d,b),!this.B)return b=Error("Failed to create SegmentIndex."),b.type="dash",Promise.reject(b)}else this.B=a.n.L;(d=mc(this.B,0))&&1<=d.startTime&&(this.G.timestampOffset=-d.startTime);return(d=nc(this.B,this.a.currentTime-this.G.timestampOffset,a.A))?bc(this.T,d,b):Promise.reject(Error("No segments available."))})).then(D(this,
function(){Ec(this,a);Fc(this)})).catch(D(this,function(a){"aborted"!=a.type&&(this.f=Ac,a=w(a),this.dispatchEvent(a))}))}};
k.ub=function(a,b){L("switch");L("switch logic");if(Cc(this,a)&&this.f!=Ac)if(1==this.f||2==this.f||3==this.f)this.Ga=this.ub.bind(this,a,b);else if(a==this.D)this.Ba();else{if(b&&a.height&&a.height!=this.D.height){var c=function(b){b.videoHeight==a.height?M("switch"):window.setTimeout(c,50)}.bind(null,this.a);c()}this.f=2;var d=Dc(this,a),e=this.a.paused;b&&(this.a.pause(),Bc(this),d.push(this.T.abort()));var f;Promise.all(d).then(D(this,function(b){var c=b[0];f=b[1];if(a.m){if(this.B=this.Oa(a,
c,f),!this.B)return b=Error("Failed to create SegmentIndex."),b.type="dash",Promise.reject(b)}else this.B=a.n.L;this.D=a;this.ra=a.o.split("/")[0];this.f=3;this.T.reset();Ec(this,a);Bc(this);return this.T.abort()})).then(D(this,function(){var b=Math.max(a.A,15);return(b=nc(this.B,this.a.currentTime-this.G.timestampOffset,b))?bc(this.T,b,f):Promise.reject(Error("No segments available."))})).then(D(this,function(){b&&(this.a.currentTime-=.05,e||this.a.play());M("switch logic");Fc(this)})).catch(D(this,
function(a){"aborted"!=a.type&&(a=w(a),this.dispatchEvent(a),this.f=4,this.Ba())}))}};function Ec(a,b){var c=b.o.split("/")[0],c=fa({type:"adaptation",bubbles:!0,contentType:c,size:"video"!=c?null:{width:b.width,height:b.height},bandwidth:b.bandwidth});a.dispatchEvent(c)}function Cc(a,b){var c=b.n&&b.n.L;return b.m&&b.m.C&&b.m.C.Z&&b.m.Q||c?!0:(c=Error("Missing critical segment information."),c.type="mpd",c=w(c),a.dispatchEvent(c),!1)}
function Fc(a){a.f=4;if(a.Ga){var b=a.Ga;a.Ga=null;b()}else a.Ba()}k.Rb=function(){this.f!=Ac&&1!=this.f&&2!=this.f&&3!=this.f&&(Bc(this),this.T.abort().then(D(this,function(){this.f=4;this.Ba()})))};k.ab=function(){};k.ib=function(){return!0};function Dc(a,b){return b.m?[Gc(a,b.m.C),Gc(a,b.m.ca)]:[Promise.resolve(null),Gc(a,b.n.ca)]}function Gc(a,b){if(!b||!b.url)return Promise.resolve(null);var c=b.Z;c||(c={ta:0,end:null});c=new ub(b.url.toString(),c.ta,c.end);c.ha=a.v;return c.send()}
k.Oa=function(a,b,c){var d=null;if(0<=a.o.indexOf("mp4"))d=new kc(a.m.Q);else if(0<=a.o.indexOf("webm")){if(!c)return null;d=new gc(a.m.Q)}else return null;c=c?new DataView(c):null;b=new DataView(b);return(a=d.parse(c,b,a.m.C.Z.ta))?new lc(a):null};
k.Ba=function(){Bc(this);var a=this.a.currentTime-this.G.timestampOffset,b=Hc(this,a);if(b=mc(this.B,b)){var c=Math.max(this.D.A,15);b.startTime-a>=c?this.cb=window.setTimeout(this.Ba.bind(this),1E3):bc(this.T,new Zb([b])).then(D(this,function(){this.Ba()})).catch(D(this,function(a){"aborted"!=a.type&&(a=w(a),this.dispatchEvent(a))}))}else this.f=5,a=fa({type:"ended"}),this.dispatchEvent(a)};function Hc(a,b){for(var c=oc(a.B,b);0<=c&&c<a.B.j.length&&!0==a.T.va[c];)c++;return c}
function Bc(a){a.cb&&(window.clearTimeout(a.cb),a.cb=null)};function Ic(a){P.call(this,a);this.q.responseType="text"}q(Ic,P);Ic.prototype.send=function(){var a=this.url;return this.Za().then(function(b){b=b.responseText;if(b=(new DOMParser).parseFromString(b,"text/xml")){vb=0;var c={c:new N(a)};b=V(c,b,wb)}else b=null;if(b)return Promise.resolve(b);b=Error("MPD parse failure.");b.type="mpd";return Promise.reject(b)})};function Jc(a,b){I.call(this,null);this.na=null;this.Mb=a;this.w=new pc(b);this.K=new MediaSource;this.a=null;this.s={};this.d=new J;this.Ma=new t;this.ka="";this.v=new Na;this.H=null;this.La=new ic(this.v,this)}q(Jc,I);n("shaka.player.DashVideoSource",Jc);k=Jc.prototype;k.t=function(){this.d.t();this.d=null;this.La.t();this.La=null;Kc(this);this.v=this.Ma=this.parent=this.na=this.Mb=this.w=this.K=this.a=this.s=null};
k.Ab=function(a,b){this.parent=a;this.a=b;this.H=a.getStats();K(this.d,this.K,"sourceopen",this.pc.bind(this));K(this.d,this.a,"seeking",this.qb.bind(this));K(this.d,this.v,"bandwidth",this.pb.bind(this));var c=this.a.mediaKeys;this.a.src=window.URL.createObjectURL(this.K);c=this.a.setMediaKeys(c);return Promise.all([this.Ma,c])};k.Qa=function(){if(0==this.w.M.length)return null;var a;return(a=(a=this.w.M[0])?a.fb:null)&&a.keySystem?a:null};
k.load=function(a){this.ka=a;return(new Ic(this.Mb)).send().then(D(this,function(a){if(0==a.g.length)return a=Error("Unplayable MPD: no periods."),a.type="mpd",Promise.reject(a);for(var c=this.w,d=0;d<a.g.length;++d)for(var e=a.g[d],f=0;f<e.p.length;++f){var g=e.p[f];if("text"!=g.contentType)for(var h=0;h<g.b.length;++h){var m=g.b[h],l=0,l=l+(m.m?1:0),l=l+(m.n?1:0),l=l+(m.u?1:0);0==l?(g.b.splice(h,1),--h):1!=l&&(m.m?(m.n=null,m.u=null):m.n&&(m.u=null))}}tc(a);for(d=0;d<a.g.length;++d)for(e=a.g[d],
f=0;f<e.p.length;++f)for(g=e.p[f],h=0;h<g.b.length;++h)if(m=g.b[h],m.u)if(l=m.u,l.Sa){a:{var l=m,p=l.u,s=new R,r;r=l;var u=r.u;if(u.Sa){var C=new Db;(u=wc(u.Sa,r.id,null,r.bandwidth,null))?(C.url=r.c&&u?r.c.resolve(u):u,r=C):r=null}else r=null;s.C=r;if(s.C){s.ca=vc(l);r=void 0;if(p.la){p=wc(p.la,l.id,1,l.bandwidth,0);if(!p)break a;r=l.c?l.c.resolve(p):p}else r=l.c;s.Q=r;l.m=s}}m.m||(g.b.splice(h,1),--h)}else if(l.vb){a:if(l=m,s=l.u,s.la){p=new S;p.O=s.O;p.da=s.da;p.X=s.X;p.ca=vc(l);p.F=[];r=s.vb.$b;
for(var C=1,u=-1,v=0;v<r.length;++v)for(var F=r[v].repeat||0,Ba=0;Ba<=F;++Ba){if(!r[v].duration)break a;var qa;qa=r[v].startTime&&0==Ba?r[v].startTime:0==v&&0==Ba?0:u;if(0<=u&&qa>u)break a;var u=qa+r[v].duration,ra=wc(s.la,l.id,C-1+s.X,l.bandwidth,qa);if(!ra)break a;var ra=l.c?l.c.resolve(ra):ra,Ca=new Fb;Ca.Q=ra;Ca.startTime=qa;Ca.duration=r[v].duration;p.F.push(Ca);++C}l.n=p}m.n||(g.b.splice(h,1),--h)}else if(l.$)if(e.duration){a:if(l=m,s=e.duration,p=l.u,p.la){r=new S;r.O=p.O;r.da=p.da;r.X=p.X;
r.ca=vc(l);r.F=[];C=1;for(u=0;u/r.O<s;){v=wc(p.la,l.id,C-1+p.X,l.bandwidth,u);if(!v)break a;v=l.c?l.c.resolve(v):v;F=new Fb;F.Q=v;F.startTime=u;F.duration=p.$;r.F.push(F);++C;u+=p.$}l.n=r}m.n||(g.b.splice(h,1),--h)}else g.b.splice(h,1),--h;else g.b.splice(h,1),--h;tc(a);for(d=0;d<a.g.length;++d)for(e=a.g[d],f=0;f<e.p.length;++f){g=e.p[f];h=c;m=g;for(l=0;l<m.b.length;++l){s=m.b[l];p=qc(s);r=h;C=s;u=[];if(0==C.V.length)u.push(wa());else if(r.Hb)for(v=0;v<C.V.length;++v)(F=r.Hb(C.V[v]))&&u.push(F);r=
u;C=[];for(v=u=0;v<r.length;++v)F=r[v],Sb(F.keySystem,p)&&(C.push(F),++u);0==u?(m.b.splice(l,1),--l):s.L=C}h=g;m=null;for(l=0;l<h.b.length;++l)(s=h.b[l].o||"",m)?s!=m&&(h.b.splice(l,1),--l):m=s;0==g.b.length&&(e.p.splice(f,1),--f)}for(d=0;d<a.g.length;++d)for(e=a.g[d],f=0;f<e.p.length;++f)for(g=e.p[f],h=0;h<g.b.length;++h)m=g.b[h],m.n&&(m=m.n,l=c.Oa(m),l||(g.b.splice(h,1),--h),m.F=[],m.L=l);for(d=0;d<a.g.length;++d)for(e=a.g[d],f=0;f<e.p.length;++f){g=e.p[f];h={};for(m=0;m<g.b.length;++m){l=g.b[m].L;
s={};for(p=0;p<l.length;++p){r=l[p];var B=r.key();s[B]=r}for(B in s)h.hasOwnProperty(B)?h[B].count++:h[B]={fb:s[B],count:1}}m=g.b.length;l=[];for(B in h)s=h[B],s.count==m&&l.push(s.fb);g.L=l}for(B=0;B<a.g.length;++B)for(d=a.g[B],e=0;e<d.p.length;++e)d.p[e].b.sort(xc);c.M=[];for(B=0;B<a.g.length;++B)c.M.push(yc(a.g[B]));this.na=a;return 0==this.w.M.length||0==rc(this.w).length?(a=Error("This content cannot be displayed on this browser/platform."),a.type="mpd",Promise.reject(a)):Promise.resolve()}))};
k.getVideoTracks=function(){if(0==this.w.M.length)return[];for(var a=this.s.video,a=(a=a?a.D:null)?a.fa:0,b=[],c=rc(this.w,"video"),d=0;d<c.length;++d)for(var e=c[d],f=0;f<e.b.length;++f){var g=e.b[f],h=g.fa,g=new da(h,g.bandwidth,g.width,g.height);h==a&&(g.active=!0);b.push(g)}return b};
k.getAudioTracks=function(){if(0==this.w.M.length)return[];for(var a=this.s.audio,a=(a=a?a.D:null)?a.fa:0,b=[],c=rc(this.w,"audio"),d=0;d<c.length;++d)for(var e=c[d],f=e.lang,g=0;g<e.b.length;++g){var h=e.b[g],m=h.fa,h=new ca(m,h.bandwidth,f);m==a&&(h.active=!0);b.push(h)}return b};
k.Ra=function(){if(0==this.w.M.length)return[];for(var a=this.s.text,b=a?a.D:null,b=b?b.fa:0,c=[],d=rc(this.w,"text"),e=0;e<d.length;++e)for(var f=d[e],g=f.lang,h=0;h<f.b.length;++h){var m=f.b[h].fa,l=new ba(m,g);m==b&&(l.active=!0,l.enabled=a.ib());c.push(l)}return c};k.Fb=function(){return this.na.A};k.Ia=function(a,b){return Lc(this,"video",a,b)};k.Xa=function(a,b){return Lc(this,"audio",a,b)};k.Ya=function(a,b){return Lc(this,"text",a,b)};k.Fa=function(a){var b=this.s.text;b&&b.ab(a)};k.Ea=function(a){this.La.enable(a)};
k.Ub=function(a){if(this.na)for(var b=this.na,c=0;c<b.g.length;++c)for(var d=b.g[c],e=0;e<d.p.length;++e)for(var f=d.p[e],g=0;g<f.b.length;++g){var h=f.b[g],m=!1;a.maxWidth&&h.width>a.maxWidth&&(m=!0);a.maxHeight&&h.height>a.maxHeight&&(m=!0);m&&(f.b.splice(g,1),--g)}};function Lc(a,b,c,d){if(0==a.w.M.length||!a.s[b])return!1;for(var e=rc(a.w,b),f=0;f<e.length;++f)for(var g=e[f],h=0;h<g.b.length;++h){var m=g.b[h];if(m.fa==c)return Pb(a.H,m),a.s[b].ub(m,d),!0}return!1}
k.pc=function(){this.d.Ja(this.K,"sourceopen");this.K.duration=this.na.g[0].duration||this.na.duration;var a;a=this.ka;var b=this.w.M[0];if(b){var c=[],d=b.ga.get("video");d&&0<d.length&&c.push(d[0]);if((d=b.ga.get("audio"))&&0<d.length){var e=sc(d,a);c.push(0<e.length?e[0]:d[0])}(b=b.ga.get("text"))&&0<b.length&&(a=sc(b,a),c.push(0<a.length?a[0]:b[0]));a=c}else a=[];c={};for(b=0;b<a.length;++b){var f=a[b],d=f.contentType||"",e=f.b[0];if("video"==d){var g;g=(g=jc(this.La))?g.id:null;for(var h=0;h<
f.b.length&&(e=f.b[h],e.fa!=g);++h);}else"audio"==d&&(e=f.b[Math.floor(f.b.length/2)]);Pb(this.H,e);f=qc(e);if("text"==d)f=new hc(this,this.a);else a:{g=void 0;try{g=this.K.addSourceBuffer(f)}catch(m){Kc(this);f=Error("Failed to create DASH stream for "+f+".");f.type="dash";f.Mc=m;this.Ma.reject(f);f=null;break a}f=new zc(this,this.a,this.K,g,this.v)}if(!f)return;this.s[d]=f;c[d]=e}for(var l in this.s)K(this.d,this.s[l],"ended",this.vc.bind(this)),e=c[l],this.s[l].start(e);l=!0;(c=c.audio)&&ya(2,
this.ka,c.lang||this.ka)&&(l=!1);this.Fa(l);this.Ma.resolve()};function Kc(a){for(var b in a.s)a.s[b].t();a.s={}}k.vc=function(){if("open"==this.K.readyState){for(var a in this.s)if(!this.s[a].Gb())return;this.K.endOfStream()}};k.qb=function(){for(var a in this.s)this.s[a].Rb()};k.pb=function(){var a=this.H,b=Oa(this.v);a.estimatedBandwidth=b;a.bandwidthHistory.push(new Rb(b))};}.bind(window))()
