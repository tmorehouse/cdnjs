var p5DOM=function(){function t(t){return"VIDEO"===t.tagName||"AUDIO"===t.tagName?new p5.MediaElement(t):new p5.Element(t)}function e(t,e,n){var i=e._userNode?e._userNode:document.body;i.appendChild(t);var r=n?new p5.MediaElement(t):new p5.Element(t);return e._elements.push(r),r}function n(t,n,i,r){var o=document.createElement(n);"string"==typeof i&&(i=[i]);for(var s=0;s<i.length;s++){var a=document.createElement("source");a.src=i[s],o.appendChild(a)}"undefined"!=typeof r&&o.addEventListener("canplaythrough",function(){r()});var p=e(o,t,!0);return p.loadedmetadata=!1,o.addEventListener("loadedmetadata",function(){p.width=o.videoWidth,p.height=o.videoHeight,p.loadedmetadata=!0}),p}p5.prototype.getElement=function(e){var n=document.getElementById(e);return n?t(n):null},p5.prototype.getElements=function(e){var n=[],i=document.getElementsByClassName(e);if(i)for(var r=0;r<i.length;r++){var o=t(i[r]);n.push(o)}return n},p5.prototype.removeElements=function(){for(var t=0;t<this._elements.length;t++)this._elements[t].elt instanceof HTMLCanvasElement||this._elements[t].remove()};var i=["div","p","span"];i.forEach(function(t){var n="create"+t.charAt(0).toUpperCase()+t.slice(1);p5.prototype[n]=function(n){var i=document.createElement(t);return i.innerHTML=void 0===typeof n?"":n,e(i,this)}}),p5.prototype.createImg=function(t,n){var i=document.createElement("img");return i.src=t,"undefined"!=typeof n&&(i.alt=n),e(i,this)},p5.prototype.createA=function(t,n,i){var r=document.createElement("a");return r.href=t,r.innerHTML=n,i&&(r.target=i),e(r,this)},p5.prototype.createSlider=function(t,n,i){var r=document.createElement("input");return r.type="range",r.min=t,r.max=n,i&&(r.value=i),e(r,this)},p5.prototype.createButton=function(t,n){var i=document.createElement("button");return i.innerHTML=t,i.value=n,n&&(i.value=n),e(i,this)},p5.prototype.createInput=function(t){var n=document.createElement("input");return n.type="text",t&&(n.value=t),e(n,this)},p5.prototype.createVideo=function(t,e){return n(this,"video",t,e)},p5.prototype.createAudio=function(t,e){return n(this,"audio",t,e)},p5.prototype.VIDEO="video",p5.prototype.AUDIO="audio",navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,p5.prototype.createCapture=function(){var t,n,i=arguments[0];i===p5.prototype.VIDEO?t=!0:i===p5.prototype.AUDIO?n=!0:(t=!0,n=!0);var r;if("number"==typeof arguments[0]?r=arguments[0]:2==arguments.length&&"number"==typeof arguments[1]&&(r=arguments[1]),!navigator.getUserMedia)throw"getUserMedia not supported in this browser";var o,s=document.createElement("video");t=o||t,console.log(t),navigator.getUserMedia({video:t,audio:n},function(t){s.src=window.URL.createObjectURL(t),s.play()},function(t){console.log(t)});var a=e(s,this,!0);return a.loadedmetadata=!0,a},p5.prototype.createElement=function(t,n){var i=document.createElement(t);return"undefined"!=typeof n&&(i.innerHTML=n),e(i,this)},p5.Element.prototype.addClass=function(t){return this.elt.className=this.elt.className?this.elt.className+" "+t:t,this},p5.Element.prototype.removeClass=function(t){var e=new RegExp("(?:^|\\s)"+t+"(?!\\S)");return this.elt.className=this.elt.className.replace(e,""),this.elt.className=this.elt.className.replace(/^\s+|\s+$/g,""),this},p5.Element.prototype.child=function(t){return"string"==typeof t?t=document.getElementById(t):t instanceof p5.Element&&(t=t.elt),this.elt.appendChild(t),this},p5.Element.prototype.html=function(t){return"undefined"!=typeof t?(this.elt.innerHTML=t,this):this.elt.innerHTML},p5.Element.prototype.position=function(t,e){return this.elt.style.position="absolute",this.elt.style.left=t+"px",this.elt.style.top=e+"px",this},p5.Element.prototype.style=function(t,e){if("undefined"==typeof e)for(var n=t.split(";"),i=0;i<n.length;i++){var r=n[i].split(":");r[0]&&r[1]&&(this.elt.style[r[0].trim()]=r[1].trim())}else this.elt.style[t]=e;return this},p5.Element.prototype.attribute=function(t,e){return"undefined"==typeof e?this.elt.getAttribute(t):(this.elt.setAttribute(t,e),this)},p5.Element.prototype.value=function(){return arguments.length>0?(this.elt.value=arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},p5.Element.prototype.show=function(){return this.elt.style.display="block",this},p5.Element.prototype.hide=function(){return this.elt.style.display="none",this},p5.Element.prototype.size=function(t,e){var n=t,i=e,r=p5.prototype.AUTO;if(n!==r||i!==r){if(n===r?n=e*this.elt.width/this.elt.height:i===r&&(i=t*this.elt.height/this.elt.width),this.elt instanceof HTMLCanvasElement){var o={},s=this.elt.getContext("2d");for(var a in s)o[a]=s[a];this.elt.setAttribute("width",n*this._pInst._pixelDensity),this.elt.setAttribute("height",i*this._pInst._pixelDensity),this.elt.setAttribute("style","width:"+n+"px !important; height:"+i+"px !important;"),this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity);for(var a in o)this.elt.getContext("2d")[a]=o[a]}else this.elt.style.width=n+"px",this.elt.style.height=i+"px",this.elt.width=n,this.elt.height=i;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},p5.Element.prototype.remove=function(){for(var t in this._events)this.elt.removeEventListener(t,this._events[t]);this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt),delete this},p5.MediaElement=function(t,e){p5.Element.call(this,t,e)},p5.MediaElement.prototype=Object.create(p5.Element.prototype),p5.MediaElement.prototype.play=function(){return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),this.elt.play(),this},p5.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},p5.MediaElement.prototype.pause=function(){return this.elt.pause(),this},p5.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},p5.MediaElement.prototype.noLoop=function(){return this.elt.setAttribute("loop",!1),this},p5.MediaElement.prototype.autoplay=function(t){return this.elt.setAttribute("autoplay",t),this},p5.MediaElement.prototype.volume=function(t){return"undefined"==typeof t?this.elt.volume:void(this.elt.volume=t)},p5.MediaElement.prototype.time=function(t){return"undefined"==typeof t?this.elt.currentTime:void(this.elt.currentTime=t)},p5.MediaElement.prototype.duration=function(){return this.elt.duration},p5.MediaElement.prototype.pixels=[],p5.MediaElement.prototype.loadPixels=function(){return this.loadedmetadata&&(this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d")),this.drawingContext.drawImage(this.elt,0,0,this.width,this.height),p5.prototype.loadPixels.call(this)),this},p5.MediaElement.prototype.updatePixels=function(t,e,n,i){return this.loadedmetadata&&p5.prototype.updatePixels.call(this,t,e,n,i),this},p5.MediaElement.prototype.get=function(t,e,n,i){return this.loadedmetadata?p5.prototype.get.call(this,t,e,n,i):[0,0,0,255]},p5.MediaElement.prototype.set=function(t,e,n){this.loadedmetadata&&p5.prototype.set.call(this,t,e,n)}}();