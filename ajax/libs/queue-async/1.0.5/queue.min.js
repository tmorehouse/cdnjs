(function(){function n(n){function t(){for(;r=c.length>a&&n>p;){var u=a++,t=c[u],o=e.call(t,1);o.push(l(u)),++p,t[0].apply(null,o)}}function l(n){return function(u,e){--p,null==s&&(null!=u?(s=u,a=d=0/0,o()):(c[n]=e,--d?r||t():o()))}}function o(){null!=s?m(s):f?m(s,c):m.apply(null,[s].concat(c))}var i,r,f,c=[],a=0,p=0,d=0,s=null,m=u;return n||(n=1/0),i={defer:function(){return s||(c.push(arguments),++d,t()),i},await:function(n){return m=n,f=!1,d||o(),i},awaitAll:function(n){return m=n,f=!0,d||o(),i}}}function u(){}var e=[].slice;n.version="1.0.5","function"==typeof define&&define.amd?define(n):"object"==typeof module&&module.exports?module.exports=n:this.queue=n})();