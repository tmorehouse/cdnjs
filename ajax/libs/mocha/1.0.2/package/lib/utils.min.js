function ignored(e){return!~ignore.indexOf(e)}var fs=require("fs"),path=require("path"),join=path.join,debug=require("debug")("watch"),ignore=["node_modules",".git"];exports.escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},exports.forEach=function(e,r,t){for(var n=0,o=e.length;o>n;n++)r.call(t,e[n],n)},exports.indexOf=function(e,r,t){for(var n=t||0,o=e.length;o>n;n++)if(e[n]===r)return n;return-1},exports.reduce=function(e,r,t,n){for(var o=t,i=0,c=e.length;c>i;i++)o=r.call(n,o,e[i],i,e);return o},exports.filter=function(e,r,t){for(var n=[],o=0,i=e.length;i>o;o++){var c=e[o];r.call(t,c,o,e)&&n.push(c)}return n},exports.keys=Object.keys||function(e){var r=[],t=Object.prototype.hasOwnProperty;for(var n in e)t.call(e,n)&&r.push(n);return r},exports.watch=function(e,r){var t={interval:100};e.forEach(function(e){debug("file %s",e),fs.watchFile(e,t,function(t,n){n.mtime<t.mtime&&r(e)})})},exports.files=function(e,r){return r=r||[],fs.readdirSync(e).filter(ignored).forEach(function(t){t=join(e,t),fs.statSync(t).isDirectory()?exports.files(t,r):t.match(/\.(js|coffee)$/)&&r.push(t)}),r},exports.slug=function(e){return e.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")};