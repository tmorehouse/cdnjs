function Markdown(t){function n(t){return Array(u).join("#")+" "+t}function e(t,n){var r=n;return n=n[t.title]=n[t.title]||{suite:t},t.suites.forEach(function(t){e(t,n)}),r}function r(t,n){++n;var e,i="";for(var u in t)"suite"!=u&&(u&&(e=" - ["+u+"](#"+utils.slug(t[u].suite.fullTitle())+")\n"),u&&(i+=Array(n).join("  ")+e),i+=r(t[u],n));return--n,i}function i(t){var n=e(t,{});return r(n,0)}Base.call(this,t);var u=(this.stats,t.total,0),s="";i(t.suite),t.on("suite",function(t){++u;var e=utils.slug(t.fullTitle());s+='<a name="'+e+'" />\n',s+=n(t.title)+"\n"}),t.on("suite end",function(){--u}),t.on("pass",function(t){var n=clean(t.fn.toString());s+=t.title+".\n",s+="\n```js",s+=n+"\n",s+="```\n\n"}),t.on("end",function(){process.stdout.write("# TOC\n"),process.stdout.write(i(t.suite)),process.stdout.write(s)})}function clean(t){t=t.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var n=t.match(/^\n?( *)/)[1].length,e=new RegExp("^ {"+n+"}","gm");return t=t.replace(e,"")}var Base=require("./base"),utils=require("../utils");exports=module.exports=Markdown;