function XUnit(e){Base.call(this,e);var t=this.stats,s=[];e.on("test end",function(e){s.push(e)}),e.on("end",function(){console.log(tag("testsuite",{name:"Mocha Tests",tests:t.tests,failures:t.failures,errors:t.failures,skip:t.tests-t.failures-t.passes,timestamp:(new Date).toUTCString(),time:t.duration/1e3},!1)),s.forEach(test),console.log("</testsuite>")})}function test(e){var t={classname:e.parent.fullTitle(),name:e.title,time:e.duration/1e3};if("failed"==e.state){var s=e.err;t.message=escape(s.message),console.log(tag("testcase",t,!1,tag("failure",t,!1,cdata(s.stack))))}else console.log(e.pending?tag("testcase",t,!1,tag("skipped",{},!0)):tag("testcase",t,!0))}function tag(e,t,s,a){var i,n=s?"/>":">",o=[];for(var r in t)o.push(r+'="'+escape(t[r])+'"');return i="<"+e+(o.length?" "+o.join(" "):"")+n,a&&(i+=a+"</"+e+n),i}function cdata(e){return"<![CDATA["+escape(e)+"]]>"}var Base=require("./base"),utils=require("../utils"),escape=utils.escape;exports=module.exports=XUnit,XUnit.prototype.__proto__=Base.prototype;