function Base(e){var t=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},o=this.failures=[];e&&(this.runner=e,e.on("start",function(){t.start=new Date}),e.on("suite",function(e){t.suites=t.suites||0,e.root||t.suites++}),e.on("test end",function(){t.tests=t.tests||0,t.tests++}),e.on("pass",function(e){t.passes=t.passes||0;var o=exports.slow/2;e.speed=e.duration>exports.slow?"slow":e.duration>o?"medium":"fast",t.passes++}),e.on("fail",function(e,r){t.failures=t.failures||0,t.failures++,e.err=r,o.push(e)}),e.on("end",function(){t.end=new Date,t.duration=new Date-t.start}),e.on("pending",function(){t.pending++}))}function pad(e,t){return e=String(e),Array(t-e.length+1).join(" ")+e}function errorDiff(e,t){return diff["diff"+t](e.actual,e.expected).map(function(e){return e.added?colorLines("diff added",e.value):e.removed?colorLines("diff removed",e.value):e.value}).join("")}function colorLines(e,t){return t.split("\n").map(function(t){return color(e,t)}).join("\n")}var tty=require("tty"),diff=require("diff"),isatty=tty.isatty(1)&&tty.isatty(2);exports=module.exports=Base,exports.useColors=isatty,exports.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41};var color=exports.color=function(e,t){return exports.useColors?"["+exports.colors[e]+"m"+t+"[0m":t};exports.window={width:isatty?process.stdout.getWindowSize?process.stdout.getWindowSize(1)[0]:tty.getWindowSize()[1]:75},exports.cursor={hide:function(){process.stdout.write("[?25l")},show:function(){process.stdout.write("[?25h")},deleteLine:function(){process.stdout.write("[2K")},beginningOfLine:function(){process.stdout.write("[0G")},CR:function(){exports.cursor.deleteLine(),exports.cursor.beginningOfLine()}},exports.slow=75,exports.list=function(e){console.error(),e.forEach(function(e,t){var o=color("error title","  %s) %s:\n")+color("error message","     %s")+color("error stack","\n%s\n"),r=e.err,s=r.message||"",n=r.stack||s,i=n.indexOf(s)+s.length,l=n.slice(0,i),a=r.actual,c=r.expected;if("string"==typeof a&&"string"==typeof c){var u=Math.max(a.length,c.length);l=20>u?errorDiff(r,"Chars"):errorDiff(r,"Words");var f=l.split("\n");if(f.length>4){var d=String(f.length).length;l=f.map(function(e,t){return pad(++t,d)+" | "+e}).join("\n")}l="\n"+color("diff removed","actual")+" "+color("diff added","expected")+"\n\n"+l+"\n",l=l.replace(/^/gm,"      "),o=color("error title","  %s) %s:\n%s")+color("error stack","\n%s\n")}n=n.slice(i?i+1:i).replace(/^/gm,"  "),console.error(o,t+1,e.fullTitle(),l,n)})},Base.prototype.epilogue=function(){function e(e){return 1==e?"test":"tests"}var t,o=this.stats;return console.log(),o.failures?(t=color("bright fail","  âœ–")+color("fail"," %d of %d %s failed")+color("light",":"),console.error(t,o.failures,this.runner.total,e(this.runner.total)),Base.list(this.failures),void console.error()):(t=color("bright pass","  âœ”")+color("green"," %d %s complete")+color("light"," (%dms)"),console.log(t,o.tests||0,e(o.tests),o.duration),o.pending&&(t=color("pending","  â€¢")+color("pending"," %d %s pending"),console.log(t,o.pending,e(o.pending))),void console.log())};