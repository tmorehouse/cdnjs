function image(e){return __dirname+"/../images/"+e+".png"}function Mocha(e){e=e||{},this.files=[],this.options=e,this.suite=new exports.Suite("",new exports.Context),this.ui(e.ui),this.reporter(e.reporter),e.timeout&&this.suite.timeout(e.timeout)}var path=require("path");exports=module.exports=Mocha,exports.version="1.0.2",exports.utils=require("./utils"),exports.interfaces=require("./interfaces"),exports.reporters=require("./reporters"),exports.Runnable=require("./runnable"),exports.Context=require("./context"),exports.Runner=require("./runner"),exports.Suite=require("./suite"),exports.Hook=require("./hook"),exports.Test=require("./test"),Mocha.prototype.addFile=function(e){return this.files.push(e),this},Mocha.prototype.reporter=function(e){if(e=e||"dot",this._reporter=require("./reporters/"+e),!this._reporter)throw new Error('invalid reporter "'+e+'"');return this},Mocha.prototype.ui=function(e){if(e=e||"bdd",this._ui=exports.interfaces[e],!this._ui)throw new Error('invalid interface "'+e+'"');return this._ui=this._ui(this.suite),this},Mocha.prototype.loadFiles=function(){var e=this.suite;this.files.forEach(function(r){r=path.resolve(r),e.emit("pre-require",global,r),e.emit("require",require(r),r),e.emit("post-require",global,r)})},Mocha.prototype.growl=function(e,r){var t=require("growl");e.on("end",function(){var i=r.stats;if(i.failures){var o=i.failures+" of "+e.total+" tests failed";t(o,{title:"Failed",image:image("fail")})}else t(i.passes+" tests passed in "+i.duration+"ms",{title:"Passed",image:image("pass")})})},Mocha.prototype.run=function(e){this.loadFiles();var r=this.suite,t=this.options,i=new exports.Runner(r),o=new this._reporter(i);return i.ignoreLeaks=t.ignoreLeaks,t.grep&&i.grep(t.grep),t.globals&&i.globals(t.globals),t.growl&&this.growl(i,o),i.run(e)};