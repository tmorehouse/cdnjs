(function(){var t,e=function(){},n=this,r=n.m,i=Array.prototype,o=Object.prototype,a=(Function.prototype,i.push,i.slice),s=i.splice,u=(i.concat,i.indexOf),c=o.toString,l=o.hasOwnProperty,p=String.prototype.trim,f=Array.isArray,h=Object.keys,d=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;""!=="﻿ ".trim()&&(p=function(){return null==this?"":(this+"").replace(d,"")}),t=function(){},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.m=t):n.m=t,t.VERSION="0.3.3",t.apply=function(t,e,n){var r=n&&n.length;if(!n||!r)return t.call(e);switch(r){case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4]);default:return t.apply(e,n)}};var m={};t.classExtend=function(e,n,r){var i,o,a,s=this;return o=e&&t.has(e,"constructor")?e.constructor:s,i=r?function(t,e){return this instanceof i?t===m?o.apply(this,e):o.apply(this,arguments):new i(m,arguments)}:function(){return o.apply(this,arguments)},a=function(){this.constructor=i},a.prototype=s.prototype,i.prototype=new a,e&&t.extend(i.prototype,e),t.extend(i,s,n),i.__super__=s.prototype,i},t.clone=function(e){var n,r,i;if(e===!0&&t.has(arguments,1)&&(n=e,e=arguments[1]),!t.isObjectLike(e))return e;switch(t.type(e)){case"array":return n?t.extend(n,[],e):a.call(e);case"number":case"string":case"date":case"boolean":return new(r=e.constructor)(e);case"regexp":return r=e.constructor,i=new r(e),i.lastIndex=e.lastIndex,i;default:return n?t.extend(n,{},e):t.extend({},e)}},t.each=function(e,n){var r,i,o=t.each.breaker;if(t.isArrayLike(e))for(i=e.length,r=0;i>r&&n.call(e[r],r,e[r])!==o;r++);else for(r in e)if(n.call(e[r],r,e[r])===o)break;return e},t.each.breaker=!1,t.err=function(t,e){throw t+" ERROR: "+e},t.extend=function(e){var n,r,i,o,a,s,u,c=1,l=arguments.length,p=!1;for(e===!0&&(p=e,e=arguments[c]||{},c++),u=typeof e,"object"!==u&&"function"!==u&&(e={});l>c;c++)if(null!=(n=arguments[c]))for(r in n)i=e[r],o=n[r],e!==o&&(p&&o&&("object"===(a=t.type(o))||"array"===a)?(s="array"===a?i&&t.isArray(i)?i:[]:i&&t.isObject(i)?i:{},e[r]=t.extend(p,s,o)):void 0!==o&&(e[r]=o));return e},t.has=function(t,e){return null!=t&&l.call(t,e)},t.keys=function(e,n){if(!t.isObjectLike(e))return[];if(!n&&h)return h(e);var r,i=[];for(r in e)n?i.push(r):t.has(e,r)&&i.push(r);return i},t.log=function(t,e){console.log(t+" LOG: "+e)},t.noConflict=function(){return r&&(n.m=r),this},t.now=Date.now||function(){return+new Date},t.proxy=function(e,n){var r,i,o=t.type(n);if("string"===o){if(!e)return null;n=e[n]}else if("function"!==o)return null;return null!=e?arguments.length>2?(r=a.call(arguments,2),i=function(){return n.apply(e,r.concat(a.call(arguments)))}):i=function(){return n.apply(e,arguments)}:arguments.length>2?(r=a.call(arguments,2),i=function(){return n.apply(this,r.concat(a.call(arguments)))}):i=function(){return n.apply(this,arguments)},i};var g={};t.uniqueId=function(t){return t=t?t+"":"",g[t]||(g[t]=0),t+ ++g[t]},t.isArguments=function(t){return"[object Arguments]"===c.call(t)},t.isArguments(arguments)||(t.isArguments=function(e){return t.has(e,"callee")}),t.isArray=f||function(e){return"array"===t.type(e)},t.isArrayLike=function(e){if(!e||t.isFunction(e)||t.isWindow(e)||t.isString(e))return!1;var n=e.length;return t.isArray(e)||0===n||"number"==typeof n&&n>0&&n-1 in e},t.isBoolean=function(e){return e===!0||e===!1||"boolean"===t.type(e)},t.isDate=function(e){return"date"===t.type(e)},t.isElement=function(t){return!(!t||1!==t.nodeType)},t.isEmpty=function(e){if(null==e)return!0;if(t.isArray(e)||t.isString(e)||t.isArguments(e))return 0===e.length;for(var n in e)if(t.has(e,n))return!1;return!0};var v=function(e,n,r,i){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return e===n;var o=c.call(e);if(o!=c.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return e=+e,n=+n,e!==e?n!==n:0===e?1/e===1/n:e===n;case"[object Date]":case"[object Boolean]":return+e===+n}var a="[object Array]"===o;if(!a){if("object"!=typeof e||"object"!=typeof n)return!1;var s=e.constructor,u=n.constructor;if(!(s===u||t.isPlainObject(e)&&t.isPlainObject(n)))return!1}for(var l=r.length;l--;)if(r[l]===e)return i[l]===n;if(r.push(e),i.push(n),a){if(l=e.length,l!==n.length)return!1;for(;l--;)if(!v(e[l],n[l],r,i))return!1}else{var p,f=t.keys(e);if(l=f.length,t.keys(n).length!==l)return!1;for(;l--;)if(p=f[l],!t.has(n,p)||!v(e[p],n[p],r,i))return!1}return r.pop(),i.pop(),!0};t.isEqual=function(t,e){return v(t,e,[],[])},t.isError=function(e){return"error"===t.type(e)},t.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},t.isFunction=function(e){return"function"===t.type(e)},"function"!=typeof/./&&"object"!=typeof Int8Array&&(t.isFunction=function(t){return"function"==typeof t||!1}),t.isNaN=function(e){return e!==+e&&t.isNumber(e)},t.isNull=function(t){return null===t},t.isNumber=function(e){return"number"===t.type(e)},t.isObject=function(e){return"object"===t.type(e)},t.isObjectLike=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},t.isPlainObject=function(e){var n;return t.isObject(e)?(n=e.constructor)?n instanceof n:!t.has(e,"constructor"):!1},t.isRegExp=function(e){return"regexp"===t.type(e)},t.isString=function(e){return"string"===t.type(e)},t.isUndefined=function(t){return void 0===t};var y="[object Window]",b="function Window() { [native code] }",_=n.toString;t.isWindow=function(e){var n;if(null==e||e!==e.window)return!1;try{return _.call(e)===y}catch(r){return n=e.constructor,n&&n.toString&&!t.has(e,"constructor")?n.toString()===b:!1}};var w={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Error]":"error","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"};t.type=function(t){if(null==t)return t+"";var e=typeof t;return"object"===e||"function"===e?w[c.call(t)]||"object":e},t.events={};var k=/\S+/g,x=/^[^:.]+/g,j=/\.[^:.]+/g,E=/:[^:.]+/g,A=function(t,e){var n,r,i;for(t.length>e.length?(n=e,r=t):(n=t,r=e),i=n.length;i--;)if(-1!==u.call(r,n[i]))return!0;return!1},S=function(e,n,r,i,o){var a,s,u,c=[];if(!e.__m__)return!1;if(a=e.__m__.events,u=a?a.length:0,!u)return!1;for(;u--;)s=a[u],(!n||s.type===n||n===!0&&s.type)&&(!o||s.handler===o||o===!0&&s.handler)&&(!r||0===r.length||r===!0&&s.namespaces||s.namespaces&&A(s.namespaces,r))&&(!i&&!s.attrs||i===!0&&s.attrs||t.isEqual(s.attrs||[],i||[]))&&c.push(u);return 0===c.length?!1:c};e("getListeners",S),t.events.off=function(t,e){if(!this.__m__)return this;if(!this.__m__.events)return this;var n,r,i,o,a,s,u=0,c=[];for(t=(t||"").match(k)||[""],o=t.length;o--;)if(n=(t[o].match(x)||c)[0],r=t[o].match(j),i=t[o].match(E),a=S(this,n,r,i,e))for(s=a.length,u=0;s--;)this.__m__.events.splice(a[s]-u,1),++u;return this},t.events.on=function(t,e,n){if(!t)return this;if(!e)return this;this.__m__||(this.__m__={}),this.__m__.events||(this.__m__.events=[]);var r,i,o,a;for(t=(t||"").match(k)||[""],a=t.length;a--;)r=t[a].match(x),r&&(r=r[0],i=t[a].match(j)||void 0,o=t[a].match(E)||void 0,this.__m__.events.push({type:r,namespaces:i,attrs:o,handler:e,data:n}));return this},t.events.trigger=function(t){if(!this.__m__)return this;if(!this.__m__.events)return this;var e,n,r,i,o,s,u=a.call(arguments,1),c=u[0],l=u[1],p=u[2],f=[];for(t=(t||"").match(k)||[""],i=t.length;i--;)if(e=(t[i].match(x)||f)[0],n=t[i].match(j),r=t[i].match(E),o=S(this,e,n,r))switch(s=o.length,u.length){case 0:for(;s--;)this.__m__.events[o[s]].handler.call(this);break;case 1:for(;s--;)this.__m__.events[o[s]].handler.call(this,c);break;case 2:for(;s--;)this.__m__.events[o[s]].handler.call(this,c,l);break;case 3:for(;s--;)this.__m__.events[o[s]].handler.call(this,c,l,p);break;default:for(;s--;)this.__m__.events[o[s]].handler.apply(this,u)}return this},t.Model=function(e){this.attributes={},this.set(e),this.cid=t.uniqueId("c"),this.initialize&&this.initialize.apply(this,arguments)},t.Model.fromPath=function(e,n,r,i){if(n=t.isString(n)?n.split("."):n,!n||!n.length)return e;for(var o=0,a=n.length-1;e&&a>o;)e=e[n[o]],o++;switch(r){case"has":return t.has(e,n[o]);case"set":e&&(e[n[o]]=i);break;case"unset":e&&delete e[n[o]]}return e?e[n[o]]:void 0},t.Model.extend=t.classExtend,t.Model.prototype={constructor:t.Model},t.extend(t.Model.prototype,t.events),t.Model.prototype.clear=function(){var t,e={};for(t in this.attributes)e[t]=void 0;return this.set(e,!0)},t.Model.prototype.clone=function(){return new this.constructor(this.attributes)},t.Model.prototype.get=function(e){return t.Model.fromPath(this.attributes,e)},t.Model.prototype.has=function(e){return t.Model.fromPath(this.attributes,e,"has")},t.Model.prototype.set=function(e,n,r){var i,o,s,u,c,l,p,f,h,d,m;if(null==e)return this;if("object"==typeof e?(p=e,r=n):(p={})[e]=n,this.validate&&!this.validate(p))return!1;f=[],d=this.attributes;for(s in p)if(u=t.isString(s)?s.split("."):s,n=p[s],i=this.get(u),m=null,h=null,r?this.has(u)&&(m="delete"):r||this.has(u)?t.isEqual(i,n)||(m="update"):m="add",m){switch(c=a.call(u),o=c.pop(),l=t.Model.fromPath(d,c),m){case"add":t.isArray(l)&&!t.isNaN(o-0)?h=this._splice(c.toString(),o,0,n):t.Model.fromPath(d,u,"set",n);break;case"update":t.Model.fromPath(d,u,"set",n);break;case"delete":t.Model.fromPath(d,u,"unset")}h=h||{model:this,path:s,name:o,object:l,oldValue:i,newValue:r?void 0:n,type:m},f.push(h)}return f.length&&this.trigger("change",f),this};var P=function(e,n){var r,i,o,u,c,l,p;for(i=t.Model.fromPath(this.attributes,e),n-=0;n&&!t.has(i,n-1);)n--;return o=i.length,l=s.apply(i,a.call(arguments,1)),p=l.length,(p||o!==i.length)&&(u=a.call(arguments,3),c=u.length,r={model:this,path:e,added:u,addedCount:c,index:n,object:i,removed:l,removedCount:p,type:"splice"}),r};t.Model.prototype.splice=function(){var t=[P.apply(this,arguments)];return t[0]?(this.trigger("change",t),t[0].removed):void 0},t.Model.prototype.unset=function(t){return"object"==typeof t?this.set(t,!0):this.set(t,void 0,!0)},function(t){if("undefined"!=typeof document){t.view={};var e=[],n=function(t){if(!i(t.el)){var n=t.mapIndex=e.length;e[n]=t,t.el.setAttribute("data-m",n)}},r=function(n){e[n.mapIndex]=null,n.el.removeAttribute("data-m"),t.each(n,function(t){n[t]=void 0})},i=function(t){var n=t.getAttribute?e[t.getAttribute("data-m")]:void 0;return n&&n.el===t?n:void 0},o="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),s=[],c=[];t.view.appendTo=function(t,e){var n=u.call(c,e);return-1!==n&&s[n].constructor===t.constructor?(s[n].props=t.props,void s[n].update()):(s.push(t),c.push(e),t.setEl(),C(t),void e.appendChild(t.el))};var l=function(t){return this.el=t||document.createElement(this.tagName),n(this),this.setEl=null,this.el};t.view.createClass=function(e,n){e||t.err("m.view.createClass","Please provide a tag name");var r=function(t){this.props=t};return r.prototype=t.extend({},n,{constructor:r,tagName:e,setEl:l,selfClosingTag:-1!==u.call(o,e),_init:!1,dom:!1}),function(t){return new r(t)}};var f={},h=/^on/,d=["Webkit","Moz","ms"],m=function(e){var n,r=e.newAttrs,i=e.prevAttrs,o=e.el;i=i||f,r=r||f;for(n in i)n in r?t.isEqual(i[n],r[n])||g(e,o,n,i[n],r[n]):g(e,o,n,i[n]);for(n in r)n in i||g(e,o,n,i[n],r[n])},g=function(e,n,r,i,o){var a,s,u;switch(r){case"style":y(n,i,o);break;case"className":a=p.call(o),a!=n.className&&(n.className=a);break;case"classes":a=p.call(o.join(" ")),a!=n.className&&(n.className=a);break;case"id":s=p.call(o),n.id!=o&&(n.id=o);break;case"value":n.value=o;break;default:if(h.test(r)){u=p.call(r.replace(h,"")),i&&t.events.off.call(e,u,i),o&&t.events.on.call(e,u,o);break}"data-m"!=r&&(o?n.setAttribute(r,o+""):n.removeAttribute(r)),r in n&&(n[r]=o)}},v=function(t,e){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=d.length;i--;)if(t=d[i]+n,t in e)return t;return r},y=function(e,n,r){var i;n=n||f,r=r||f;for(i in n)i in r?t.isEqual(n[i],r[i])||(e.style[v(i,e.style)]=r[i]):e.style[v(i,e.style)]=void 0;for(i in r)i in n||(e.style[v(i,e.style)]=r[i])},b=function(e,n){return e===n?!0:t.isString(e)&&t.isString(n)?!0:e.key==n.key&&e.constructor===n.constructor},_=function(e,n,i,o,a,s){if(null!==n){var u,c,l,p,f=e.el,h=f.childNodes,d=o+s-1;switch(i){case w:u=e.prevDom[o],c=e.newDom[a],t.isString(u)?u!=c&&(h[d].nodeValue=c):(u.props=c.props,e.newDom[a]=u,C(u));break;case x:t.isString(n)?l=document.createTextNode(n):(l=n.setEl(),C(n)),p=h[d],p?f.insertBefore(l,p):f.appendChild(l);break;case k:t.isString(n)?f.removeChild(h[d]):(f.removeChild(n.el),r(n))}}},w=0,k=-1,x=1,j=function(t,e,n){return{x:t,y:e,k:n}},E=function(t,e,n){var r,i,o,a,s,u,c,l,p,f,h,d,m,g,v,y,E,A,S,P,N,D=!1,M=e?e.length:0,T=n?n.length:0,C=0,O=0;if(0!==M||0!==T)if(0!==M)if(0!==T){for(T>=M?(r=e,i=n):(r=n,i=e,D=!0),o=r.length,a=i.length,c=function(t,e,n){var c,l,p;for(e>n?(c=s[t-1],p=e):(c=s[t+1],p=n),l=p-t;o>l&&a>p&&b(r[l],i[p]);)++l,++p;return u[s[t]=u.length]=j(l,p,c),p},l=a-o,h=[],s=[],u=[],p=l+1,f=l-1,C=-o+1;a+1>=C;++C)h[C]=s[C]=-1;d=-1;do{for(++d,v=-d;f>=v;++v)h[v]=c(v,h[v-1]+1,h[v+1]);for(v=l+d;v>=p;--v)h[v]=c(v,h[v-1]+1,h[v+1]);h[l]=c(l,h[f]+1,h[p])}while(h[l]!==a);for(m=s[l],g=[];-1!==m;)g[g.length]=j(u[m].x,u[m].y,null),m=u[m].k;for(C=g.length,y=E=1,A=S=0;C--;)for(;A<g[C].x||S<g[C].y;)P=g[C].y-g[C].x,N=S-A,P>N?(D?_(t,i[S],k,S,A,O--):_(t,i[S],x,A,S,O++),++E,++S):P!==N?(D?_(t,r[A],x,S,A,O++):_(t,r[A],k,A,S,O--),++y,++A):(D?_(t,r[A],w,S,A,O):_(t,r[A],w,A,S,O),++y,++E,++A,++S)}else for(;M>C;C++)_(t,e[C],k,C,0,-C);else for(;T>C;C++)_(t,n[C],x,0,C,C)};t.view.dom={},t.each("a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup command data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr".split(" "),function(e,n){var r=function(t){this.props=t};r.prototype={constructor:r,tagName:n,setEl:l,selfClosingTag:-1!==u.call(o,n),dom:!0,render:function(){return this.props}},t.view.dom[n]=function(){return new r(a.call(arguments))}});var A=function(e,n){e&&e.type?(this.originalEvent=e,this.type=e.type):this.type=e,this.type in D&&(this.type=D[this.type]),n&&t.extend(this,n),this.timeStamp=e&&e.timeStamp||t.now()};A.prototype={constructor:A,isDefaultPrevented:!1,isPropagationStopped:!1,isImmediatePropagationStopped:!1,stopPropagation:function(){this.isPropagationStopped=!0},stopImmediatePropagation:function(){this.isPropagationStopped=!0,this.isImmediatePropagationStopped=!0},preventDefault:function(){this.isDefaultPrevented=!0,this.originalEvent.preventDefault()}};var P=/^key/,N=/^(?:mouse|pointer|contextmenu)|click/,D={mousemove:"pointermove",touchmove:"pointermove",mousedown:"pointerdown",touchstart:"pointerdown",mouseup:"pointerup",touchend:"pointerup",mouseover:"pointerover",touchenter:"pointerover",mouseout:"pointerout",touchleave:"pointerout",mousewheel:"wheel"},M={fixHooks:{},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},pointerHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||document,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.target=document.elementFromPoint(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=N.test(i)?this.pointerHooks:P.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new A(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=o.srcElement||document),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,o):t}},T=function(t){t=M.fix(t),t.bubbles=!0;for(var e,n,r,o,a=!0;(e=a?t.target:e.parentNode)&&!t.isPropagationStopped;)if(n=i(e)){if(a&&(a=!1),eventIndexes=S(n,t.type))for(o=eventIndexes.length,t.isDefaultPrevented||t.preventDefault();o--&&!t.isImmediatePropagationStopped;)t.currentTarget=e,t.handlerObj=r=n.__m__.events[eventIndexes[o]],t.data=r.data,t.result=r.handler.call(n,t)}else a&&(t.target=t.target.parentNode)};!function(t){var e,n=/^on/;for(e in document)e.match(n)&&t.addEventListener(e.replace(n,""),T)}(document);var C=function(e){e.dom||e._init||(e.model=new t.Model,e.update=function(){e._init&&C(e)},e.initialize&&e.initialize(),e.model.on("change",e.update),e._init=!0);var n=e.render?e.render():[];e.newAttrs=n[0],e.selfClosingTag||(n[0]=null,e.newDom=n,E(e,e.prevDom,e.newDom),e.prevDom=e.newDom),m(e),e.prevAttrs=e.newAttrs,delete e.newDom,delete e.newAttrs}}}(t),"undefined"!=typeof DEV&&(t.DEV=DEV),"function"==typeof define&&define.amd&&define(function(){return t})}).call(this);