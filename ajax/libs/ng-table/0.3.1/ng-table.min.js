!function(e,t){return"function"==typeof define&&define.amd?void define(["angular"],function(e){return t(e)}):t(e)}(angular||null,function(e){var t=e.module("ngTable",[]);t.factory("ngTableParams",["$q","$log",function(t,a){var n=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},r=function(r,s){var o=this;this.data=[],this.parameters=function(t,r){if(r=r||!1,e.isDefined(t)){for(var i in t){var s=t[i];if(r&&i.indexOf("[")>=0){for(var o=i.split(/\[(.*)\]/).reverse(),u="",c=0,p=o.length;p>c;c++){var g=o[c];if(""!==g){var f=s;s={},s[u=g]=n(f)?parseFloat(f):f}}"sorting"===u&&(l[u]={}),l[u]=e.extend(l[u]||{},s[u])}else l[i]=n(t[i])?parseFloat(t[i]):t[i]}return a.debug&&a.debug("ngTable: set parameters",l),this}return l},this.settings=function(t){return e.isDefined(t)?(u=e.extend(u,t),a.debug&&a.debug("ngTable: set settings",l),this):u},this.page=function(t){return e.isDefined(t)?this.parameters({page:t}):l.page},this.total=function(t){return e.isDefined(t)?this.settings({total:t}):u.total},this.count=function(t){return e.isDefined(t)?this.parameters({count:t,page:1}):l.count},this.filter=function(t){return e.isDefined(t)?this.parameters({filter:t}):l.filter},this.sorting=function(t){if(2==arguments.length){var a={};return a[t]=arguments[1],this.parameters({sorting:a}),this}return e.isDefined(t)?this.parameters({sorting:t}):l.sorting},this.isSortBy=function(t,a){return e.isDefined(l.sorting[t])&&l.sorting[t]==a},this.orderBy=function(){var e=[];for(var t in l.sorting)e.push(("asc"===l.sorting[t]?"+":"-")+t);return e},this.getData=function(e){e.resolve([])},this.getGroups=function(n,r){var i=t.defer();i.promise.then(function(t){var i={};for(var s in t){var o=t[s],l=e.isFunction(r)?r(o):o[r];i[l]=i[l]||{data:[]},i[l].value=l,i[l].data.push(o)}var u=[];for(var c in i)u.push(i[c]);a.debug&&a.debug("ngTable: refresh groups",u),n.resolve(u)}),this.getData(i,o)},this.generatePagesArray=function(e,t,a){var n,r,s,o,l,u;if(n=11,u=[],l=Math.ceil(t/a),l>1){for(u.push({type:"prev",number:Math.max(1,e-1),active:e>1}),u.push({type:"first",number:1,active:e>1}),s=Math.round((n-5)/2),o=Math.max(2,e-s),r=Math.min(l-1,e+2*s-(e-o)),o=Math.max(2,o-(2*s-(r-o))),i=o;r>=i;)u.push(i===o&&2!==i||i===r&&i!==l-1?{type:"more",active:!1}:{type:"page",number:i,active:e!==i}),i++;u.push({type:"last",number:l,active:e!==l}),u.push({type:"next",number:Math.min(l,e+1),active:l>e})}return u},this.url=function(t){t=t||!1;var a=t?[]:{};for(key in l)if(l.hasOwnProperty(key)){var n=l[key],r=encodeURIComponent(key);if("object"==typeof n){for(var i in n)if(!e.isUndefined(n[i])&&""!==n[i]){var s=r+"["+encodeURIComponent(i)+"]";t?a.push(s+"="+encodeURIComponent(n[i])):a[s]=encodeURIComponent(n[i])}}else e.isFunction(n)||e.isUndefined(n)||""===n||(t?a.push(r+"="+encodeURIComponent(n)):a[r]=encodeURIComponent(n))}return a},this.reload=function(){var e=t.defer(),n=this;u.$loading=!0,u.groupBy?u.getGroups(e,u.groupBy,this):u.getData(e,this),a.debug&&a.debug("ngTable: reload data"),e.promise.then(function(e){u.$loading=!1,a.debug&&a.debug("ngTable: current scope",u.$scope),n.data=u.groupBy?u.$scope.$groups=e:u.$scope.$data=e,u.$scope.pages=n.generatePagesArray(n.page(),n.total(),n.count())})},this.reloadPages=function(){var e=this;u.$scope.pages=e.generatePagesArray(e.page(),e.total(),e.count())};var l=this.$params={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null},u={$scope:null,$loading:!1,total:0,counts:[10,25,50,100],getGroups:this.getGroups,getData:this.getData};return this.settings(s),this.parameters(r,!0),this};return r}]);var a=["$scope","ngTableParams","$q",function(e,t){e.$loading=!1,e.params||(e.params=new t),e.params.settings().$scope=e,e.$watch("params.$params",function(){e.params.settings().$scope=e,e.params.reload()},!0),e.sortBy=function(t){var a=e.parse(t.sortable);if(a){var n=e.params.sorting()&&e.params.sorting()[a]&&"desc"===e.params.sorting()[a],r={};r[a]=n?"asc":"desc",e.params.parameters({sorting:r})}}}];return t.directive("ngTable",["$compile","$q","$parse",function(t,n,r){"use strict";return{restrict:"A",priority:1001,scope:!0,controller:a,compile:function(a){var n=[],i=0,s=null,o=a.find("thead");return e.forEach(e.element(a.find("tr")),function(t){t=e.element(t),t.hasClass("ng-table-group")||s||(s=t)}),s?(e.forEach(s.find("td"),function(t){var a=e.element(t);if(!a.attr("ignore-cell")||"true"!==a.attr("ignore-cell")){var s=function(e,t){return function(i){return r(a.attr("x-data-"+e)||a.attr("data-"+e)||a.attr(e))(i,{$columns:n})||t}},o=s("title"," "),l=s("header",!1),u=s("filter",!1)(),c=!1;u&&u.templateURL&&(c=u.templateURL,delete u.templateURL),a.attr("data-title-text",o()),n.push({id:i++,title:o,sortable:s("sortable",!1),"class":a.attr("x-data-header-class")||a.attr("data-header-class")||a.attr("header-class"),filter:u,filterTemplateURL:c,headerTemplateURL:l,filterData:a.attr("filter-data")?a.attr("filter-data"):null,show:a.attr("ng-show")?function(e){return r(a.attr("ng-show"))(e)}:function(){return!0}})}}),function(a,i,s){if(a.$loading=!1,a.$columns=n,a.$watch(s.ngTable,function(t){e.isUndefined(t)||(a.paramsModel=r(s.ngTable),a.params=t)},!0),a.parse=function(t){return e.isDefined(t)?t(a):""},s.showFilter&&a.$parent.$watch(s.showFilter,function(e){a.show_filter=e}),e.forEach(n,function(t){var n;if(t.filterData){if(n=r(t.filterData)(a,{$column:t}),!e.isObject(n)||!e.isObject(n.promise))throw new Error("Function "+t.filterData+" must be instance of $q.defer()");return delete t.filterData,n.promise.then(function(a){e.isArray(a)||(a=[]),a.unshift({title:"-",id:""}),t.data=a})}}),!i.hasClass("ng-table")){a.templates={header:s.templateHeader?s.templateHeader:"ng-table/header.html",pagination:s.templatePagination?s.templatePagination:"ng-table/pager.html"};var l=o.length>0?o:e.element(document.createElement("thead")).attr("ng-include","templates.header"),u=e.element(document.createElement("div")).attr("ng-include","templates.pagination");return i.find("thead").remove(),i.find("tbody"),i.prepend(l),t(l)(a),t(u)(a),i.addClass("ng-table"),i.after(u)}}):void 0}}}]),e.module("ngTable").run(["$templateCache",function(e){e.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in column.data" ng-model="params.filter()[name]" ng-show="filter==\'select\'" class="filter filter-select form-control"> </select>'),e.put("ng-table/filters/text.html",'<input type="text" ng-model="params.filter()[name]" ng-if="filter==\'text\'" class="input-filter form-control"/>'),e.put("ng-table/header.html",'<tr> <th ng-repeat="column in $columns" ng-class="{ \'sortable\': parse(column.sortable), \'sort-asc\': params.sorting()[parse(column.sortable)]==\'asc\', \'sort-desc\': params.sorting()[parse(column.sortable)]==\'desc\' }" ng-click="sortBy(column)" ng-show="column.show(this)" ng-init="template=column.headerTemplateURL(this)" class="header {{column.class}}"> <div ng-if="!template" ng-show="!template" ng-bind="parse(column.title)"></div> <div ng-if="template" ng-show="template"><div ng-include="template"></div></div> </th> </tr> <tr ng-show="show_filter" class="ng-table-filters"> <th ng-repeat="column in $columns" ng-show="column.show(this)" class="filter"> <div ng-repeat="(name, filter) in column.filter"> <div ng-if="column.filterTemplateURL" ng-show="column.filterTemplateURL"> <div ng-include="column.filterTemplateURL"></div> </div> <div ng-if="!column.filterTemplateURL" ng-show="!column.filterTemplateURL"> <div ng-include="\'ng-table/filters/\' + filter + \'.html\'"></div> </div> </div> </th> </tr>'),e.put("ng-table/pager.html",'<div class="ng-cloak"> <div ng-if="params.settings().counts.length" class="btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default btn-xs"> <span ng-bind="count"></span> </button> </div> <ul class="pagination"> <li ng-class="{\'disabled\': !page.active}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a> </li> </ul> </div>')}]),t});