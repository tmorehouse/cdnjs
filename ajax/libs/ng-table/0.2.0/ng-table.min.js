"use strict";angular.module("ngTable",[]).directive("ngTable",["$compile","$q","$parse","$http","ngTableParams",function(t,e,n,a,r){return{restrict:"A",priority:1001,scope:!0,controller:["$scope","$timeout",function(t){var e;return t.params=t.params||{page:1,count:10},t.$watch("params.filter",function(n){return t.params.$liveFiltering?(e(n),t.goToPage(1)):void 0},!0),e=function(e){return e=angular.extend(t.params,e),t.paramsModel.assign(t.$parent,new r(e)),t.params=angular.copy(e)},t.goToPage=function(n){return n>0&&t.params.page!==n&&t.params.count*(n-1)<=t.params.total?e({page:n}):void 0},t.changeCount=function(t){return e({page:1,count:t})},t.doFilter=function(){return e({page:1})},t.sortBy=function(n){var a,r;return n.sortable?(a=t.params.sorting&&t.params.sorting[n.sortable]&&"desc"===t.params.sorting[n.sortable],r={},r[n.sortable]=a?"asc":"desc",e({sorting:r})):void 0}}],compile:function(e){var a,r;return r=0,a=[],angular.forEach(e.find("td"),function(t){var e,i;return e=$(t),e.attr("ignore-cell")&&"true"===e.attr("ignore-cell")?void 0:(i=n(e.attr("title"))()||e.attr("title")||e.text(),e.attr("title",i),a.push({id:r++,title:i,sortable:e.attr("sortable")?e.attr("sortable"):!1,filter:e.attr("filter")?n(e.attr("filter"))():!1,filterData:e.attr("filter-data")?e.attr("filter-data"):null,show:e.attr("ng-show")?function(t){return n(e.attr("ng-show"))(t)}:function(){return!0}}))}),function(e,i,o){var l,s,u;return e.columns=a,l=function(t,e,n){var a,i,o,l,s,u;if(a=11,u=[],s=Math.ceil(e/n),s>1){for(u.push({type:"prev",number:Math.max(1,t-1),active:t>1}),u.push({type:"first",number:1,active:t>1}),o=Math.round((a-5)/2),l=Math.max(2,t-o),i=Math.min(s-1,t+2*o-(t-l)),l=Math.max(2,l-(2*o-(i-l))),r=l;i>=r;)u.push(r===l&&2!==r||r===i&&r!==s-1?{type:"more"}:{type:"page",number:r,active:t!==r}),r++;u.push({type:"last",number:s,active:t!==s}),u.push({type:"next",number:Math.min(s,t+1),active:s>t})}return u},e.$parent.$watch(o.ngTable,function(t){return angular.isUndefined(t)?void 0:(e.paramsModel=n(o.ngTable),e.pages=l(t.page,t.total,t.count),e.params=angular.copy(t))},!0),o.showFilter&&e.$parent.$watch(o.showFilter,function(t){return e.show_filter=t}),angular.forEach(a,function(t){var a;if(t.filterData){if(a=n(t.filterData)(e,{$column:t}),!angular.isObject(a)||!angular.isFunction(a.then))throw new Error("Function "+t.filterData+" must be promise");return delete t.filterData,a.then(function(e){return angular.isArray(e)||(e=[]),e.unshift({title:"-",id:""}),t.data=e})}}),i.hasClass("ng-table")?void 0:(e.templates={header:o.templateHeader?o.templateHeader:"ng-table/header.html",pagination:o.templatePagination?o.templatePagination:"ng-table/pager.html"},s=t('<thead ng-include="templates.header"></thead>')(e),u=t('<div ng-include="templates.pagination"></div>')(e),i.filter("thead").remove(),i.prepend(s).addClass("ng-table"),i.after(u))}}}}]);var __hasProp={}.hasOwnProperty;angular.module("ngTable").factory("ngTableParams",function(){var t,e;return t=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},e=function(e){var n,a,r,i,o,l,s,u,c,g;n=["total","counts","$liveFiltering"],this.page=1,this.count=1,this.counts=[10,25,50,100],this.filter={},this.sorting={};for(a in e)if(s=e[a],a.indexOf("[")>=0){for(o=a.split(/\[(.*)\]/),r="",g=o.reverse(),u=0,c=g.length;c>u;u++)i=g[u],""!==i&&(l=s,s={},s[r=i]=t(l)?parseFloat(l):l);"sorting"===r&&(this[r]={}),this[r]=angular.extend(this[r]||{},s[r])}else this[a]=t(e[a])?parseFloat(e[a]):e[a];return this.orderBy=function(){var t,e,n,a;n=[],a=this.sorting;for(t in a)__hasProp.call(a,t)&&(e=a[t],n.push(("asc"===e?"+":"-")+t));return n},this.url=function(t){var e,r,o,l;t=t||!1,r=t?[]:{};for(a in this)if(this.hasOwnProperty(a)){if(n.indexOf(a)>=0)continue;if(e=this[a],i=encodeURIComponent(a),"object"==typeof e)for(l in e)angular.isUndefined(e[l])||""===e[l]||(o=i+"["+encodeURIComponent(l)+"]",t?r.push(o+"="+encodeURIComponent(e[l])):r[o]=encodeURIComponent(e[l]));else angular.isFunction(e)||angular.isUndefined(e)||""===e||(t?r.push(i+"="+encodeURIComponent(e)):r[i]=encodeURIComponent(e))}return r},this}}),angular.module("ngTable").run(["$templateCache",function(t){t.put("ng-table/filters/button.html",'<button ng-click="doFilter()" ng-show="filter==\'button\'" class="btn btn-primary btn-block">Filter</button>'),t.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in column.data" ng-model="params.filter[name]" ng-show="filter==\'select\'" class="filter filter-select"></select>'),t.put("ng-table/filters/text.html",'<input type="text" ng-model="params.filter[name]" ng-show="filter==\'text\'" class="input-filter"/>'),t.put("ng-table/header.html",'<tr><th ng-class="{sortable: column.sortable,\'sort-asc\': params.sorting[column.sortable]==\'asc\', \'sort-desc\': params.sorting[column.sortable]==\'desc\'}" ng-click="sortBy(column)" ng-repeat="column in columns" ng-show="column.show(this)" class="header"><div>{{column.title}}</div></th></tr><tr ng-show="show_filter"><th ng-repeat="column in columns" ng-show="column.show(this)" class="filter"><form ng-submit="doFilter()"><input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;"/><div ng-repeat="(name, filter) in column.filter"><div ng-include="\'ng-table/filters/\' + filter + \'.html\'"></div></div></form></th></tr>'),t.put("ng-table/pager.html",'<div class="pagination ng-cloak"><ul class="pagination"><li ng-class="{\'disabled\': !page.active}" ng-repeat="page in pages" ng-switch="page.type"><a ng-switch-when="prev" ng-click="goToPage(page.number)" href="">«</a><a ng-switch-when="first" ng-click="goToPage(page.number)" href="">{{page.number}}</a><a ng-switch-when="page" ng-click="goToPage(page.number)" href="">{{page.number}}</a><a ng-switch-when="more" ng-click="goToPage(page.number)" href="">…</a><a ng-switch-when="last" ng-click="goToPage(page.number)" href="">{{page.number}}</a><a ng-switch-when="next" ng-click="goToPage(page.number)" href="">»</a></li></ul><div ng-show="params.counts.length" class="btn-group pull-right"><button ng-repeat="count in params.counts" type="button" ng-class="{\'active\':params.count==count}" ng-click="changeCount(count)" class="btn btn-mini">{{count}}</button></div></div>')}]);