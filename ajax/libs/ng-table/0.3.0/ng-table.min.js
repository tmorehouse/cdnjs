!function(t,e){return"function"==typeof define&&define.amd?void define("ngTable",["jquery","angular"],function(t,a){return e(a)}):e(t)}(angular||null,function(t){var e=t.module("ngTable",[]);e.factory("ngTableParams",["$q",function(e){var a=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},n=function(n,r){var s=this;this.parameters=function(e,n){if(n=n||!1,t.isDefined(e)){for(var r in e){var i=e[r];if(n&&r.indexOf("[")>=0){for(var s=r.split(/\[(.*)\]/).reverse(),l="",u=0,c=s.length;c>u;u++){var p=s[u];if(""!==p){var g=i;i={},i[l=p]=a(g)?parseFloat(g):g}}"sorting"===l&&(o[l]={}),o[l]=t.extend(o[l]||{},i[l])}else o[r]=a(e[r])?parseFloat(e[r]):e[r]}return this}return o},this.settings=function(e){return t.isDefined(e)?(l=t.extend(l,e),this):l},this.page=function(e){return t.isDefined(e)?this.parameters({page:e}):o.page},this.total=function(e){return t.isDefined(e)?this.settings({total:e}):l.total},this.count=function(e){return t.isDefined(e)?this.parameters({count:e,page:1}):o.count},this.filter=function(e){return t.isDefined(e)?this.parameters({filter:e}):o.filter},this.sorting=function(e){return t.isDefined(e)?this.parameters({sorting:e}):o.sorting},this.orderBy=function(){var t=[];for(var e in o.sorting)t.push(("asc"===o.sorting[e]?"+":"-")+e);return t},this.getData=function(t){t.resolve([])},this.getGroups=function(a,n){var r=e.defer();r.promise.then(function(e){var r={};for(var i in e){var s=e[i],o=t.isFunction(n)?n(s):s[n];r[o]=r[o]||{data:[]},r[o].value=o,r[o].data.push(s)}var l=[];for(var u in r)l.push(r[u]);a.resolve(l)}),this.getData(r,s)},this.generatePagesArray=function(t,e,a){var n,r,s,o,l,u;if(n=11,u=[],l=Math.ceil(e/a),l>1){for(u.push({type:"prev",number:Math.max(1,t-1),active:t>1}),u.push({type:"first",number:1,active:t>1}),s=Math.round((n-5)/2),o=Math.max(2,t-s),r=Math.min(l-1,t+2*s-(t-o)),o=Math.max(2,o-(2*s-(r-o))),i=o;r>=i;)u.push(i===o&&2!==i||i===r&&i!==l-1?{type:"more",active:!1}:{type:"page",number:i,active:t!==i}),i++;u.push({type:"last",number:l,active:t!==l}),u.push({type:"next",number:Math.min(l,t+1),active:l>t})}return u},this.url=function(e){e=e||!1;var a=e?[]:{};for(key in o)if(o.hasOwnProperty(key)){var n=o[key],r=encodeURIComponent(key);if("object"==typeof n){for(var i in n)if(!t.isUndefined(n[i])&&""!==n[i]){var s=r+"["+encodeURIComponent(i)+"]";e?a.push(s+"="+encodeURIComponent(n[i])):a[s]=encodeURIComponent(n[i])}}else t.isFunction(n)||t.isUndefined(n)||""===n||(e?a.push(r+"="+encodeURIComponent(n)):a[r]=encodeURIComponent(n))}return a},this.reload=function(){var t=e.defer(),a=this;l.$loading=!0,l.groupBy?l.getGroups(t,l.groupBy,this):l.getData(t,this),t.promise.then(function(t){l.$loading=!1,l.groupBy?l.$scope.$groups=t:l.$scope.$data=t,l.$scope.pages=a.generatePagesArray(a.page(),a.total(),a.count())})};var o=this.$params={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null},l={$scope:null,$loading:!1,total:0,counts:[10,25,50,100],getGroups:this.getGroups,getData:this.getData};return this.settings(r),this.parameters(n,!0),this};return n}]);var a=["$scope","ngTableParams","$q",function(t,e){t.$loading=!1,t.params||(t.params=new e),t.params.settings().$scope=t,t.$watch("params.$params",function(){t.params.settings().$scope=t,t.params.reload()},!0),t.sortBy=function(e){var a,n;e.sortable&&(a=t.params.sorting()&&t.params.sorting()[e.sortable]&&"desc"===t.params.sorting()[e.sortable],n={},n[e.sortable]=a?"asc":"desc",t.params.parameters({sorting:n}))}}];return e.directive("ngTable",["$compile","$q","$parse",function(e,n,r){"use strict";return{restrict:"A",priority:1001,scope:!0,controller:a,compile:function(a){var n=[],i=0;return t.forEach(t.element(a[0].querySelector("tr:not(.ng-table-group)")).find("td"),function(e){var a=t.element(e);if(!a.attr("ignore-cell")||"true"!==a.attr("ignore-cell")){var s=function(t){return r(a.attr("x-data-title")||a.attr("data-title")||a.attr("title"))(t,{$columns:n})||" "};a.attr("data-title-text",s());var o=function(t){return r(a.attr("x-data-header")||a.attr("data-header")||a.attr("header"))(t,{$columns:n})||!1},l=a.attr("filter")?r(a.attr("filter"))():!1,u=!1;l&&l.templateURL&&(u=l.templateURL,delete l.templateURL),n.push({id:i++,title:s,sortable:a.attr("sortable")?a.attr("sortable"):!1,filter:l,filterTemplateURL:u,headerTemplateURL:o,filterData:a.attr("filter-data")?a.attr("filter-data"):null,show:a.attr("ng-show")?function(t){return r(a.attr("ng-show"))(t)}:function(){return!0}})}}),function(a,i,s){if(a.$loading=!1,a.$columns=n,a.$watch(s.ngTable,function(e){t.isUndefined(e)||(a.paramsModel=r(s.ngTable),a.params=e)},!0),a.parse=function(t){return t(a)},s.showFilter&&a.$parent.$watch(s.showFilter,function(t){a.show_filter=t}),t.forEach(n,function(e){var n;if(e.filterData){if(n=r(e.filterData)(a,{$column:e}),!t.isObject(n)||!t.isObject(n.promise))throw new Error("Function "+e.filterData+" must be instance of $q.defer()");return delete e.filterData,n.promise.then(function(a){t.isArray(a)||(a=[]),a.unshift({title:"-",id:""}),e.data=a})}}),!i.hasClass("ng-table")){a.templates={header:s.templateHeader?s.templateHeader:"ng-table/header.html",pagination:s.templatePagination?s.templatePagination:"ng-table/pager.html"};var o=t.element(document.createElement("thead")).attr("ng-include","templates.header"),l=t.element(document.createElement("div")).attr("ng-include","templates.pagination");return i.find("thead").remove(),i.find("tbody"),i.prepend(o),e(o)(a),e(l)(a),i.addClass("ng-table"),i.after(l)}}}}}]),t.module("ngTable").run(["$templateCache",function(t){t.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in column.data" ng-model="params.filter()[name]" ng-show="filter==\'select\'" class="filter filter-select form-control"> </select>'),t.put("ng-table/filters/text.html",'<input type="text" ng-model="params.filter()[name]" ng-if="filter==\'text\'" class="input-filter form-control"/>'),t.put("ng-table/header.html",'<tr> <th ng-repeat="column in $columns" ng-class="{ \'sortable\': column.sortable, \'sort-asc\': params.sorting()[column.sortable]==\'asc\', \'sort-desc\': params.sorting()[column.sortable]==\'desc\', column.class: true }" ng-click="sortBy(column)" ng-show="column.show(this)" ng-init="template=column.headerTemplateURL(this)" class="header"> <div ng-if="!template" ng-bind="parse(column.title)"></div> <div ng-if="template"><div ng-include="template"></div></div> </th> </tr> <tr ng-show="show_filter" class="ng-table-filters"> <th ng-repeat="column in $columns" ng-show="column.show(this)" data-title-text="{{column.title}}" class="filter"> <form ng-submit="doFilter()"> <input type="submit" tabindex="-1" style="position: absolute; left: -9999px; width: 1px; height: 1px;"/> <div ng-repeat="(name, filter) in column.filter"> <div ng-if="column.filterTemplateURL"> <div ng-include="column.filterTemplateURL"></div> </div> <div ng-if="!column.filterTemplateURL"> <div ng-include="\'ng-table/filters/\' + filter + \'.html\'"></div> </div> </div> </form> </th> </tr>'),t.put("ng-table/pager.html",'<div class="ng-cloak"> <div ng-if="params.settings().counts.length" class="btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default btn-xs"> {{count}} </button> </div> <ul class="pagination"> <li ng-class="{\'disabled\': !page.active}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a> <a ng-switch-when="first" ng-click="params.page(page.number)" href="">{{page.number}}</a> <a ng-switch-when="page" ng-click="params.page(page.number)" href="">{{page.number}}</a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href="">{{page.number}}</a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a> </li> </ul> </div>')}]),e});