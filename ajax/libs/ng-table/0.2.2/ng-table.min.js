!function(t,e){return"function"==typeof define&&define.amd?void define("ngTable",["jquery","angular"],function(t,n){return e(n)}):e(t)}(angular||null,function(t){"use strict";t.module("ngTable",[]).directive("ngTable",["$compile","$q","$parse","$http","ngTableParams",function(e,n,a,r,i){return{restrict:"A",priority:1001,scope:!0,controller:["$scope","$timeout",function(e){var n;return e.params=e.params||{page:1,count:10},e.$watch("params.filter",function(t){return e.params.$liveFiltering?(n({filter:t}),e.goToPage(1)):void 0},!0),e.$watch("params.sorting",function(t){return n({sorting:t})},!0),n=function(n){return n=t.extend(e.params,n),e.paramsModel&&e.paramsModel.assign(e.$parent,new i(n)),e.params=t.copy(n)},e.goToPage=function(t){return t>0&&e.params.page!==t&&e.params.count*(t-1)<=e.params.total?n({page:t}):void 0},e.changeCount=function(t){return n({page:1,count:t})},e.doFilter=function(){return n({page:1})},e.sortBy=function(t){var a,r;return t.sortable?(a=e.params.sorting&&e.params.sorting[t.sortable]&&"desc"===e.params.sorting[t.sortable],r={},r[t.sortable]=a?"asc":"desc",n({sorting:r})):void 0}}],compile:function(n){var r,i;return i=0,r=[],t.forEach(n.find("tr").eq(0).find("td"),function(e){var n,o,l,s,c;return n=t.element(e),n.attr("ignore-cell")&&"true"===n.attr("ignore-cell")?void 0:(c=function(t){return a(n.attr("x-data-title")||n.attr("data-title")||n.attr("title"))(t,{$columns:r})||" "},n.attr("data-title-text",c()),s=function(t){return a(n.attr("x-data-header")||n.attr("data-header")||n.attr("header"))(t,{$columns:r})||!1},o=n.attr("filter")?a(n.attr("filter"))():!1,l=!1,o&&o.templateURL&&(l=o.templateURL,delete o.templateURL),r.push({id:i++,title:c,sortable:n.attr("sortable")?n.attr("sortable"):!1,filter:o,filterTemplateURL:l,headerTemplateURL:s,filterData:n.attr("filter-data")?n.attr("filter-data"):null,show:n.attr("ng-show")?function(t){return a(n.attr("ng-show"))(t)}:function(){return!0}}))}),function(n,o,l){var s,c,u,p;return n.columns=r,s=function(t,e,n){var a,r,o,l,s,c;if(a=11,c=[],s=Math.ceil(e/n),s>1){for(c.push({type:"prev",number:Math.max(1,t-1),active:t>1}),c.push({type:"first",number:1,active:t>1}),o=Math.round((a-5)/2),l=Math.max(2,t-o),r=Math.min(s-1,t+2*o-(t-l)),l=Math.max(2,l-(2*o-(r-l))),i=l;r>=i;)c.push(i===l&&2!==i||i===r&&i!==s-1?{type:"more"}:{type:"page",number:i,active:t!==i}),i++;c.push({type:"last",number:s,active:t!==s}),c.push({type:"next",number:Math.min(s,t+1),active:s>t})}return c},n.$parent.$watch(l.ngTable,function(e){return t.isUndefined(e)?void 0:(n.paramsModel=a(l.ngTable),n.pages=s(e.page,e.total,e.count),n.params=t.copy(e))},!0),n.parse=function(t){return t(n)},l.showFilter&&n.$parent.$watch(l.showFilter,function(t){return n.show_filter=t}),t.forEach(r,function(e){var r;if(e.filterData){if(r=a(e.filterData)(n,{$column:e}),!t.isObject(r)||!t.isObject(r.promise))throw new Error("Function "+e.filterData+" must be instance of $q.defer()");return delete e.filterData,r.promise.then(function(n){return t.isArray(n)||(n=[]),n.unshift({title:"-",id:""}),e.data=n})}}),o.hasClass("ng-table")?void 0:(n.templates={header:l.templateHeader?l.templateHeader:"ng-table/header.html",pagination:l.templatePagination?l.templatePagination:"ng-table/pager.html"},c=e('<thead ng-include="templates.header"></thead>')(n),u=e('<div ng-include="templates.pagination"></div>')(n),o.find("thead").remove(),p=o.find("tbody"),p[0]?t.element(p[0]).before(c):o.prepend(c),o.addClass("ng-table"),o.after(u))}}}}]);var e={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};return t.module("ngTable").factory("ngTableParams",function(){var a,r;return a=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},r=function(r){var i,o,l,s,c,u,p,g,m,f;i=["total","counts","$liveFiltering"],this.page=1,this.count=1,this.counts=[10,25,50,100],this.filter={},this.sorting={};for(o in r)if(p=r[o],o.indexOf("[")>=0){for(c=o.split(/\[(.*)\]/),l="",f=c.reverse(),g=0,m=f.length;m>g;g++)s=f[g],""!==s&&(u=p,p={},p[l=s]=a(u)?parseFloat(u):u);"sorting"===l&&(this[l]={}),this[l]=t.extend(this[l]||{},p[l])}else this[o]=a(r[o])?parseFloat(r[o]):r[o];return this.orderBy=function(){var t,n,a,r;a=[],r=this.sorting;for(t in r)e.call(r,t)&&(n=r[t],a.push(("asc"===n?"+":"-")+t));return a},this.url=function(e){var a,r,l,c;e=e||!1,r=e?[]:{};for(o in this)if(this.hasOwnProperty(o)){if(n.call(i,o)>=0)continue;if(a=this[o],s=encodeURIComponent(o),"object"==typeof a)for(c in a)t.isUndefined(a[c])||""===a[c]||(l=s+"["+encodeURIComponent(c)+"]",e?r.push(l+"="+encodeURIComponent(a[c])):r[l]=encodeURIComponent(a[c]));else t.isFunction(a)||t.isUndefined(a)||""===a||(e?r.push(s+"="+encodeURIComponent(a)):r[s]=encodeURIComponent(a))}return r},this}}),t.module("ngTable").run(["$templateCache",function(t){t.put("ng-table/filters/button.html",'<button ng-click="doFilter()" ng-show="filter==\'button\'" class="btn btn-primary btn-block">Filter</button>'),t.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in column.data" ng-model="params.filter[name]" ng-show="filter==\'select\'" class="filter filter-select"></select>'),t.put("ng-table/filters/text.html",'<input type="text" ng-model="params.filter[name]" ng-show="filter==\'text\'" class="input-filter"/>'),t.put("ng-table/header.html",'<tr><th ng-class="{sortable: column.sortable,\'sort-asc\': params.sorting[column.sortable]==\'asc\', \'sort-desc\': params.sorting[column.sortable]==\'desc\'}" ng-click="sortBy(column)" ng-repeat="column in columns" ng-show="column.show(this)" ng-init="template=column.headerTemplateURL(this)" class="header {{column.class}}"><div ng-if="!template" ng-bind="parse(column.title)"></div><div ng-if="template" ng-include="template"></div></th></tr><tr ng-show="show_filter" class="ng-table-filters"><th ng-repeat="column in columns" ng-show="column.show(this)" data-title-text="{{column.title}}" class="filter"><form ng-submit="doFilter()"><input type="submit" tabindex="-1" style="position: absolute; left: -9999px; width: 1px; height: 1px;"/><div ng-repeat="(name, filter) in column.filter"><div ng-if="column.filterTemplateURL"><div ng-include="column.filterTemplateURL"></div></div><div ng-if="!column.filterTemplateURL"><div ng-include="\'ng-table/filters/\' + filter + \'.html\'"></div></div></div></form></th></tr>'),t.put("ng-table/pager.html",'<div class="pagination ng-cloak"><ul class="pagination"><li ng-class="{\'disabled\': !page.active}" ng-repeat="page in pages" ng-switch="page.type"><a ng-switch-when="prev" ng-click="goToPage(page.number)" href="">«</a><a ng-switch-when="first" ng-click="goToPage(page.number)" href="">{{page.number}}</a><a ng-switch-when="page" ng-click="goToPage(page.number)" href="">{{page.number}}</a><a ng-switch-when="more" ng-click="goToPage(page.number)" href="">…</a><a ng-switch-when="last" ng-click="goToPage(page.number)" href="">{{page.number}}</a><a ng-switch-when="next" ng-click="goToPage(page.number)" href="">»</a></li></ul><div ng-show="params.counts.length" class="btn-group pull-right"><button ng-repeat="count in params.counts" type="button" ng-class="{\'active\':params.count==count}" ng-click="changeCount(count)" class="btn btn-mini">{{count}}</button></div></div>')}]),t.module("ngTable")});